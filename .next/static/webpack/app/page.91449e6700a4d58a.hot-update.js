"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./components/ai-chat/index.tsx":
/*!**************************************!*\
  !*** ./components/ai-chat/index.tsx ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ AIChat; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./components/ui/button.tsx\");\n/* harmony import */ var _components_ui_input__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/ui/input */ \"(app-pages-browser)/./components/ui/input.tsx\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_Send_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,Send,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_Send_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,Send,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/image.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_Send_X_lucide_react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,Send,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_Send_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,Send,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/send.js\");\n/* harmony import */ var _features_editor_store_use_data_state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/features/editor/store/use-data-state */ \"(app-pages-browser)/./features/editor/store/use-data-state.ts\");\n/* harmony import */ var _features_editor_hooks_state_manager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/features/editor/hooks/state-manager */ \"(app-pages-browser)/./features/editor/hooks/state-manager.tsx\");\n/* harmony import */ var _ai_video_commands__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ai-video-commands */ \"(app-pages-browser)/./components/ai-chat/ai-video-commands.ts\");\n/* harmony import */ var _utils_upload__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/utils/upload */ \"(app-pages-browser)/./utils/upload.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n// Función para extraer tiempos de inicio y fin de una imagen a partir del mensaje\nfunction extractImageTimesFromMessage(messageContent) {\n    let startTime = 0;\n    let endTime = 5;\n    if (!messageContent) return {\n        startTime,\n        endTime\n    };\n    // Buscar referencias al tiempo inicial\n    const startTimePatterns = [\n        /en el segundo (\\d+)/i,\n        /desde el segundo (\\d+)/i,\n        /a partir del segundo (\\d+)/i,\n        /comenzando en el segundo (\\d+)/i,\n        /desde el minuto (\\d+)/i,\n        /en el minuto (\\d+)/i,\n        /entre los segundos (\\d+) y/i,\n        /del segundo (\\d+) al/i,\n        /empezando en (\\d+)/i,\n        /segundo (\\d+)/i,\n        /en (\\d+) segundos/i,\n        /en el (\\d+)/i\n    ];\n    // Buscar referencias al tiempo final\n    const endTimePatterns = [\n        /hasta el segundo (\\d+)/i,\n        /al segundo (\\d+)/i,\n        /terminando en el segundo (\\d+)/i,\n        /hasta el minuto (\\d+)/i,\n        /entre los segundos \\d+ y (\\d+)/i,\n        /del segundo \\d+ al (\\d+)/i,\n        /por (\\d+) segundos/i,\n        /durante (\\d+) segundos/i\n    ];\n    // Buscar palabras clave especiales\n    const isAtStart = /\\b(al inicio|al principio|al comienzo)\\b/i.test(messageContent);\n    const isAtEnd = /\\b(al final|al término|al acabar)\\b/i.test(messageContent);\n    // Procesar patrones de tiempo inicial\n    for (const pattern of startTimePatterns){\n        const match = messageContent.match(pattern);\n        if (match && match[1]) {\n            // Si es referencia a minutos, convertir a segundos\n            startTime = pattern.toString().includes(\"minuto\") ? parseInt(match[1]) * 60 : parseInt(match[1]);\n            break;\n        }\n    }\n    // Procesar patrones de tiempo final\n    for (const pattern of endTimePatterns){\n        const match = messageContent.match(pattern);\n        if (match && match[1]) {\n            if (pattern.toString().includes(\"por\") || pattern.toString().includes(\"durante\")) {\n                // Es una duración relativa, sumar al tiempo inicial\n                endTime = startTime + parseInt(match[1]);\n            } else {\n                // Es un tiempo absoluto\n                endTime = pattern.toString().includes(\"minuto\") ? parseInt(match[1]) * 60 : parseInt(match[1]);\n            }\n            break;\n        }\n    }\n    // Si se menciona \"al inicio\", establecer tiempo a 0\n    if (isAtStart) {\n        startTime = 0;\n        endTime = 5; // Por defecto 5 segundos de duración\n    }\n    // Si se menciona \"al final\", establecer valores relativos al final\n    // Nota: El valor real se ajustará en el cliente según la duración\n    if (isAtEnd) {\n        startTime = -1; // Código especial para \"final - 5 segundos\"\n        endTime = -1; // Código especial para \"final\"\n    }\n    // Si no se detectó tiempo final pero sí inicial, establecer una duración predeterminada\n    if (startTime > 0 && endTime === 5 && startTime !== 0) {\n        endTime = startTime + 5;\n    }\n    return {\n        startTime,\n        endTime\n    };\n}\n// Función para procesar elementos detectados por la IA\nconst processDetectedElement = async (elementData, commandExecutor, finalResponseRef, timeline, lastUploadedImageUrl, currentImageUrlForThisRequest)=>{\n    let elementAdded = false;\n    let finalResponse = finalResponseRef.current;\n    try {\n        // Si se detectó un elemento para agregar con confianza suficiente\n        if (elementData && elementData.detected === true && typeof elementData.confidence === \"number\" && elementData.confidence > 0.7 && elementData.element) {\n            const element = elementData.element;\n            // Procesar según el tipo de elemento\n            if (element.type === \"text\" && element.content) {\n                // Configurar opciones para el texto\n                const textOptions = {\n                    startTime: typeof element.startTime === \"number\" ? element.startTime : 0,\n                    endTime: typeof element.endTime === \"number\" ? element.endTime : typeof element.startTime === \"number\" ? element.startTime + 5 : 5\n                };\n                // Asignar color si está disponible\n                if (element.color) {\n                    textOptions.color = element.color.toLowerCase() === \"blanco\" ? \"#FFFFFF\" : element.color.toLowerCase() === \"negro\" ? \"#000000\" : element.color.toLowerCase() === \"rojo\" ? \"#FF0000\" : element.color.toLowerCase() === \"azul\" ? \"#0000FF\" : element.color.toLowerCase() === \"verde\" ? \"#00FF00\" : element.color.toLowerCase() === \"amarillo\" ? \"#FFFF00\" : element.color;\n                }\n                // Añadir el texto\n                commandExecutor.current.addText(element.content, textOptions);\n                // Actualizar respuesta\n                finalResponse += '\\n\\n[He agregado el texto \"'.concat(element.content, '\" ').concat(element.color ? \"con color \".concat(element.color, \" \") : \"\", \"desde el segundo \").concat(textOptions.startTime, \" hasta el segundo \").concat(textOptions.endTime, \"]\");\n                elementAdded = true;\n            } else if (element.type === \"image\") {\n                // Configurar opciones para la imagen\n                const imageOptions = {\n                    startTime: typeof element.startTime === \"number\" ? element.startTime : 0,\n                    endTime: typeof element.endTime === \"number\" ? element.endTime : typeof element.startTime === \"number\" ? element.startTime + 5 : 5,\n                    // Posición centrada por defecto\n                    position: {\n                        x: 0.5,\n                        y: 0.5\n                    }\n                };\n                // Registrar tiempos específicos para depuración\n                console.log(\"Tiempos de imagen recibidos de la API: startTime=\".concat(element.startTime, \", endTime=\").concat(element.endTime));\n                // Manejar casos especiales para \"al final\" del video\n                if (element.startTime === -1 || element.endTime === -1) {\n                    // Calcular la duración del video en segundos\n                    const videoDuration = (timeline === null || timeline === void 0 ? void 0 : timeline.duration) ? Math.floor(timeline.duration / 1000) : 30; // Valor predeterminado si no hay duración\n                    console.log(\"Duraci\\xf3n del video: \".concat(videoDuration, \"s\"));\n                    if (element.startTime === -1 && element.endTime === -1) {\n                        // Si ambos son -1, colocar en los últimos 5 segundos\n                        imageOptions.startTime = Math.max(0, videoDuration - 5);\n                        imageOptions.endTime = videoDuration;\n                        console.log('Ajustando para \"al final\": startTime='.concat(imageOptions.startTime, \", endTime=\").concat(imageOptions.endTime));\n                    } else if (element.startTime === -1) {\n                        // Solo startTime es -1\n                        imageOptions.startTime = Math.max(0, videoDuration - 5);\n                    } else if (element.endTime === -1) {\n                        // Solo endTime es -1\n                        imageOptions.endTime = videoDuration;\n                    }\n                }\n                console.log(\"Tiempos de imagen a aplicar: startTime=\".concat(imageOptions.startTime, \", endTime=\").concat(imageOptions.endTime));\n                // Determinar la URL de la imagen a usar\n                const isGenericUrl = element.url === \"imagen_adjunta_por_el_usuario.jpg\";\n                const isLocalImage = lastUploadedImageUrl && lastUploadedImageUrl.startsWith(\"data:\");\n                let imageUrl;\n                // PRIORIDAD 1: Usar la imagen que acaba de subirse en este mensaje específico\n                if (currentImageUrlForThisRequest) {\n                    imageUrl = currentImageUrlForThisRequest;\n                    console.log(\"Usando la imagen reci\\xe9n subida para esta solicitud espec\\xedfica\");\n                } else if (element.url && !isGenericUrl && !element.url.includes(\"/url_de_la_imagen\")) {\n                    imageUrl = element.url;\n                    console.log(\"Usando URL espec\\xedfica del elemento\");\n                } else if (isGenericUrl && lastUploadedImageUrl) {\n                    imageUrl = lastUploadedImageUrl;\n                    console.log(\"Usando la \\xfaltima imagen subida guardada\");\n                } else {\n                    // Si todo lo demás falla, usar una imagen de ejemplo\n                    imageUrl = \"https://ik.imagekit.io/wombo/images/img2.jpg\";\n                    console.log(\"Usando imagen de ejemplo como fallback\");\n                }\n                // Añadir la imagen\n                commandExecutor.current.addImage(imageUrl, imageOptions);\n                // Actualizar respuesta\n                finalResponse += \"\\n\\n[He agregado la imagen desde el segundo \".concat(imageOptions.startTime, \" hasta el segundo \").concat(imageOptions.endTime, \"]\");\n                elementAdded = true;\n            } else if (element.type === \"video\") {\n                // Configurar opciones para el video\n                const videoOptions = {\n                    startTime: typeof element.startTime === \"number\" ? element.startTime : 0,\n                    endTime: typeof element.endTime === \"number\" ? element.endTime : typeof element.startTime === \"number\" ? element.startTime + 10 : 10\n                };\n                // URL de video de ejemplo (en producción esto sería dinámico)\n                const videoUrl = \"https://cdn.designcombo.dev/videos/demo-video-4.mp4\";\n                // Añadir el video\n                commandExecutor.current.addVideo(videoUrl, videoOptions);\n                // Actualizar respuesta\n                finalResponse += \"\\n\\n[He agregado el video desde el segundo \".concat(videoOptions.startTime, \" hasta el segundo \").concat(videoOptions.endTime, \"]\");\n                elementAdded = true;\n            } else if (element.type === \"subtitles\") {\n                // Configurar opciones para los subtítulos\n                const subtitleOptions = {\n                    groupWords: element.groupWords !== undefined ? element.groupWords : true\n                };\n                // Añadir tiempos si se especificaron\n                if (typeof element.startTime === \"number\") {\n                    subtitleOptions.startTime = element.startTime;\n                }\n                if (typeof element.endTime === \"number\") {\n                    subtitleOptions.endTime = element.endTime;\n                }\n                // Añadir los subtítulos\n                commandExecutor.current.addSubtitles(subtitleOptions);\n                // Actualizar respuesta silenciosa (se maneja en otro lado)\n                elementAdded = true;\n            } else if (element.type === \"segments\" && Array.isArray(element.segments) && element.segments.length > 0) {\n                // Configurar los segmentos a eliminar\n                const segments = element.segments.map((segment)=>({\n                        startTime: typeof segment.startTime === \"number\" ? segment.startTime : 0,\n                        endTime: typeof segment.endTime === \"number\" ? segment.endTime : typeof segment.startTime === \"number\" ? segment.startTime + 5 : 5\n                    }));\n                console.log(\"Eliminando \".concat(segments.length, \" segmentos:\"), segments);\n                // Ejemplo de formato de segmentos a mostrar\n                const segmentsFormatted = segments.map((s)=>\"\".concat(s.startTime, \"-\").concat(s.endTime, \"s\")).join(\", \");\n                try {\n                    // Ejecutar la eliminación de segmentos\n                    const result = await commandExecutor.current.removeSegments(segments);\n                    if (result) {\n                        finalResponse += \"\\n\\n[He eliminado los segmentos solicitados: \".concat(segmentsFormatted, \"]\");\n                    } else {\n                        finalResponse += \"\\n\\n[No pude eliminar los segmentos solicitados. Aseg\\xfarate de que hay un elemento seleccionado en la timeline.]\";\n                    }\n                    elementAdded = true;\n                } catch (error) {\n                    console.error(\"Error al eliminar segmentos:\", error);\n                    finalResponse += \"\\n\\n[Error al intentar eliminar los segmentos: \".concat(error.message || \"Error desconocido\", \"]\");\n                }\n            } else if (element.type === \"compact\") {\n                // Ejecutar la compactación del timeline\n                console.log(\"Compactando timeline por solicitud del usuario\");\n                try {\n                    // Iniciar la compactación\n                    const result = await commandExecutor.current.compactTimeline();\n                    if (result) {\n                        finalResponse += \"\\n\\n[He compactado el timeline eliminando los espacios vac\\xedos entre elementos]\";\n                    } else {\n                        finalResponse += \"\\n\\n[No fue posible compactar el timeline. Puede que no haya elementos o espacios vac\\xedos que compactar]\";\n                    }\n                    elementAdded = true;\n                } catch (error) {\n                    console.error(\"Error al compactar el timeline:\", error);\n                    finalResponse += \"\\n\\n[Error al intentar compactar el timeline: \".concat(error.message || \"Error desconocido\", \"]\");\n                }\n            } else if (element.type === \"smartTrim\") {\n                // Ejecutar el recorte inteligente\n                console.log(\"Iniciando recorte inteligente por solicitud del usuario\");\n                try {\n                    // Mostrar mensaje de análisis en curso\n                    finalResponse += \"\\n\\n[Analizando el video para identificar las partes a eliminar...]\";\n                    // Iniciar el recorte inteligente\n                    const result = await commandExecutor.current.smartTrim();\n                    if (result) {\n                        finalResponse += \"\\n\\n[He realizado un recorte inteligente del video, eliminando las partes innecesarias y compactando el timeline]\";\n                    } else {\n                        finalResponse += \"\\n\\n[No fue posible realizar el recorte inteligente. Verifica que el video tenga una transcripci\\xf3n]\";\n                    }\n                    elementAdded = true;\n                } catch (error) {\n                    console.error(\"Error al realizar el recorte inteligente:\", error);\n                    finalResponse += \"\\n\\n[Error al intentar realizar el recorte inteligente: \".concat(error.message || \"Error desconocido\", \"]\");\n                }\n            }\n        }\n    } catch (error) {\n        console.error(\"Error al procesar elemento detectado:\", error);\n        finalResponse += \"\\n\\n[No pude procesar la solicitud debido a un error.]\";\n    }\n    return {\n        finalResponse,\n        elementAdded\n    };\n};\nfunction AIChat() {\n    _s();\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [newMessage, setNewMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const commandExecutor = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [selectedImageFile, setSelectedImageFile] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [selectedImagePreview, setSelectedImagePreview] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [lastUploadedImageUrl, setLastUploadedImageUrl] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [currentImageUrlForThisRequest, setCurrentImageUrlForThisRequest] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const { timeline } = (0,_features_editor_hooks_state_manager__WEBPACK_IMPORTED_MODULE_5__.useStateManager)();\n    // Referencia al state manager para manipular el editor\n    const stateManager = (0,_features_editor_hooks_state_manager__WEBPACK_IMPORTED_MODULE_5__.useStateManager)();\n    const { scenes, playerRef } = (0,_features_editor_store_use_data_state__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\n    // Scroll al último mensaje\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    }, [\n        messages\n    ]);\n    // Actualizar el ejecutor de comandos cuando cambie el stateManager\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        commandExecutor.current = (0,_ai_video_commands__WEBPACK_IMPORTED_MODULE_6__.createVideoCommandExecutor)(stateManager);\n    }, [\n        stateManager\n    ]);\n    // Manejar click en el botón de imagen\n    const handleImageClick = ()=>{\n        var _fileInputRef_current;\n        (_fileInputRef_current = fileInputRef.current) === null || _fileInputRef_current === void 0 ? void 0 : _fileInputRef_current.click();\n    };\n    // Manejar selección de archivo de imagen\n    const handleFileChange = (e)=>{\n        var _e_target_files;\n        const file = (_e_target_files = e.target.files) === null || _e_target_files === void 0 ? void 0 : _e_target_files[0];\n        if (file) {\n            setSelectedImageFile(file);\n            const previewUrl = URL.createObjectURL(file);\n            setSelectedImagePreview(previewUrl);\n        }\n    };\n    // Eliminar la imagen seleccionada\n    const handleRemoveImage = ()=>{\n        setSelectedImageFile(null);\n        setSelectedImagePreview(null);\n        if (fileInputRef.current) fileInputRef.current.value = \"\";\n    };\n    // Subir imagen al servidor\n    const uploadImage = async (file)=>{\n        try {\n            // Obtener URL firmada para subir la imagen\n            const uploadDetails = await (0,_utils_upload__WEBPACK_IMPORTED_MODULE_7__.createUploadsDetails)(file.name, file);\n            // Si no es un mock local, proceder con la carga\n            if (uploadDetails.uploadUrl !== \"local-mock\") {\n                // Subir la imagen\n                await fetch(uploadDetails.uploadUrl, {\n                    method: \"PUT\",\n                    body: file,\n                    headers: {\n                        \"Content-Type\": file.type\n                    }\n                });\n            }\n            // No se necesita hacer fetch si es un mock local (dataURL)\n            // Retornar la URL pública de la imagen\n            return uploadDetails.url;\n        } catch (error) {\n            console.error(\"Error al subir la imagen:\", error);\n            throw new Error(\"No se pudo subir la imagen. Int\\xe9ntalo de nuevo.\");\n        }\n    };\n    // Función para enviar mensaje\n    const handleSendMessage = async ()=>{\n        if (!newMessage.trim() && !selectedImageFile || loading) return;\n        let userMessage = {\n            id: Date.now().toString(),\n            content: newMessage,\n            role: \"user\",\n            timestamp: new Date()\n        };\n        let uploadedImageUrl = \"\";\n        // Si hay una imagen para subir, procesarla\n        if (selectedImageFile) {\n            try {\n                uploadedImageUrl = await uploadImage(selectedImageFile);\n                userMessage.imageUrl = uploadedImageUrl;\n                // Guardar la URL de la imagen para posibles referencias futuras\n                setLastUploadedImageUrl(uploadedImageUrl);\n                // Importante: Guardar la URL actual para esta solicitud específica\n                setCurrentImageUrlForThisRequest(uploadedImageUrl);\n                console.log(\"Imagen subida exitosamente:\", uploadedImageUrl.substring(0, 100) + \"...\");\n            } catch (error) {\n                console.error(\"Error en la subida de imagen:\", error);\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            id: (Date.now() + 1).toString(),\n                            content: \"Error al subir la imagen. Por favor, int\\xe9ntalo de nuevo. Detalles: \" + (error instanceof Error ? error.message : \"Error desconocido\"),\n                            role: \"assistant\",\n                            timestamp: new Date()\n                        }\n                    ]);\n                setLoading(false);\n                return;\n            }\n        }\n        // Añadir mensaje del usuario\n        setMessages((prev)=>[\n                ...prev,\n                userMessage\n            ]);\n        setNewMessage(\"\");\n        setSelectedImageFile(null);\n        setSelectedImagePreview(null);\n        if (fileInputRef.current) fileInputRef.current.value = \"\";\n        setLoading(true);\n        try {\n            var _playerRef_current, _timeline_canvas_getObjects, _timeline_canvas, _timeline_canvas_getObjects1, _timeline_canvas1;\n            // Enviar a la API para procesamiento en lenguaje natural\n            const apiMessages = messages.concat(userMessage).map((msg)=>{\n                // Si el mensaje tiene una imagen, crear un formato especial para el contenido\n                if (msg.imageUrl) {\n                    // Si es una URL de datos (comienza con data:), usar un marcador especial\n                    const isDataUrl = msg.imageUrl.startsWith(\"data:\");\n                    const imageUrlToSend = isDataUrl ? \"[IMAGEN_ADJUNTA]\" : \"[IMAGEN: \".concat(msg.imageUrl, \"]\");\n                    return {\n                        role: msg.role,\n                        content: \"\".concat(msg.content || \"\", \" \").concat(imageUrlToSend)\n                    };\n                }\n                return {\n                    role: msg.role,\n                    content: msg.content\n                };\n            });\n            // Añadir contexto del editor para la IA externa\n            const contextMessage = {\n                role: \"system\",\n                content: \"\\nContexto actual del editor de video:\\n- Posici\\xf3n actual (segundos): \".concat((playerRef === null || playerRef === void 0 ? void 0 : (_playerRef_current = playerRef.current) === null || _playerRef_current === void 0 ? void 0 : _playerRef_current.getCurrentTime) ? Math.floor((playerRef.current.getCurrentTime() || 0) * 100) / 100 : 0, \"\\n- Duraci\\xf3n del proyecto (segundos): \").concat((timeline === null || timeline === void 0 ? void 0 : timeline.duration) ? Math.floor(timeline.duration / 1000) : 0, \"\\n- N\\xfamero de escenas: \").concat((scenes === null || scenes === void 0 ? void 0 : scenes.length) || 0, \"\\n- N\\xfamero de elementos en el timeline: \").concat(((timeline === null || timeline === void 0 ? void 0 : (_timeline_canvas = timeline.canvas) === null || _timeline_canvas === void 0 ? void 0 : (_timeline_canvas_getObjects = _timeline_canvas.getObjects) === null || _timeline_canvas_getObjects === void 0 ? void 0 : _timeline_canvas_getObjects.call(_timeline_canvas)) || []).length - 1 > 0 ? ((timeline === null || timeline === void 0 ? void 0 : (_timeline_canvas1 = timeline.canvas) === null || _timeline_canvas1 === void 0 ? void 0 : (_timeline_canvas_getObjects1 = _timeline_canvas1.getObjects) === null || _timeline_canvas_getObjects1 === void 0 ? void 0 : _timeline_canvas_getObjects1.call(_timeline_canvas1)) || []).length - 1 : 0, \"\\n\").concat(lastUploadedImageUrl ? \"- \\xdaltima imagen compartida por el usuario disponible para usar\" : \"\", '\\n\\nEl usuario puede expresar en lenguaje natural la necesidad de agregar elementos al video.\\nEjemplos:\\n- \"Pon un t\\xedtulo que diga \\'Bienvenidos\\' al inicio\"\\n- \"Quiero un texto blanco que diga \\'Fin\\' al final del video\"\\n- \"Necesito una imagen en el segundo 10\"\\n- \"Coloca un video de introducci\\xf3n al principio\"\\n\\nSi el usuario adjunta una imagen en el mensaje, la URL estar\\xe1 en formato [IMAGEN: url_de_la_imagen].\\nDebes detectar si quiere agregar esta imagen al video y en qu\\xe9 momento temporal.\\n')\n            };\n            try {\n                var _data_message;\n                const response = await fetch(\"/api/ai\", {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        messages: [\n                            contextMessage,\n                            ...apiMessages\n                        ],\n                        // Usar la URL de la imagen actual para esta solicitud si existe,\n                        // de lo contrario usar la última URL guardada\n                        lastImageUrl: currentImageUrlForThisRequest || lastUploadedImageUrl || \"\"\n                    }),\n                    // Agregar timeout para evitar esperas infinitas\n                    signal: AbortSignal.timeout(15000) // 15 segundos máximo\n                });\n                if (!response.ok) {\n                    throw new Error(\"Error de API: \".concat(response.status, \" \").concat(response.statusText));\n                }\n                const data = await response.json();\n                // Asegurarse de que data.message.content existe\n                const aiResponse = (data === null || data === void 0 ? void 0 : (_data_message = data.message) === null || _data_message === void 0 ? void 0 : _data_message.content) || \"Lo siento, no pude entender tu solicitud.\";\n                // Obtener los datos del elemento si existen (con verificación segura)\n                const elementData = data === null || data === void 0 ? void 0 : data.elementData;\n                // Variable para la respuesta final\n                let finalResponse = aiResponse;\n                // Crear una referencia a la respuesta final para que sea accesible en la función procesadora\n                const finalResponseRef = {\n                    current: finalResponse\n                };\n                let elementAdded = false;\n                // Usar la función de procesamiento de elementos\n                const processResult = await processDetectedElement(elementData, commandExecutor, finalResponseRef, timeline, lastUploadedImageUrl, currentImageUrlForThisRequest);\n                finalResponse = processResult.finalResponse;\n                elementAdded = processResult.elementAdded;\n                const assistantMessage = {\n                    id: (Date.now() + 1).toString(),\n                    content: finalResponse,\n                    role: \"assistant\",\n                    timestamp: new Date()\n                };\n                setMessages((prev)=>[\n                        ...prev,\n                        assistantMessage\n                    ]);\n            } catch (apiError) {\n                console.error(\"Error en la comunicaci\\xf3n con la API:\", apiError);\n                // Mensaje de error específico de API\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            id: (Date.now() + 1).toString(),\n                            content: \"Lo siento, ha ocurrido un error al comunicarse con el servicio de IA. Por favor, intenta de nuevo en unos momentos.\",\n                            role: \"assistant\",\n                            timestamp: new Date()\n                        }\n                    ]);\n            }\n        } catch (error) {\n            console.error(\"Error al procesar el mensaje:\", error);\n            // Determinar mensaje de error apropiado\n            let errorMessage = \"Lo siento, ha ocurrido un error al procesar tu mensaje.\";\n            if (error instanceof Error) {\n                if (error.message.includes(\"timeout\") || error.message.includes(\"abort\")) {\n                    errorMessage = \"La solicitud ha tardado demasiado. Prueba con un mensaje m\\xe1s corto.\";\n                } else if (error.message.includes(\"network\") || error.message.includes(\"fetch\")) {\n                    errorMessage = \"Parece que hay un problema de conexi\\xf3n. Verifica tu conexi\\xf3n a internet e intenta de nuevo.\";\n                }\n            }\n            // Mensaje de error\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        id: (Date.now() + 1).toString(),\n                        content: errorMessage,\n                        role: \"assistant\",\n                        timestamp: new Date()\n                    }\n                ]);\n        } finally{\n            setLoading(false);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex h-full flex-col bg-sidebar border-l border-border/80\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-[#1a1625] p-3 border-b border-border/80\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"text-sm font-medium text-purple-200\",\n                        children: \"Asistente de Wands\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 610,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-xs text-purple-200/70\",\n                        children: \"Te ayudo a editar tu video. \\xbfQu\\xe9 necesitas?\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 611,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 609,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 overflow-y-auto p-4 space-y-4\",\n                children: [\n                    messages.map((message)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex flex-col \".concat(message.role === \"assistant\" ? \"items-start\" : \"items-end\"),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"max-w-[80%] rounded-lg p-3 \".concat(message.role === \"assistant\" ? \"bg-secondary text-secondary-foreground\" : \"bg-primary text-primary-foreground\"),\n                                    children: [\n                                        message.content.split(\"\\n\").map((text, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(React.Fragment, {\n                                                children: [\n                                                    text,\n                                                    i !== message.content.split(\"\\n\").length - 1 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"br\", {}, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                        lineNumber: 635,\n                                                        columnNumber: 68\n                                                    }, this)\n                                                ]\n                                            }, i, true, {\n                                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                lineNumber: 633,\n                                                columnNumber: 17\n                                            }, this)),\n                                        message.imageUrl && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"mt-2\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                src: message.imageUrl,\n                                                alt: \"Uploaded\",\n                                                className: \"max-w-full rounded\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                lineNumber: 640,\n                                                columnNumber: 19\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                            lineNumber: 639,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 625,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs text-muted-foreground mt-1\",\n                                    children: message.timestamp.toLocaleTimeString([], {\n                                        hour: \"2-digit\",\n                                        minute: \"2-digit\"\n                                    })\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 648,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, message.id, true, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 619,\n                            columnNumber: 11\n                        }, this)),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        ref: messagesEndRef\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 656,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 617,\n                columnNumber: 7\n            }, this),\n            selectedImagePreview && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"p-2 border-t border-border\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"relative inline-block\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                            src: selectedImagePreview,\n                            alt: \"Selected\",\n                            className: \"h-16 w-auto object-contain rounded\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 663,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleRemoveImage,\n                            className: \"absolute -top-2 -right-2 bg-zinc-700 text-zinc-200 rounded-full p-0.5\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_Send_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                size: 14\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 672,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 668,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                    lineNumber: 662,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 661,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"p-2 border-t border-border flex\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"file\",\n                        ref: fileInputRef,\n                        onChange: handleFileChange,\n                        accept: \"image/*\",\n                        className: \"hidden\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 680,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                        type: \"button\",\n                        size: \"icon\",\n                        variant: \"ghost\",\n                        onClick: handleImageClick,\n                        className: \"mr-1\",\n                        title: \"A\\xf1adir imagen\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_Send_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                            className: \"h-5 w-5\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 695,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 687,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_input__WEBPACK_IMPORTED_MODULE_3__.Input, {\n                        value: newMessage,\n                        onChange: (e)=>setNewMessage(e.target.value),\n                        onKeyDown: (e)=>{\n                            if (e.key === \"Enter\" && !e.shiftKey) {\n                                e.preventDefault();\n                                handleSendMessage();\n                            }\n                        },\n                        placeholder: \"Escribe tu mensaje...\",\n                        className: \"flex-1 bg-background\",\n                        disabled: loading\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 697,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                        type: \"button\",\n                        size: \"icon\",\n                        onClick: handleSendMessage,\n                        disabled: loading || newMessage.trim() === \"\" && !selectedImageFile,\n                        className: \"ml-1\",\n                        children: loading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_Send_X_lucide_react__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                            className: \"h-5 w-5 animate-spin\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 718,\n                            columnNumber: 13\n                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_Send_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                            className: \"h-5 w-5\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 720,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 710,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 679,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n        lineNumber: 608,\n        columnNumber: 5\n    }, this);\n}\n_s(AIChat, \"b84FszFE2snsrkQ3BfBVV4dIos0=\", false, function() {\n    return [\n        _features_editor_hooks_state_manager__WEBPACK_IMPORTED_MODULE_5__.useStateManager,\n        _features_editor_hooks_state_manager__WEBPACK_IMPORTED_MODULE_5__.useStateManager,\n        _features_editor_store_use_data_state__WEBPACK_IMPORTED_MODULE_4__[\"default\"]\n    ];\n});\n_c = AIChat;\nvar _c;\n$RefreshReg$(_c, \"AIChat\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvYWktY2hhdC9pbmRleC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVvRDtBQUNKO0FBQ0Y7QUFFYTtBQUNPO0FBQ007QUFDZTtBQUNqQztBQUV0RCxrRkFBa0Y7QUFDbEYsU0FBU2EsNkJBQTZCQyxjQUFzQjtJQUMxRCxJQUFJQyxZQUFZO0lBQ2hCLElBQUlDLFVBQVU7SUFFZCxJQUFJLENBQUNGLGdCQUFnQixPQUFPO1FBQUVDO1FBQVdDO0lBQVE7SUFFakQsdUNBQXVDO0lBQ3ZDLE1BQU1DLG9CQUFvQjtRQUN4QjtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7S0FDRDtJQUVELHFDQUFxQztJQUNyQyxNQUFNQyxrQkFBa0I7UUFDdEI7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNEO0lBRUQsbUNBQW1DO0lBQ25DLE1BQU1DLFlBQVksNENBQTRDQyxJQUFJLENBQUNOO0lBQ25FLE1BQU1PLFVBQVUsdUNBQXVDRCxJQUFJLENBQUNOO0lBRTVELHNDQUFzQztJQUN0QyxLQUFLLE1BQU1RLFdBQVdMLGtCQUFtQjtRQUN2QyxNQUFNTSxRQUFRVCxlQUFlUyxLQUFLLENBQUNEO1FBQ25DLElBQUlDLFNBQVNBLEtBQUssQ0FBQyxFQUFFLEVBQUU7WUFDckIsbURBQW1EO1lBQ25EUixZQUFZTyxRQUFRRSxRQUFRLEdBQUdDLFFBQVEsQ0FBQyxZQUNwQ0MsU0FBU0gsS0FBSyxDQUFDLEVBQUUsSUFBSSxLQUNyQkcsU0FBU0gsS0FBSyxDQUFDLEVBQUU7WUFDckI7UUFDRjtJQUNGO0lBRUEsb0NBQW9DO0lBQ3BDLEtBQUssTUFBTUQsV0FBV0osZ0JBQWlCO1FBQ3JDLE1BQU1LLFFBQVFULGVBQWVTLEtBQUssQ0FBQ0Q7UUFDbkMsSUFBSUMsU0FBU0EsS0FBSyxDQUFDLEVBQUUsRUFBRTtZQUNyQixJQUFJRCxRQUFR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QWVBO1FBQ05ELDZFQUFZQTs7O0tBZnBCNEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vY29tcG9uZW50cy9haS1jaGF0L2luZGV4LnRzeD80Yjk3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvYnV0dG9uXCI7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvaW5wdXRcIjtcbmltcG9ydCB7IFNjcm9sbEFyZWEgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL3Njcm9sbC1hcmVhXCI7XG5pbXBvcnQgeyBTZW5kLCBMb2FkZXIyLCBJbWFnZUljb24sIFggfSBmcm9tIFwibHVjaWRlLXJlYWN0XCI7XG5pbXBvcnQgdXNlRGF0YVN0YXRlIGZyb20gXCJAL2ZlYXR1cmVzL2VkaXRvci9zdG9yZS91c2UtZGF0YS1zdGF0ZVwiO1xuaW1wb3J0IHsgdXNlU3RhdGVNYW5hZ2VyIH0gZnJvbSBcIkAvZmVhdHVyZXMvZWRpdG9yL2hvb2tzL3N0YXRlLW1hbmFnZXJcIjtcbmltcG9ydCB7IGNyZWF0ZVZpZGVvQ29tbWFuZEV4ZWN1dG9yLCBWaWRlb0NvbW1hbmRFeGVjdXRvciB9IGZyb20gXCIuL2FpLXZpZGVvLWNvbW1hbmRzXCI7XG5pbXBvcnQgeyBjcmVhdGVVcGxvYWRzRGV0YWlscyB9IGZyb20gXCJAL3V0aWxzL3VwbG9hZFwiO1xuXG4vLyBGdW5jacOzbiBwYXJhIGV4dHJhZXIgdGllbXBvcyBkZSBpbmljaW8geSBmaW4gZGUgdW5hIGltYWdlbiBhIHBhcnRpciBkZWwgbWVuc2FqZVxuZnVuY3Rpb24gZXh0cmFjdEltYWdlVGltZXNGcm9tTWVzc2FnZShtZXNzYWdlQ29udGVudDogc3RyaW5nKTogeyBzdGFydFRpbWU6IG51bWJlciwgZW5kVGltZTogbnVtYmVyIH0ge1xuICBsZXQgc3RhcnRUaW1lID0gMDtcbiAgbGV0IGVuZFRpbWUgPSA1O1xuXG4gIGlmICghbWVzc2FnZUNvbnRlbnQpIHJldHVybiB7IHN0YXJ0VGltZSwgZW5kVGltZSB9O1xuXG4gIC8vIEJ1c2NhciByZWZlcmVuY2lhcyBhbCB0aWVtcG8gaW5pY2lhbFxuICBjb25zdCBzdGFydFRpbWVQYXR0ZXJucyA9IFtcbiAgICAvZW4gZWwgc2VndW5kbyAoXFxkKykvaSxcbiAgICAvZGVzZGUgZWwgc2VndW5kbyAoXFxkKykvaSxcbiAgICAvYSBwYXJ0aXIgZGVsIHNlZ3VuZG8gKFxcZCspL2ksXG4gICAgL2NvbWVuemFuZG8gZW4gZWwgc2VndW5kbyAoXFxkKykvaSxcbiAgICAvZGVzZGUgZWwgbWludXRvIChcXGQrKS9pLCAvLyBDb252ZXJ0aXIgbWludXRvcyBhIHNlZ3VuZG9zXG4gICAgL2VuIGVsIG1pbnV0byAoXFxkKykvaSwgICAgLy8gQ29udmVydGlyIG1pbnV0b3MgYSBzZWd1bmRvc1xuICAgIC9lbnRyZSBsb3Mgc2VndW5kb3MgKFxcZCspIHkvaSwgLy8gQ2FwdHVyYSBlbCBwcmltZXIgbsO6bWVybyBlbiBcImVudHJlIFggeSBZXCJcbiAgICAvZGVsIHNlZ3VuZG8gKFxcZCspIGFsL2ksXG4gICAgL2VtcGV6YW5kbyBlbiAoXFxkKykvaSxcbiAgICAvc2VndW5kbyAoXFxkKykvaSwgICAgIC8vIFBhdHLDs24gbcOhcyBnZW5lcmFsIHBhcmEgY2FwdHVyYXIgXCJzZWd1bmRvIFhcIlxuICAgIC9lbiAoXFxkKykgc2VndW5kb3MvaSwgLy8gXCJlbiBYIHNlZ3VuZG9zXCJcbiAgICAvZW4gZWwgKFxcZCspL2ksICAgICAgIC8vIFwiZW4gZWwgWFwiIChjdWFuZG8gc2UgcmVmaWVyZSBhIHNlZ3VuZG9zKVxuICBdO1xuXG4gIC8vIEJ1c2NhciByZWZlcmVuY2lhcyBhbCB0aWVtcG8gZmluYWxcbiAgY29uc3QgZW5kVGltZVBhdHRlcm5zID0gW1xuICAgIC9oYXN0YSBlbCBzZWd1bmRvIChcXGQrKS9pLFxuICAgIC9hbCBzZWd1bmRvIChcXGQrKS9pLFxuICAgIC90ZXJtaW5hbmRvIGVuIGVsIHNlZ3VuZG8gKFxcZCspL2ksXG4gICAgL2hhc3RhIGVsIG1pbnV0byAoXFxkKykvaSwgLy8gQ29udmVydGlyIG1pbnV0b3MgYSBzZWd1bmRvc1xuICAgIC9lbnRyZSBsb3Mgc2VndW5kb3MgXFxkKyB5IChcXGQrKS9pLCAvLyBDYXB0dXJhIGVsIHNlZ3VuZG8gbsO6bWVybyBlbiBcImVudHJlIFggeSBZXCJcbiAgICAvZGVsIHNlZ3VuZG8gXFxkKyBhbCAoXFxkKykvaSxcbiAgICAvcG9yIChcXGQrKSBzZWd1bmRvcy9pLCAvLyBEdXJhY2nDs24gcmVsYXRpdmFcbiAgICAvZHVyYW50ZSAoXFxkKykgc2VndW5kb3MvaSwgLy8gRHVyYWNpw7NuIHJlbGF0aXZhXG4gIF07XG5cbiAgLy8gQnVzY2FyIHBhbGFicmFzIGNsYXZlIGVzcGVjaWFsZXNcbiAgY29uc3QgaXNBdFN0YXJ0ID0gL1xcYihhbCBpbmljaW98YWwgcHJpbmNpcGlvfGFsIGNvbWllbnpvKVxcYi9pLnRlc3QobWVzc2FnZUNvbnRlbnQpO1xuICBjb25zdCBpc0F0RW5kID0gL1xcYihhbCBmaW5hbHxhbCB0w6lybWlub3xhbCBhY2FiYXIpXFxiL2kudGVzdChtZXNzYWdlQ29udGVudCk7XG5cbiAgLy8gUHJvY2VzYXIgcGF0cm9uZXMgZGUgdGllbXBvIGluaWNpYWxcbiAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIHN0YXJ0VGltZVBhdHRlcm5zKSB7XG4gICAgY29uc3QgbWF0Y2ggPSBtZXNzYWdlQ29udGVudC5tYXRjaChwYXR0ZXJuKTtcbiAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgIC8vIFNpIGVzIHJlZmVyZW5jaWEgYSBtaW51dG9zLCBjb252ZXJ0aXIgYSBzZWd1bmRvc1xuICAgICAgc3RhcnRUaW1lID0gcGF0dGVybi50b1N0cmluZygpLmluY2x1ZGVzKCdtaW51dG8nKVxuICAgICAgICA/IHBhcnNlSW50KG1hdGNoWzFdKSAqIDYwXG4gICAgICAgIDogcGFyc2VJbnQobWF0Y2hbMV0pO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLy8gUHJvY2VzYXIgcGF0cm9uZXMgZGUgdGllbXBvIGZpbmFsXG4gIGZvciAoY29uc3QgcGF0dGVybiBvZiBlbmRUaW1lUGF0dGVybnMpIHtcbiAgICBjb25zdCBtYXRjaCA9IG1lc3NhZ2VDb250ZW50Lm1hdGNoKHBhdHRlcm4pO1xuICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgICAgaWYgKHBhdHRlcm4udG9TdHJpbmcoKS5pbmNsdWRlcygncG9yJykgfHwgcGF0dGVybi50b1N0cmluZygpLmluY2x1ZGVzKCdkdXJhbnRlJykpIHtcbiAgICAgICAgLy8gRXMgdW5hIGR1cmFjacOzbiByZWxhdGl2YSwgc3VtYXIgYWwgdGllbXBvIGluaWNpYWxcbiAgICAgICAgZW5kVGltZSA9IHN0YXJ0VGltZSArIHBhcnNlSW50KG1hdGNoWzFdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEVzIHVuIHRpZW1wbyBhYnNvbHV0b1xuICAgICAgICBlbmRUaW1lID0gcGF0dGVybi50b1N0cmluZygpLmluY2x1ZGVzKCdtaW51dG8nKVxuICAgICAgICAgID8gcGFyc2VJbnQobWF0Y2hbMV0pICogNjBcbiAgICAgICAgICA6IHBhcnNlSW50KG1hdGNoWzFdKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNpIHNlIG1lbmNpb25hIFwiYWwgaW5pY2lvXCIsIGVzdGFibGVjZXIgdGllbXBvIGEgMFxuICBpZiAoaXNBdFN0YXJ0KSB7XG4gICAgc3RhcnRUaW1lID0gMDtcbiAgICBlbmRUaW1lID0gNTsgLy8gUG9yIGRlZmVjdG8gNSBzZWd1bmRvcyBkZSBkdXJhY2nDs25cbiAgfVxuXG4gIC8vIFNpIHNlIG1lbmNpb25hIFwiYWwgZmluYWxcIiwgZXN0YWJsZWNlciB2YWxvcmVzIHJlbGF0aXZvcyBhbCBmaW5hbFxuICAvLyBOb3RhOiBFbCB2YWxvciByZWFsIHNlIGFqdXN0YXLDoSBlbiBlbCBjbGllbnRlIHNlZ8O6biBsYSBkdXJhY2nDs25cbiAgaWYgKGlzQXRFbmQpIHtcbiAgICBzdGFydFRpbWUgPSAtMTsgLy8gQ8OzZGlnbyBlc3BlY2lhbCBwYXJhIFwiZmluYWwgLSA1IHNlZ3VuZG9zXCJcbiAgICBlbmRUaW1lID0gLTE7ICAgLy8gQ8OzZGlnbyBlc3BlY2lhbCBwYXJhIFwiZmluYWxcIlxuICB9XG5cbiAgLy8gU2kgbm8gc2UgZGV0ZWN0w7MgdGllbXBvIGZpbmFsIHBlcm8gc8OtIGluaWNpYWwsIGVzdGFibGVjZXIgdW5hIGR1cmFjacOzbiBwcmVkZXRlcm1pbmFkYVxuICBpZiAoc3RhcnRUaW1lID4gMCAmJiBlbmRUaW1lID09PSA1ICYmIHN0YXJ0VGltZSAhPT0gMCkge1xuICAgIGVuZFRpbWUgPSBzdGFydFRpbWUgKyA1O1xuICB9XG5cbiAgcmV0dXJuIHsgc3RhcnRUaW1lLCBlbmRUaW1lIH07XG59XG5cbi8vIFRpcG8gcGFyYSBsb3MgbWVuc2FqZXNcbnR5cGUgTWVzc2FnZSA9IHtcbiAgaWQ6IHN0cmluZztcbiAgY29udGVudDogc3RyaW5nO1xuICByb2xlOiBcImFzc2lzdGFudFwiIHwgXCJ1c2VyXCI7XG4gIHRpbWVzdGFtcDogRGF0ZTtcbiAgaW1hZ2VVcmw/OiBzdHJpbmc7IC8vIE51ZXZhIHByb3BpZWRhZCBwYXJhIFVSTHMgZGUgaW1hZ2VuXG59O1xuXG4vLyBGdW5jacOzbiBwYXJhIHByb2Nlc2FyIGVsZW1lbnRvcyBkZXRlY3RhZG9zIHBvciBsYSBJQVxuY29uc3QgcHJvY2Vzc0RldGVjdGVkRWxlbWVudCA9IGFzeW5jIChlbGVtZW50RGF0YSwgY29tbWFuZEV4ZWN1dG9yLCBmaW5hbFJlc3BvbnNlUmVmLCB0aW1lbGluZSwgbGFzdFVwbG9hZGVkSW1hZ2VVcmwsIGN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0KSA9PiB7XG4gIGxldCBlbGVtZW50QWRkZWQgPSBmYWxzZTtcbiAgbGV0IGZpbmFsUmVzcG9uc2UgPSBmaW5hbFJlc3BvbnNlUmVmLmN1cnJlbnQ7XG5cbiAgdHJ5IHtcbiAgICAvLyBTaSBzZSBkZXRlY3TDsyB1biBlbGVtZW50byBwYXJhIGFncmVnYXIgY29uIGNvbmZpYW56YSBzdWZpY2llbnRlXG4gICAgaWYgKGVsZW1lbnREYXRhICYmXG4gICAgICAgIGVsZW1lbnREYXRhLmRldGVjdGVkID09PSB0cnVlICYmXG4gICAgICAgIHR5cGVvZiBlbGVtZW50RGF0YS5jb25maWRlbmNlID09PSAnbnVtYmVyJyAmJlxuICAgICAgICBlbGVtZW50RGF0YS5jb25maWRlbmNlID4gMC43ICYmXG4gICAgICAgIGVsZW1lbnREYXRhLmVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50RGF0YS5lbGVtZW50O1xuXG4gICAgICAvLyBQcm9jZXNhciBzZWfDum4gZWwgdGlwbyBkZSBlbGVtZW50b1xuICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gXCJ0ZXh0XCIgJiYgZWxlbWVudC5jb250ZW50KSB7XG4gICAgICAgIC8vIENvbmZpZ3VyYXIgb3BjaW9uZXMgcGFyYSBlbCB0ZXh0b1xuICAgICAgICBjb25zdCB0ZXh0T3B0aW9uczogYW55ID0ge1xuICAgICAgICAgIHN0YXJ0VGltZTogdHlwZW9mIGVsZW1lbnQuc3RhcnRUaW1lID09PSAnbnVtYmVyJyA/IGVsZW1lbnQuc3RhcnRUaW1lIDogMCxcbiAgICAgICAgICBlbmRUaW1lOiB0eXBlb2YgZWxlbWVudC5lbmRUaW1lID09PSAnbnVtYmVyJyA/IGVsZW1lbnQuZW5kVGltZSA6ICh0eXBlb2YgZWxlbWVudC5zdGFydFRpbWUgPT09ICdudW1iZXInID8gZWxlbWVudC5zdGFydFRpbWUgKyA1IDogNSksXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQXNpZ25hciBjb2xvciBzaSBlc3TDoSBkaXNwb25pYmxlXG4gICAgICAgIGlmIChlbGVtZW50LmNvbG9yKSB7XG4gICAgICAgICAgdGV4dE9wdGlvbnMuY29sb3IgPSBlbGVtZW50LmNvbG9yLnRvTG93ZXJDYXNlKCkgPT09IFwiYmxhbmNvXCIgPyBcIiNGRkZGRkZcIiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jb2xvci50b0xvd2VyQ2FzZSgpID09PSBcIm5lZ3JvXCIgPyBcIiMwMDAwMDBcIiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jb2xvci50b0xvd2VyQ2FzZSgpID09PSBcInJvam9cIiA/IFwiI0ZGMDAwMFwiIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNvbG9yLnRvTG93ZXJDYXNlKCkgPT09IFwiYXp1bFwiID8gXCIjMDAwMEZGXCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY29sb3IudG9Mb3dlckNhc2UoKSA9PT0gXCJ2ZXJkZVwiID8gXCIjMDBGRjAwXCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY29sb3IudG9Mb3dlckNhc2UoKSA9PT0gXCJhbWFyaWxsb1wiID8gXCIjRkZGRjAwXCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY29sb3I7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBw7FhZGlyIGVsIHRleHRvXG4gICAgICAgIGNvbW1hbmRFeGVjdXRvci5jdXJyZW50LmFkZFRleHQoZWxlbWVudC5jb250ZW50LCB0ZXh0T3B0aW9ucyk7XG5cbiAgICAgICAgLy8gQWN0dWFsaXphciByZXNwdWVzdGFcbiAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW0hlIGFncmVnYWRvIGVsIHRleHRvIFwiJHtlbGVtZW50LmNvbnRlbnR9XCIgJHtlbGVtZW50LmNvbG9yID8gYGNvbiBjb2xvciAke2VsZW1lbnQuY29sb3J9IGAgOiBcIlwifWRlc2RlIGVsIHNlZ3VuZG8gJHt0ZXh0T3B0aW9ucy5zdGFydFRpbWV9IGhhc3RhIGVsIHNlZ3VuZG8gJHt0ZXh0T3B0aW9ucy5lbmRUaW1lfV1gO1xuICAgICAgICBlbGVtZW50QWRkZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZWxlbWVudC50eXBlID09PSBcImltYWdlXCIpIHtcbiAgICAgICAgLy8gQ29uZmlndXJhciBvcGNpb25lcyBwYXJhIGxhIGltYWdlblxuICAgICAgICBjb25zdCBpbWFnZU9wdGlvbnM6IGFueSA9IHtcbiAgICAgICAgICBzdGFydFRpbWU6IHR5cGVvZiBlbGVtZW50LnN0YXJ0VGltZSA9PT0gJ251bWJlcicgPyBlbGVtZW50LnN0YXJ0VGltZSA6IDAsXG4gICAgICAgICAgZW5kVGltZTogdHlwZW9mIGVsZW1lbnQuZW5kVGltZSA9PT0gJ251bWJlcicgPyBlbGVtZW50LmVuZFRpbWUgOiAodHlwZW9mIGVsZW1lbnQuc3RhcnRUaW1lID09PSAnbnVtYmVyJyA/IGVsZW1lbnQuc3RhcnRUaW1lICsgNSA6IDUpLFxuICAgICAgICAgIC8vIFBvc2ljacOzbiBjZW50cmFkYSBwb3IgZGVmZWN0b1xuICAgICAgICAgIHBvc2l0aW9uOiB7IHg6IDAuNSwgeTogMC41IH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBSZWdpc3RyYXIgdGllbXBvcyBlc3BlY8OtZmljb3MgcGFyYSBkZXB1cmFjacOzblxuICAgICAgICBjb25zb2xlLmxvZyhgVGllbXBvcyBkZSBpbWFnZW4gcmVjaWJpZG9zIGRlIGxhIEFQSTogc3RhcnRUaW1lPSR7ZWxlbWVudC5zdGFydFRpbWV9LCBlbmRUaW1lPSR7ZWxlbWVudC5lbmRUaW1lfWApO1xuXG4gICAgICAgIC8vIE1hbmVqYXIgY2Fzb3MgZXNwZWNpYWxlcyBwYXJhIFwiYWwgZmluYWxcIiBkZWwgdmlkZW9cbiAgICAgICAgaWYgKGVsZW1lbnQuc3RhcnRUaW1lID09PSAtMSB8fCBlbGVtZW50LmVuZFRpbWUgPT09IC0xKSB7XG4gICAgICAgICAgLy8gQ2FsY3VsYXIgbGEgZHVyYWNpw7NuIGRlbCB2aWRlbyBlbiBzZWd1bmRvc1xuICAgICAgICAgIGNvbnN0IHZpZGVvRHVyYXRpb24gPSB0aW1lbGluZT8uZHVyYXRpb25cbiAgICAgICAgICAgID8gTWF0aC5mbG9vcih0aW1lbGluZS5kdXJhdGlvbiAvIDEwMDApXG4gICAgICAgICAgICA6IDMwOyAvLyBWYWxvciBwcmVkZXRlcm1pbmFkbyBzaSBubyBoYXkgZHVyYWNpw7NuXG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhgRHVyYWNpw7NuIGRlbCB2aWRlbzogJHt2aWRlb0R1cmF0aW9ufXNgKTtcblxuICAgICAgICAgIGlmIChlbGVtZW50LnN0YXJ0VGltZSA9PT0gLTEgJiYgZWxlbWVudC5lbmRUaW1lID09PSAtMSkge1xuICAgICAgICAgICAgLy8gU2kgYW1ib3Mgc29uIC0xLCBjb2xvY2FyIGVuIGxvcyDDumx0aW1vcyA1IHNlZ3VuZG9zXG4gICAgICAgICAgICBpbWFnZU9wdGlvbnMuc3RhcnRUaW1lID0gTWF0aC5tYXgoMCwgdmlkZW9EdXJhdGlvbiAtIDUpO1xuICAgICAgICAgICAgaW1hZ2VPcHRpb25zLmVuZFRpbWUgPSB2aWRlb0R1cmF0aW9uO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEFqdXN0YW5kbyBwYXJhIFwiYWwgZmluYWxcIjogc3RhcnRUaW1lPSR7aW1hZ2VPcHRpb25zLnN0YXJ0VGltZX0sIGVuZFRpbWU9JHtpbWFnZU9wdGlvbnMuZW5kVGltZX1gKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuc3RhcnRUaW1lID09PSAtMSkge1xuICAgICAgICAgICAgLy8gU29sbyBzdGFydFRpbWUgZXMgLTFcbiAgICAgICAgICAgIGltYWdlT3B0aW9ucy5zdGFydFRpbWUgPSBNYXRoLm1heCgwLCB2aWRlb0R1cmF0aW9uIC0gNSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LmVuZFRpbWUgPT09IC0xKSB7XG4gICAgICAgICAgICAvLyBTb2xvIGVuZFRpbWUgZXMgLTFcbiAgICAgICAgICAgIGltYWdlT3B0aW9ucy5lbmRUaW1lID0gdmlkZW9EdXJhdGlvbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZyhgVGllbXBvcyBkZSBpbWFnZW4gYSBhcGxpY2FyOiBzdGFydFRpbWU9JHtpbWFnZU9wdGlvbnMuc3RhcnRUaW1lfSwgZW5kVGltZT0ke2ltYWdlT3B0aW9ucy5lbmRUaW1lfWApO1xuXG4gICAgICAgIC8vIERldGVybWluYXIgbGEgVVJMIGRlIGxhIGltYWdlbiBhIHVzYXJcbiAgICAgICAgY29uc3QgaXNHZW5lcmljVXJsID0gZWxlbWVudC51cmwgPT09ICdpbWFnZW5fYWRqdW50YV9wb3JfZWxfdXN1YXJpby5qcGcnO1xuICAgICAgICBjb25zdCBpc0xvY2FsSW1hZ2UgPSBsYXN0VXBsb2FkZWRJbWFnZVVybCAmJiBsYXN0VXBsb2FkZWRJbWFnZVVybC5zdGFydHNXaXRoKCdkYXRhOicpO1xuXG4gICAgICAgIGxldCBpbWFnZVVybDogc3RyaW5nO1xuXG4gICAgICAgIC8vIFBSSU9SSURBRCAxOiBVc2FyIGxhIGltYWdlbiBxdWUgYWNhYmEgZGUgc3ViaXJzZSBlbiBlc3RlIG1lbnNhamUgZXNwZWPDrWZpY29cbiAgICAgICAgaWYgKGN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0KSB7XG4gICAgICAgICAgaW1hZ2VVcmwgPSBjdXJyZW50SW1hZ2VVcmxGb3JUaGlzUmVxdWVzdDtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzYW5kbyBsYSBpbWFnZW4gcmVjacOpbiBzdWJpZGEgcGFyYSBlc3RhIHNvbGljaXR1ZCBlc3BlY8OtZmljYVwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQUklPUklEQUQgMjogVXNhciBsYSBVUkwgZGVsIGVsZW1lbnRvIHNpIHRpZW5lIHVuYSBlc3BlY8OtZmljYSB5IE5PIGVzIGxhIFVSTCBnZW7DqXJpY2FcbiAgICAgICAgZWxzZSBpZiAoZWxlbWVudC51cmwgJiYgIWlzR2VuZXJpY1VybCAmJiAhZWxlbWVudC51cmwuaW5jbHVkZXMoJy91cmxfZGVfbGFfaW1hZ2VuJykpIHtcbiAgICAgICAgICBpbWFnZVVybCA9IGVsZW1lbnQudXJsO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNhbmRvIFVSTCBlc3BlY8OtZmljYSBkZWwgZWxlbWVudG9cIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUFJJT1JJREFEIDM6IFVzYXIgbGEgw7psdGltYSBpbWFnZW4gc3ViaWRhIGd1YXJkYWRhIHNpIGhheSByZWZlcmVuY2lhIGEgaW1hZ2VuIGdlbsOpcmljYVxuICAgICAgICBlbHNlIGlmIChpc0dlbmVyaWNVcmwgJiYgbGFzdFVwbG9hZGVkSW1hZ2VVcmwpIHtcbiAgICAgICAgICBpbWFnZVVybCA9IGxhc3RVcGxvYWRlZEltYWdlVXJsO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNhbmRvIGxhIMO6bHRpbWEgaW1hZ2VuIHN1YmlkYSBndWFyZGFkYVwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQUklPUklEQUQgNDogRmFsbGJhY2sgYSBVUkwgZ2Vuw6lyaWNhXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIFNpIHRvZG8gbG8gZGVtw6FzIGZhbGxhLCB1c2FyIHVuYSBpbWFnZW4gZGUgZWplbXBsb1xuICAgICAgICAgIGltYWdlVXJsID0gXCJodHRwczovL2lrLmltYWdla2l0LmlvL3dvbWJvL2ltYWdlcy9pbWcyLmpwZ1wiO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNhbmRvIGltYWdlbiBkZSBlamVtcGxvIGNvbW8gZmFsbGJhY2tcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBw7FhZGlyIGxhIGltYWdlblxuICAgICAgICBjb21tYW5kRXhlY3V0b3IuY3VycmVudC5hZGRJbWFnZShpbWFnZVVybCwgaW1hZ2VPcHRpb25zKTtcblxuICAgICAgICAvLyBBY3R1YWxpemFyIHJlc3B1ZXN0YVxuICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bSGUgYWdyZWdhZG8gbGEgaW1hZ2VuIGRlc2RlIGVsIHNlZ3VuZG8gJHtpbWFnZU9wdGlvbnMuc3RhcnRUaW1lfSBoYXN0YSBlbCBzZWd1bmRvICR7aW1hZ2VPcHRpb25zLmVuZFRpbWV9XWA7XG4gICAgICAgIGVsZW1lbnRBZGRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlbGVtZW50LnR5cGUgPT09IFwidmlkZW9cIikge1xuICAgICAgICAvLyBDb25maWd1cmFyIG9wY2lvbmVzIHBhcmEgZWwgdmlkZW9cbiAgICAgICAgY29uc3QgdmlkZW9PcHRpb25zOiBhbnkgPSB7XG4gICAgICAgICAgc3RhcnRUaW1lOiB0eXBlb2YgZWxlbWVudC5zdGFydFRpbWUgPT09ICdudW1iZXInID8gZWxlbWVudC5zdGFydFRpbWUgOiAwLFxuICAgICAgICAgIGVuZFRpbWU6IHR5cGVvZiBlbGVtZW50LmVuZFRpbWUgPT09ICdudW1iZXInID8gZWxlbWVudC5lbmRUaW1lIDogKHR5cGVvZiBlbGVtZW50LnN0YXJ0VGltZSA9PT0gJ251bWJlcicgPyBlbGVtZW50LnN0YXJ0VGltZSArIDEwIDogMTApLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFVSTCBkZSB2aWRlbyBkZSBlamVtcGxvIChlbiBwcm9kdWNjacOzbiBlc3RvIHNlcsOtYSBkaW7DoW1pY28pXG4gICAgICAgIGNvbnN0IHZpZGVvVXJsID0gXCJodHRwczovL2Nkbi5kZXNpZ25jb21iby5kZXYvdmlkZW9zL2RlbW8tdmlkZW8tNC5tcDRcIjtcblxuICAgICAgICAvLyBBw7FhZGlyIGVsIHZpZGVvXG4gICAgICAgIGNvbW1hbmRFeGVjdXRvci5jdXJyZW50LmFkZFZpZGVvKHZpZGVvVXJsLCB2aWRlb09wdGlvbnMpO1xuXG4gICAgICAgIC8vIEFjdHVhbGl6YXIgcmVzcHVlc3RhXG4gICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltIZSBhZ3JlZ2FkbyBlbCB2aWRlbyBkZXNkZSBlbCBzZWd1bmRvICR7dmlkZW9PcHRpb25zLnN0YXJ0VGltZX0gaGFzdGEgZWwgc2VndW5kbyAke3ZpZGVvT3B0aW9ucy5lbmRUaW1lfV1gO1xuICAgICAgICBlbGVtZW50QWRkZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZWxlbWVudC50eXBlID09PSBcInN1YnRpdGxlc1wiKSB7XG4gICAgICAgIC8vIENvbmZpZ3VyYXIgb3BjaW9uZXMgcGFyYSBsb3Mgc3VidMOtdHVsb3NcbiAgICAgICAgY29uc3Qgc3VidGl0bGVPcHRpb25zOiBhbnkgPSB7XG4gICAgICAgICAgZ3JvdXBXb3JkczogZWxlbWVudC5ncm91cFdvcmRzICE9PSB1bmRlZmluZWQgPyBlbGVtZW50Lmdyb3VwV29yZHMgOiB0cnVlLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEHDsWFkaXIgdGllbXBvcyBzaSBzZSBlc3BlY2lmaWNhcm9uXG4gICAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5zdGFydFRpbWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgc3VidGl0bGVPcHRpb25zLnN0YXJ0VGltZSA9IGVsZW1lbnQuc3RhcnRUaW1lO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5lbmRUaW1lID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHN1YnRpdGxlT3B0aW9ucy5lbmRUaW1lID0gZWxlbWVudC5lbmRUaW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQcOxYWRpciBsb3Mgc3VidMOtdHVsb3NcbiAgICAgICAgY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQuYWRkU3VidGl0bGVzKHN1YnRpdGxlT3B0aW9ucyk7XG5cbiAgICAgICAgLy8gQWN0dWFsaXphciByZXNwdWVzdGEgc2lsZW5jaW9zYSAoc2UgbWFuZWphIGVuIG90cm8gbGFkbylcbiAgICAgICAgZWxlbWVudEFkZGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVsZW1lbnQudHlwZSA9PT0gXCJzZWdtZW50c1wiICYmIEFycmF5LmlzQXJyYXkoZWxlbWVudC5zZWdtZW50cykgJiYgZWxlbWVudC5zZWdtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIENvbmZpZ3VyYXIgbG9zIHNlZ21lbnRvcyBhIGVsaW1pbmFyXG4gICAgICAgIGNvbnN0IHNlZ21lbnRzID0gZWxlbWVudC5zZWdtZW50cy5tYXAoc2VnbWVudCA9PiAoe1xuICAgICAgICAgIHN0YXJ0VGltZTogdHlwZW9mIHNlZ21lbnQuc3RhcnRUaW1lID09PSAnbnVtYmVyJyA/IHNlZ21lbnQuc3RhcnRUaW1lIDogMCxcbiAgICAgICAgICBlbmRUaW1lOiB0eXBlb2Ygc2VnbWVudC5lbmRUaW1lID09PSAnbnVtYmVyJyA/IHNlZ21lbnQuZW5kVGltZSA6ICh0eXBlb2Ygc2VnbWVudC5zdGFydFRpbWUgPT09ICdudW1iZXInID8gc2VnbWVudC5zdGFydFRpbWUgKyA1IDogNSksXG4gICAgICAgIH0pKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhgRWxpbWluYW5kbyAke3NlZ21lbnRzLmxlbmd0aH0gc2VnbWVudG9zOmAsIHNlZ21lbnRzKTtcblxuICAgICAgICAvLyBFamVtcGxvIGRlIGZvcm1hdG8gZGUgc2VnbWVudG9zIGEgbW9zdHJhclxuICAgICAgICBjb25zdCBzZWdtZW50c0Zvcm1hdHRlZCA9IHNlZ21lbnRzLm1hcChzID0+IGAke3Muc3RhcnRUaW1lfS0ke3MuZW5kVGltZX1zYCkuam9pbignLCAnKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIEVqZWN1dGFyIGxhIGVsaW1pbmFjacOzbiBkZSBzZWdtZW50b3NcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb21tYW5kRXhlY3V0b3IuY3VycmVudC5yZW1vdmVTZWdtZW50cyhzZWdtZW50cyk7XG5cbiAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bSGUgZWxpbWluYWRvIGxvcyBzZWdtZW50b3Mgc29saWNpdGFkb3M6ICR7c2VnbWVudHNGb3JtYXR0ZWR9XWA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltObyBwdWRlIGVsaW1pbmFyIGxvcyBzZWdtZW50b3Mgc29saWNpdGFkb3MuIEFzZWfDunJhdGUgZGUgcXVlIGhheSB1biBlbGVtZW50byBzZWxlY2Npb25hZG8gZW4gbGEgdGltZWxpbmUuXWA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsZW1lbnRBZGRlZCA9IHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGVsaW1pbmFyIHNlZ21lbnRvczpcIiwgZXJyb3IpO1xuICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltFcnJvciBhbCBpbnRlbnRhciBlbGltaW5hciBsb3Mgc2VnbWVudG9zOiAke2Vycm9yLm1lc3NhZ2UgfHwgXCJFcnJvciBkZXNjb25vY2lkb1wifV1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlbGVtZW50LnR5cGUgPT09IFwiY29tcGFjdFwiKSB7XG4gICAgICAgIC8vIEVqZWN1dGFyIGxhIGNvbXBhY3RhY2nDs24gZGVsIHRpbWVsaW5lXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ29tcGFjdGFuZG8gdGltZWxpbmUgcG9yIHNvbGljaXR1ZCBkZWwgdXN1YXJpb1wiKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIEluaWNpYXIgbGEgY29tcGFjdGFjacOzblxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbW1hbmRFeGVjdXRvci5jdXJyZW50LmNvbXBhY3RUaW1lbGluZSgpO1xuXG4gICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW0hlIGNvbXBhY3RhZG8gZWwgdGltZWxpbmUgZWxpbWluYW5kbyBsb3MgZXNwYWNpb3MgdmFjw61vcyBlbnRyZSBlbGVtZW50b3NdYDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW05vIGZ1ZSBwb3NpYmxlIGNvbXBhY3RhciBlbCB0aW1lbGluZS4gUHVlZGUgcXVlIG5vIGhheWEgZWxlbWVudG9zIG8gZXNwYWNpb3MgdmFjw61vcyBxdWUgY29tcGFjdGFyXWA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsZW1lbnRBZGRlZCA9IHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNvbXBhY3RhciBlbCB0aW1lbGluZTpcIiwgZXJyb3IpO1xuICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltFcnJvciBhbCBpbnRlbnRhciBjb21wYWN0YXIgZWwgdGltZWxpbmU6ICR7ZXJyb3IubWVzc2FnZSB8fCBcIkVycm9yIGRlc2Nvbm9jaWRvXCJ9XWA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVsZW1lbnQudHlwZSA9PT0gXCJzbWFydFRyaW1cIikge1xuICAgICAgICAvLyBFamVjdXRhciBlbCByZWNvcnRlIGludGVsaWdlbnRlXG4gICAgICAgIGNvbnNvbGUubG9nKFwiSW5pY2lhbmRvIHJlY29ydGUgaW50ZWxpZ2VudGUgcG9yIHNvbGljaXR1ZCBkZWwgdXN1YXJpb1wiKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIE1vc3RyYXIgbWVuc2FqZSBkZSBhbsOhbGlzaXMgZW4gY3Vyc29cbiAgICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bQW5hbGl6YW5kbyBlbCB2aWRlbyBwYXJhIGlkZW50aWZpY2FyIGxhcyBwYXJ0ZXMgYSBlbGltaW5hci4uLl1gO1xuXG4gICAgICAgICAgLy8gSW5pY2lhciBlbCByZWNvcnRlIGludGVsaWdlbnRlXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQuc21hcnRUcmltKCk7XG5cbiAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bSGUgcmVhbGl6YWRvIHVuIHJlY29ydGUgaW50ZWxpZ2VudGUgZGVsIHZpZGVvLCBlbGltaW5hbmRvIGxhcyBwYXJ0ZXMgaW5uZWNlc2FyaWFzIHkgY29tcGFjdGFuZG8gZWwgdGltZWxpbmVdYDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW05vIGZ1ZSBwb3NpYmxlIHJlYWxpemFyIGVsIHJlY29ydGUgaW50ZWxpZ2VudGUuIFZlcmlmaWNhIHF1ZSBlbCB2aWRlbyB0ZW5nYSB1bmEgdHJhbnNjcmlwY2nDs25dYDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxlbWVudEFkZGVkID0gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgcmVhbGl6YXIgZWwgcmVjb3J0ZSBpbnRlbGlnZW50ZTpcIiwgZXJyb3IpO1xuICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltFcnJvciBhbCBpbnRlbnRhciByZWFsaXphciBlbCByZWNvcnRlIGludGVsaWdlbnRlOiAke2Vycm9yLm1lc3NhZ2UgfHwgXCJFcnJvciBkZXNjb25vY2lkb1wifV1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBwcm9jZXNhciBlbGVtZW50byBkZXRlY3RhZG86XCIsIGVycm9yKTtcbiAgICBmaW5hbFJlc3BvbnNlICs9IFwiXFxuXFxuW05vIHB1ZGUgcHJvY2VzYXIgbGEgc29saWNpdHVkIGRlYmlkbyBhIHVuIGVycm9yLl1cIjtcbiAgfVxuXG4gIHJldHVybiB7IGZpbmFsUmVzcG9uc2UsIGVsZW1lbnRBZGRlZCB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQUlDaGF0KCkge1xuICBjb25zdCBbbWVzc2FnZXMsIHNldE1lc3NhZ2VzXSA9IHVzZVN0YXRlPE1lc3NhZ2VbXT4oW10pO1xuICBjb25zdCBbbmV3TWVzc2FnZSwgc2V0TmV3TWVzc2FnZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBtZXNzYWdlc0VuZFJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IGNvbW1hbmRFeGVjdXRvciA9IHVzZVJlZjxWaWRlb0NvbW1hbmRFeGVjdXRvciB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc2VsZWN0ZWRJbWFnZUZpbGUsIHNldFNlbGVjdGVkSW1hZ2VGaWxlXSA9IHVzZVN0YXRlPEZpbGUgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3NlbGVjdGVkSW1hZ2VQcmV2aWV3LCBzZXRTZWxlY3RlZEltYWdlUHJldmlld10gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgZmlsZUlucHV0UmVmID0gdXNlUmVmPEhUTUxJbnB1dEVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBbbGFzdFVwbG9hZGVkSW1hZ2VVcmwsIHNldExhc3RVcGxvYWRlZEltYWdlVXJsXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbY3VycmVudEltYWdlVXJsRm9yVGhpc1JlcXVlc3QsIHNldEN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0XSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCB7IHRpbWVsaW5lIH0gPSB1c2VTdGF0ZU1hbmFnZXIoKTtcblxuICAvLyBSZWZlcmVuY2lhIGFsIHN0YXRlIG1hbmFnZXIgcGFyYSBtYW5pcHVsYXIgZWwgZWRpdG9yXG4gIGNvbnN0IHN0YXRlTWFuYWdlciA9IHVzZVN0YXRlTWFuYWdlcigpO1xuICBjb25zdCB7IHNjZW5lcywgcGxheWVyUmVmIH0gPSB1c2VEYXRhU3RhdGUoKTtcblxuICAvLyBTY3JvbGwgYWwgw7psdGltbyBtZW5zYWplXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbWVzc2FnZXNFbmRSZWYuY3VycmVudD8uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogXCJzbW9vdGhcIiB9KTtcbiAgfSwgW21lc3NhZ2VzXSk7XG5cbiAgLy8gQWN0dWFsaXphciBlbCBlamVjdXRvciBkZSBjb21hbmRvcyBjdWFuZG8gY2FtYmllIGVsIHN0YXRlTWFuYWdlclxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbW1hbmRFeGVjdXRvci5jdXJyZW50ID0gY3JlYXRlVmlkZW9Db21tYW5kRXhlY3V0b3Ioc3RhdGVNYW5hZ2VyKTtcbiAgfSwgW3N0YXRlTWFuYWdlcl0pO1xuXG4gIC8vIE1hbmVqYXIgY2xpY2sgZW4gZWwgYm90w7NuIGRlIGltYWdlblxuICBjb25zdCBoYW5kbGVJbWFnZUNsaWNrID0gKCkgPT4ge1xuICAgIGZpbGVJbnB1dFJlZi5jdXJyZW50Py5jbGljaygpO1xuICB9O1xuXG4gIC8vIE1hbmVqYXIgc2VsZWNjacOzbiBkZSBhcmNoaXZvIGRlIGltYWdlblxuICBjb25zdCBoYW5kbGVGaWxlQ2hhbmdlID0gKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzPy5bMF07XG4gICAgaWYgKGZpbGUpIHtcbiAgICAgIHNldFNlbGVjdGVkSW1hZ2VGaWxlKGZpbGUpO1xuICAgICAgY29uc3QgcHJldmlld1VybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7XG4gICAgICBzZXRTZWxlY3RlZEltYWdlUHJldmlldyhwcmV2aWV3VXJsKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gRWxpbWluYXIgbGEgaW1hZ2VuIHNlbGVjY2lvbmFkYVxuICBjb25zdCBoYW5kbGVSZW1vdmVJbWFnZSA9ICgpID0+IHtcbiAgICBzZXRTZWxlY3RlZEltYWdlRmlsZShudWxsKTtcbiAgICBzZXRTZWxlY3RlZEltYWdlUHJldmlldyhudWxsKTtcbiAgICBpZiAoZmlsZUlucHV0UmVmLmN1cnJlbnQpIGZpbGVJbnB1dFJlZi5jdXJyZW50LnZhbHVlID0gJyc7XG4gIH07XG5cbiAgLy8gU3ViaXIgaW1hZ2VuIGFsIHNlcnZpZG9yXG4gIGNvbnN0IHVwbG9hZEltYWdlID0gYXN5bmMgKGZpbGU6IEZpbGUpOiBQcm9taXNlPHN0cmluZz4gPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBPYnRlbmVyIFVSTCBmaXJtYWRhIHBhcmEgc3ViaXIgbGEgaW1hZ2VuXG4gICAgICBjb25zdCB1cGxvYWREZXRhaWxzID0gYXdhaXQgY3JlYXRlVXBsb2Fkc0RldGFpbHMoZmlsZS5uYW1lLCBmaWxlKTtcblxuICAgICAgLy8gU2kgbm8gZXMgdW4gbW9jayBsb2NhbCwgcHJvY2VkZXIgY29uIGxhIGNhcmdhXG4gICAgICBpZiAodXBsb2FkRGV0YWlscy51cGxvYWRVcmwgIT09IFwibG9jYWwtbW9ja1wiKSB7XG4gICAgICAgIC8vIFN1YmlyIGxhIGltYWdlblxuICAgICAgICBhd2FpdCBmZXRjaCh1cGxvYWREZXRhaWxzLnVwbG9hZFVybCwge1xuICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgYm9keTogZmlsZSxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogZmlsZS50eXBlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8gTm8gc2UgbmVjZXNpdGEgaGFjZXIgZmV0Y2ggc2kgZXMgdW4gbW9jayBsb2NhbCAoZGF0YVVSTClcblxuICAgICAgLy8gUmV0b3JuYXIgbGEgVVJMIHDDumJsaWNhIGRlIGxhIGltYWdlblxuICAgICAgcmV0dXJuIHVwbG9hZERldGFpbHMudXJsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgc3ViaXIgbGEgaW1hZ2VuOlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBzZSBwdWRvIHN1YmlyIGxhIGltYWdlbi4gSW50w6ludGFsbyBkZSBudWV2by5cIik7XG4gICAgfVxuICB9O1xuXG4gIC8vIEZ1bmNpw7NuIHBhcmEgZW52aWFyIG1lbnNhamVcbiAgY29uc3QgaGFuZGxlU2VuZE1lc3NhZ2UgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCghbmV3TWVzc2FnZS50cmltKCkgJiYgIXNlbGVjdGVkSW1hZ2VGaWxlKSB8fCBsb2FkaW5nKSByZXR1cm47XG5cbiAgICBsZXQgdXNlck1lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgY29udGVudDogbmV3TWVzc2FnZSxcbiAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgIH07XG5cbiAgICBsZXQgdXBsb2FkZWRJbWFnZVVybCA9IFwiXCI7XG5cbiAgICAvLyBTaSBoYXkgdW5hIGltYWdlbiBwYXJhIHN1YmlyLCBwcm9jZXNhcmxhXG4gICAgaWYgKHNlbGVjdGVkSW1hZ2VGaWxlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB1cGxvYWRlZEltYWdlVXJsID0gYXdhaXQgdXBsb2FkSW1hZ2Uoc2VsZWN0ZWRJbWFnZUZpbGUpO1xuICAgICAgICB1c2VyTWVzc2FnZS5pbWFnZVVybCA9IHVwbG9hZGVkSW1hZ2VVcmw7XG4gICAgICAgIC8vIEd1YXJkYXIgbGEgVVJMIGRlIGxhIGltYWdlbiBwYXJhIHBvc2libGVzIHJlZmVyZW5jaWFzIGZ1dHVyYXNcbiAgICAgICAgc2V0TGFzdFVwbG9hZGVkSW1hZ2VVcmwodXBsb2FkZWRJbWFnZVVybCk7XG4gICAgICAgIC8vIEltcG9ydGFudGU6IEd1YXJkYXIgbGEgVVJMIGFjdHVhbCBwYXJhIGVzdGEgc29saWNpdHVkIGVzcGVjw61maWNhXG4gICAgICAgIHNldEN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0KHVwbG9hZGVkSW1hZ2VVcmwpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkltYWdlbiBzdWJpZGEgZXhpdG9zYW1lbnRlOlwiLCB1cGxvYWRlZEltYWdlVXJsLnN1YnN0cmluZygwLCAxMDApICsgXCIuLi5cIik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbGEgc3ViaWRhIGRlIGltYWdlbjpcIiwgZXJyb3IpO1xuICAgICAgICBzZXRNZXNzYWdlcygocHJldikgPT4gW1xuICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6IChEYXRlLm5vdygpICsgMSkudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IFwiRXJyb3IgYWwgc3ViaXIgbGEgaW1hZ2VuLiBQb3IgZmF2b3IsIGludMOpbnRhbG8gZGUgbnVldm8uIERldGFsbGVzOiBcIiArXG4gICAgICAgICAgICAgIChlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiRXJyb3IgZGVzY29ub2NpZG9cIiksXG4gICAgICAgICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEHDsWFkaXIgbWVuc2FqZSBkZWwgdXN1YXJpb1xuICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbLi4ucHJldiwgdXNlck1lc3NhZ2VdKTtcbiAgICBzZXROZXdNZXNzYWdlKFwiXCIpO1xuICAgIHNldFNlbGVjdGVkSW1hZ2VGaWxlKG51bGwpO1xuICAgIHNldFNlbGVjdGVkSW1hZ2VQcmV2aWV3KG51bGwpO1xuICAgIGlmIChmaWxlSW5wdXRSZWYuY3VycmVudCkgZmlsZUlucHV0UmVmLmN1cnJlbnQudmFsdWUgPSAnJztcbiAgICBzZXRMb2FkaW5nKHRydWUpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEVudmlhciBhIGxhIEFQSSBwYXJhIHByb2Nlc2FtaWVudG8gZW4gbGVuZ3VhamUgbmF0dXJhbFxuICAgICAgY29uc3QgYXBpTWVzc2FnZXMgPSBtZXNzYWdlc1xuICAgICAgICAuY29uY2F0KHVzZXJNZXNzYWdlKVxuICAgICAgICAubWFwKG1zZyA9PiB7XG4gICAgICAgICAgLy8gU2kgZWwgbWVuc2FqZSB0aWVuZSB1bmEgaW1hZ2VuLCBjcmVhciB1biBmb3JtYXRvIGVzcGVjaWFsIHBhcmEgZWwgY29udGVuaWRvXG4gICAgICAgICAgaWYgKG1zZy5pbWFnZVVybCkge1xuICAgICAgICAgICAgLy8gU2kgZXMgdW5hIFVSTCBkZSBkYXRvcyAoY29taWVuemEgY29uIGRhdGE6KSwgdXNhciB1biBtYXJjYWRvciBlc3BlY2lhbFxuICAgICAgICAgICAgY29uc3QgaXNEYXRhVXJsID0gbXNnLmltYWdlVXJsLnN0YXJ0c1dpdGgoJ2RhdGE6Jyk7XG4gICAgICAgICAgICBjb25zdCBpbWFnZVVybFRvU2VuZCA9IGlzRGF0YVVybFxuICAgICAgICAgICAgICA/ICdbSU1BR0VOX0FESlVOVEFdJ1xuICAgICAgICAgICAgICA6IGBbSU1BR0VOOiAke21zZy5pbWFnZVVybH1dYDtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgcm9sZTogbXNnLnJvbGUsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IGAke21zZy5jb250ZW50IHx8ICcnfSAke2ltYWdlVXJsVG9TZW5kfWBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvbGU6IG1zZy5yb2xlLFxuICAgICAgICAgICAgY29udGVudDogbXNnLmNvbnRlbnRcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgLy8gQcOxYWRpciBjb250ZXh0byBkZWwgZWRpdG9yIHBhcmEgbGEgSUEgZXh0ZXJuYVxuICAgICAgY29uc3QgY29udGV4dE1lc3NhZ2UgPSB7XG4gICAgICAgIHJvbGU6ICdzeXN0ZW0nLFxuICAgICAgICBjb250ZW50OiBgXG5Db250ZXh0byBhY3R1YWwgZGVsIGVkaXRvciBkZSB2aWRlbzpcbi0gUG9zaWNpw7NuIGFjdHVhbCAoc2VndW5kb3MpOiAke3BsYXllclJlZj8uY3VycmVudD8uZ2V0Q3VycmVudFRpbWUgPyBNYXRoLmZsb29yKChwbGF5ZXJSZWYuY3VycmVudC5nZXRDdXJyZW50VGltZSgpIHx8IDApICogMTAwKSAvIDEwMCA6IDB9XG4tIER1cmFjacOzbiBkZWwgcHJveWVjdG8gKHNlZ3VuZG9zKTogJHt0aW1lbGluZT8uZHVyYXRpb24gPyBNYXRoLmZsb29yKHRpbWVsaW5lLmR1cmF0aW9uIC8gMTAwMCkgOiAwfVxuLSBOw7ptZXJvIGRlIGVzY2VuYXM6ICR7c2NlbmVzPy5sZW5ndGggfHwgMH1cbi0gTsO6bWVybyBkZSBlbGVtZW50b3MgZW4gZWwgdGltZWxpbmU6ICR7KHRpbWVsaW5lPy5jYW52YXM/LmdldE9iamVjdHM/LigpIHx8IFtdKS5sZW5ndGggLSAxID4gMCA/ICh0aW1lbGluZT8uY2FudmFzPy5nZXRPYmplY3RzPy4oKSB8fCBbXSkubGVuZ3RoIC0gMSA6IDB9XG4ke2xhc3RVcGxvYWRlZEltYWdlVXJsID8gYC0gw5psdGltYSBpbWFnZW4gY29tcGFydGlkYSBwb3IgZWwgdXN1YXJpbyBkaXNwb25pYmxlIHBhcmEgdXNhcmAgOiAnJ31cblxuRWwgdXN1YXJpbyBwdWVkZSBleHByZXNhciBlbiBsZW5ndWFqZSBuYXR1cmFsIGxhIG5lY2VzaWRhZCBkZSBhZ3JlZ2FyIGVsZW1lbnRvcyBhbCB2aWRlby5cbkVqZW1wbG9zOlxuLSBcIlBvbiB1biB0w610dWxvIHF1ZSBkaWdhICdCaWVudmVuaWRvcycgYWwgaW5pY2lvXCJcbi0gXCJRdWllcm8gdW4gdGV4dG8gYmxhbmNvIHF1ZSBkaWdhICdGaW4nIGFsIGZpbmFsIGRlbCB2aWRlb1wiXG4tIFwiTmVjZXNpdG8gdW5hIGltYWdlbiBlbiBlbCBzZWd1bmRvIDEwXCJcbi0gXCJDb2xvY2EgdW4gdmlkZW8gZGUgaW50cm9kdWNjacOzbiBhbCBwcmluY2lwaW9cIlxuXG5TaSBlbCB1c3VhcmlvIGFkanVudGEgdW5hIGltYWdlbiBlbiBlbCBtZW5zYWplLCBsYSBVUkwgZXN0YXLDoSBlbiBmb3JtYXRvIFtJTUFHRU46IHVybF9kZV9sYV9pbWFnZW5dLlxuRGViZXMgZGV0ZWN0YXIgc2kgcXVpZXJlIGFncmVnYXIgZXN0YSBpbWFnZW4gYWwgdmlkZW8geSBlbiBxdcOpIG1vbWVudG8gdGVtcG9yYWwuXG5gXG4gICAgICB9O1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2FpJywge1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBtZXNzYWdlczogW2NvbnRleHRNZXNzYWdlLCAuLi5hcGlNZXNzYWdlc10sXG4gICAgICAgICAgICAvLyBVc2FyIGxhIFVSTCBkZSBsYSBpbWFnZW4gYWN0dWFsIHBhcmEgZXN0YSBzb2xpY2l0dWQgc2kgZXhpc3RlLFxuICAgICAgICAgICAgLy8gZGUgbG8gY29udHJhcmlvIHVzYXIgbGEgw7psdGltYSBVUkwgZ3VhcmRhZGFcbiAgICAgICAgICAgIGxhc3RJbWFnZVVybDogY3VycmVudEltYWdlVXJsRm9yVGhpc1JlcXVlc3QgfHwgbGFzdFVwbG9hZGVkSW1hZ2VVcmwgfHwgXCJcIlxuICAgICAgICAgIH0pLFxuICAgICAgICAgIC8vIEFncmVnYXIgdGltZW91dCBwYXJhIGV2aXRhciBlc3BlcmFzIGluZmluaXRhc1xuICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCgxNTAwMCkgLy8gMTUgc2VndW5kb3MgbcOheGltb1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBkZSBBUEk6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAgIC8vIEFzZWd1cmFyc2UgZGUgcXVlIGRhdGEubWVzc2FnZS5jb250ZW50IGV4aXN0ZVxuICAgICAgICBjb25zdCBhaVJlc3BvbnNlID0gZGF0YT8ubWVzc2FnZT8uY29udGVudCB8fCBcIkxvIHNpZW50bywgbm8gcHVkZSBlbnRlbmRlciB0dSBzb2xpY2l0dWQuXCI7XG5cbiAgICAgICAgLy8gT2J0ZW5lciBsb3MgZGF0b3MgZGVsIGVsZW1lbnRvIHNpIGV4aXN0ZW4gKGNvbiB2ZXJpZmljYWNpw7NuIHNlZ3VyYSlcbiAgICAgICAgY29uc3QgZWxlbWVudERhdGEgPSBkYXRhPy5lbGVtZW50RGF0YTtcblxuICAgICAgICAvLyBWYXJpYWJsZSBwYXJhIGxhIHJlc3B1ZXN0YSBmaW5hbFxuICAgICAgICBsZXQgZmluYWxSZXNwb25zZSA9IGFpUmVzcG9uc2U7XG4gICAgICAgIC8vIENyZWFyIHVuYSByZWZlcmVuY2lhIGEgbGEgcmVzcHVlc3RhIGZpbmFsIHBhcmEgcXVlIHNlYSBhY2Nlc2libGUgZW4gbGEgZnVuY2nDs24gcHJvY2VzYWRvcmFcbiAgICAgICAgY29uc3QgZmluYWxSZXNwb25zZVJlZiA9IHsgY3VycmVudDogZmluYWxSZXNwb25zZSB9O1xuICAgICAgICBsZXQgZWxlbWVudEFkZGVkID0gZmFsc2U7XG5cbiAgICAgICAgLy8gVXNhciBsYSBmdW5jacOzbiBkZSBwcm9jZXNhbWllbnRvIGRlIGVsZW1lbnRvc1xuICAgICAgICBjb25zdCBwcm9jZXNzUmVzdWx0ID0gYXdhaXQgcHJvY2Vzc0RldGVjdGVkRWxlbWVudChcbiAgICAgICAgICBlbGVtZW50RGF0YSxcbiAgICAgICAgICBjb21tYW5kRXhlY3V0b3IsXG4gICAgICAgICAgZmluYWxSZXNwb25zZVJlZixcbiAgICAgICAgICB0aW1lbGluZSxcbiAgICAgICAgICBsYXN0VXBsb2FkZWRJbWFnZVVybCxcbiAgICAgICAgICBjdXJyZW50SW1hZ2VVcmxGb3JUaGlzUmVxdWVzdFxuICAgICAgICApO1xuXG4gICAgICAgIGZpbmFsUmVzcG9uc2UgPSBwcm9jZXNzUmVzdWx0LmZpbmFsUmVzcG9uc2U7XG4gICAgICAgIGVsZW1lbnRBZGRlZCA9IHByb2Nlc3NSZXN1bHQuZWxlbWVudEFkZGVkO1xuXG4gICAgICAgIGNvbnN0IGFzc2lzdGFudE1lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICAgICAgaWQ6IChEYXRlLm5vdygpICsgMSkudG9TdHJpbmcoKSxcbiAgICAgICAgICBjb250ZW50OiBmaW5hbFJlc3BvbnNlLFxuICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICB9O1xuXG4gICAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbLi4ucHJldiwgYXNzaXN0YW50TWVzc2FnZV0pO1xuICAgICAgfSBjYXRjaCAoYXBpRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIGxhIGNvbXVuaWNhY2nDs24gY29uIGxhIEFQSTpcIiwgYXBpRXJyb3IpO1xuXG4gICAgICAgIC8vIE1lbnNhamUgZGUgZXJyb3IgZXNwZWPDrWZpY28gZGUgQVBJXG4gICAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbXG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogKERhdGUubm93KCkgKyAxKS50b1N0cmluZygpLFxuICAgICAgICAgICAgY29udGVudDogXCJMbyBzaWVudG8sIGhhIG9jdXJyaWRvIHVuIGVycm9yIGFsIGNvbXVuaWNhcnNlIGNvbiBlbCBzZXJ2aWNpbyBkZSBJQS4gUG9yIGZhdm9yLCBpbnRlbnRhIGRlIG51ZXZvIGVuIHVub3MgbW9tZW50b3MuXCIsXG4gICAgICAgICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgcHJvY2VzYXIgZWwgbWVuc2FqZTpcIiwgZXJyb3IpO1xuXG4gICAgICAvLyBEZXRlcm1pbmFyIG1lbnNhamUgZGUgZXJyb3IgYXByb3BpYWRvXG4gICAgICBsZXQgZXJyb3JNZXNzYWdlID0gXCJMbyBzaWVudG8sIGhhIG9jdXJyaWRvIHVuIGVycm9yIGFsIHByb2Nlc2FyIHR1IG1lbnNhamUuXCI7XG5cbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwidGltZW91dFwiKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwiYWJvcnRcIikpIHtcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIkxhIHNvbGljaXR1ZCBoYSB0YXJkYWRvIGRlbWFzaWFkby4gUHJ1ZWJhIGNvbiB1biBtZW5zYWplIG3DoXMgY29ydG8uXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhcIm5ldHdvcmtcIikgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhcImZldGNoXCIpKSB7XG4gICAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJQYXJlY2UgcXVlIGhheSB1biBwcm9ibGVtYSBkZSBjb25leGnDs24uIFZlcmlmaWNhIHR1IGNvbmV4acOzbiBhIGludGVybmV0IGUgaW50ZW50YSBkZSBudWV2by5cIjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBNZW5zYWplIGRlIGVycm9yXG4gICAgICBzZXRNZXNzYWdlcygocHJldikgPT4gW1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6IChEYXRlLm5vdygpICsgMSkudG9TdHJpbmcoKSxcbiAgICAgICAgICBjb250ZW50OiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIH0sXG4gICAgICBdKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtZnVsbCBmbGV4LWNvbCBiZy1zaWRlYmFyIGJvcmRlci1sIGJvcmRlci1ib3JkZXIvODBcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctWyMxYTE2MjVdIHAtMyBib3JkZXItYiBib3JkZXItYm9yZGVyLzgwXCI+XG4gICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtcHVycGxlLTIwMFwiPkFzaXN0ZW50ZSBkZSBXYW5kczwvaDI+XG4gICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1wdXJwbGUtMjAwLzcwXCI+XG4gICAgICAgICAgVGUgYXl1ZG8gYSBlZGl0YXIgdHUgdmlkZW8uIMK/UXXDqSBuZWNlc2l0YXM/XG4gICAgICAgIDwvcD5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7Lyogw4FyZWEgZGUgbWVuc2FqZXMgY29uIHNjcm9sbCAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG92ZXJmbG93LXktYXV0byBwLTQgc3BhY2UteS00XCI+XG4gICAgICAgIHttZXNzYWdlcy5tYXAoKG1lc3NhZ2UpID0+IChcbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBrZXk9e21lc3NhZ2UuaWR9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4IGZsZXgtY29sICR7XG4gICAgICAgICAgICAgIG1lc3NhZ2Uucm9sZSA9PT0gXCJhc3Npc3RhbnRcIiA/IFwiaXRlbXMtc3RhcnRcIiA6IFwiaXRlbXMtZW5kXCJcbiAgICAgICAgICAgIH1gfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgbWF4LXctWzgwJV0gcm91bmRlZC1sZyBwLTMgJHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJvbGUgPT09IFwiYXNzaXN0YW50XCJcbiAgICAgICAgICAgICAgICAgID8gXCJiZy1zZWNvbmRhcnkgdGV4dC1zZWNvbmRhcnktZm9yZWdyb3VuZFwiXG4gICAgICAgICAgICAgICAgICA6IFwiYmctcHJpbWFyeSB0ZXh0LXByaW1hcnktZm9yZWdyb3VuZFwiXG4gICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7bWVzc2FnZS5jb250ZW50LnNwbGl0KFwiXFxuXCIpLm1hcCgodGV4dCwgaSkgPT4gKFxuICAgICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudCBrZXk9e2l9PlxuICAgICAgICAgICAgICAgICAge3RleHR9XG4gICAgICAgICAgICAgICAgICB7aSAhPT0gbWVzc2FnZS5jb250ZW50LnNwbGl0KFwiXFxuXCIpLmxlbmd0aCAtIDEgJiYgPGJyIC8+fVxuICAgICAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICB7bWVzc2FnZS5pbWFnZVVybCAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yXCI+XG4gICAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICAgIHNyYz17bWVzc2FnZS5pbWFnZVVybH1cbiAgICAgICAgICAgICAgICAgICAgYWx0PVwiVXBsb2FkZWRcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtYXgtdy1mdWxsIHJvdW5kZWRcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LW11dGVkLWZvcmVncm91bmQgbXQtMVwiPlxuICAgICAgICAgICAgICB7bWVzc2FnZS50aW1lc3RhbXAudG9Mb2NhbGVUaW1lU3RyaW5nKFtdLCB7XG4gICAgICAgICAgICAgICAgaG91cjogXCIyLWRpZ2l0XCIsXG4gICAgICAgICAgICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkpfVxuICAgICAgICA8ZGl2IHJlZj17bWVzc2FnZXNFbmRSZWZ9IC8+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIFpvbmEgcGFyYSBtb3N0cmFyIGxhIGltYWdlbiBzZWxlY2Npb25hZGEgKi99XG4gICAgICB7c2VsZWN0ZWRJbWFnZVByZXZpZXcgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtMiBib3JkZXItdCBib3JkZXItYm9yZGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSBpbmxpbmUtYmxvY2tcIj5cbiAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgc3JjPXtzZWxlY3RlZEltYWdlUHJldmlld31cbiAgICAgICAgICAgICAgYWx0PVwiU2VsZWN0ZWRcIlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTE2IHctYXV0byBvYmplY3QtY29udGFpbiByb3VuZGVkXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVJlbW92ZUltYWdlfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSAtdG9wLTIgLXJpZ2h0LTIgYmctemluYy03MDAgdGV4dC16aW5jLTIwMCByb3VuZGVkLWZ1bGwgcC0wLjVcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8WCBzaXplPXsxNH0gLz5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBJbnB1dCBwYXJhIGVzY3JpYmlyIG1lbnNhamVzICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTIgYm9yZGVyLXQgYm9yZGVyLWJvcmRlciBmbGV4XCI+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgICByZWY9e2ZpbGVJbnB1dFJlZn1cbiAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlRmlsZUNoYW5nZX1cbiAgICAgICAgICBhY2NlcHQ9XCJpbWFnZS8qXCJcbiAgICAgICAgICBjbGFzc05hbWU9XCJoaWRkZW5cIlxuICAgICAgICAvPlxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgc2l6ZT1cImljb25cIlxuICAgICAgICAgIHZhcmlhbnQ9XCJnaG9zdFwiXG4gICAgICAgICAgb25DbGljaz17aGFuZGxlSW1hZ2VDbGlja31cbiAgICAgICAgICBjbGFzc05hbWU9XCJtci0xXCJcbiAgICAgICAgICB0aXRsZT1cIkHDsWFkaXIgaW1hZ2VuXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxJbWFnZUljb24gY2xhc3NOYW1lPVwiaC01IHctNVwiIC8+XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8SW5wdXRcbiAgICAgICAgICB2YWx1ZT17bmV3TWVzc2FnZX1cbiAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldE5ld01lc3NhZ2UoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgIG9uS2V5RG93bj17KGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgaGFuZGxlU2VuZE1lc3NhZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9fVxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRXNjcmliZSB0dSBtZW5zYWplLi4uXCJcbiAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTEgYmctYmFja2dyb3VuZFwiXG4gICAgICAgICAgZGlzYWJsZWQ9e2xvYWRpbmd9XG4gICAgICAgIC8+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICBzaXplPVwiaWNvblwiXG4gICAgICAgICAgb25DbGljaz17aGFuZGxlU2VuZE1lc3NhZ2V9XG4gICAgICAgICAgZGlzYWJsZWQ9e2xvYWRpbmcgfHwgKG5ld01lc3NhZ2UudHJpbSgpID09PSBcIlwiICYmICFzZWxlY3RlZEltYWdlRmlsZSl9XG4gICAgICAgICAgY2xhc3NOYW1lPVwibWwtMVwiXG4gICAgICAgID5cbiAgICAgICAgICB7bG9hZGluZyA/IChcbiAgICAgICAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cImgtNSB3LTUgYW5pbWF0ZS1zcGluXCIgLz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPFNlbmQgY2xhc3NOYW1lPVwiaC01IHctNVwiIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9CdXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZVJlZiIsInVzZUVmZmVjdCIsIkJ1dHRvbiIsIklucHV0IiwiU2VuZCIsIkxvYWRlcjIiLCJJbWFnZUljb24iLCJYIiwidXNlRGF0YVN0YXRlIiwidXNlU3RhdGVNYW5hZ2VyIiwiY3JlYXRlVmlkZW9Db21tYW5kRXhlY3V0b3IiLCJjcmVhdGVVcGxvYWRzRGV0YWlscyIsImV4dHJhY3RJbWFnZVRpbWVzRnJvbU1lc3NhZ2UiLCJtZXNzYWdlQ29udGVudCIsInN0YXJ0VGltZSIsImVuZFRpbWUiLCJzdGFydFRpbWVQYXR0ZXJucyIsImVuZFRpbWVQYXR0ZXJucyIsImlzQXRTdGFydCIsInRlc3QiLCJpc0F0RW5kIiwicGF0dGVybiIsIm1hdGNoIiwidG9TdHJpbmciLCJpbmNsdWRlcyIsInBhcnNlSW50IiwicHJvY2Vzc0RldGVjdGVkRWxlbWVudCIsImVsZW1lbnREYXRhIiwiY29tbWFuZEV4ZWN1dG9yIiwiZmluYWxSZXNwb25zZVJlZiIsInRpbWVsaW5lIiwibGFzdFVwbG9hZGVkSW1hZ2VVcmwiLCJjdXJyZW50SW1hZ2VVcmxGb3JUaGlzUmVxdWVzdCIsImVsZW1lbnRBZGRlZCIsImZpbmFsUmVzcG9uc2UiLCJjdXJyZW50IiwiZGV0ZWN0ZWQiLCJjb25maWRlbmNlIiwiZWxlbWVudCIsInR5cGUiLCJjb250ZW50IiwidGV4dE9wdGlvbnMiLCJjb2xvciIsInRvTG93ZXJDYXNlIiwiYWRkVGV4dCIsImltYWdlT3B0aW9ucyIsInBvc2l0aW9uIiwieCIsInkiLCJjb25zb2xlIiwibG9nIiwidmlkZW9EdXJhdGlvbiIsImR1cmF0aW9uIiwiTWF0aCIsImZsb29yIiwibWF4IiwiaXNHZW5lcmljVXJsIiwidXJsIiwiaXNMb2NhbEltYWdlIiwic3RhcnRzV2l0aCIsImltYWdlVXJsIiwiYWRkSW1hZ2UiLCJ2aWRlb09wdGlvbnMiLCJ2aWRlb1VybCIsImFkZFZpZGVvIiwic3VidGl0bGVPcHRpb25zIiwiZ3JvdXBXb3JkcyIsInVuZGVmaW5lZCIsImFkZFN1YnRpdGxlcyIsIkFycmF5IiwiaXNBcnJheSIsInNlZ21lbnRzIiwibGVuZ3RoIiwibWFwIiwic2VnbWVudCIsInNlZ21lbnRzRm9ybWF0dGVkIiwicyIsImpvaW4iLCJyZXN1bHQiLCJyZW1vdmVTZWdtZW50cyIsImVycm9yIiwibWVzc2FnZSIsImNvbXBhY3RUaW1lbGluZSIsInNtYXJ0VHJpbSIsIkFJQ2hhdCIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJuZXdNZXNzYWdlIiwic2V0TmV3TWVzc2FnZSIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwibWVzc2FnZXNFbmRSZWYiLCJzZWxlY3RlZEltYWdlRmlsZSIsInNldFNlbGVjdGVkSW1hZ2VGaWxlIiwic2VsZWN0ZWRJbWFnZVByZXZpZXciLCJzZXRTZWxlY3RlZEltYWdlUHJldmlldyIsImZpbGVJbnB1dFJlZiIsInNldExhc3RVcGxvYWRlZEltYWdlVXJsIiwic2V0Q3VycmVudEltYWdlVXJsRm9yVGhpc1JlcXVlc3QiLCJzdGF0ZU1hbmFnZXIiLCJzY2VuZXMiLCJwbGF5ZXJSZWYiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImNsaWNrIiwiaGFuZGxlRmlsZUNoYW5nZSIsImUiLCJmaWxlIiwidGFyZ2V0IiwiZmlsZXMiLCJwcmV2aWV3VXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiaGFuZGxlUmVtb3ZlSW1hZ2UiLCJ2YWx1ZSIsInVwbG9hZEltYWdlIiwidXBsb2FkRGV0YWlscyIsIm5hbWUiLCJ1cGxvYWRVcmwiLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJoZWFkZXJzIiwiRXJyb3IiLCJoYW5kbGVTZW5kTWVzc2FnZSIsInRyaW0iLCJ1c2VyTWVzc2FnZSIsImlkIiwiRGF0ZSIsIm5vdyIsInJvbGUiLCJ0aW1lc3RhbXAiLCJ1cGxvYWRlZEltYWdlVXJsIiwic3Vic3RyaW5nIiwicHJldiIsImFwaU1lc3NhZ2VzIiwiY29uY2F0IiwibXNnIiwiaXNEYXRhVXJsIiwiaW1hZ2VVcmxUb1NlbmQiLCJjb250ZXh0TWVzc2FnZSIsImdldEN1cnJlbnRUaW1lIiwiY2FudmFzIiwiZ2V0T2JqZWN0cyIsImRhdGEiLCJyZXNwb25zZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJsYXN0SW1hZ2VVcmwiLCJzaWduYWwiLCJBYm9ydFNpZ25hbCIsInRpbWVvdXQiLCJvayIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJqc29uIiwiYWlSZXNwb25zZSIsInByb2Nlc3NSZXN1bHQiLCJhc3Npc3RhbnRNZXNzYWdlIiwiYXBpRXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJkaXYiLCJjbGFzc05hbWUiLCJoMiIsInAiLCJzcGxpdCIsInRleHQiLCJpIiwiUmVhY3QiLCJGcmFnbWVudCIsImJyIiwiaW1nIiwic3JjIiwiYWx0Iiwic3BhbiIsInRvTG9jYWxlVGltZVN0cmluZyIsImhvdXIiLCJtaW51dGUiLCJyZWYiLCJidXR0b24iLCJvbkNsaWNrIiwic2l6ZSIsImlucHV0Iiwib25DaGFuZ2UiLCJhY2NlcHQiLCJ2YXJpYW50IiwidGl0bGUiLCJvbktleURvd24iLCJrZXkiLCJzaGlmdEtleSIsInByZXZlbnREZWZhdWx0IiwicGxhY2Vob2xkZXIiLCJkaXNhYmxlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/ai-chat/index.tsx\n"));

/***/ })

});
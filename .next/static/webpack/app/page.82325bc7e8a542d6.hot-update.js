"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./components/ai-chat/index.tsx":
/*!**************************************!*\
  !*** ./components/ai-chat/index.tsx ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ AIChat; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./components/ui/button.tsx\");\n/* harmony import */ var _components_ui_input__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/ui/input */ \"(app-pages-browser)/./components/ui/input.tsx\");\n/* harmony import */ var _components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/ui/scroll-area */ \"(app-pages-browser)/./components/ui/scroll-area.tsx\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/sparkles.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/refresh-cw.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/image.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/send.js\");\n/* harmony import */ var _features_editor_store_use_data_state__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/features/editor/store/use-data-state */ \"(app-pages-browser)/./features/editor/store/use-data-state.ts\");\n/* harmony import */ var _features_editor_hooks_state_manager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/features/editor/hooks/state-manager */ \"(app-pages-browser)/./features/editor/hooks/state-manager.tsx\");\n/* harmony import */ var _ai_video_commands__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ai-video-commands */ \"(app-pages-browser)/./components/ai-chat/ai-video-commands.ts\");\n/* harmony import */ var _utils_upload__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/utils/upload */ \"(app-pages-browser)/./utils/upload.ts\");\n/* harmony import */ var _features_editor_services_command_executor_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/features/editor/services/command-executor-service */ \"(app-pages-browser)/./features/editor/services/command-executor-service.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n// Función para extraer tiempos de inicio y fin de una imagen a partir del mensaje\nfunction extractImageTimesFromMessage(messageContent) {\n    let startTime = 0;\n    let endTime = 5;\n    if (!messageContent) return {\n        startTime,\n        endTime\n    };\n    // Buscar referencias al tiempo inicial\n    const startTimePatterns = [\n        /en el segundo (\\d+)/i,\n        /desde el segundo (\\d+)/i,\n        /a partir del segundo (\\d+)/i,\n        /comenzando en el segundo (\\d+)/i,\n        /desde el minuto (\\d+)/i,\n        /en el minuto (\\d+)/i,\n        /entre los segundos (\\d+) y/i,\n        /del segundo (\\d+) al/i,\n        /empezando en (\\d+)/i,\n        /segundo (\\d+)/i,\n        /en (\\d+) segundos/i,\n        /en el (\\d+)/i\n    ];\n    // Buscar referencias al tiempo final\n    const endTimePatterns = [\n        /hasta el segundo (\\d+)/i,\n        /al segundo (\\d+)/i,\n        /terminando en el segundo (\\d+)/i,\n        /hasta el minuto (\\d+)/i,\n        /entre los segundos \\d+ y (\\d+)/i,\n        /del segundo \\d+ al (\\d+)/i,\n        /por (\\d+) segundos/i,\n        /durante (\\d+) segundos/i\n    ];\n    // Buscar palabras clave especiales\n    const isAtStart = /\\b(al inicio|al principio|al comienzo)\\b/i.test(messageContent);\n    const isAtEnd = /\\b(al final|al término|al acabar)\\b/i.test(messageContent);\n    // Procesar patrones de tiempo inicial\n    for (const pattern of startTimePatterns){\n        const match = messageContent.match(pattern);\n        if (match && match[1]) {\n            // Si es referencia a minutos, convertir a segundos\n            startTime = pattern.toString().includes(\"minuto\") ? parseInt(match[1]) * 60 : parseInt(match[1]);\n            break;\n        }\n    }\n    // Procesar patrones de tiempo final\n    for (const pattern of endTimePatterns){\n        const match = messageContent.match(pattern);\n        if (match && match[1]) {\n            if (pattern.toString().includes(\"por\") || pattern.toString().includes(\"durante\")) {\n                // Es una duración relativa, sumar al tiempo inicial\n                endTime = startTime + parseInt(match[1]);\n            } else {\n                // Es un tiempo absoluto\n                endTime = pattern.toString().includes(\"minuto\") ? parseInt(match[1]) * 60 : parseInt(match[1]);\n            }\n            break;\n        }\n    }\n    // Si se menciona \"al inicio\", establecer tiempo a 0\n    if (isAtStart) {\n        startTime = 0;\n        endTime = 5; // Por defecto 5 segundos de duración\n    }\n    // Si se menciona \"al final\", establecer valores relativos al final\n    // Nota: El valor real se ajustará en el cliente según la duración\n    if (isAtEnd) {\n        startTime = -1; // Código especial para \"final - 5 segundos\"\n        endTime = -1; // Código especial para \"final\"\n    }\n    // Si no se detectó tiempo final pero sí inicial, establecer una duración predeterminada\n    if (startTime > 0 && endTime === 5 && startTime !== 0) {\n        endTime = startTime + 5;\n    }\n    return {\n        startTime,\n        endTime\n    };\n}\n// Componente para renderizar opciones de música como botones clickables\nconst MusicOptions = (param)=>{\n    let { options, onSelectMusic } = param;\n    if (!Array.isArray(options) || options.length === 0) {\n        return null;\n    }\n    // Función para convertir el nombre del archivo a un nombre amigable\n    const getFriendlyName = (musicPath)=>{\n        const filename = musicPath.split(\"/\").pop() || musicPath;\n        // Mapear nombres de archivos a nombres amigables\n        if (filename === \"song1.mp3\") return \"M\\xfasica Energ\\xe9tica\";\n        if (filename === \"song2.mp3\") return \"Melod\\xeda Relajante\";\n        // Si no hay mapeo específico, devolver el nombre del archivo\n        return filename;\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col gap-3 mt-3\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-wrap gap-2\",\n            children: options.map((musicPath, index)=>{\n                const musicName = getFriendlyName(musicPath);\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    onClick: ()=>onSelectMusic(musicPath),\n                    className: \"px-4 py-2 text-sm bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-lg transition-all shadow-md hover:shadow-lg flex items-center gap-2 font-medium\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"currentColor\",\n                            className: \"w-5 h-5\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                d: \"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 9l12-3\",\n                                strokeWidth: \"2\",\n                                stroke: \"currentColor\",\n                                fill: \"none\",\n                                strokeLinecap: \"round\",\n                                strokeLinejoin: \"round\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 143,\n                                columnNumber: 17\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 142,\n                            columnNumber: 15\n                        }, undefined),\n                        musicName\n                    ]\n                }, index, true, {\n                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                    lineNumber: 137,\n                    columnNumber: 13\n                }, undefined);\n            })\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n            lineNumber: 133,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n        lineNumber: 132,\n        columnNumber: 5\n    }, undefined);\n};\n_c = MusicOptions;\n// Función para procesar elementos detectados por la IA\nconst processDetectedElement = async (elementData, commandExecutor, finalResponseRef, timeline, lastUploadedImageUrl, currentImageUrlForThisRequest)=>{\n    let elementAdded = false;\n    let finalResponse = finalResponseRef.current;\n    try {\n        // Si se detectó un elemento para agregar con confianza suficiente\n        if (elementData && elementData.detected === true && typeof elementData.confidence === \"number\" && elementData.confidence > 0.7 && elementData.element) {\n            const element = elementData.element;\n            // Procesar según el tipo de elemento\n            if (element.type === \"text\" && element.content) {\n                // Configurar opciones para el texto\n                const textOptions = {\n                    startTime: typeof element.startTime === \"number\" ? element.startTime : 0,\n                    endTime: typeof element.endTime === \"number\" ? element.endTime : typeof element.startTime === \"number\" ? element.startTime + 5 : 5\n                };\n                // Asignar color si está disponible\n                if (element.color) {\n                    textOptions.color = element.color.toLowerCase() === \"blanco\" ? \"#FFFFFF\" : element.color.toLowerCase() === \"negro\" ? \"#000000\" : element.color.toLowerCase() === \"rojo\" ? \"#FF0000\" : element.color.toLowerCase() === \"azul\" ? \"#0000FF\" : element.color.toLowerCase() === \"verde\" ? \"#00FF00\" : element.color.toLowerCase() === \"amarillo\" ? \"#FFFF00\" : element.color;\n                }\n                // Añadir el texto\n                commandExecutor.current.addText(element.content, textOptions);\n                // Actualizar respuesta\n                finalResponse += '\\n\\n[He agregado el texto \"'.concat(element.content, '\" ').concat(element.color ? \"con color \".concat(element.color, \" \") : \"\", \"desde el segundo \").concat(textOptions.startTime, \" hasta el segundo \").concat(textOptions.endTime, \"]\");\n                elementAdded = true;\n            } else if (element.type === \"image\") {\n                // Configurar opciones para la imagen\n                const imageOptions = {\n                    startTime: typeof element.startTime === \"number\" ? element.startTime : 0,\n                    endTime: typeof element.endTime === \"number\" ? element.endTime : typeof element.startTime === \"number\" ? element.startTime + 5 : 5,\n                    // Posición centrada por defecto\n                    position: {\n                        x: 0.5,\n                        y: 0.5\n                    }\n                };\n                // Registrar tiempos específicos para depuración\n                console.log(\"Tiempos de imagen recibidos de la API: startTime=\".concat(element.startTime, \", endTime=\").concat(element.endTime));\n                // Manejar casos especiales para \"al final\" del video\n                if (element.startTime === -1 || element.endTime === -1) {\n                    // Calcular la duración del video en segundos\n                    const videoDuration = (timeline === null || timeline === void 0 ? void 0 : timeline.duration) ? Math.floor(timeline.duration / 1000) : 30; // Valor predeterminado si no hay duración\n                    console.log(\"Duraci\\xf3n del video: \".concat(videoDuration, \"s\"));\n                    if (element.startTime === -1 && element.endTime === -1) {\n                        // Si ambos son -1, colocar en los últimos 5 segundos\n                        imageOptions.startTime = Math.max(0, videoDuration - 5);\n                        imageOptions.endTime = videoDuration;\n                        console.log('Ajustando para \"al final\": startTime='.concat(imageOptions.startTime, \", endTime=\").concat(imageOptions.endTime));\n                    } else if (element.startTime === -1) {\n                        // Solo startTime es -1\n                        imageOptions.startTime = Math.max(0, videoDuration - 5);\n                    } else if (element.endTime === -1) {\n                        // Solo endTime es -1\n                        imageOptions.endTime = videoDuration;\n                    }\n                }\n                console.log(\"Tiempos de imagen a aplicar: startTime=\".concat(imageOptions.startTime, \", endTime=\").concat(imageOptions.endTime));\n                // Determinar la URL de la imagen a usar\n                const isGenericUrl = element.url === \"imagen_adjunta_por_el_usuario.jpg\";\n                const isLocalImage = lastUploadedImageUrl && lastUploadedImageUrl.startsWith(\"data:\");\n                let imageUrl;\n                // PRIORIDAD 1: Usar la imagen que acaba de subirse en este mensaje específico\n                if (currentImageUrlForThisRequest) {\n                    imageUrl = currentImageUrlForThisRequest;\n                    console.log(\"Usando la imagen reci\\xe9n subida para esta solicitud espec\\xedfica\");\n                } else if (element.url && !isGenericUrl && !element.url.includes(\"/url_de_la_imagen\")) {\n                    imageUrl = element.url;\n                    console.log(\"Usando URL espec\\xedfica del elemento\");\n                } else if (isGenericUrl && lastUploadedImageUrl) {\n                    imageUrl = lastUploadedImageUrl;\n                    console.log(\"Usando la \\xfaltima imagen subida guardada\");\n                } else {\n                    // Si todo lo demás falla, usar una imagen de ejemplo\n                    imageUrl = \"https://ik.imagekit.io/wombo/images/img2.jpg\";\n                    console.log(\"Usando imagen de ejemplo como fallback\");\n                }\n                // Añadir la imagen\n                commandExecutor.current.addImage(imageUrl, imageOptions);\n                // Actualizar respuesta\n                finalResponse += \"\\n\\n[He agregado la imagen desde el segundo \".concat(imageOptions.startTime, \" hasta el segundo \").concat(imageOptions.endTime, \"]\");\n                elementAdded = true;\n            } else if (element.type === \"video\") {\n                // Configurar opciones para el video\n                const videoOptions = {\n                    startTime: typeof element.startTime === \"number\" ? element.startTime : 0,\n                    endTime: typeof element.endTime === \"number\" ? element.endTime : typeof element.startTime === \"number\" ? element.startTime + 10 : 10\n                };\n                // URL de video de ejemplo (en producción esto sería dinámico)\n                const videoUrl = \"https://cdn.designcombo.dev/videos/demo-video-4.mp4\";\n                // Añadir el video\n                commandExecutor.current.addVideo(videoUrl, videoOptions);\n                // Actualizar respuesta\n                finalResponse += \"\\n\\n[He agregado el video desde el segundo \".concat(videoOptions.startTime, \" hasta el segundo \").concat(videoOptions.endTime, \"]\");\n                elementAdded = true;\n            } else if (element.type === \"subtitles\") {\n                // Configurar opciones para los subtítulos\n                const subtitleOptions = {\n                    groupWords: element.groupWords !== undefined ? element.groupWords : true\n                };\n                // Añadir tiempos si se especificaron\n                if (typeof element.startTime === \"number\") {\n                    subtitleOptions.startTime = element.startTime;\n                }\n                if (typeof element.endTime === \"number\") {\n                    subtitleOptions.endTime = element.endTime;\n                }\n                // Añadir los subtítulos\n                commandExecutor.current.addSubtitles(subtitleOptions);\n                // Actualizar respuesta silenciosa (se maneja en otro lado)\n                elementAdded = true;\n            } else if (element.type === \"segments\" && Array.isArray(element.segments) && element.segments.length > 0) {\n                // Configurar los segmentos a eliminar\n                const segments = element.segments.map((segment)=>({\n                        startTime: typeof segment.startTime === \"number\" ? segment.startTime : 0,\n                        endTime: typeof segment.endTime === \"number\" ? segment.endTime : typeof segment.startTime === \"number\" ? segment.startTime + 5 : 5\n                    }));\n                console.log(\"Eliminando \".concat(segments.length, \" segmentos:\"), segments);\n                // Ejemplo de formato de segmentos a mostrar\n                const segmentsFormatted = segments.map((s)=>\"\".concat(s.startTime, \"-\").concat(s.endTime, \"s\")).join(\", \");\n                try {\n                    // Ejecutar la eliminación de segmentos\n                    const result = await commandExecutor.current.removeSegments(segments);\n                    if (result) {\n                        finalResponse += \"\\n\\n[He eliminado los segmentos solicitados: \".concat(segmentsFormatted, \"]\");\n                    } else {\n                        finalResponse += \"\\n\\n[No pude eliminar los segmentos solicitados. Aseg\\xfarate de que hay un elemento seleccionado en la timeline.]\";\n                    }\n                    elementAdded = true;\n                } catch (error) {\n                    console.error(\"Error al eliminar segmentos:\", error);\n                    finalResponse += \"\\n\\n[Error al intentar eliminar los segmentos: \".concat(error.message || \"Error desconocido\", \"]\");\n                }\n            } else if (element.type === \"compact\") {\n                // Ejecutar la compactación del timeline\n                console.log(\"Compactando timeline por solicitud del usuario\");\n                try {\n                    // Iniciar la compactación\n                    const result = await commandExecutor.current.compactTimeline();\n                    if (result) {\n                        finalResponse += \"\\n\\n[He compactado el timeline eliminando los espacios vac\\xedos entre elementos]\";\n                    } else {\n                        finalResponse += \"\\n\\n[No fue posible compactar el timeline. Puede que no haya elementos o espacios vac\\xedos que compactar]\";\n                    }\n                    elementAdded = true;\n                } catch (error) {\n                    console.error(\"Error al compactar el timeline:\", error);\n                    finalResponse += \"\\n\\n[Error al intentar compactar el timeline: \".concat(error.message || \"Error desconocido\", \"]\");\n                }\n            } else if (element.type === \"smartTrim\") {\n                // Ejecutar el recorte inteligente\n                console.log(\"Iniciando recorte inteligente por solicitud del usuario\");\n                try {\n                    // Mostrar mensaje de análisis en curso\n                    finalResponse += \"\\n\\n[Analizando el video para identificar las partes a eliminar...]\";\n                    // Iniciar el recorte inteligente\n                    const result = await commandExecutor.current.smartTrim();\n                    if (result) {\n                        finalResponse += \"\\n\\n[He realizado un recorte inteligente del video, eliminando las partes innecesarias y compactando el timeline]\";\n                    } else {\n                        finalResponse += \"\\n\\n[No fue posible realizar el recorte inteligente. Verifica que el video tenga una transcripci\\xf3n]\";\n                    }\n                    elementAdded = true;\n                } catch (error) {\n                    console.error(\"Error al realizar el recorte inteligente:\", error);\n                    finalResponse += \"\\n\\n[Error al intentar realizar el recorte inteligente: \".concat(error.message || \"Error desconocido\", \"]\");\n                }\n            } else if (element.type === \"music\" && Array.isArray(element.options) && element.options.length > 0) {\n                // Respuesta más corta para música\n                finalResponse = \"\\xbfCu\\xe1l de estas opciones te gustar\\xeda a\\xf1adir?\";\n                elementAdded = true;\n            }\n        }\n    } catch (error) {\n        console.error(\"Error al procesar elemento detectado:\", error);\n        finalResponse += \"\\n\\n[No pude procesar la solicitud debido a un error.]\";\n    }\n    return {\n        finalResponse,\n        elementAdded\n    };\n};\nfunction AIChat() {\n    _s();\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([\n        {\n            id: \"1\",\n            content: \"Hola, soy tu asistente de edici\\xf3n de video. \\xbfEn qu\\xe9 puedo ayudarte?\",\n            role: \"assistant\",\n            timestamp: new Date()\n        }\n    ]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [imageFile, setImageFile] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [imagePreview, setImagePreview] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isUploading, setIsUploading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [lastUploadedImageUrl, setLastUploadedImageUrl] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const stateManager = (0,_features_editor_hooks_state_manager__WEBPACK_IMPORTED_MODULE_6__.useStateManager)();\n    const { timeline, scenes, playerRef } = (0,_features_editor_store_use_data_state__WEBPACK_IMPORTED_MODULE_5__[\"default\"])();\n    const commandExecutor = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)((0,_ai_video_commands__WEBPACK_IMPORTED_MODULE_7__.createVideoCommandExecutor)(stateManager));\n    // Inicializar el CommandExecutorService con el executor actual\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (commandExecutor.current) {\n            _features_editor_services_command_executor_service__WEBPACK_IMPORTED_MODULE_9__[\"default\"].setExecutor(commandExecutor.current);\n            console.log(\"CommandExecutorService inicializado con \\xe9xito\");\n        }\n    }, [\n        commandExecutor.current\n    ]);\n    // Función para reiniciar el chat\n    const resetChat = ()=>{\n        setMessages([\n            {\n                id: Date.now().toString(),\n                content: \"Hola, soy tu asistente de edici\\xf3n de video. \\xbfEn qu\\xe9 puedo ayudarte?\",\n                role: \"assistant\",\n                timestamp: new Date()\n            }\n        ]);\n        setInput(\"\");\n        setImageFile(null);\n        setImagePreview(null);\n        setLastUploadedImageUrl(\"\");\n    };\n    // Scroll al último mensaje\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    }, [\n        messages\n    ]);\n    // Actualizar el ejecutor de comandos cuando cambie el stateManager\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        commandExecutor.current = (0,_ai_video_commands__WEBPACK_IMPORTED_MODULE_7__.createVideoCommandExecutor)(stateManager);\n        // Actualizar el servicio con la nueva instancia del ejecutor\n        _features_editor_services_command_executor_service__WEBPACK_IMPORTED_MODULE_9__[\"default\"].setExecutor(commandExecutor.current);\n        console.log(\"CommandExecutorService actualizado con una nueva instancia del ejecutor\");\n    }, [\n        stateManager\n    ]);\n    // Manejar click en el botón de imagen\n    const handleImageClick = ()=>{\n        var _fileInputRef_current;\n        (_fileInputRef_current = fileInputRef.current) === null || _fileInputRef_current === void 0 ? void 0 : _fileInputRef_current.click();\n    };\n    // Manejar selección de archivo de imagen\n    const handleFileChange = (e)=>{\n        var _e_target_files;\n        const file = (_e_target_files = e.target.files) === null || _e_target_files === void 0 ? void 0 : _e_target_files[0];\n        if (file) {\n            setImageFile(file);\n            const previewUrl = URL.createObjectURL(file);\n            setImagePreview(previewUrl);\n        }\n    };\n    // Eliminar la imagen seleccionada\n    const handleRemoveImage = ()=>{\n        setImageFile(null);\n        setImagePreview(null);\n        if (fileInputRef.current) fileInputRef.current.value = \"\";\n    };\n    // Subir imagen al servidor\n    const uploadImage = async (file)=>{\n        try {\n            setIsUploading(true);\n            // Obtener URL firmada para subir la imagen\n            const uploadDetails = await (0,_utils_upload__WEBPACK_IMPORTED_MODULE_8__.createUploadsDetails)(file.name, file);\n            // Si no es un mock local, proceder con la carga\n            if (uploadDetails.uploadUrl !== \"local-mock\") {\n                // Subir la imagen\n                await fetch(uploadDetails.uploadUrl, {\n                    method: \"PUT\",\n                    body: file,\n                    headers: {\n                        \"Content-Type\": file.type\n                    }\n                });\n            }\n            // No se necesita hacer fetch si es un mock local (dataURL)\n            // Retornar la URL pública de la imagen\n            return uploadDetails.url;\n        } catch (error) {\n            console.error(\"Error al subir la imagen:\", error);\n            throw new Error(\"No se pudo subir la imagen. Int\\xe9ntalo de nuevo.\");\n        } finally{\n            setIsUploading(false);\n        }\n    };\n    // Función para enviar mensaje\n    const handleSendMessage = async ()=>{\n        if (!input.trim() && !imageFile || isLoading) return;\n        let userMessage = {\n            id: Date.now().toString(),\n            content: input,\n            role: \"user\",\n            timestamp: new Date()\n        };\n        let uploadedImageUrl = \"\";\n        // Variable para rastrear la URL de la imagen actual para esta solicitud específica\n        let currentImageUrlForThisRequest = \"\";\n        // Si hay una imagen para subir, procesarla\n        if (imageFile) {\n            try {\n                uploadedImageUrl = await uploadImage(imageFile);\n                userMessage.imageUrl = uploadedImageUrl;\n                // Guardar la URL de la imagen para posibles referencias futuras\n                setLastUploadedImageUrl(uploadedImageUrl);\n                // Importante: Guardar la URL actual para esta solicitud específica\n                currentImageUrlForThisRequest = uploadedImageUrl;\n                console.log(\"Imagen subida exitosamente:\", uploadedImageUrl.substring(0, 100) + \"...\");\n            } catch (error) {\n                console.error(\"Error en la subida de imagen:\", error);\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            id: (Date.now() + 1).toString(),\n                            content: \"Error al subir la imagen. Por favor, int\\xe9ntalo de nuevo. Detalles: \" + (error instanceof Error ? error.message : \"Error desconocido\"),\n                            role: \"assistant\",\n                            timestamp: new Date()\n                        }\n                    ]);\n                setIsLoading(false);\n                return;\n            }\n        }\n        // Añadir mensaje del usuario\n        setMessages((prev)=>[\n                ...prev,\n                userMessage\n            ]);\n        setInput(\"\");\n        setImageFile(null);\n        setImagePreview(null);\n        if (fileInputRef.current) fileInputRef.current.value = \"\";\n        setIsLoading(true);\n        try {\n            var _playerRef_current, _timeline_canvas_getObjects, _timeline_canvas, _timeline_canvas_getObjects1, _timeline_canvas1;\n            // Enviar a la API para procesamiento en lenguaje natural\n            const apiMessages = messages.concat(userMessage).map((msg)=>{\n                // Si el mensaje tiene una imagen, crear un formato especial para el contenido\n                if (msg.imageUrl) {\n                    // Si es una URL de datos (comienza con data:), usar un marcador especial\n                    const isDataUrl = msg.imageUrl.startsWith(\"data:\");\n                    const imageUrlToSend = isDataUrl ? \"[IMAGEN_ADJUNTA]\" : \"[IMAGEN: \".concat(msg.imageUrl, \"]\");\n                    return {\n                        role: msg.role,\n                        content: \"\".concat(msg.content || \"\", \" \").concat(imageUrlToSend)\n                    };\n                }\n                return {\n                    role: msg.role,\n                    content: msg.content\n                };\n            });\n            // Añadir contexto del editor para la IA externa\n            const contextMessage = {\n                role: \"system\",\n                content: \"\\nContexto actual del editor de video:\\n- Posici\\xf3n actual (segundos): \".concat((playerRef === null || playerRef === void 0 ? void 0 : (_playerRef_current = playerRef.current) === null || _playerRef_current === void 0 ? void 0 : _playerRef_current.getCurrentTime) ? Math.floor((playerRef.current.getCurrentTime() || 0) * 100) / 100 : 0, \"\\n- Duraci\\xf3n del proyecto (segundos): \").concat((timeline === null || timeline === void 0 ? void 0 : timeline.duration) ? Math.floor(timeline.duration / 1000) : 0, \"\\n- N\\xfamero de escenas: \").concat((scenes === null || scenes === void 0 ? void 0 : scenes.length) || 0, \"\\n- N\\xfamero de elementos en el timeline: \").concat(((timeline === null || timeline === void 0 ? void 0 : (_timeline_canvas = timeline.canvas) === null || _timeline_canvas === void 0 ? void 0 : (_timeline_canvas_getObjects = _timeline_canvas.getObjects) === null || _timeline_canvas_getObjects === void 0 ? void 0 : _timeline_canvas_getObjects.call(_timeline_canvas)) || []).length - 1 > 0 ? ((timeline === null || timeline === void 0 ? void 0 : (_timeline_canvas1 = timeline.canvas) === null || _timeline_canvas1 === void 0 ? void 0 : (_timeline_canvas_getObjects1 = _timeline_canvas1.getObjects) === null || _timeline_canvas_getObjects1 === void 0 ? void 0 : _timeline_canvas_getObjects1.call(_timeline_canvas1)) || []).length - 1 : 0, \"\\n\").concat(lastUploadedImageUrl ? \"- \\xdaltima imagen compartida por el usuario disponible para usar\" : \"\", '\\n\\nEl usuario puede expresar en lenguaje natural la necesidad de agregar elementos al video.\\nEjemplos:\\n- \"Pon un t\\xedtulo que diga \\'Bienvenidos\\' al inicio\"\\n- \"Quiero un texto blanco que diga \\'Fin\\' al final del video\"\\n- \"Necesito una imagen en el segundo 10\"\\n- \"Coloca un video de introducci\\xf3n al principio\"\\n\\nSi el usuario adjunta una imagen en el mensaje, la URL estar\\xe1 en formato [IMAGEN: url_de_la_imagen].\\nDebes detectar si quiere agregar esta imagen al video y en qu\\xe9 momento temporal.\\n')\n            };\n            try {\n                var _data_message, _elementData_element;\n                const response = await fetch(\"/api/ai-chat\", {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        messages: [\n                            contextMessage,\n                            ...apiMessages\n                        ],\n                        // Usar la URL de la imagen actual para esta solicitud si existe,\n                        // de lo contrario usar la última URL guardada\n                        lastImageUrl: currentImageUrlForThisRequest || lastUploadedImageUrl || \"\"\n                    }),\n                    // Agregar timeout para evitar esperas infinitas\n                    signal: AbortSignal.timeout(15000) // 15 segundos máximo\n                });\n                if (!response.ok) {\n                    throw new Error(\"Error de API: \".concat(response.status, \" \").concat(response.statusText));\n                }\n                const data = await response.json();\n                // Asegurarse de que data.message.content existe\n                const aiResponse = (data === null || data === void 0 ? void 0 : (_data_message = data.message) === null || _data_message === void 0 ? void 0 : _data_message.content) || \"Lo siento, no pude entender tu solicitud.\";\n                // Obtener los datos del elemento si existen (con verificación segura)\n                const elementData = data === null || data === void 0 ? void 0 : data.elementData;\n                // Variable para la respuesta final\n                let finalResponse = aiResponse;\n                // Crear una referencia a la respuesta final para que sea accesible en la función procesadora\n                const finalResponseRef = {\n                    current: finalResponse\n                };\n                let elementAdded = false;\n                // Usar la función de procesamiento de elementos\n                const processResult = await processDetectedElement(elementData, commandExecutor, finalResponseRef, timeline, lastUploadedImageUrl, currentImageUrlForThisRequest);\n                finalResponse = processResult.finalResponse;\n                elementAdded = processResult.elementAdded;\n                // Crear mensaje con los detalles completos\n                const newMessage = {\n                    id: Date.now().toString(),\n                    content: finalResponse || data.message.content,\n                    role: \"assistant\",\n                    timestamp: new Date()\n                };\n                // Si se detectó un elemento de música, agregar las opciones al mensaje\n                if ((elementData === null || elementData === void 0 ? void 0 : elementData.detected) && ((_elementData_element = elementData.element) === null || _elementData_element === void 0 ? void 0 : _elementData_element.type) === \"music\" && Array.isArray(elementData.element.options)) {\n                    newMessage.musicOptions = elementData.element.options;\n                    console.log(\"Opciones de m\\xfasica agregadas al mensaje:\", newMessage.musicOptions);\n                }\n                // Actualizar mensajes\n                setMessages((prev)=>[\n                        ...prev,\n                        newMessage\n                    ]);\n            } catch (apiError) {\n                console.error(\"Error en la comunicaci\\xf3n con la API:\", apiError);\n                // Mensaje de error específico de API\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            id: (Date.now() + 1).toString(),\n                            content: \"Lo siento, ha ocurrido un error al comunicarse con el servicio de IA. Por favor, intenta de nuevo en unos momentos.\",\n                            role: \"assistant\",\n                            timestamp: new Date()\n                        }\n                    ]);\n            }\n        } catch (error) {\n            console.error(\"Error al procesar el mensaje:\", error);\n            // Determinar mensaje de error apropiado\n            let errorMessage = \"Lo siento, ha ocurrido un error al procesar tu mensaje.\";\n            if (error instanceof Error) {\n                if (error.message.includes(\"timeout\") || error.message.includes(\"abort\")) {\n                    errorMessage = \"La solicitud ha tardado demasiado. Prueba con un mensaje m\\xe1s corto.\";\n                } else if (error.message.includes(\"network\") || error.message.includes(\"fetch\")) {\n                    errorMessage = \"Parece que hay un problema de conexi\\xf3n. Verifica tu conexi\\xf3n a internet e intenta de nuevo.\";\n                }\n            }\n            // Mensaje de error\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        id: (Date.now() + 1).toString(),\n                        content: errorMessage,\n                        role: \"assistant\",\n                        timestamp: new Date()\n                    }\n                ]);\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    // Función para manejar la selección de música\n    const handleMusicSelect = async (musicPath)=>{\n        try {\n            console.log(\"Usuario seleccion\\xf3 m\\xfasica: \".concat(musicPath));\n            // Calcular la duración del video en segundos\n            const videoDuration = (timeline === null || timeline === void 0 ? void 0 : timeline.duration) ? Math.floor(timeline.duration / 1000) : 300; // 5 minutos por defecto\n            console.log(\"Duraci\\xf3n del video: \".concat(videoDuration, \" segundos\"));\n            // Configuración de opciones para la música\n            const musicOptions = {\n                startTime: 0,\n                endTime: videoDuration,\n                volume: 80,\n                fadeIn: true,\n                fadeOut: true\n            };\n            // Añadir la música al timeline (respetará la duración natural si es más corta que el video)\n            commandExecutor.current.addMusic(musicPath, musicOptions);\n            // Obtener un nombre amigable para la música\n            const getMusicFriendlyName = (path)=>{\n                const filename = path.split(\"/\").pop() || path;\n                if (filename === \"song1.mp3\") return \"M\\xfasica Energ\\xe9tica\";\n                if (filename === \"song2.mp3\") return \"Melod\\xeda Relajante\";\n                return filename;\n            };\n            // Añadir un mensaje de confirmación\n            const musicName = getMusicFriendlyName(musicPath);\n            const confirmationMsg = {\n                id: Date.now().toString(),\n                content: 'He a\\xf1adido \"'.concat(musicName, '\" como m\\xfasica de fondo para toda la duraci\\xf3n del video.'),\n                role: \"assistant\",\n                timestamp: new Date()\n            };\n            setMessages((prev)=>[\n                    ...prev,\n                    confirmationMsg\n                ]);\n        } catch (error) {\n            console.error(\"Error al a\\xf1adir m\\xfasica:\", error);\n            // Mensaje de error\n            const errorMsg = {\n                id: Date.now().toString(),\n                content: \"No se pudo a\\xf1adir la m\\xfasica. Error: \".concat(error.message || \"Error desconocido\"),\n                role: \"assistant\",\n                timestamp: new Date()\n            };\n            setMessages((prev)=>[\n                    ...prev,\n                    errorMsg\n                ]);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex h-full flex-col bg-[rgb(20,10,30)] border-l border-purple-800/30\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-[rgb(30,15,45)] p-3 flex justify-between items-center border-b border-purple-800/30\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"h-7 w-7 rounded flex items-center justify-center bg-purple-700\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                                    className: \"h-3.5 w-3.5 text-white\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 764,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 763,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                className: \"font-medium text-white text-sm\",\n                                children: \"Asistente IA\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 766,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 762,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-1\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                            variant: \"ghost\",\n                            size: \"icon\",\n                            className: \"h-7 w-7 rounded hover:bg-purple-800/20\",\n                            onClick: resetChat,\n                            title: \"Reiniciar conversaci\\xf3n\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                                className: \"h-3.5 w-3.5 text-zinc-300\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 776,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 769,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 768,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 761,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_4__.ScrollArea, {\n                className: \"flex-1 pr-2 chat-scrollbar\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-3 space-y-3\",\n                    children: [\n                        messages.map((message)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex flex-col animate-fadeIn \".concat(message.role === \"assistant\" ? \"items-start\" : \"items-end\"),\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"max-w-[85%] rounded-md px-4 py-2 \".concat(message.role === \"assistant\" ? \"bg-[rgb(40,20,60)] text-zinc-200\" : \"bg-purple-700 text-white\"),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"whitespace-pre-wrap text-sm\",\n                                                children: message.content\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                lineNumber: 798,\n                                                columnNumber: 17\n                                            }, this),\n                                            message.imageUrl && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"mt-2 rounded overflow-hidden\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                    src: message.imageUrl,\n                                                    alt: \"Imagen adjunta\",\n                                                    className: \"max-h-48 max-w-full object-contain\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                    lineNumber: 801,\n                                                    columnNumber: 21\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                lineNumber: 800,\n                                                columnNumber: 19\n                                            }, this),\n                                            message.musicOptions && message.musicOptions.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MusicOptions, {\n                                                options: message.musicOptions,\n                                                onSelectMusic: handleMusicSelect\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                lineNumber: 809,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                        lineNumber: 791,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-[10px] mt-0.5 px-1 \".concat(message.role === \"assistant\" ? \"text-zinc-500\" : \"text-purple-300\"),\n                                        children: message.timestamp.toLocaleTimeString([], {\n                                            hour: \"2-digit\",\n                                            minute: \"2-digit\"\n                                        })\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                        lineNumber: 815,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, message.id, true, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 785,\n                                columnNumber: 13\n                            }, this)),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            ref: messagesEndRef,\n                            className: \"h-2\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 820,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                    lineNumber: 783,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 782,\n                columnNumber: 7\n            }, this),\n            imagePreview && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative mx-3 mt-1 mb-2 h-24 bg-[rgb(30,15,45)] p-2 flex items-center justify-center rounded border border-purple-800/30\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                        variant: \"ghost\",\n                        size: \"icon\",\n                        className: \"absolute right-1 top-1 z-10 h-5 w-5 rounded-full bg-black/50\",\n                        onClick: handleRemoveImage,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                            className: \"h-3 w-3 text-white\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 833,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 827,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                        src: imagePreview,\n                        alt: \"Vista previa\",\n                        className: \"max-h-full max-w-full object-contain\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 835,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 826,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-[rgb(30,15,45)] p-3 border-t border-purple-800/30\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center gap-2\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex rounded overflow-hidden border border-purple-900/50 flex-1 bg-[rgb(25,12,40)]\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                                variant: \"ghost\",\n                                size: \"icon\",\n                                className: \"h-9 w-9 bg-transparent hover:bg-purple-800/20\",\n                                onClick: handleImageClick,\n                                disabled: isLoading,\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                    className: \"h-4 w-4 text-zinc-400\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 854,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 847,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_input__WEBPACK_IMPORTED_MODULE_3__.Input, {\n                                value: input,\n                                onChange: (e)=>setInput(e.target.value),\n                                onKeyDown: (e)=>{\n                                    if (e.key === \"Enter\" && !e.shiftKey) {\n                                        e.preventDefault();\n                                        handleSendMessage();\n                                    }\n                                },\n                                placeholder: \"Escribe tu mensaje...\",\n                                disabled: isLoading,\n                                className: \"flex-1 border-0 bg-transparent h-9 focus:ring-0 focus-visible:ring-0 text-zinc-200\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 857,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                                onClick: handleSendMessage,\n                                disabled: !input.trim() && !imageFile || isLoading,\n                                className: \"h-9 px-3 rounded-none \".concat(!input.trim() && !imageFile || isLoading ? \"bg-purple-900/50 cursor-not-allowed text-purple-300/50\" : \"bg-purple-700 hover:bg-purple-600 text-white\"),\n                                children: isLoading || isUploading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                                    className: \"h-4 w-4 animate-spin\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 881,\n                                    columnNumber: 17\n                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                                    className: \"h-3.5 w-3.5\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 883,\n                                    columnNumber: 17\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 871,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 846,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                    lineNumber: 845,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 844,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                type: \"file\",\n                ref: fileInputRef,\n                onChange: handleFileChange,\n                accept: \"image/*\",\n                className: \"hidden\",\n                disabled: isLoading\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 890,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n        lineNumber: 759,\n        columnNumber: 5\n    }, this);\n}\n_s(AIChat, \"WKxl2mapr74X4nIwUYgYMKY9i0Y=\", false, function() {\n    return [\n        _features_editor_hooks_state_manager__WEBPACK_IMPORTED_MODULE_6__.useStateManager,\n        _features_editor_store_use_data_state__WEBPACK_IMPORTED_MODULE_5__[\"default\"]\n    ];\n});\n_c1 = AIChat;\nvar _c, _c1;\n$RefreshReg$(_c, \"MusicOptions\");\n$RefreshReg$(_c1, \"AIChat\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvYWktY2hhdC9pbmRleC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFb0Q7QUFDSjtBQUNGO0FBQ1c7QUFDdUI7QUFDZDtBQUNNO0FBQ2U7QUFDakM7QUFDbUM7QUFFekYsa0ZBQWtGO0FBQ2xGLFNBQVNpQiw2QkFBNkJDLGNBQXNCO0lBQzFELElBQUlDLFlBQVk7SUFDaEIsSUFBSUMsVUFBVTtJQUVkLElBQUksQ0FBQ0YsZ0JBQWdCLE9BQU87UUFBRUM7UUFBV0M7SUFBUTtJQUVqRCx1Q0FBdUM7SUFDdkMsTUFBTUMsb0JBQW9CO1FBQ3hCO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNEO0lBRUQscUNBQXFDO0lBQ3JDLE1BQU1DLGtCQUFrQjtRQUN0QjtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBQ0Q7SUFFRCxtQ0FBbUM7SUFDbkMsTUFBTUMsWUFBWSw0Q0FBNENDLElBQUksQ0FBQ047SUFDbkUsTUFBTU8sVUFBVSx1Q0FBdUNELElBQUksQ0FBQ047SUFFNUQsc0NBQXNDO0lBQ3RDLEtBQUssTUFBTVEsV0FBV0wsa0JBQW1CO1FBQ3ZDLE1BQU1NLFFBQVFULGVBQWVTLEtBQUssQ0FBQ0Q7UUFDbkMsSUFBSUMsU0FBU0EsS0FBSyxDQUFDLEVBQUUsRUFBRTtZQUNyQixtREFBbUQ7WUFDbkRSLFlBQVlPLFFBQVFFLFFBQVEsR0FBR0MsUUFBUSxDQUFDLFlBQ3BDQyxTQUFTSCxLQUFLLENBQUMsRUFBRSxJQUFJLEtBQ3JCRyxTQUFTSCxLQUFLLENBQUMsRUFBRTtZQUNyQjtRQUNGO0lBQ0Y7SUFFQSxvQ0FBb0M7SUFDcEMsS0FBSyxNQUFNRCxXQUFXSixnQkFBaUI7UUFDckMsTUFBTUssUUFBUVQsZUFBZVMsS0FBSyxDQUFDRDtRQUNuQyxJQUFJQyxTQUFTQSxLQUFLLENBQUMsRUFBRSxFQUFF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QUFLLFdBQVcsQ0FBQ3pFLEVBQUUwRSxRQUFRLEVBQUU7d0NBQ3BDMUUsRUFBRTJFLGNBQWM7d0NBQ2hCekQ7b0NBQ0Y7Z0NBQ0Y7Z0NBQ0EwRCxhQUFZO2dDQUNaTixVQUFVNUY7Z0NBQ1YvRSxXQUFVOzs7Ozs7MENBR1osOERBQUN4Qyx5REFBTUE7Z0NBQ0w2QyxTQUFTa0g7Z0NBQ1RvRCxVQUFVLENBQUU5RixNQUFNMkMsSUFBSSxNQUFNLENBQUN2QyxhQUFjRjtnQ0FDM0MvRSxXQUFXLHlCQUlWLE9BSEMsQ0FBRTZFLE1BQU0yQyxJQUFJLE1BQU0sQ0FBQ3ZDLGFBQWNGLFlBQzdCLDJEQUNBOzBDQUdMQSxhQUFhTSw0QkFDWiw4REFBQ3pILHdIQUFPQTtvQ0FBQ29DLFdBQVU7Ozs7O3lEQUVuQiw4REFBQ3JDLHdIQUFJQTtvQ0FBQ3FDLFdBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzswQkFPMUIsOERBQUM2RTtnQkFDQ2hELE1BQUs7Z0JBQ0w2SSxLQUFLbEY7Z0JBQ0xvRixVQUFVeEU7Z0JBQ1Y4RSxRQUFPO2dCQUNQbEwsV0FBVTtnQkFDVjJLLFVBQVU1Rjs7Ozs7Ozs7Ozs7O0FBSWxCO0dBbmdCd0JUOztRQWtCRHBHLGlGQUFlQTtRQUNJRCw2RUFBWUE7OztNQW5COUJxRyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9jb21wb25lbnRzL2FpLWNoYXQvaW5kZXgudHN4PzRiOTciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9idXR0b25cIjtcbmltcG9ydCB7IElucHV0IH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9pbnB1dFwiO1xuaW1wb3J0IHsgU2Nyb2xsQXJlYSB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvc2Nyb2xsLWFyZWFcIjtcbmltcG9ydCB7IFNlbmQsIExvYWRlcjIsIEltYWdlSWNvbiwgWCwgU3BhcmtsZXMsIFJlZnJlc2hDdyB9IGZyb20gXCJsdWNpZGUtcmVhY3RcIjtcbmltcG9ydCB1c2VEYXRhU3RhdGUgZnJvbSBcIkAvZmVhdHVyZXMvZWRpdG9yL3N0b3JlL3VzZS1kYXRhLXN0YXRlXCI7XG5pbXBvcnQgeyB1c2VTdGF0ZU1hbmFnZXIgfSBmcm9tIFwiQC9mZWF0dXJlcy9lZGl0b3IvaG9va3Mvc3RhdGUtbWFuYWdlclwiO1xuaW1wb3J0IHsgY3JlYXRlVmlkZW9Db21tYW5kRXhlY3V0b3IsIFZpZGVvQ29tbWFuZEV4ZWN1dG9yIH0gZnJvbSBcIi4vYWktdmlkZW8tY29tbWFuZHNcIjtcbmltcG9ydCB7IGNyZWF0ZVVwbG9hZHNEZXRhaWxzIH0gZnJvbSBcIkAvdXRpbHMvdXBsb2FkXCI7XG5pbXBvcnQgQ29tbWFuZEV4ZWN1dG9yU2VydmljZSBmcm9tIFwiQC9mZWF0dXJlcy9lZGl0b3Ivc2VydmljZXMvY29tbWFuZC1leGVjdXRvci1zZXJ2aWNlXCI7XG5cbi8vIEZ1bmNpw7NuIHBhcmEgZXh0cmFlciB0aWVtcG9zIGRlIGluaWNpbyB5IGZpbiBkZSB1bmEgaW1hZ2VuIGEgcGFydGlyIGRlbCBtZW5zYWplXG5mdW5jdGlvbiBleHRyYWN0SW1hZ2VUaW1lc0Zyb21NZXNzYWdlKG1lc3NhZ2VDb250ZW50OiBzdHJpbmcpOiB7IHN0YXJ0VGltZTogbnVtYmVyLCBlbmRUaW1lOiBudW1iZXIgfSB7XG4gIGxldCBzdGFydFRpbWUgPSAwO1xuICBsZXQgZW5kVGltZSA9IDU7XG5cbiAgaWYgKCFtZXNzYWdlQ29udGVudCkgcmV0dXJuIHsgc3RhcnRUaW1lLCBlbmRUaW1lIH07XG5cbiAgLy8gQnVzY2FyIHJlZmVyZW5jaWFzIGFsIHRpZW1wbyBpbmljaWFsXG4gIGNvbnN0IHN0YXJ0VGltZVBhdHRlcm5zID0gW1xuICAgIC9lbiBlbCBzZWd1bmRvIChcXGQrKS9pLFxuICAgIC9kZXNkZSBlbCBzZWd1bmRvIChcXGQrKS9pLFxuICAgIC9hIHBhcnRpciBkZWwgc2VndW5kbyAoXFxkKykvaSxcbiAgICAvY29tZW56YW5kbyBlbiBlbCBzZWd1bmRvIChcXGQrKS9pLFxuICAgIC9kZXNkZSBlbCBtaW51dG8gKFxcZCspL2ksIC8vIENvbnZlcnRpciBtaW51dG9zIGEgc2VndW5kb3NcbiAgICAvZW4gZWwgbWludXRvIChcXGQrKS9pLCAgICAvLyBDb252ZXJ0aXIgbWludXRvcyBhIHNlZ3VuZG9zXG4gICAgL2VudHJlIGxvcyBzZWd1bmRvcyAoXFxkKykgeS9pLCAvLyBDYXB0dXJhIGVsIHByaW1lciBuw7ptZXJvIGVuIFwiZW50cmUgWCB5IFlcIlxuICAgIC9kZWwgc2VndW5kbyAoXFxkKykgYWwvaSxcbiAgICAvZW1wZXphbmRvIGVuIChcXGQrKS9pLFxuICAgIC9zZWd1bmRvIChcXGQrKS9pLCAgICAgLy8gUGF0csOzbiBtw6FzIGdlbmVyYWwgcGFyYSBjYXB0dXJhciBcInNlZ3VuZG8gWFwiXG4gICAgL2VuIChcXGQrKSBzZWd1bmRvcy9pLCAvLyBcImVuIFggc2VndW5kb3NcIlxuICAgIC9lbiBlbCAoXFxkKykvaSwgICAgICAgLy8gXCJlbiBlbCBYXCIgKGN1YW5kbyBzZSByZWZpZXJlIGEgc2VndW5kb3MpXG4gIF07XG5cbiAgLy8gQnVzY2FyIHJlZmVyZW5jaWFzIGFsIHRpZW1wbyBmaW5hbFxuICBjb25zdCBlbmRUaW1lUGF0dGVybnMgPSBbXG4gICAgL2hhc3RhIGVsIHNlZ3VuZG8gKFxcZCspL2ksXG4gICAgL2FsIHNlZ3VuZG8gKFxcZCspL2ksXG4gICAgL3Rlcm1pbmFuZG8gZW4gZWwgc2VndW5kbyAoXFxkKykvaSxcbiAgICAvaGFzdGEgZWwgbWludXRvIChcXGQrKS9pLCAvLyBDb252ZXJ0aXIgbWludXRvcyBhIHNlZ3VuZG9zXG4gICAgL2VudHJlIGxvcyBzZWd1bmRvcyBcXGQrIHkgKFxcZCspL2ksIC8vIENhcHR1cmEgZWwgc2VndW5kbyBuw7ptZXJvIGVuIFwiZW50cmUgWCB5IFlcIlxuICAgIC9kZWwgc2VndW5kbyBcXGQrIGFsIChcXGQrKS9pLFxuICAgIC9wb3IgKFxcZCspIHNlZ3VuZG9zL2ksIC8vIER1cmFjacOzbiByZWxhdGl2YVxuICAgIC9kdXJhbnRlIChcXGQrKSBzZWd1bmRvcy9pLCAvLyBEdXJhY2nDs24gcmVsYXRpdmFcbiAgXTtcblxuICAvLyBCdXNjYXIgcGFsYWJyYXMgY2xhdmUgZXNwZWNpYWxlc1xuICBjb25zdCBpc0F0U3RhcnQgPSAvXFxiKGFsIGluaWNpb3xhbCBwcmluY2lwaW98YWwgY29taWVuem8pXFxiL2kudGVzdChtZXNzYWdlQ29udGVudCk7XG4gIGNvbnN0IGlzQXRFbmQgPSAvXFxiKGFsIGZpbmFsfGFsIHTDqXJtaW5vfGFsIGFjYWJhcilcXGIvaS50ZXN0KG1lc3NhZ2VDb250ZW50KTtcblxuICAvLyBQcm9jZXNhciBwYXRyb25lcyBkZSB0aWVtcG8gaW5pY2lhbFxuICBmb3IgKGNvbnN0IHBhdHRlcm4gb2Ygc3RhcnRUaW1lUGF0dGVybnMpIHtcbiAgICBjb25zdCBtYXRjaCA9IG1lc3NhZ2VDb250ZW50Lm1hdGNoKHBhdHRlcm4pO1xuICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgICAgLy8gU2kgZXMgcmVmZXJlbmNpYSBhIG1pbnV0b3MsIGNvbnZlcnRpciBhIHNlZ3VuZG9zXG4gICAgICBzdGFydFRpbWUgPSBwYXR0ZXJuLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ21pbnV0bycpXG4gICAgICAgID8gcGFyc2VJbnQobWF0Y2hbMV0pICogNjBcbiAgICAgICAgOiBwYXJzZUludChtYXRjaFsxXSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvLyBQcm9jZXNhciBwYXRyb25lcyBkZSB0aWVtcG8gZmluYWxcbiAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIGVuZFRpbWVQYXR0ZXJucykge1xuICAgIGNvbnN0IG1hdGNoID0gbWVzc2FnZUNvbnRlbnQubWF0Y2gocGF0dGVybik7XG4gICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XG4gICAgICBpZiAocGF0dGVybi50b1N0cmluZygpLmluY2x1ZGVzKCdwb3InKSB8fCBwYXR0ZXJuLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ2R1cmFudGUnKSkge1xuICAgICAgICAvLyBFcyB1bmEgZHVyYWNpw7NuIHJlbGF0aXZhLCBzdW1hciBhbCB0aWVtcG8gaW5pY2lhbFxuICAgICAgICBlbmRUaW1lID0gc3RhcnRUaW1lICsgcGFyc2VJbnQobWF0Y2hbMV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRXMgdW4gdGllbXBvIGFic29sdXRvXG4gICAgICAgIGVuZFRpbWUgPSBwYXR0ZXJuLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ21pbnV0bycpXG4gICAgICAgICAgPyBwYXJzZUludChtYXRjaFsxXSkgKiA2MFxuICAgICAgICAgIDogcGFyc2VJbnQobWF0Y2hbMV0pO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLy8gU2kgc2UgbWVuY2lvbmEgXCJhbCBpbmljaW9cIiwgZXN0YWJsZWNlciB0aWVtcG8gYSAwXG4gIGlmIChpc0F0U3RhcnQpIHtcbiAgICBzdGFydFRpbWUgPSAwO1xuICAgIGVuZFRpbWUgPSA1OyAvLyBQb3IgZGVmZWN0byA1IHNlZ3VuZG9zIGRlIGR1cmFjacOzblxuICB9XG5cbiAgLy8gU2kgc2UgbWVuY2lvbmEgXCJhbCBmaW5hbFwiLCBlc3RhYmxlY2VyIHZhbG9yZXMgcmVsYXRpdm9zIGFsIGZpbmFsXG4gIC8vIE5vdGE6IEVsIHZhbG9yIHJlYWwgc2UgYWp1c3RhcsOhIGVuIGVsIGNsaWVudGUgc2Vnw7puIGxhIGR1cmFjacOzblxuICBpZiAoaXNBdEVuZCkge1xuICAgIHN0YXJ0VGltZSA9IC0xOyAvLyBDw7NkaWdvIGVzcGVjaWFsIHBhcmEgXCJmaW5hbCAtIDUgc2VndW5kb3NcIlxuICAgIGVuZFRpbWUgPSAtMTsgICAvLyBDw7NkaWdvIGVzcGVjaWFsIHBhcmEgXCJmaW5hbFwiXG4gIH1cblxuICAvLyBTaSBubyBzZSBkZXRlY3TDsyB0aWVtcG8gZmluYWwgcGVybyBzw60gaW5pY2lhbCwgZXN0YWJsZWNlciB1bmEgZHVyYWNpw7NuIHByZWRldGVybWluYWRhXG4gIGlmIChzdGFydFRpbWUgPiAwICYmIGVuZFRpbWUgPT09IDUgJiYgc3RhcnRUaW1lICE9PSAwKSB7XG4gICAgZW5kVGltZSA9IHN0YXJ0VGltZSArIDU7XG4gIH1cblxuICByZXR1cm4geyBzdGFydFRpbWUsIGVuZFRpbWUgfTtcbn1cblxuLy8gVGlwbyBwYXJhIGxvcyBtZW5zYWplc1xudHlwZSBNZXNzYWdlID0ge1xuICBpZDogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIHJvbGU6IFwiYXNzaXN0YW50XCIgfCBcInVzZXJcIjtcbiAgdGltZXN0YW1wOiBEYXRlO1xuICBpbWFnZVVybD86IHN0cmluZzsgLy8gUHJvcGllZGFkIHBhcmEgVVJMcyBkZSBpbWFnZW5cbiAgbXVzaWNPcHRpb25zPzogc3RyaW5nW107IC8vIFByb3BpZWRhZCBwYXJhIG9wY2lvbmVzIGRlIG3DunNpY2Fcbn07XG5cbi8vIENvbXBvbmVudGUgcGFyYSByZW5kZXJpemFyIG9wY2lvbmVzIGRlIG3DunNpY2EgY29tbyBib3RvbmVzIGNsaWNrYWJsZXNcbmNvbnN0IE11c2ljT3B0aW9ucyA9ICh7IG9wdGlvbnMsIG9uU2VsZWN0TXVzaWMgfSkgPT4ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkob3B0aW9ucykgfHwgb3B0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIEZ1bmNpw7NuIHBhcmEgY29udmVydGlyIGVsIG5vbWJyZSBkZWwgYXJjaGl2byBhIHVuIG5vbWJyZSBhbWlnYWJsZVxuICBjb25zdCBnZXRGcmllbmRseU5hbWUgPSAobXVzaWNQYXRoKSA9PiB7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBtdXNpY1BhdGguc3BsaXQoJy8nKS5wb3AoKSB8fCBtdXNpY1BhdGg7XG5cbiAgICAvLyBNYXBlYXIgbm9tYnJlcyBkZSBhcmNoaXZvcyBhIG5vbWJyZXMgYW1pZ2FibGVzXG4gICAgaWYgKGZpbGVuYW1lID09PSBcInNvbmcxLm1wM1wiKSByZXR1cm4gXCJNw7pzaWNhIEVuZXJnw6l0aWNhXCI7XG4gICAgaWYgKGZpbGVuYW1lID09PSBcInNvbmcyLm1wM1wiKSByZXR1cm4gXCJNZWxvZMOtYSBSZWxhamFudGVcIjtcblxuICAgIC8vIFNpIG5vIGhheSBtYXBlbyBlc3BlY8OtZmljbywgZGV2b2x2ZXIgZWwgbm9tYnJlIGRlbCBhcmNoaXZvXG4gICAgcmV0dXJuIGZpbGVuYW1lO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGdhcC0zIG10LTNcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXdyYXAgZ2FwLTJcIj5cbiAgICAgICAge29wdGlvbnMubWFwKChtdXNpY1BhdGgsIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgbXVzaWNOYW1lID0gZ2V0RnJpZW5kbHlOYW1lKG11c2ljUGF0aCk7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb25TZWxlY3RNdXNpYyhtdXNpY1BhdGgpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgdGV4dC1zbSBiZy1ncmFkaWVudC10by1yIGZyb20tcHVycGxlLTYwMCB0by1pbmRpZ28tNjAwIGhvdmVyOmZyb20tcHVycGxlLTcwMCBob3Zlcjp0by1pbmRpZ28tNzAwIHRleHQtd2hpdGUgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWFsbCBzaGFkb3ctbWQgaG92ZXI6c2hhZG93LWxnIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGZvbnQtbWVkaXVtXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBjbGFzc05hbWU9XCJ3LTUgaC01XCI+XG4gICAgICAgICAgICAgICAgPHBhdGggZD1cIk05IDE5VjZsMTItM3YxM005IDE5YzAgMS4xMDUtMS4zNDMgMi0zIDJzLTMtLjg5NS0zLTIgMS4zNDMtMiAzLTIgMyAuODk1IDMgMnptMTItM2MwIDEuMTA1LTEuMzQzIDItMyAycy0zLS44OTUtMy0yIDEuMzQzLTIgMy0yIDMgLjg5NSAzIDJ6TTkgOWwxMi0zXCIgc3Ryb2tlV2lkdGg9XCIyXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAge211c2ljTmFtZX1cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICk7XG4gICAgICAgIH0pfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG4vLyBGdW5jacOzbiBwYXJhIHByb2Nlc2FyIGVsZW1lbnRvcyBkZXRlY3RhZG9zIHBvciBsYSBJQVxuY29uc3QgcHJvY2Vzc0RldGVjdGVkRWxlbWVudCA9IGFzeW5jIChlbGVtZW50RGF0YSwgY29tbWFuZEV4ZWN1dG9yLCBmaW5hbFJlc3BvbnNlUmVmLCB0aW1lbGluZSwgbGFzdFVwbG9hZGVkSW1hZ2VVcmwsIGN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0KSA9PiB7XG4gIGxldCBlbGVtZW50QWRkZWQgPSBmYWxzZTtcbiAgbGV0IGZpbmFsUmVzcG9uc2UgPSBmaW5hbFJlc3BvbnNlUmVmLmN1cnJlbnQ7XG5cbiAgdHJ5IHtcbiAgICAvLyBTaSBzZSBkZXRlY3TDsyB1biBlbGVtZW50byBwYXJhIGFncmVnYXIgY29uIGNvbmZpYW56YSBzdWZpY2llbnRlXG4gICAgaWYgKGVsZW1lbnREYXRhICYmXG4gICAgICAgIGVsZW1lbnREYXRhLmRldGVjdGVkID09PSB0cnVlICYmXG4gICAgICAgIHR5cGVvZiBlbGVtZW50RGF0YS5jb25maWRlbmNlID09PSAnbnVtYmVyJyAmJlxuICAgICAgICBlbGVtZW50RGF0YS5jb25maWRlbmNlID4gMC43ICYmXG4gICAgICAgIGVsZW1lbnREYXRhLmVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50RGF0YS5lbGVtZW50O1xuXG4gICAgICAvLyBQcm9jZXNhciBzZWfDum4gZWwgdGlwbyBkZSBlbGVtZW50b1xuICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gXCJ0ZXh0XCIgJiYgZWxlbWVudC5jb250ZW50KSB7XG4gICAgICAgIC8vIENvbmZpZ3VyYXIgb3BjaW9uZXMgcGFyYSBlbCB0ZXh0b1xuICAgICAgICBjb25zdCB0ZXh0T3B0aW9uczogYW55ID0ge1xuICAgICAgICAgIHN0YXJ0VGltZTogdHlwZW9mIGVsZW1lbnQuc3RhcnRUaW1lID09PSAnbnVtYmVyJyA/IGVsZW1lbnQuc3RhcnRUaW1lIDogMCxcbiAgICAgICAgICBlbmRUaW1lOiB0eXBlb2YgZWxlbWVudC5lbmRUaW1lID09PSAnbnVtYmVyJyA/IGVsZW1lbnQuZW5kVGltZSA6ICh0eXBlb2YgZWxlbWVudC5zdGFydFRpbWUgPT09ICdudW1iZXInID8gZWxlbWVudC5zdGFydFRpbWUgKyA1IDogNSksXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQXNpZ25hciBjb2xvciBzaSBlc3TDoSBkaXNwb25pYmxlXG4gICAgICAgIGlmIChlbGVtZW50LmNvbG9yKSB7XG4gICAgICAgICAgdGV4dE9wdGlvbnMuY29sb3IgPSBlbGVtZW50LmNvbG9yLnRvTG93ZXJDYXNlKCkgPT09IFwiYmxhbmNvXCIgPyBcIiNGRkZGRkZcIiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jb2xvci50b0xvd2VyQ2FzZSgpID09PSBcIm5lZ3JvXCIgPyBcIiMwMDAwMDBcIiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jb2xvci50b0xvd2VyQ2FzZSgpID09PSBcInJvam9cIiA/IFwiI0ZGMDAwMFwiIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNvbG9yLnRvTG93ZXJDYXNlKCkgPT09IFwiYXp1bFwiID8gXCIjMDAwMEZGXCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY29sb3IudG9Mb3dlckNhc2UoKSA9PT0gXCJ2ZXJkZVwiID8gXCIjMDBGRjAwXCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY29sb3IudG9Mb3dlckNhc2UoKSA9PT0gXCJhbWFyaWxsb1wiID8gXCIjRkZGRjAwXCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY29sb3I7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBw7FhZGlyIGVsIHRleHRvXG4gICAgICAgIGNvbW1hbmRFeGVjdXRvci5jdXJyZW50LmFkZFRleHQoZWxlbWVudC5jb250ZW50LCB0ZXh0T3B0aW9ucyk7XG5cbiAgICAgICAgLy8gQWN0dWFsaXphciByZXNwdWVzdGFcbiAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW0hlIGFncmVnYWRvIGVsIHRleHRvIFwiJHtlbGVtZW50LmNvbnRlbnR9XCIgJHtlbGVtZW50LmNvbG9yID8gYGNvbiBjb2xvciAke2VsZW1lbnQuY29sb3J9IGAgOiBcIlwifWRlc2RlIGVsIHNlZ3VuZG8gJHt0ZXh0T3B0aW9ucy5zdGFydFRpbWV9IGhhc3RhIGVsIHNlZ3VuZG8gJHt0ZXh0T3B0aW9ucy5lbmRUaW1lfV1gO1xuICAgICAgICBlbGVtZW50QWRkZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZWxlbWVudC50eXBlID09PSBcImltYWdlXCIpIHtcbiAgICAgICAgLy8gQ29uZmlndXJhciBvcGNpb25lcyBwYXJhIGxhIGltYWdlblxuICAgICAgICBjb25zdCBpbWFnZU9wdGlvbnM6IGFueSA9IHtcbiAgICAgICAgICBzdGFydFRpbWU6IHR5cGVvZiBlbGVtZW50LnN0YXJ0VGltZSA9PT0gJ251bWJlcicgPyBlbGVtZW50LnN0YXJ0VGltZSA6IDAsXG4gICAgICAgICAgZW5kVGltZTogdHlwZW9mIGVsZW1lbnQuZW5kVGltZSA9PT0gJ251bWJlcicgPyBlbGVtZW50LmVuZFRpbWUgOiAodHlwZW9mIGVsZW1lbnQuc3RhcnRUaW1lID09PSAnbnVtYmVyJyA/IGVsZW1lbnQuc3RhcnRUaW1lICsgNSA6IDUpLFxuICAgICAgICAgIC8vIFBvc2ljacOzbiBjZW50cmFkYSBwb3IgZGVmZWN0b1xuICAgICAgICAgIHBvc2l0aW9uOiB7IHg6IDAuNSwgeTogMC41IH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBSZWdpc3RyYXIgdGllbXBvcyBlc3BlY8OtZmljb3MgcGFyYSBkZXB1cmFjacOzblxuICAgICAgICBjb25zb2xlLmxvZyhgVGllbXBvcyBkZSBpbWFnZW4gcmVjaWJpZG9zIGRlIGxhIEFQSTogc3RhcnRUaW1lPSR7ZWxlbWVudC5zdGFydFRpbWV9LCBlbmRUaW1lPSR7ZWxlbWVudC5lbmRUaW1lfWApO1xuXG4gICAgICAgIC8vIE1hbmVqYXIgY2Fzb3MgZXNwZWNpYWxlcyBwYXJhIFwiYWwgZmluYWxcIiBkZWwgdmlkZW9cbiAgICAgICAgaWYgKGVsZW1lbnQuc3RhcnRUaW1lID09PSAtMSB8fCBlbGVtZW50LmVuZFRpbWUgPT09IC0xKSB7XG4gICAgICAgICAgLy8gQ2FsY3VsYXIgbGEgZHVyYWNpw7NuIGRlbCB2aWRlbyBlbiBzZWd1bmRvc1xuICAgICAgICAgIGNvbnN0IHZpZGVvRHVyYXRpb24gPSB0aW1lbGluZT8uZHVyYXRpb25cbiAgICAgICAgICAgID8gTWF0aC5mbG9vcih0aW1lbGluZS5kdXJhdGlvbiAvIDEwMDApXG4gICAgICAgICAgICA6IDMwOyAvLyBWYWxvciBwcmVkZXRlcm1pbmFkbyBzaSBubyBoYXkgZHVyYWNpw7NuXG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhgRHVyYWNpw7NuIGRlbCB2aWRlbzogJHt2aWRlb0R1cmF0aW9ufXNgKTtcblxuICAgICAgICAgIGlmIChlbGVtZW50LnN0YXJ0VGltZSA9PT0gLTEgJiYgZWxlbWVudC5lbmRUaW1lID09PSAtMSkge1xuICAgICAgICAgICAgLy8gU2kgYW1ib3Mgc29uIC0xLCBjb2xvY2FyIGVuIGxvcyDDumx0aW1vcyA1IHNlZ3VuZG9zXG4gICAgICAgICAgICBpbWFnZU9wdGlvbnMuc3RhcnRUaW1lID0gTWF0aC5tYXgoMCwgdmlkZW9EdXJhdGlvbiAtIDUpO1xuICAgICAgICAgICAgaW1hZ2VPcHRpb25zLmVuZFRpbWUgPSB2aWRlb0R1cmF0aW9uO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEFqdXN0YW5kbyBwYXJhIFwiYWwgZmluYWxcIjogc3RhcnRUaW1lPSR7aW1hZ2VPcHRpb25zLnN0YXJ0VGltZX0sIGVuZFRpbWU9JHtpbWFnZU9wdGlvbnMuZW5kVGltZX1gKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuc3RhcnRUaW1lID09PSAtMSkge1xuICAgICAgICAgICAgLy8gU29sbyBzdGFydFRpbWUgZXMgLTFcbiAgICAgICAgICAgIGltYWdlT3B0aW9ucy5zdGFydFRpbWUgPSBNYXRoLm1heCgwLCB2aWRlb0R1cmF0aW9uIC0gNSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LmVuZFRpbWUgPT09IC0xKSB7XG4gICAgICAgICAgICAvLyBTb2xvIGVuZFRpbWUgZXMgLTFcbiAgICAgICAgICAgIGltYWdlT3B0aW9ucy5lbmRUaW1lID0gdmlkZW9EdXJhdGlvbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZyhgVGllbXBvcyBkZSBpbWFnZW4gYSBhcGxpY2FyOiBzdGFydFRpbWU9JHtpbWFnZU9wdGlvbnMuc3RhcnRUaW1lfSwgZW5kVGltZT0ke2ltYWdlT3B0aW9ucy5lbmRUaW1lfWApO1xuXG4gICAgICAgIC8vIERldGVybWluYXIgbGEgVVJMIGRlIGxhIGltYWdlbiBhIHVzYXJcbiAgICAgICAgY29uc3QgaXNHZW5lcmljVXJsID0gZWxlbWVudC51cmwgPT09ICdpbWFnZW5fYWRqdW50YV9wb3JfZWxfdXN1YXJpby5qcGcnO1xuICAgICAgICBjb25zdCBpc0xvY2FsSW1hZ2UgPSBsYXN0VXBsb2FkZWRJbWFnZVVybCAmJiBsYXN0VXBsb2FkZWRJbWFnZVVybC5zdGFydHNXaXRoKCdkYXRhOicpO1xuXG4gICAgICAgIGxldCBpbWFnZVVybDogc3RyaW5nO1xuXG4gICAgICAgIC8vIFBSSU9SSURBRCAxOiBVc2FyIGxhIGltYWdlbiBxdWUgYWNhYmEgZGUgc3ViaXJzZSBlbiBlc3RlIG1lbnNhamUgZXNwZWPDrWZpY29cbiAgICAgICAgaWYgKGN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0KSB7XG4gICAgICAgICAgaW1hZ2VVcmwgPSBjdXJyZW50SW1hZ2VVcmxGb3JUaGlzUmVxdWVzdDtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzYW5kbyBsYSBpbWFnZW4gcmVjacOpbiBzdWJpZGEgcGFyYSBlc3RhIHNvbGljaXR1ZCBlc3BlY8OtZmljYVwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQUklPUklEQUQgMjogVXNhciBsYSBVUkwgZGVsIGVsZW1lbnRvIHNpIHRpZW5lIHVuYSBlc3BlY8OtZmljYSB5IE5PIGVzIGxhIFVSTCBnZW7DqXJpY2FcbiAgICAgICAgZWxzZSBpZiAoZWxlbWVudC51cmwgJiYgIWlzR2VuZXJpY1VybCAmJiAhZWxlbWVudC51cmwuaW5jbHVkZXMoJy91cmxfZGVfbGFfaW1hZ2VuJykpIHtcbiAgICAgICAgICBpbWFnZVVybCA9IGVsZW1lbnQudXJsO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNhbmRvIFVSTCBlc3BlY8OtZmljYSBkZWwgZWxlbWVudG9cIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUFJJT1JJREFEIDM6IFVzYXIgbGEgw7psdGltYSBpbWFnZW4gc3ViaWRhIGd1YXJkYWRhIHNpIGhheSByZWZlcmVuY2lhIGEgaW1hZ2VuIGdlbsOpcmljYVxuICAgICAgICBlbHNlIGlmIChpc0dlbmVyaWNVcmwgJiYgbGFzdFVwbG9hZGVkSW1hZ2VVcmwpIHtcbiAgICAgICAgICBpbWFnZVVybCA9IGxhc3RVcGxvYWRlZEltYWdlVXJsO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNhbmRvIGxhIMO6bHRpbWEgaW1hZ2VuIHN1YmlkYSBndWFyZGFkYVwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQUklPUklEQUQgNDogRmFsbGJhY2sgYSBVUkwgZ2Vuw6lyaWNhXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIFNpIHRvZG8gbG8gZGVtw6FzIGZhbGxhLCB1c2FyIHVuYSBpbWFnZW4gZGUgZWplbXBsb1xuICAgICAgICAgIGltYWdlVXJsID0gXCJodHRwczovL2lrLmltYWdla2l0LmlvL3dvbWJvL2ltYWdlcy9pbWcyLmpwZ1wiO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNhbmRvIGltYWdlbiBkZSBlamVtcGxvIGNvbW8gZmFsbGJhY2tcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBw7FhZGlyIGxhIGltYWdlblxuICAgICAgICBjb21tYW5kRXhlY3V0b3IuY3VycmVudC5hZGRJbWFnZShpbWFnZVVybCwgaW1hZ2VPcHRpb25zKTtcblxuICAgICAgICAvLyBBY3R1YWxpemFyIHJlc3B1ZXN0YVxuICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bSGUgYWdyZWdhZG8gbGEgaW1hZ2VuIGRlc2RlIGVsIHNlZ3VuZG8gJHtpbWFnZU9wdGlvbnMuc3RhcnRUaW1lfSBoYXN0YSBlbCBzZWd1bmRvICR7aW1hZ2VPcHRpb25zLmVuZFRpbWV9XWA7XG4gICAgICAgIGVsZW1lbnRBZGRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlbGVtZW50LnR5cGUgPT09IFwidmlkZW9cIikge1xuICAgICAgICAvLyBDb25maWd1cmFyIG9wY2lvbmVzIHBhcmEgZWwgdmlkZW9cbiAgICAgICAgY29uc3QgdmlkZW9PcHRpb25zOiBhbnkgPSB7XG4gICAgICAgICAgc3RhcnRUaW1lOiB0eXBlb2YgZWxlbWVudC5zdGFydFRpbWUgPT09ICdudW1iZXInID8gZWxlbWVudC5zdGFydFRpbWUgOiAwLFxuICAgICAgICAgIGVuZFRpbWU6IHR5cGVvZiBlbGVtZW50LmVuZFRpbWUgPT09ICdudW1iZXInID8gZWxlbWVudC5lbmRUaW1lIDogKHR5cGVvZiBlbGVtZW50LnN0YXJ0VGltZSA9PT0gJ251bWJlcicgPyBlbGVtZW50LnN0YXJ0VGltZSArIDEwIDogMTApLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFVSTCBkZSB2aWRlbyBkZSBlamVtcGxvIChlbiBwcm9kdWNjacOzbiBlc3RvIHNlcsOtYSBkaW7DoW1pY28pXG4gICAgICAgIGNvbnN0IHZpZGVvVXJsID0gXCJodHRwczovL2Nkbi5kZXNpZ25jb21iby5kZXYvdmlkZW9zL2RlbW8tdmlkZW8tNC5tcDRcIjtcblxuICAgICAgICAvLyBBw7FhZGlyIGVsIHZpZGVvXG4gICAgICAgIGNvbW1hbmRFeGVjdXRvci5jdXJyZW50LmFkZFZpZGVvKHZpZGVvVXJsLCB2aWRlb09wdGlvbnMpO1xuXG4gICAgICAgIC8vIEFjdHVhbGl6YXIgcmVzcHVlc3RhXG4gICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltIZSBhZ3JlZ2FkbyBlbCB2aWRlbyBkZXNkZSBlbCBzZWd1bmRvICR7dmlkZW9PcHRpb25zLnN0YXJ0VGltZX0gaGFzdGEgZWwgc2VndW5kbyAke3ZpZGVvT3B0aW9ucy5lbmRUaW1lfV1gO1xuICAgICAgICBlbGVtZW50QWRkZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZWxlbWVudC50eXBlID09PSBcInN1YnRpdGxlc1wiKSB7XG4gICAgICAgIC8vIENvbmZpZ3VyYXIgb3BjaW9uZXMgcGFyYSBsb3Mgc3VidMOtdHVsb3NcbiAgICAgICAgY29uc3Qgc3VidGl0bGVPcHRpb25zOiBhbnkgPSB7XG4gICAgICAgICAgZ3JvdXBXb3JkczogZWxlbWVudC5ncm91cFdvcmRzICE9PSB1bmRlZmluZWQgPyBlbGVtZW50Lmdyb3VwV29yZHMgOiB0cnVlLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEHDsWFkaXIgdGllbXBvcyBzaSBzZSBlc3BlY2lmaWNhcm9uXG4gICAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5zdGFydFRpbWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgc3VidGl0bGVPcHRpb25zLnN0YXJ0VGltZSA9IGVsZW1lbnQuc3RhcnRUaW1lO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5lbmRUaW1lID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHN1YnRpdGxlT3B0aW9ucy5lbmRUaW1lID0gZWxlbWVudC5lbmRUaW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQcOxYWRpciBsb3Mgc3VidMOtdHVsb3NcbiAgICAgICAgY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQuYWRkU3VidGl0bGVzKHN1YnRpdGxlT3B0aW9ucyk7XG5cbiAgICAgICAgLy8gQWN0dWFsaXphciByZXNwdWVzdGEgc2lsZW5jaW9zYSAoc2UgbWFuZWphIGVuIG90cm8gbGFkbylcbiAgICAgICAgZWxlbWVudEFkZGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVsZW1lbnQudHlwZSA9PT0gXCJzZWdtZW50c1wiICYmIEFycmF5LmlzQXJyYXkoZWxlbWVudC5zZWdtZW50cykgJiYgZWxlbWVudC5zZWdtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIENvbmZpZ3VyYXIgbG9zIHNlZ21lbnRvcyBhIGVsaW1pbmFyXG4gICAgICAgIGNvbnN0IHNlZ21lbnRzID0gZWxlbWVudC5zZWdtZW50cy5tYXAoc2VnbWVudCA9PiAoe1xuICAgICAgICAgIHN0YXJ0VGltZTogdHlwZW9mIHNlZ21lbnQuc3RhcnRUaW1lID09PSAnbnVtYmVyJyA/IHNlZ21lbnQuc3RhcnRUaW1lIDogMCxcbiAgICAgICAgICBlbmRUaW1lOiB0eXBlb2Ygc2VnbWVudC5lbmRUaW1lID09PSAnbnVtYmVyJyA/IHNlZ21lbnQuZW5kVGltZSA6ICh0eXBlb2Ygc2VnbWVudC5zdGFydFRpbWUgPT09ICdudW1iZXInID8gc2VnbWVudC5zdGFydFRpbWUgKyA1IDogNSksXG4gICAgICAgIH0pKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhgRWxpbWluYW5kbyAke3NlZ21lbnRzLmxlbmd0aH0gc2VnbWVudG9zOmAsIHNlZ21lbnRzKTtcblxuICAgICAgICAvLyBFamVtcGxvIGRlIGZvcm1hdG8gZGUgc2VnbWVudG9zIGEgbW9zdHJhclxuICAgICAgICBjb25zdCBzZWdtZW50c0Zvcm1hdHRlZCA9IHNlZ21lbnRzLm1hcChzID0+IGAke3Muc3RhcnRUaW1lfS0ke3MuZW5kVGltZX1zYCkuam9pbignLCAnKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIEVqZWN1dGFyIGxhIGVsaW1pbmFjacOzbiBkZSBzZWdtZW50b3NcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb21tYW5kRXhlY3V0b3IuY3VycmVudC5yZW1vdmVTZWdtZW50cyhzZWdtZW50cyk7XG5cbiAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bSGUgZWxpbWluYWRvIGxvcyBzZWdtZW50b3Mgc29saWNpdGFkb3M6ICR7c2VnbWVudHNGb3JtYXR0ZWR9XWA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltObyBwdWRlIGVsaW1pbmFyIGxvcyBzZWdtZW50b3Mgc29saWNpdGFkb3MuIEFzZWfDunJhdGUgZGUgcXVlIGhheSB1biBlbGVtZW50byBzZWxlY2Npb25hZG8gZW4gbGEgdGltZWxpbmUuXWA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsZW1lbnRBZGRlZCA9IHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGVsaW1pbmFyIHNlZ21lbnRvczpcIiwgZXJyb3IpO1xuICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltFcnJvciBhbCBpbnRlbnRhciBlbGltaW5hciBsb3Mgc2VnbWVudG9zOiAke2Vycm9yLm1lc3NhZ2UgfHwgXCJFcnJvciBkZXNjb25vY2lkb1wifV1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlbGVtZW50LnR5cGUgPT09IFwiY29tcGFjdFwiKSB7XG4gICAgICAgIC8vIEVqZWN1dGFyIGxhIGNvbXBhY3RhY2nDs24gZGVsIHRpbWVsaW5lXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ29tcGFjdGFuZG8gdGltZWxpbmUgcG9yIHNvbGljaXR1ZCBkZWwgdXN1YXJpb1wiKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIEluaWNpYXIgbGEgY29tcGFjdGFjacOzblxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbW1hbmRFeGVjdXRvci5jdXJyZW50LmNvbXBhY3RUaW1lbGluZSgpO1xuXG4gICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW0hlIGNvbXBhY3RhZG8gZWwgdGltZWxpbmUgZWxpbWluYW5kbyBsb3MgZXNwYWNpb3MgdmFjw61vcyBlbnRyZSBlbGVtZW50b3NdYDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW05vIGZ1ZSBwb3NpYmxlIGNvbXBhY3RhciBlbCB0aW1lbGluZS4gUHVlZGUgcXVlIG5vIGhheWEgZWxlbWVudG9zIG8gZXNwYWNpb3MgdmFjw61vcyBxdWUgY29tcGFjdGFyXWA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsZW1lbnRBZGRlZCA9IHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNvbXBhY3RhciBlbCB0aW1lbGluZTpcIiwgZXJyb3IpO1xuICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltFcnJvciBhbCBpbnRlbnRhciBjb21wYWN0YXIgZWwgdGltZWxpbmU6ICR7ZXJyb3IubWVzc2FnZSB8fCBcIkVycm9yIGRlc2Nvbm9jaWRvXCJ9XWA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVsZW1lbnQudHlwZSA9PT0gXCJzbWFydFRyaW1cIikge1xuICAgICAgICAvLyBFamVjdXRhciBlbCByZWNvcnRlIGludGVsaWdlbnRlXG4gICAgICAgIGNvbnNvbGUubG9nKFwiSW5pY2lhbmRvIHJlY29ydGUgaW50ZWxpZ2VudGUgcG9yIHNvbGljaXR1ZCBkZWwgdXN1YXJpb1wiKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIE1vc3RyYXIgbWVuc2FqZSBkZSBhbsOhbGlzaXMgZW4gY3Vyc29cbiAgICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bQW5hbGl6YW5kbyBlbCB2aWRlbyBwYXJhIGlkZW50aWZpY2FyIGxhcyBwYXJ0ZXMgYSBlbGltaW5hci4uLl1gO1xuXG4gICAgICAgICAgLy8gSW5pY2lhciBlbCByZWNvcnRlIGludGVsaWdlbnRlXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQuc21hcnRUcmltKCk7XG5cbiAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bSGUgcmVhbGl6YWRvIHVuIHJlY29ydGUgaW50ZWxpZ2VudGUgZGVsIHZpZGVvLCBlbGltaW5hbmRvIGxhcyBwYXJ0ZXMgaW5uZWNlc2FyaWFzIHkgY29tcGFjdGFuZG8gZWwgdGltZWxpbmVdYDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW05vIGZ1ZSBwb3NpYmxlIHJlYWxpemFyIGVsIHJlY29ydGUgaW50ZWxpZ2VudGUuIFZlcmlmaWNhIHF1ZSBlbCB2aWRlbyB0ZW5nYSB1bmEgdHJhbnNjcmlwY2nDs25dYDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxlbWVudEFkZGVkID0gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgcmVhbGl6YXIgZWwgcmVjb3J0ZSBpbnRlbGlnZW50ZTpcIiwgZXJyb3IpO1xuICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltFcnJvciBhbCBpbnRlbnRhciByZWFsaXphciBlbCByZWNvcnRlIGludGVsaWdlbnRlOiAke2Vycm9yLm1lc3NhZ2UgfHwgXCJFcnJvciBkZXNjb25vY2lkb1wifV1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlbGVtZW50LnR5cGUgPT09IFwibXVzaWNcIiAmJiBBcnJheS5pc0FycmF5KGVsZW1lbnQub3B0aW9ucykgJiYgZWxlbWVudC5vcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gUmVzcHVlc3RhIG3DoXMgY29ydGEgcGFyYSBtw7pzaWNhXG4gICAgICAgIGZpbmFsUmVzcG9uc2UgPSBcIsK/Q3XDoWwgZGUgZXN0YXMgb3BjaW9uZXMgdGUgZ3VzdGFyw61hIGHDsWFkaXI/XCI7XG4gICAgICAgIGVsZW1lbnRBZGRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBwcm9jZXNhciBlbGVtZW50byBkZXRlY3RhZG86XCIsIGVycm9yKTtcbiAgICBmaW5hbFJlc3BvbnNlICs9IFwiXFxuXFxuW05vIHB1ZGUgcHJvY2VzYXIgbGEgc29saWNpdHVkIGRlYmlkbyBhIHVuIGVycm9yLl1cIjtcbiAgfVxuXG4gIHJldHVybiB7IGZpbmFsUmVzcG9uc2UsIGVsZW1lbnRBZGRlZCB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQUlDaGF0KCkge1xuICBjb25zdCBbbWVzc2FnZXMsIHNldE1lc3NhZ2VzXSA9IHVzZVN0YXRlPE1lc3NhZ2VbXT4oW1xuICAgIHtcbiAgICAgIGlkOiBcIjFcIixcbiAgICAgIGNvbnRlbnQ6IFwiSG9sYSwgc295IHR1IGFzaXN0ZW50ZSBkZSBlZGljacOzbiBkZSB2aWRlby4gwr9FbiBxdcOpIHB1ZWRvIGF5dWRhcnRlP1wiLFxuICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICB9LFxuICBdKTtcbiAgY29uc3QgW2lucHV0LCBzZXRJbnB1dF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2ltYWdlRmlsZSwgc2V0SW1hZ2VGaWxlXSA9IHVzZVN0YXRlPEZpbGUgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2ltYWdlUHJldmlldywgc2V0SW1hZ2VQcmV2aWV3XSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaXNVcGxvYWRpbmcsIHNldElzVXBsb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xhc3RVcGxvYWRlZEltYWdlVXJsLCBzZXRMYXN0VXBsb2FkZWRJbWFnZVVybF0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiXCIpO1xuICBjb25zdCBmaWxlSW5wdXRSZWYgPSB1c2VSZWY8SFRNTElucHV0RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IG1lc3NhZ2VzRW5kUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcblxuICBjb25zdCBzdGF0ZU1hbmFnZXIgPSB1c2VTdGF0ZU1hbmFnZXIoKTtcbiAgY29uc3QgeyB0aW1lbGluZSwgc2NlbmVzLCBwbGF5ZXJSZWYgfSA9IHVzZURhdGFTdGF0ZSgpO1xuICBjb25zdCBjb21tYW5kRXhlY3V0b3IgPSB1c2VSZWY8VmlkZW9Db21tYW5kRXhlY3V0b3I+KGNyZWF0ZVZpZGVvQ29tbWFuZEV4ZWN1dG9yKHN0YXRlTWFuYWdlcikpO1xuXG4gIC8vIEluaWNpYWxpemFyIGVsIENvbW1hbmRFeGVjdXRvclNlcnZpY2UgY29uIGVsIGV4ZWN1dG9yIGFjdHVhbFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjb21tYW5kRXhlY3V0b3IuY3VycmVudCkge1xuICAgICAgQ29tbWFuZEV4ZWN1dG9yU2VydmljZS5zZXRFeGVjdXRvcihjb21tYW5kRXhlY3V0b3IuY3VycmVudCk7XG4gICAgICBjb25zb2xlLmxvZyhcIkNvbW1hbmRFeGVjdXRvclNlcnZpY2UgaW5pY2lhbGl6YWRvIGNvbiDDqXhpdG9cIik7XG4gICAgfVxuICB9LCBbY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnRdKTtcblxuICAvLyBGdW5jacOzbiBwYXJhIHJlaW5pY2lhciBlbCBjaGF0XG4gIGNvbnN0IHJlc2V0Q2hhdCA9ICgpID0+IHtcbiAgICBzZXRNZXNzYWdlcyhbXG4gICAgICB7XG4gICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgIGNvbnRlbnQ6IFwiSG9sYSwgc295IHR1IGFzaXN0ZW50ZSBkZSBlZGljacOzbiBkZSB2aWRlby4gwr9FbiBxdcOpIHB1ZWRvIGF5dWRhcnRlP1wiLFxuICAgICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICB9LFxuICAgIF0pO1xuICAgIHNldElucHV0KFwiXCIpO1xuICAgIHNldEltYWdlRmlsZShudWxsKTtcbiAgICBzZXRJbWFnZVByZXZpZXcobnVsbCk7XG4gICAgc2V0TGFzdFVwbG9hZGVkSW1hZ2VVcmwoXCJcIik7XG4gIH07XG5cbiAgLy8gU2Nyb2xsIGFsIMO6bHRpbW8gbWVuc2FqZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIG1lc3NhZ2VzRW5kUmVmLmN1cnJlbnQ/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6IFwic21vb3RoXCIgfSk7XG4gIH0sIFttZXNzYWdlc10pO1xuXG4gIC8vIEFjdHVhbGl6YXIgZWwgZWplY3V0b3IgZGUgY29tYW5kb3MgY3VhbmRvIGNhbWJpZSBlbCBzdGF0ZU1hbmFnZXJcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb21tYW5kRXhlY3V0b3IuY3VycmVudCA9IGNyZWF0ZVZpZGVvQ29tbWFuZEV4ZWN1dG9yKHN0YXRlTWFuYWdlcik7XG4gICAgLy8gQWN0dWFsaXphciBlbCBzZXJ2aWNpbyBjb24gbGEgbnVldmEgaW5zdGFuY2lhIGRlbCBlamVjdXRvclxuICAgIENvbW1hbmRFeGVjdXRvclNlcnZpY2Uuc2V0RXhlY3V0b3IoY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQpO1xuICAgIGNvbnNvbGUubG9nKFwiQ29tbWFuZEV4ZWN1dG9yU2VydmljZSBhY3R1YWxpemFkbyBjb24gdW5hIG51ZXZhIGluc3RhbmNpYSBkZWwgZWplY3V0b3JcIik7XG4gIH0sIFtzdGF0ZU1hbmFnZXJdKTtcblxuICAvLyBNYW5lamFyIGNsaWNrIGVuIGVsIGJvdMOzbiBkZSBpbWFnZW5cbiAgY29uc3QgaGFuZGxlSW1hZ2VDbGljayA9ICgpID0+IHtcbiAgICBmaWxlSW5wdXRSZWYuY3VycmVudD8uY2xpY2soKTtcbiAgfTtcblxuICAvLyBNYW5lamFyIHNlbGVjY2nDs24gZGUgYXJjaGl2byBkZSBpbWFnZW5cbiAgY29uc3QgaGFuZGxlRmlsZUNoYW5nZSA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IGZpbGUgPSBlLnRhcmdldC5maWxlcz8uWzBdO1xuICAgIGlmIChmaWxlKSB7XG4gICAgICBzZXRJbWFnZUZpbGUoZmlsZSk7XG4gICAgICBjb25zdCBwcmV2aWV3VXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICAgIHNldEltYWdlUHJldmlldyhwcmV2aWV3VXJsKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gRWxpbWluYXIgbGEgaW1hZ2VuIHNlbGVjY2lvbmFkYVxuICBjb25zdCBoYW5kbGVSZW1vdmVJbWFnZSA9ICgpID0+IHtcbiAgICBzZXRJbWFnZUZpbGUobnVsbCk7XG4gICAgc2V0SW1hZ2VQcmV2aWV3KG51bGwpO1xuICAgIGlmIChmaWxlSW5wdXRSZWYuY3VycmVudCkgZmlsZUlucHV0UmVmLmN1cnJlbnQudmFsdWUgPSAnJztcbiAgfTtcblxuICAvLyBTdWJpciBpbWFnZW4gYWwgc2Vydmlkb3JcbiAgY29uc3QgdXBsb2FkSW1hZ2UgPSBhc3luYyAoZmlsZTogRmlsZSk6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHNldElzVXBsb2FkaW5nKHRydWUpO1xuICAgICAgLy8gT2J0ZW5lciBVUkwgZmlybWFkYSBwYXJhIHN1YmlyIGxhIGltYWdlblxuICAgICAgY29uc3QgdXBsb2FkRGV0YWlscyA9IGF3YWl0IGNyZWF0ZVVwbG9hZHNEZXRhaWxzKGZpbGUubmFtZSwgZmlsZSk7XG5cbiAgICAgIC8vIFNpIG5vIGVzIHVuIG1vY2sgbG9jYWwsIHByb2NlZGVyIGNvbiBsYSBjYXJnYVxuICAgICAgaWYgKHVwbG9hZERldGFpbHMudXBsb2FkVXJsICE9PSBcImxvY2FsLW1vY2tcIikge1xuICAgICAgICAvLyBTdWJpciBsYSBpbWFnZW5cbiAgICAgICAgYXdhaXQgZmV0Y2godXBsb2FkRGV0YWlscy51cGxvYWRVcmwsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgIGJvZHk6IGZpbGUsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IGZpbGUudHlwZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIE5vIHNlIG5lY2VzaXRhIGhhY2VyIGZldGNoIHNpIGVzIHVuIG1vY2sgbG9jYWwgKGRhdGFVUkwpXG5cbiAgICAgIC8vIFJldG9ybmFyIGxhIFVSTCBww7pibGljYSBkZSBsYSBpbWFnZW5cbiAgICAgIHJldHVybiB1cGxvYWREZXRhaWxzLnVybDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIHN1YmlyIGxhIGltYWdlbjpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gc2UgcHVkbyBzdWJpciBsYSBpbWFnZW4uIEludMOpbnRhbG8gZGUgbnVldm8uXCIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc1VwbG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEZ1bmNpw7NuIHBhcmEgZW52aWFyIG1lbnNhamVcbiAgY29uc3QgaGFuZGxlU2VuZE1lc3NhZ2UgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCghaW5wdXQudHJpbSgpICYmICFpbWFnZUZpbGUpIHx8IGlzTG9hZGluZykgcmV0dXJuO1xuXG4gICAgbGV0IHVzZXJNZXNzYWdlOiBNZXNzYWdlID0ge1xuICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgIGNvbnRlbnQ6IGlucHV0LFxuICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgfTtcblxuICAgIGxldCB1cGxvYWRlZEltYWdlVXJsID0gXCJcIjtcbiAgICAvLyBWYXJpYWJsZSBwYXJhIHJhc3RyZWFyIGxhIFVSTCBkZSBsYSBpbWFnZW4gYWN0dWFsIHBhcmEgZXN0YSBzb2xpY2l0dWQgZXNwZWPDrWZpY2FcbiAgICBsZXQgY3VycmVudEltYWdlVXJsRm9yVGhpc1JlcXVlc3QgPSBcIlwiO1xuXG4gICAgLy8gU2kgaGF5IHVuYSBpbWFnZW4gcGFyYSBzdWJpciwgcHJvY2VzYXJsYVxuICAgIGlmIChpbWFnZUZpbGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHVwbG9hZGVkSW1hZ2VVcmwgPSBhd2FpdCB1cGxvYWRJbWFnZShpbWFnZUZpbGUpO1xuICAgICAgICB1c2VyTWVzc2FnZS5pbWFnZVVybCA9IHVwbG9hZGVkSW1hZ2VVcmw7XG4gICAgICAgIC8vIEd1YXJkYXIgbGEgVVJMIGRlIGxhIGltYWdlbiBwYXJhIHBvc2libGVzIHJlZmVyZW5jaWFzIGZ1dHVyYXNcbiAgICAgICAgc2V0TGFzdFVwbG9hZGVkSW1hZ2VVcmwodXBsb2FkZWRJbWFnZVVybCk7XG4gICAgICAgIC8vIEltcG9ydGFudGU6IEd1YXJkYXIgbGEgVVJMIGFjdHVhbCBwYXJhIGVzdGEgc29saWNpdHVkIGVzcGVjw61maWNhXG4gICAgICAgIGN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0ID0gdXBsb2FkZWRJbWFnZVVybDtcbiAgICAgICAgY29uc29sZS5sb2coXCJJbWFnZW4gc3ViaWRhIGV4aXRvc2FtZW50ZTpcIiwgdXBsb2FkZWRJbWFnZVVybC5zdWJzdHJpbmcoMCwgMTAwKSArIFwiLi4uXCIpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIGxhIHN1YmlkYSBkZSBpbWFnZW46XCIsIGVycm9yKTtcbiAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAoRGF0ZS5ub3coKSArIDEpLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBjb250ZW50OiBcIkVycm9yIGFsIHN1YmlyIGxhIGltYWdlbi4gUG9yIGZhdm9yLCBpbnTDqW50YWxvIGRlIG51ZXZvLiBEZXRhbGxlczogXCIgK1xuICAgICAgICAgICAgICAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIkVycm9yIGRlc2Nvbm9jaWRvXCIpLFxuICAgICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICB9LFxuICAgICAgICBdKTtcbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEHDsWFkaXIgbWVuc2FqZSBkZWwgdXN1YXJpb1xuICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbLi4ucHJldiwgdXNlck1lc3NhZ2VdKTtcbiAgICBzZXRJbnB1dChcIlwiKTtcbiAgICBzZXRJbWFnZUZpbGUobnVsbCk7XG4gICAgc2V0SW1hZ2VQcmV2aWV3KG51bGwpO1xuICAgIGlmIChmaWxlSW5wdXRSZWYuY3VycmVudCkgZmlsZUlucHV0UmVmLmN1cnJlbnQudmFsdWUgPSAnJztcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gRW52aWFyIGEgbGEgQVBJIHBhcmEgcHJvY2VzYW1pZW50byBlbiBsZW5ndWFqZSBuYXR1cmFsXG4gICAgICBjb25zdCBhcGlNZXNzYWdlcyA9IG1lc3NhZ2VzXG4gICAgICAgIC5jb25jYXQodXNlck1lc3NhZ2UpXG4gICAgICAgIC5tYXAobXNnID0+IHtcbiAgICAgICAgICAvLyBTaSBlbCBtZW5zYWplIHRpZW5lIHVuYSBpbWFnZW4sIGNyZWFyIHVuIGZvcm1hdG8gZXNwZWNpYWwgcGFyYSBlbCBjb250ZW5pZG9cbiAgICAgICAgICBpZiAobXNnLmltYWdlVXJsKSB7XG4gICAgICAgICAgICAvLyBTaSBlcyB1bmEgVVJMIGRlIGRhdG9zIChjb21pZW56YSBjb24gZGF0YTopLCB1c2FyIHVuIG1hcmNhZG9yIGVzcGVjaWFsXG4gICAgICAgICAgICBjb25zdCBpc0RhdGFVcmwgPSBtc2cuaW1hZ2VVcmwuc3RhcnRzV2l0aCgnZGF0YTonKTtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlVXJsVG9TZW5kID0gaXNEYXRhVXJsXG4gICAgICAgICAgICAgID8gJ1tJTUFHRU5fQURKVU5UQV0nXG4gICAgICAgICAgICAgIDogYFtJTUFHRU46ICR7bXNnLmltYWdlVXJsfV1gO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICByb2xlOiBtc2cucm9sZSxcbiAgICAgICAgICAgICAgY29udGVudDogYCR7bXNnLmNvbnRlbnQgfHwgJyd9ICR7aW1hZ2VVcmxUb1NlbmR9YFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcm9sZTogbXNnLnJvbGUsXG4gICAgICAgICAgICBjb250ZW50OiBtc2cuY29udGVudFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAvLyBBw7FhZGlyIGNvbnRleHRvIGRlbCBlZGl0b3IgcGFyYSBsYSBJQSBleHRlcm5hXG4gICAgICBjb25zdCBjb250ZXh0TWVzc2FnZSA9IHtcbiAgICAgICAgcm9sZTogJ3N5c3RlbScsXG4gICAgICAgIGNvbnRlbnQ6IGBcbkNvbnRleHRvIGFjdHVhbCBkZWwgZWRpdG9yIGRlIHZpZGVvOlxuLSBQb3NpY2nDs24gYWN0dWFsIChzZWd1bmRvcyk6ICR7cGxheWVyUmVmPy5jdXJyZW50Py5nZXRDdXJyZW50VGltZSA/IE1hdGguZmxvb3IoKHBsYXllclJlZi5jdXJyZW50LmdldEN1cnJlbnRUaW1lKCkgfHwgMCkgKiAxMDApIC8gMTAwIDogMH1cbi0gRHVyYWNpw7NuIGRlbCBwcm95ZWN0byAoc2VndW5kb3MpOiAke3RpbWVsaW5lPy5kdXJhdGlvbiA/IE1hdGguZmxvb3IodGltZWxpbmUuZHVyYXRpb24gLyAxMDAwKSA6IDB9XG4tIE7Dum1lcm8gZGUgZXNjZW5hczogJHtzY2VuZXM/Lmxlbmd0aCB8fCAwfVxuLSBOw7ptZXJvIGRlIGVsZW1lbnRvcyBlbiBlbCB0aW1lbGluZTogJHsodGltZWxpbmU/LmNhbnZhcz8uZ2V0T2JqZWN0cz8uKCkgfHwgW10pLmxlbmd0aCAtIDEgPiAwID8gKHRpbWVsaW5lPy5jYW52YXM/LmdldE9iamVjdHM/LigpIHx8IFtdKS5sZW5ndGggLSAxIDogMH1cbiR7bGFzdFVwbG9hZGVkSW1hZ2VVcmwgPyBgLSDDmmx0aW1hIGltYWdlbiBjb21wYXJ0aWRhIHBvciBlbCB1c3VhcmlvIGRpc3BvbmlibGUgcGFyYSB1c2FyYCA6ICcnfVxuXG5FbCB1c3VhcmlvIHB1ZWRlIGV4cHJlc2FyIGVuIGxlbmd1YWplIG5hdHVyYWwgbGEgbmVjZXNpZGFkIGRlIGFncmVnYXIgZWxlbWVudG9zIGFsIHZpZGVvLlxuRWplbXBsb3M6XG4tIFwiUG9uIHVuIHTDrXR1bG8gcXVlIGRpZ2EgJ0JpZW52ZW5pZG9zJyBhbCBpbmljaW9cIlxuLSBcIlF1aWVybyB1biB0ZXh0byBibGFuY28gcXVlIGRpZ2EgJ0ZpbicgYWwgZmluYWwgZGVsIHZpZGVvXCJcbi0gXCJOZWNlc2l0byB1bmEgaW1hZ2VuIGVuIGVsIHNlZ3VuZG8gMTBcIlxuLSBcIkNvbG9jYSB1biB2aWRlbyBkZSBpbnRyb2R1Y2Npw7NuIGFsIHByaW5jaXBpb1wiXG5cblNpIGVsIHVzdWFyaW8gYWRqdW50YSB1bmEgaW1hZ2VuIGVuIGVsIG1lbnNhamUsIGxhIFVSTCBlc3RhcsOhIGVuIGZvcm1hdG8gW0lNQUdFTjogdXJsX2RlX2xhX2ltYWdlbl0uXG5EZWJlcyBkZXRlY3RhciBzaSBxdWllcmUgYWdyZWdhciBlc3RhIGltYWdlbiBhbCB2aWRlbyB5IGVuIHF1w6kgbW9tZW50byB0ZW1wb3JhbC5cbmBcbiAgICAgIH07XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvYWktY2hhdCcsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgbWVzc2FnZXM6IFtjb250ZXh0TWVzc2FnZSwgLi4uYXBpTWVzc2FnZXNdLFxuICAgICAgICAgICAgLy8gVXNhciBsYSBVUkwgZGUgbGEgaW1hZ2VuIGFjdHVhbCBwYXJhIGVzdGEgc29saWNpdHVkIHNpIGV4aXN0ZSxcbiAgICAgICAgICAgIC8vIGRlIGxvIGNvbnRyYXJpbyB1c2FyIGxhIMO6bHRpbWEgVVJMIGd1YXJkYWRhXG4gICAgICAgICAgICBsYXN0SW1hZ2VVcmw6IGN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0IHx8IGxhc3RVcGxvYWRlZEltYWdlVXJsIHx8IFwiXCJcbiAgICAgICAgICB9KSxcbiAgICAgICAgICAvLyBBZ3JlZ2FyIHRpbWVvdXQgcGFyYSBldml0YXIgZXNwZXJhcyBpbmZpbml0YXNcbiAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoMTUwMDApIC8vIDE1IHNlZ3VuZG9zIG3DoXhpbW9cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZGUgQVBJOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgICAvLyBBc2VndXJhcnNlIGRlIHF1ZSBkYXRhLm1lc3NhZ2UuY29udGVudCBleGlzdGVcbiAgICAgICAgY29uc3QgYWlSZXNwb25zZSA9IGRhdGE/Lm1lc3NhZ2U/LmNvbnRlbnQgfHwgXCJMbyBzaWVudG8sIG5vIHB1ZGUgZW50ZW5kZXIgdHUgc29saWNpdHVkLlwiO1xuXG4gICAgICAgIC8vIE9idGVuZXIgbG9zIGRhdG9zIGRlbCBlbGVtZW50byBzaSBleGlzdGVuIChjb24gdmVyaWZpY2FjacOzbiBzZWd1cmEpXG4gICAgICAgIGNvbnN0IGVsZW1lbnREYXRhID0gZGF0YT8uZWxlbWVudERhdGE7XG5cbiAgICAgICAgLy8gVmFyaWFibGUgcGFyYSBsYSByZXNwdWVzdGEgZmluYWxcbiAgICAgICAgbGV0IGZpbmFsUmVzcG9uc2UgPSBhaVJlc3BvbnNlO1xuICAgICAgICAvLyBDcmVhciB1bmEgcmVmZXJlbmNpYSBhIGxhIHJlc3B1ZXN0YSBmaW5hbCBwYXJhIHF1ZSBzZWEgYWNjZXNpYmxlIGVuIGxhIGZ1bmNpw7NuIHByb2Nlc2Fkb3JhXG4gICAgICAgIGNvbnN0IGZpbmFsUmVzcG9uc2VSZWYgPSB7IGN1cnJlbnQ6IGZpbmFsUmVzcG9uc2UgfTtcbiAgICAgICAgbGV0IGVsZW1lbnRBZGRlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIFVzYXIgbGEgZnVuY2nDs24gZGUgcHJvY2VzYW1pZW50byBkZSBlbGVtZW50b3NcbiAgICAgICAgY29uc3QgcHJvY2Vzc1Jlc3VsdCA9IGF3YWl0IHByb2Nlc3NEZXRlY3RlZEVsZW1lbnQoXG4gICAgICAgICAgZWxlbWVudERhdGEsXG4gICAgICAgICAgY29tbWFuZEV4ZWN1dG9yLFxuICAgICAgICAgIGZpbmFsUmVzcG9uc2VSZWYsXG4gICAgICAgICAgdGltZWxpbmUsXG4gICAgICAgICAgbGFzdFVwbG9hZGVkSW1hZ2VVcmwsXG4gICAgICAgICAgY3VycmVudEltYWdlVXJsRm9yVGhpc1JlcXVlc3RcbiAgICAgICAgKTtcblxuICAgICAgICBmaW5hbFJlc3BvbnNlID0gcHJvY2Vzc1Jlc3VsdC5maW5hbFJlc3BvbnNlO1xuICAgICAgICBlbGVtZW50QWRkZWQgPSBwcm9jZXNzUmVzdWx0LmVsZW1lbnRBZGRlZDtcblxuICAgICAgICAvLyBDcmVhciBtZW5zYWplIGNvbiBsb3MgZGV0YWxsZXMgY29tcGxldG9zXG4gICAgICAgIGNvbnN0IG5ld01lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgICBjb250ZW50OiBmaW5hbFJlc3BvbnNlIHx8IGRhdGEubWVzc2FnZS5jb250ZW50LFxuICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFNpIHNlIGRldGVjdMOzIHVuIGVsZW1lbnRvIGRlIG3DunNpY2EsIGFncmVnYXIgbGFzIG9wY2lvbmVzIGFsIG1lbnNhamVcbiAgICAgICAgaWYgKGVsZW1lbnREYXRhPy5kZXRlY3RlZCAmJlxuICAgICAgICAgICAgZWxlbWVudERhdGEuZWxlbWVudD8udHlwZSA9PT0gXCJtdXNpY1wiICYmXG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KGVsZW1lbnREYXRhLmVsZW1lbnQub3B0aW9ucykpIHtcblxuICAgICAgICAgIG5ld01lc3NhZ2UubXVzaWNPcHRpb25zID0gZWxlbWVudERhdGEuZWxlbWVudC5vcHRpb25zO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiT3BjaW9uZXMgZGUgbcO6c2ljYSBhZ3JlZ2FkYXMgYWwgbWVuc2FqZTpcIiwgbmV3TWVzc2FnZS5tdXNpY09wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWN0dWFsaXphciBtZW5zYWplc1xuICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCBuZXdNZXNzYWdlXSk7XG4gICAgICB9IGNhdGNoIChhcGlFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbGEgY29tdW5pY2FjacOzbiBjb24gbGEgQVBJOlwiLCBhcGlFcnJvcik7XG5cbiAgICAgICAgLy8gTWVuc2FqZSBkZSBlcnJvciBlc3BlY8OtZmljbyBkZSBBUElcbiAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAoRGF0ZS5ub3coKSArIDEpLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBjb250ZW50OiBcIkxvIHNpZW50bywgaGEgb2N1cnJpZG8gdW4gZXJyb3IgYWwgY29tdW5pY2Fyc2UgY29uIGVsIHNlcnZpY2lvIGRlIElBLiBQb3IgZmF2b3IsIGludGVudGEgZGUgbnVldm8gZW4gdW5vcyBtb21lbnRvcy5cIixcbiAgICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgfSxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBwcm9jZXNhciBlbCBtZW5zYWplOlwiLCBlcnJvcik7XG5cbiAgICAgIC8vIERldGVybWluYXIgbWVuc2FqZSBkZSBlcnJvciBhcHJvcGlhZG9cbiAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSBcIkxvIHNpZW50bywgaGEgb2N1cnJpZG8gdW4gZXJyb3IgYWwgcHJvY2VzYXIgdHUgbWVuc2FqZS5cIjtcblxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJ0aW1lb3V0XCIpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJhYm9ydFwiKSkge1xuICAgICAgICAgIGVycm9yTWVzc2FnZSA9IFwiTGEgc29saWNpdHVkIGhhIHRhcmRhZG8gZGVtYXNpYWRvLiBQcnVlYmEgY29uIHVuIG1lbnNhamUgbcOhcyBjb3J0by5cIjtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwibmV0d29ya1wiKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwiZmV0Y2hcIikpIHtcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIlBhcmVjZSBxdWUgaGF5IHVuIHByb2JsZW1hIGRlIGNvbmV4acOzbi4gVmVyaWZpY2EgdHUgY29uZXhpw7NuIGEgaW50ZXJuZXQgZSBpbnRlbnRhIGRlIG51ZXZvLlwiO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIE1lbnNhamUgZGUgZXJyb3JcbiAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbXG4gICAgICAgIC4uLnByZXYsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogKERhdGUubm93KCkgKyAxKS50b1N0cmluZygpLFxuICAgICAgICAgIGNvbnRlbnQ6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgfSxcbiAgICAgIF0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICAvLyBGdW5jacOzbiBwYXJhIG1hbmVqYXIgbGEgc2VsZWNjacOzbiBkZSBtw7pzaWNhXG4gIGNvbnN0IGhhbmRsZU11c2ljU2VsZWN0ID0gYXN5bmMgKG11c2ljUGF0aDogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGBVc3VhcmlvIHNlbGVjY2lvbsOzIG3DunNpY2E6ICR7bXVzaWNQYXRofWApO1xuXG4gICAgICAvLyBDYWxjdWxhciBsYSBkdXJhY2nDs24gZGVsIHZpZGVvIGVuIHNlZ3VuZG9zXG4gICAgICBjb25zdCB2aWRlb0R1cmF0aW9uID0gdGltZWxpbmU/LmR1cmF0aW9uID8gTWF0aC5mbG9vcih0aW1lbGluZS5kdXJhdGlvbiAvIDEwMDApIDogMzAwOyAvLyA1IG1pbnV0b3MgcG9yIGRlZmVjdG9cbiAgICAgIGNvbnNvbGUubG9nKGBEdXJhY2nDs24gZGVsIHZpZGVvOiAke3ZpZGVvRHVyYXRpb259IHNlZ3VuZG9zYCk7XG5cbiAgICAgIC8vIENvbmZpZ3VyYWNpw7NuIGRlIG9wY2lvbmVzIHBhcmEgbGEgbcO6c2ljYVxuICAgICAgY29uc3QgbXVzaWNPcHRpb25zID0ge1xuICAgICAgICBzdGFydFRpbWU6IDAsXG4gICAgICAgIGVuZFRpbWU6IHZpZGVvRHVyYXRpb24sIC8vIFVzYXIgdG9kYSBsYSBkdXJhY2nDs24gZGVsIHZpZGVvXG4gICAgICAgIHZvbHVtZTogODAsXG4gICAgICAgIGZhZGVJbjogdHJ1ZSxcbiAgICAgICAgZmFkZU91dDogdHJ1ZVxuICAgICAgfTtcblxuICAgICAgLy8gQcOxYWRpciBsYSBtw7pzaWNhIGFsIHRpbWVsaW5lIChyZXNwZXRhcsOhIGxhIGR1cmFjacOzbiBuYXR1cmFsIHNpIGVzIG3DoXMgY29ydGEgcXVlIGVsIHZpZGVvKVxuICAgICAgY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQuYWRkTXVzaWMobXVzaWNQYXRoLCBtdXNpY09wdGlvbnMpO1xuXG4gICAgICAvLyBPYnRlbmVyIHVuIG5vbWJyZSBhbWlnYWJsZSBwYXJhIGxhIG3DunNpY2FcbiAgICAgIGNvbnN0IGdldE11c2ljRnJpZW5kbHlOYW1lID0gKHBhdGgpID0+IHtcbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBwYXRoLnNwbGl0KCcvJykucG9wKCkgfHwgcGF0aDtcbiAgICAgICAgaWYgKGZpbGVuYW1lID09PSBcInNvbmcxLm1wM1wiKSByZXR1cm4gXCJNw7pzaWNhIEVuZXJnw6l0aWNhXCI7XG4gICAgICAgIGlmIChmaWxlbmFtZSA9PT0gXCJzb25nMi5tcDNcIikgcmV0dXJuIFwiTWVsb2TDrWEgUmVsYWphbnRlXCI7XG4gICAgICAgIHJldHVybiBmaWxlbmFtZTtcbiAgICAgIH07XG5cbiAgICAgIC8vIEHDsWFkaXIgdW4gbWVuc2FqZSBkZSBjb25maXJtYWNpw7NuXG4gICAgICBjb25zdCBtdXNpY05hbWUgPSBnZXRNdXNpY0ZyaWVuZGx5TmFtZShtdXNpY1BhdGgpO1xuICAgICAgY29uc3QgY29uZmlybWF0aW9uTXNnOiBNZXNzYWdlID0ge1xuICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICBjb250ZW50OiBgSGUgYcOxYWRpZG8gXCIke211c2ljTmFtZX1cIiBjb21vIG3DunNpY2EgZGUgZm9uZG8gcGFyYSB0b2RhIGxhIGR1cmFjacOzbiBkZWwgdmlkZW8uYCxcbiAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgfTtcblxuICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgY29uZmlybWF0aW9uTXNnXSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGHDsWFkaXIgbcO6c2ljYTpcIiwgZXJyb3IpO1xuXG4gICAgICAvLyBNZW5zYWplIGRlIGVycm9yXG4gICAgICBjb25zdCBlcnJvck1zZzogTWVzc2FnZSA9IHtcbiAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgY29udGVudDogYE5vIHNlIHB1ZG8gYcOxYWRpciBsYSBtw7pzaWNhLiBFcnJvcjogJHtlcnJvci5tZXNzYWdlIHx8IFwiRXJyb3IgZGVzY29ub2NpZG9cIn1gLFxuICAgICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICB9O1xuXG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCBlcnJvck1zZ10pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLWZ1bGwgZmxleC1jb2wgYmctW3JnYigyMCwxMCwzMCldIGJvcmRlci1sIGJvcmRlci1wdXJwbGUtODAwLzMwXCI+XG4gICAgICB7LyogSGVhZGVyIHNpbXBsaWZpY2FkbyAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctW3JnYigzMCwxNSw0NSldIHAtMyBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgYm9yZGVyLWIgYm9yZGVyLXB1cnBsZS04MDAvMzBcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC03IHctNyByb3VuZGVkIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLXB1cnBsZS03MDBcIj5cbiAgICAgICAgICAgIDxTcGFya2xlcyBjbGFzc05hbWU9XCJoLTMuNSB3LTMuNSB0ZXh0LXdoaXRlXCIgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC13aGl0ZSB0ZXh0LXNtXCI+QXNpc3RlbnRlIElBPC9oMz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTFcIj5cbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICB2YXJpYW50PVwiZ2hvc3RcIlxuICAgICAgICAgICAgc2l6ZT1cImljb25cIlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC03IHctNyByb3VuZGVkIGhvdmVyOmJnLXB1cnBsZS04MDAvMjBcIlxuICAgICAgICAgICAgb25DbGljaz17cmVzZXRDaGF0fVxuICAgICAgICAgICAgdGl0bGU9XCJSZWluaWNpYXIgY29udmVyc2FjacOzblwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFJlZnJlc2hDdyBjbGFzc05hbWU9XCJoLTMuNSB3LTMuNSB0ZXh0LXppbmMtMzAwXCIgLz5cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIMOBcmVhIGRlIG1lbnNhamVzIHNpbXBsaWZpY2FkYSAqL31cbiAgICAgIDxTY3JvbGxBcmVhIGNsYXNzTmFtZT1cImZsZXgtMSBwci0yIGNoYXQtc2Nyb2xsYmFyXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0zIHNwYWNlLXktM1wiPlxuICAgICAgICAgIHttZXNzYWdlcy5tYXAoKG1lc3NhZ2UpID0+IChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAga2V5PXttZXNzYWdlLmlkfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4IGZsZXgtY29sIGFuaW1hdGUtZmFkZUluICR7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5yb2xlID09PSBcImFzc2lzdGFudFwiID8gXCJpdGVtcy1zdGFydFwiIDogXCJpdGVtcy1lbmRcIlxuICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YG1heC13LVs4NSVdIHJvdW5kZWQtbWQgcHgtNCBweS0yICR7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvbGUgPT09IFwiYXNzaXN0YW50XCJcbiAgICAgICAgICAgICAgICAgICAgPyBcImJnLVtyZ2IoNDAsMjAsNjApXSB0ZXh0LXppbmMtMjAwXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcImJnLXB1cnBsZS03MDAgdGV4dC13aGl0ZVwiXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndoaXRlc3BhY2UtcHJlLXdyYXAgdGV4dC1zbVwiPnttZXNzYWdlLmNvbnRlbnR9PC9kaXY+XG4gICAgICAgICAgICAgICAge21lc3NhZ2UuaW1hZ2VVcmwgJiYgKFxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHJvdW5kZWQgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICBzcmM9e21lc3NhZ2UuaW1hZ2VVcmx9XG4gICAgICAgICAgICAgICAgICAgICAgYWx0PVwiSW1hZ2VuIGFkanVudGFcIlxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1heC1oLTQ4IG1heC13LWZ1bGwgb2JqZWN0LWNvbnRhaW5cIlxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICB7bWVzc2FnZS5tdXNpY09wdGlvbnMgJiYgbWVzc2FnZS5tdXNpY09wdGlvbnMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgICA8TXVzaWNPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e21lc3NhZ2UubXVzaWNPcHRpb25zfVxuICAgICAgICAgICAgICAgICAgICBvblNlbGVjdE11c2ljPXtoYW5kbGVNdXNpY1NlbGVjdH1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgdGV4dC1bMTBweF0gbXQtMC41IHB4LTEgJHttZXNzYWdlLnJvbGUgPT09IFwiYXNzaXN0YW50XCIgPyBcInRleHQtemluYy01MDBcIiA6IFwidGV4dC1wdXJwbGUtMzAwXCJ9YH0+XG4gICAgICAgICAgICAgICAge21lc3NhZ2UudGltZXN0YW1wLnRvTG9jYWxlVGltZVN0cmluZyhbXSwgeyBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnIH0pfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkpfVxuICAgICAgICAgIDxkaXYgcmVmPXttZXNzYWdlc0VuZFJlZn0gY2xhc3NOYW1lPVwiaC0yXCIgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L1Njcm9sbEFyZWE+XG5cbiAgICAgIHsvKiDDgXJlYSBkZSB2aXN0YSBwcmV2aWEgZGUgaW1hZ2VuICovfVxuICAgICAge2ltYWdlUHJldmlldyAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgbXgtMyBtdC0xIG1iLTIgaC0yNCBiZy1bcmdiKDMwLDE1LDQ1KV0gcC0yIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1wdXJwbGUtODAwLzMwXCI+XG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCJcbiAgICAgICAgICAgIHNpemU9XCJpY29uXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHJpZ2h0LTEgdG9wLTEgei0xMCBoLTUgdy01IHJvdW5kZWQtZnVsbCBiZy1ibGFjay81MFwiXG4gICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZW1vdmVJbWFnZX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8WCBjbGFzc05hbWU9XCJoLTMgdy0zIHRleHQtd2hpdGVcIiAvPlxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgIHNyYz17aW1hZ2VQcmV2aWV3fVxuICAgICAgICAgICAgYWx0PVwiVmlzdGEgcHJldmlhXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1heC1oLWZ1bGwgbWF4LXctZnVsbCBvYmplY3QtY29udGFpblwiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7Lyogw4FyZWEgZGUgZW50cmFkYSBzaW1wbGlmaWNhZGEgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLVtyZ2IoMzAsMTUsNDUpXSBwLTMgYm9yZGVyLXQgYm9yZGVyLXB1cnBsZS04MDAvMzBcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCByb3VuZGVkIG92ZXJmbG93LWhpZGRlbiBib3JkZXIgYm9yZGVyLXB1cnBsZS05MDAvNTAgZmxleC0xIGJnLVtyZ2IoMjUsMTIsNDApXVwiPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB2YXJpYW50PVwiZ2hvc3RcIlxuICAgICAgICAgICAgICBzaXplPVwiaWNvblwiXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtOSB3LTkgYmctdHJhbnNwYXJlbnQgaG92ZXI6YmctcHVycGxlLTgwMC8yMFwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUltYWdlQ2xpY2t9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmd9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxJbWFnZUljb24gY2xhc3NOYW1lPVwiaC00IHctNCB0ZXh0LXppbmMtNDAwXCIgLz5cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuXG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgdmFsdWU9e2lucHV0fVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldElucHV0KGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgb25LZXlEb3duPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICBoYW5kbGVTZW5kTWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFc2NyaWJlIHR1IG1lbnNhamUuLi5cIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17aXNMb2FkaW5nfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTEgYm9yZGVyLTAgYmctdHJhbnNwYXJlbnQgaC05IGZvY3VzOnJpbmctMCBmb2N1cy12aXNpYmxlOnJpbmctMCB0ZXh0LXppbmMtMjAwXCJcbiAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2VuZE1lc3NhZ2V9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXsoIWlucHV0LnRyaW0oKSAmJiAhaW1hZ2VGaWxlKSB8fCBpc0xvYWRpbmd9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YGgtOSBweC0zIHJvdW5kZWQtbm9uZSAke1xuICAgICAgICAgICAgICAgICghaW5wdXQudHJpbSgpICYmICFpbWFnZUZpbGUpIHx8IGlzTG9hZGluZ1xuICAgICAgICAgICAgICAgICAgPyBcImJnLXB1cnBsZS05MDAvNTAgY3Vyc29yLW5vdC1hbGxvd2VkIHRleHQtcHVycGxlLTMwMC81MFwiXG4gICAgICAgICAgICAgICAgICA6IFwiYmctcHVycGxlLTcwMCBob3ZlcjpiZy1wdXJwbGUtNjAwIHRleHQtd2hpdGVcIlxuICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2lzTG9hZGluZyB8fCBpc1VwbG9hZGluZyA/IChcbiAgICAgICAgICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9XCJoLTQgdy00IGFuaW1hdGUtc3BpblwiIC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPFNlbmQgY2xhc3NOYW1lPVwiaC0zLjUgdy0zLjVcIiAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxpbnB1dFxuICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgIHJlZj17ZmlsZUlucHV0UmVmfVxuICAgICAgICBvbkNoYW5nZT17aGFuZGxlRmlsZUNoYW5nZX1cbiAgICAgICAgYWNjZXB0PVwiaW1hZ2UvKlwiXG4gICAgICAgIGNsYXNzTmFtZT1cImhpZGRlblwiXG4gICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmd9XG4gICAgICAvPlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlUmVmIiwidXNlRWZmZWN0IiwiQnV0dG9uIiwiSW5wdXQiLCJTY3JvbGxBcmVhIiwiU2VuZCIsIkxvYWRlcjIiLCJJbWFnZUljb24iLCJYIiwiU3BhcmtsZXMiLCJSZWZyZXNoQ3ciLCJ1c2VEYXRhU3RhdGUiLCJ1c2VTdGF0ZU1hbmFnZXIiLCJjcmVhdGVWaWRlb0NvbW1hbmRFeGVjdXRvciIsImNyZWF0ZVVwbG9hZHNEZXRhaWxzIiwiQ29tbWFuZEV4ZWN1dG9yU2VydmljZSIsImV4dHJhY3RJbWFnZVRpbWVzRnJvbU1lc3NhZ2UiLCJtZXNzYWdlQ29udGVudCIsInN0YXJ0VGltZSIsImVuZFRpbWUiLCJzdGFydFRpbWVQYXR0ZXJucyIsImVuZFRpbWVQYXR0ZXJucyIsImlzQXRTdGFydCIsInRlc3QiLCJpc0F0RW5kIiwicGF0dGVybiIsIm1hdGNoIiwidG9TdHJpbmciLCJpbmNsdWRlcyIsInBhcnNlSW50IiwiTXVzaWNPcHRpb25zIiwib3B0aW9ucyIsIm9uU2VsZWN0TXVzaWMiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJnZXRGcmllbmRseU5hbWUiLCJtdXNpY1BhdGgiLCJmaWxlbmFtZSIsInNwbGl0IiwicG9wIiwiZGl2IiwiY2xhc3NOYW1lIiwibWFwIiwiaW5kZXgiLCJtdXNpY05hbWUiLCJidXR0b24iLCJvbkNsaWNrIiwic3ZnIiwieG1sbnMiLCJ2aWV3Qm94IiwiZmlsbCIsInBhdGgiLCJkIiwic3Ryb2tlV2lkdGgiLCJzdHJva2UiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iLCJwcm9jZXNzRGV0ZWN0ZWRFbGVtZW50IiwiZWxlbWVudERhdGEiLCJjb21tYW5kRXhlY3V0b3IiLCJmaW5hbFJlc3BvbnNlUmVmIiwidGltZWxpbmUiLCJsYXN0VXBsb2FkZWRJbWFnZVVybCIsImN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0IiwiZWxlbWVudEFkZGVkIiwiZmluYWxSZXNwb25zZSIsImN1cnJlbnQiLCJkZXRlY3RlZCIsImNvbmZpZGVuY2UiLCJlbGVtZW50IiwidHlwZSIsImNvbnRlbnQiLCJ0ZXh0T3B0aW9ucyIsImNvbG9yIiwidG9Mb3dlckNhc2UiLCJhZGRUZXh0IiwiaW1hZ2VPcHRpb25zIiwicG9zaXRpb24iLCJ4IiwieSIsImNvbnNvbGUiLCJsb2ciLCJ2aWRlb0R1cmF0aW9uIiwiZHVyYXRpb24iLCJNYXRoIiwiZmxvb3IiLCJtYXgiLCJpc0dlbmVyaWNVcmwiLCJ1cmwiLCJpc0xvY2FsSW1hZ2UiLCJzdGFydHNXaXRoIiwiaW1hZ2VVcmwiLCJhZGRJbWFnZSIsInZpZGVvT3B0aW9ucyIsInZpZGVvVXJsIiwiYWRkVmlkZW8iLCJzdWJ0aXRsZU9wdGlvbnMiLCJncm91cFdvcmRzIiwidW5kZWZpbmVkIiwiYWRkU3VidGl0bGVzIiwic2VnbWVudHMiLCJzZWdtZW50Iiwic2VnbWVudHNGb3JtYXR0ZWQiLCJzIiwiam9pbiIsInJlc3VsdCIsInJlbW92ZVNlZ21lbnRzIiwiZXJyb3IiLCJtZXNzYWdlIiwiY29tcGFjdFRpbWVsaW5lIiwic21hcnRUcmltIiwiQUlDaGF0IiwibWVzc2FnZXMiLCJzZXRNZXNzYWdlcyIsImlkIiwicm9sZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJpbnB1dCIsInNldElucHV0IiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwiaW1hZ2VGaWxlIiwic2V0SW1hZ2VGaWxlIiwiaW1hZ2VQcmV2aWV3Iiwic2V0SW1hZ2VQcmV2aWV3IiwiaXNVcGxvYWRpbmciLCJzZXRJc1VwbG9hZGluZyIsInNldExhc3RVcGxvYWRlZEltYWdlVXJsIiwiZmlsZUlucHV0UmVmIiwibWVzc2FnZXNFbmRSZWYiLCJzdGF0ZU1hbmFnZXIiLCJzY2VuZXMiLCJwbGF5ZXJSZWYiLCJzZXRFeGVjdXRvciIsInJlc2V0Q2hhdCIsIm5vdyIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiY2xpY2siLCJoYW5kbGVGaWxlQ2hhbmdlIiwiZSIsImZpbGUiLCJ0YXJnZXQiLCJmaWxlcyIsInByZXZpZXdVcmwiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJoYW5kbGVSZW1vdmVJbWFnZSIsInZhbHVlIiwidXBsb2FkSW1hZ2UiLCJ1cGxvYWREZXRhaWxzIiwibmFtZSIsInVwbG9hZFVybCIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsImhlYWRlcnMiLCJFcnJvciIsImhhbmRsZVNlbmRNZXNzYWdlIiwidHJpbSIsInVzZXJNZXNzYWdlIiwidXBsb2FkZWRJbWFnZVVybCIsInN1YnN0cmluZyIsInByZXYiLCJhcGlNZXNzYWdlcyIsImNvbmNhdCIsIm1zZyIsImlzRGF0YVVybCIsImltYWdlVXJsVG9TZW5kIiwiY29udGV4dE1lc3NhZ2UiLCJnZXRDdXJyZW50VGltZSIsImNhbnZhcyIsImdldE9iamVjdHMiLCJkYXRhIiwicmVzcG9uc2UiLCJKU09OIiwic3RyaW5naWZ5IiwibGFzdEltYWdlVXJsIiwic2lnbmFsIiwiQWJvcnRTaWduYWwiLCJ0aW1lb3V0Iiwib2siLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwianNvbiIsImFpUmVzcG9uc2UiLCJwcm9jZXNzUmVzdWx0IiwibmV3TWVzc2FnZSIsIm11c2ljT3B0aW9ucyIsImFwaUVycm9yIiwiZXJyb3JNZXNzYWdlIiwiaGFuZGxlTXVzaWNTZWxlY3QiLCJ2b2x1bWUiLCJmYWRlSW4iLCJmYWRlT3V0IiwiYWRkTXVzaWMiLCJnZXRNdXNpY0ZyaWVuZGx5TmFtZSIsImNvbmZpcm1hdGlvbk1zZyIsImVycm9yTXNnIiwiaDMiLCJ2YXJpYW50Iiwic2l6ZSIsInRpdGxlIiwiaW1nIiwic3JjIiwiYWx0IiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiaG91ciIsIm1pbnV0ZSIsInJlZiIsImRpc2FibGVkIiwib25DaGFuZ2UiLCJvbktleURvd24iLCJrZXkiLCJzaGlmdEtleSIsInByZXZlbnREZWZhdWx0IiwicGxhY2Vob2xkZXIiLCJhY2NlcHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/ai-chat/index.tsx\n"));

/***/ })

});
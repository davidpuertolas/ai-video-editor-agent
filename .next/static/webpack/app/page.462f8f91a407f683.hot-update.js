"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./components/ai-chat/index.tsx":
/*!**************************************!*\
  !*** ./components/ai-chat/index.tsx ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ AIChat; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./components/ui/button.tsx\");\n/* harmony import */ var _components_ui_input__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/ui/input */ \"(app-pages-browser)/./components/ui/input.tsx\");\n/* harmony import */ var _components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/ui/scroll-area */ \"(app-pages-browser)/./components/ui/scroll-area.tsx\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/sparkles.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/refresh-cw.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/image.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/send.js\");\n/* harmony import */ var _features_editor_store_use_data_state__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/features/editor/store/use-data-state */ \"(app-pages-browser)/./features/editor/store/use-data-state.ts\");\n/* harmony import */ var _features_editor_hooks_state_manager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/features/editor/hooks/state-manager */ \"(app-pages-browser)/./features/editor/hooks/state-manager.tsx\");\n/* harmony import */ var _ai_video_commands__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ai-video-commands */ \"(app-pages-browser)/./components/ai-chat/ai-video-commands.ts\");\n/* harmony import */ var _utils_upload__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/utils/upload */ \"(app-pages-browser)/./utils/upload.ts\");\n/* harmony import */ var _features_editor_services_command_executor_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/features/editor/services/command-executor-service */ \"(app-pages-browser)/./features/editor/services/command-executor-service.ts\");\n/* harmony import */ var _features_editor_store_use_store__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/features/editor/store/use-store */ \"(app-pages-browser)/./features/editor/store/use-store.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n// Indica si la solicitud debe ser procesada por el agente\nfunction shouldUseAgent(mode, message) {\n    if (mode !== \"agent\") return false;\n    // Patrones que indican que el usuario quiere que el agente edite automáticamente el video\n    const autoEditPatterns = [\n        /edita\\s+(el|este|mi)?\\s*video/i,\n        /mejora\\s+(el|este|mi)?\\s*video/i,\n        /optimiza\\s+(el|este|mi)?\\s*video/i,\n        /procesa\\s+(el|este|mi)?\\s*video/i,\n        /arregla\\s+(el|este|mi)?\\s*video/i,\n        /modifica\\s+(el|este|mi)?\\s*video/i,\n        /trabaja\\s+(en|con)\\s+(el|este|mi)?\\s*video/i,\n        /puedes\\s+editar/i,\n        /^edita$/i,\n        /^editar$/i,\n        /^mejora$/i,\n        /^optimiza$/i\n    ];\n    return autoEditPatterns.some((pattern)=>pattern.test(message.trim()));\n}\n// Función para extraer tiempos de inicio y fin de una imagen a partir del mensaje\nfunction extractImageTimesFromMessage(messageContent) {\n    let startTime = 0;\n    let endTime = 5;\n    if (!messageContent) return {\n        startTime,\n        endTime\n    };\n    // Buscar referencias al tiempo inicial\n    const startTimePatterns = [\n        /en el segundo (\\d+)/i,\n        /desde el segundo (\\d+)/i,\n        /a partir del segundo (\\d+)/i,\n        /comenzando en el segundo (\\d+)/i,\n        /desde el minuto (\\d+)/i,\n        /en el minuto (\\d+)/i,\n        /entre los segundos (\\d+) y/i,\n        /del segundo (\\d+) al/i,\n        /empezando en (\\d+)/i,\n        /segundo (\\d+)/i,\n        /en (\\d+) segundos/i,\n        /en el (\\d+)/i\n    ];\n    // Buscar referencias al tiempo final\n    const endTimePatterns = [\n        /hasta el segundo (\\d+)/i,\n        /al segundo (\\d+)/i,\n        /terminando en el segundo (\\d+)/i,\n        /hasta el minuto (\\d+)/i,\n        /entre los segundos \\d+ y (\\d+)/i,\n        /del segundo \\d+ al (\\d+)/i,\n        /por (\\d+) segundos/i,\n        /durante (\\d+) segundos/i\n    ];\n    // Buscar palabras clave especiales\n    const isAtStart = /\\b(al inicio|al principio|al comienzo)\\b/i.test(messageContent);\n    const isAtEnd = /\\b(al final|al término|al acabar)\\b/i.test(messageContent);\n    // Procesar patrones de tiempo inicial\n    for (const pattern of startTimePatterns){\n        const match = messageContent.match(pattern);\n        if (match && match[1]) {\n            // Si es referencia a minutos, convertir a segundos\n            startTime = pattern.toString().includes(\"minuto\") ? parseInt(match[1]) * 60 : parseInt(match[1]);\n            break;\n        }\n    }\n    // Procesar patrones de tiempo final\n    for (const pattern of endTimePatterns){\n        const match = messageContent.match(pattern);\n        if (match && match[1]) {\n            if (pattern.toString().includes(\"por\") || pattern.toString().includes(\"durante\")) {\n                // Es una duración relativa, sumar al tiempo inicial\n                endTime = startTime + parseInt(match[1]);\n            } else {\n                // Es un tiempo absoluto\n                endTime = pattern.toString().includes(\"minuto\") ? parseInt(match[1]) * 60 : parseInt(match[1]);\n            }\n            break;\n        }\n    }\n    // Si se menciona \"al inicio\", establecer tiempo a 0\n    if (isAtStart) {\n        startTime = 0;\n        endTime = 5; // Por defecto 5 segundos de duración\n    }\n    // Si se menciona \"al final\", establecer valores relativos al final\n    // Nota: El valor real se ajustará en el cliente según la duración\n    if (isAtEnd) {\n        startTime = -1; // Código especial para \"final - 5 segundos\"\n        endTime = -1; // Código especial para \"final\"\n    }\n    // Si no se detectó tiempo final pero sí inicial, establecer una duración predeterminada\n    if (startTime > 0 && endTime === 5 && startTime !== 0) {\n        endTime = startTime + 5;\n    }\n    return {\n        startTime,\n        endTime\n    };\n}\n// Función para procesar elementos detectados por la IA\nconst processDetectedElement = async (elementData, commandExecutor, finalResponseRef, timeline, lastUploadedImageUrl, currentImageUrlForThisRequest)=>{\n    let elementAdded = false;\n    let finalResponse = finalResponseRef.current;\n    try {\n        // Si se detectó un elemento para agregar con confianza suficiente\n        if (elementData && elementData.detected === true && typeof elementData.confidence === \"number\" && elementData.confidence > 0.7 && elementData.element) {\n            const element = elementData.element;\n            // Procesar según el tipo de elemento\n            if (element.type === \"text\" && element.content) {\n                // Configurar opciones para el texto\n                const textOptions = {\n                    startTime: typeof element.startTime === \"number\" ? element.startTime : 0,\n                    endTime: typeof element.endTime === \"number\" ? element.endTime : typeof element.startTime === \"number\" ? element.startTime + 5 : 5\n                };\n                // Asignar color si está disponible\n                if (element.color) {\n                    textOptions.color = element.color.toLowerCase() === \"blanco\" ? \"#FFFFFF\" : element.color.toLowerCase() === \"negro\" ? \"#000000\" : element.color.toLowerCase() === \"rojo\" ? \"#FF0000\" : element.color.toLowerCase() === \"azul\" ? \"#0000FF\" : element.color.toLowerCase() === \"verde\" ? \"#00FF00\" : element.color.toLowerCase() === \"amarillo\" ? \"#FFFF00\" : element.color;\n                }\n                // Añadir el texto\n                commandExecutor.current.addText(element.content, textOptions);\n                // Actualizar respuesta\n                finalResponse += '\\n\\n[He agregado el texto \"'.concat(element.content, '\" ').concat(element.color ? \"con color \".concat(element.color, \" \") : \"\", \"desde el segundo \").concat(textOptions.startTime, \" hasta el segundo \").concat(textOptions.endTime, \"]\");\n                elementAdded = true;\n            } else if (element.type === \"image\") {\n                // Configurar opciones para la imagen\n                const imageOptions = {\n                    startTime: typeof element.startTime === \"number\" ? element.startTime : 0,\n                    endTime: typeof element.endTime === \"number\" ? element.endTime : typeof element.startTime === \"number\" ? element.startTime + 5 : 5,\n                    // Posición centrada por defecto\n                    position: {\n                        x: 0.5,\n                        y: 0.5\n                    }\n                };\n                // Registrar tiempos específicos para depuración\n                console.log(\"Tiempos de imagen recibidos de la API: startTime=\".concat(element.startTime, \", endTime=\").concat(element.endTime));\n                // Manejar casos especiales para \"al final\" del video\n                if (element.startTime === -1 || element.endTime === -1) {\n                    // Calcular la duración del video en segundos\n                    const videoDuration = (timeline === null || timeline === void 0 ? void 0 : timeline.duration) ? Math.floor(timeline.duration / 1000) : 30; // Valor predeterminado si no hay duración\n                    console.log(\"Duraci\\xf3n del video: \".concat(videoDuration, \"s\"));\n                    if (element.startTime === -1 && element.endTime === -1) {\n                        // Si ambos son -1, colocar en los últimos 5 segundos\n                        imageOptions.startTime = Math.max(0, videoDuration - 5);\n                        imageOptions.endTime = videoDuration;\n                        console.log('Ajustando para \"al final\": startTime='.concat(imageOptions.startTime, \", endTime=\").concat(imageOptions.endTime));\n                    } else if (element.startTime === -1) {\n                        // Solo startTime es -1\n                        imageOptions.startTime = Math.max(0, videoDuration - 5);\n                    } else if (element.endTime === -1) {\n                        // Solo endTime es -1\n                        imageOptions.endTime = videoDuration;\n                    }\n                }\n                console.log(\"Tiempos de imagen a aplicar: startTime=\".concat(imageOptions.startTime, \", endTime=\").concat(imageOptions.endTime));\n                // Determinar la URL de la imagen a usar\n                const isGenericUrl = element.url === \"imagen_adjunta_por_el_usuario.jpg\";\n                const isLocalImage = lastUploadedImageUrl && lastUploadedImageUrl.startsWith(\"data:\");\n                let imageUrl;\n                // PRIORIDAD 1: Usar la imagen que acaba de subirse en este mensaje específico\n                if (currentImageUrlForThisRequest) {\n                    imageUrl = currentImageUrlForThisRequest;\n                    console.log(\"Usando la imagen reci\\xe9n subida para esta solicitud espec\\xedfica\");\n                } else if (element.url && !isGenericUrl && !element.url.includes(\"/url_de_la_imagen\")) {\n                    imageUrl = element.url;\n                    console.log(\"Usando URL espec\\xedfica del elemento\");\n                } else if (isGenericUrl && lastUploadedImageUrl) {\n                    imageUrl = lastUploadedImageUrl;\n                    console.log(\"Usando la \\xfaltima imagen subida guardada\");\n                } else {\n                    // Si todo lo demás falla, usar una imagen de ejemplo\n                    imageUrl = \"https://ik.imagekit.io/wombo/images/img2.jpg\";\n                    console.log(\"Usando imagen de ejemplo como fallback\");\n                }\n                // Añadir la imagen\n                commandExecutor.current.addImage(imageUrl, imageOptions);\n                // Actualizar respuesta\n                finalResponse += \"\\n\\n[He agregado la imagen desde el segundo \".concat(imageOptions.startTime, \" hasta el segundo \").concat(imageOptions.endTime, \"]\");\n                elementAdded = true;\n            } else if (element.type === \"video\") {\n                // Configurar opciones para el video\n                const videoOptions = {\n                    startTime: typeof element.startTime === \"number\" ? element.startTime : 0,\n                    endTime: typeof element.endTime === \"number\" ? element.endTime : typeof element.startTime === \"number\" ? element.startTime + 10 : 10\n                };\n                // URL de video de ejemplo (en producción esto sería dinámico)\n                const videoUrl = \"https://cdn.designcombo.dev/videos/demo-video-4.mp4\";\n                // Añadir el video\n                commandExecutor.current.addVideo(videoUrl, videoOptions);\n                // Actualizar respuesta\n                finalResponse += \"\\n\\n[He agregado el video desde el segundo \".concat(videoOptions.startTime, \" hasta el segundo \").concat(videoOptions.endTime, \"]\");\n                elementAdded = true;\n            } else if (element.type === \"subtitles\") {\n                // Configurar opciones para los subtítulos\n                const subtitleOptions = {\n                    groupWords: element.groupWords !== undefined ? element.groupWords : true\n                };\n                // Añadir tiempos si se especificaron\n                if (typeof element.startTime === \"number\") {\n                    subtitleOptions.startTime = element.startTime;\n                }\n                if (typeof element.endTime === \"number\") {\n                    subtitleOptions.endTime = element.endTime;\n                }\n                // Añadir los subtítulos\n                commandExecutor.current.addSubtitles(subtitleOptions);\n                // Actualizar respuesta silenciosa (se maneja en otro lado)\n                elementAdded = true;\n            } else if (element.type === \"segments\" && Array.isArray(element.segments) && element.segments.length > 0) {\n                // Configurar los segmentos a eliminar\n                const segments = element.segments.map((segment)=>({\n                        startTime: typeof segment.startTime === \"number\" ? segment.startTime : 0,\n                        endTime: typeof segment.endTime === \"number\" ? segment.endTime : typeof segment.startTime === \"number\" ? segment.startTime + 5 : 5\n                    }));\n                console.log(\"Eliminando \".concat(segments.length, \" segmentos:\"), segments);\n                // Ejemplo de formato de segmentos a mostrar\n                const segmentsFormatted = segments.map((s)=>\"\".concat(s.startTime, \"-\").concat(s.endTime, \"s\")).join(\", \");\n                try {\n                    // Ejecutar la eliminación de segmentos\n                    const result = await commandExecutor.current.removeSegments(segments);\n                    if (result) {\n                        finalResponse += \"\\n\\n[He eliminado los segmentos solicitados: \".concat(segmentsFormatted, \"]\");\n                    } else {\n                        finalResponse += \"\\n\\n[No pude eliminar los segmentos solicitados. Aseg\\xfarate de que hay un elemento seleccionado en la timeline.]\";\n                    }\n                    elementAdded = true;\n                } catch (error) {\n                    console.error(\"Error al eliminar segmentos:\", error);\n                    finalResponse += \"\\n\\n[Error al intentar eliminar los segmentos: \".concat(error.message || \"Error desconocido\", \"]\");\n                }\n            } else if (element.type === \"compact\") {\n                // Ejecutar la compactación del timeline\n                console.log(\"Compactando timeline por solicitud del usuario\");\n                try {\n                    // Iniciar la compactación\n                    const result = await commandExecutor.current.compactTimeline();\n                    if (result) {\n                        finalResponse += \"\\n\\n[He compactado el timeline eliminando los espacios vac\\xedos entre elementos]\";\n                    } else {\n                        finalResponse += \"\\n\\n[No fue posible compactar el timeline. Puede que no haya elementos o espacios vac\\xedos que compactar]\";\n                    }\n                    elementAdded = true;\n                } catch (error) {\n                    console.error(\"Error al compactar el timeline:\", error);\n                    finalResponse += \"\\n\\n[Error al intentar compactar el timeline: \".concat(error.message || \"Error desconocido\", \"]\");\n                }\n            } else if (element.type === \"smartTrim\") {\n                // Ejecutar el recorte inteligente\n                console.log(\"Iniciando recorte inteligente por solicitud del usuario\");\n                try {\n                    // Mostrar mensaje de análisis en curso\n                    finalResponse += \"\\n\\n[Analizando el video para identificar las partes a eliminar...]\";\n                    // Iniciar el recorte inteligente\n                    const result = await commandExecutor.current.smartTrim();\n                    if (result) {\n                        finalResponse += \"\\n\\n[He realizado un recorte inteligente del video, eliminando las partes innecesarias y compactando el timeline]\";\n                    } else {\n                        finalResponse += \"\\n\\n[No fue posible realizar el recorte inteligente. Verifica que el video tenga una transcripci\\xf3n]\";\n                    }\n                    elementAdded = true;\n                } catch (error) {\n                    console.error(\"Error al realizar el recorte inteligente:\", error);\n                    finalResponse += \"\\n\\n[Error al intentar realizar el recorte inteligente: \".concat(error.message || \"Error desconocido\", \"]\");\n                }\n            } else if (element.type === \"music\" && Array.isArray(element.options) && element.options.length > 0) {\n                // Respuesta más corta para música\n                finalResponse = \"\\xbfCu\\xe1l de estas opciones te gustar\\xeda a\\xf1adir?\";\n                elementAdded = true;\n            }\n        }\n    } catch (error) {\n        console.error(\"Error al procesar elemento detectado:\", error);\n        finalResponse += \"\\n\\n[No pude procesar la solicitud debido a un error.]\";\n    }\n    return {\n        finalResponse,\n        elementAdded\n    };\n};\n// Componente para renderizar opciones de música como botones clickables\nconst MusicOptions = (param)=>{\n    let { options, onSelectMusic } = param;\n    if (!Array.isArray(options) || options.length === 0) {\n        return null;\n    }\n    // Función para convertir el nombre del archivo a un nombre amigable\n    const getFriendlyName = (musicPath)=>{\n        const filename = musicPath.split(\"/\").pop() || musicPath;\n        // Mapear nombres de archivos a nombres amigables\n        if (filename === \"song1.mp3\") return \"M\\xfasica Energ\\xe9tica\";\n        if (filename === \"song2.mp3\") return \"Melod\\xeda Relajante\";\n        // Si no hay mapeo específico, devolver el nombre del archivo\n        return filename;\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col gap-3 mt-3\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-wrap gap-2\",\n            children: options.map((musicPath, index)=>{\n                const musicName = getFriendlyName(musicPath);\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    onClick: ()=>onSelectMusic(musicPath),\n                    className: \"px-4 py-2 text-sm bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-lg transition-all shadow-md hover:shadow-lg flex items-center gap-2 font-medium\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"currentColor\",\n                            className: \"w-5 h-5\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                d: \"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 9l12-3\",\n                                strokeWidth: \"2\",\n                                stroke: \"currentColor\",\n                                fill: \"none\",\n                                strokeLinecap: \"round\",\n                                strokeLinejoin: \"round\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 399,\n                                columnNumber: 17\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 398,\n                            columnNumber: 15\n                        }, undefined),\n                        musicName\n                    ]\n                }, index, true, {\n                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                    lineNumber: 393,\n                    columnNumber: 13\n                }, undefined);\n            })\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n            lineNumber: 389,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n        lineNumber: 388,\n        columnNumber: 5\n    }, undefined);\n};\n_c = MusicOptions;\n// Componente para mostrar la animación de \"pensando\"\nconst ThinkingAnimation = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col items-start animate-fadeIn\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"max-w-[85%] rounded-md px-4 py-2 bg-[rgb(40,20,60)] text-zinc-200\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex gap-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"h-2 w-2 bg-purple-400 rounded-full animate-pulse\",\n                                style: {\n                                    animationDelay: \"0ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 416,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"h-2 w-2 bg-purple-400 rounded-full animate-pulse\",\n                                style: {\n                                    animationDelay: \"300ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 417,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"h-2 w-2 bg-purple-400 rounded-full animate-pulse\",\n                                style: {\n                                    animationDelay: \"600ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 418,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 415,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"text-xs text-zinc-400\",\n                        children: \"Pensando...\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 420,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 414,\n                columnNumber: 7\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n            lineNumber: 413,\n            columnNumber: 5\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n        lineNumber: 412,\n        columnNumber: 3\n    }, undefined);\n_c1 = ThinkingAnimation;\n// Componente para mostrar el razonamiento desplegable\nconst ReasoningSection = (param)=>{\n    let { reasoning } = param;\n    _s();\n    const [isOpen, setIsOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"mt-2 text-xs border-t border-purple-800/30 pt-2\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: ()=>setIsOpen(!isOpen),\n                className: \"flex items-center gap-1 text-purple-400 hover:text-purple-300 transition-colors\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                        xmlns: \"http://www.w3.org/2000/svg\",\n                        width: \"14\",\n                        height: \"14\",\n                        viewBox: \"0 0 24 24\",\n                        fill: \"none\",\n                        stroke: \"currentColor\",\n                        strokeWidth: \"2\",\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\",\n                        className: \"transition-transform \".concat(isOpen ? \"rotate-180\" : \"\"),\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"polyline\", {\n                            points: \"6 9 12 15 18 9\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 448,\n                            columnNumber: 11\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 436,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Ver razonamiento\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 450,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 432,\n                columnNumber: 7\n            }, undefined),\n            isOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 p-2 bg-[rgb(30,15,45)] rounded text-zinc-400 whitespace-pre-wrap\",\n                children: reasoning\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 454,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n        lineNumber: 431,\n        columnNumber: 5\n    }, undefined);\n};\n_s(ReasoningSection, \"+sus0Lb0ewKHdwiUhiTAJFoFyQ0=\");\n_c2 = ReasoningSection;\nfunction AIChat() {\n    _s1();\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([\n        {\n            id: \"1\",\n            content: \"Hola, soy tu asistente de edici\\xf3n de video. \\xbfEn qu\\xe9 puedo ayudarte?\",\n            role: \"assistant\",\n            timestamp: new Date()\n        }\n    ]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [imageFile, setImageFile] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [imagePreview, setImagePreview] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isUploading, setIsUploading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [lastUploadedImageUrl, setLastUploadedImageUrl] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Estado para realizar un seguimiento del progreso del auto-edit\n    const [autoEditStep, setAutoEditStep] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [isAutoEditing, setIsAutoEditing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const stateManager = (0,_features_editor_hooks_state_manager__WEBPACK_IMPORTED_MODULE_6__.useStateManager)();\n    const { timeline, scenes, playerRef } = (0,_features_editor_store_use_data_state__WEBPACK_IMPORTED_MODULE_5__[\"default\"])();\n    const { duration } = (0,_features_editor_store_use_store__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(); // Obtener la duración del store\n    const commandExecutor = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)((0,_ai_video_commands__WEBPACK_IMPORTED_MODULE_7__.createVideoCommandExecutor)(stateManager));\n    // Añadir estado para el modo (chat o agente)\n    const [mode, setMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"chat\");\n    // Inicializar el CommandExecutorService con el executor actual\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (commandExecutor.current) {\n            _features_editor_services_command_executor_service__WEBPACK_IMPORTED_MODULE_9__[\"default\"].setExecutor(commandExecutor.current);\n            console.log(\"CommandExecutorService inicializado con \\xe9xito\");\n        }\n    }, [\n        commandExecutor.current\n    ]);\n    // Función para realizar la edición automática en modo agente\n    const handleAutoEdit = async ()=>{\n        try {\n            setIsAutoEditing(true);\n            // Mensaje inicial explicando el plan completo\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        id: Date.now().toString(),\n                        content: \"\\uD83D\\uDCDD **Plan de edici\\xf3n autom\\xe1tica**\\n\\n1️⃣ Realizar\\xe9 un recorte inteligente del video para eliminar las partes menos relevantes\\n2️⃣ A\\xf1adir\\xe9 subt\\xedtulos autom\\xe1ticos al contenido optimizado\\n\\nComenzando proceso...\",\n                        role: \"assistant\",\n                        timestamp: new Date()\n                    }\n                ]);\n            // Paso 1: Recorte inteligente\n            setAutoEditStep(1);\n            // Mensaje de inicio del recorte inteligente\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        id: Date.now().toString(),\n                        content: \"\\uD83D\\uDD0D **Iniciando recorte inteligente**\\n\\nEstoy analizando el contenido del video para identificar las partes m\\xe1s importantes y eliminar segmentos innecesarios...\",\n                        role: \"assistant\",\n                        timestamp: new Date()\n                    }\n                ]);\n            // Ejecutar el recorte inteligente\n            const smartTrimResult = await commandExecutor.current.smartTrim();\n            // Informar al usuario sobre el resultado del recorte\n            if (smartTrimResult) {\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            id: Date.now().toString(),\n                            content: \"✅ **Recorte inteligente completado**\\n\\nHe identificado y eliminado las partes menos relevantes del video, optimizando la duraci\\xf3n y manteniendo el contenido esencial.\\n\\nProcediendo con el siguiente paso...\",\n                            role: \"assistant\",\n                            timestamp: new Date()\n                        }\n                    ]);\n            } else {\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            id: Date.now().toString(),\n                            content: \"⚠️ **Recorte inteligente no completado**\\n\\nNo he podido realizar el recorte inteligente. Esto puede deberse a que el video no tiene una transcripci\\xf3n adecuada o no se detectaron segmentos para optimizar.\\n\\nContinuar\\xe9 con el siguiente paso...\",\n                            role: \"assistant\",\n                            timestamp: new Date()\n                        }\n                    ]);\n            }\n            // Paso 2: Añadir subtítulos\n            setAutoEditStep(2);\n            // Mensaje de inicio de añadir subtítulos\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        id: Date.now().toString(),\n                        content: \"\\uD83D\\uDD24 **Generando subt\\xedtulos**\\n\\nEstoy procesando el audio del video para crear subt\\xedtulos sincronizados con el contenido...\",\n                        role: \"assistant\",\n                        timestamp: new Date()\n                    }\n                ]);\n            // Configurar opciones para los subtítulos\n            const subtitleOptions = {\n                groupWords: true,\n                startTime: 0,\n                endTime: 1000000 // Hasta el final del video\n            };\n            // Añadir los subtítulos\n            await commandExecutor.current.addSubtitles(subtitleOptions);\n            // Mensaje final con resumen de acciones\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        id: Date.now().toString(),\n                        content: \"\\uD83C\\uDF89 **Edici\\xf3n autom\\xe1tica completada**\\n\\n✅ Recorte inteligente: Partes irrelevantes eliminadas\\n✅ Subt\\xedtulos: A\\xf1adidos y sincronizados con el contenido\\n\\nEl video ha sido optimizado para una mejor experiencia de visualizaci\\xf3n.\\n\\n\\xbfDeseas realizar alguna otra mejora?\",\n                        role: \"assistant\",\n                        timestamp: new Date()\n                    }\n                ]);\n        } catch (error) {\n            console.error(\"Error en la edici\\xf3n autom\\xe1tica:\", error);\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        id: Date.now().toString(),\n                        content: \"❌ **Error durante la edici\\xf3n autom\\xe1tica**\\n\\nHa ocurrido un problema: \".concat(error.message || \"Error desconocido\", \"\\n\\n\\xbfQuieres intentar alguna otra acci\\xf3n?\"),\n                        role: \"assistant\",\n                        timestamp: new Date()\n                    }\n                ]);\n        } finally{\n            setIsAutoEditing(false);\n            setAutoEditStep(0);\n            setIsLoading(false);\n        }\n    };\n    // Función para reiniciar el chat\n    const resetChat = ()=>{\n        setMessages([\n            {\n                id: Date.now().toString(),\n                content: \"Hola, soy tu asistente de edici\\xf3n de video. \\xbfEn qu\\xe9 puedo ayudarte?\",\n                role: \"assistant\",\n                timestamp: new Date()\n            }\n        ]);\n        setInput(\"\");\n        setImageFile(null);\n        setImagePreview(null);\n        setLastUploadedImageUrl(\"\");\n    };\n    // Scroll al último mensaje\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    }, [\n        messages,\n        isLoading\n    ]);\n    // Actualizar el ejecutor de comandos cuando cambie el stateManager\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        commandExecutor.current = (0,_ai_video_commands__WEBPACK_IMPORTED_MODULE_7__.createVideoCommandExecutor)(stateManager);\n        // Actualizar el servicio con la nueva instancia del ejecutor\n        _features_editor_services_command_executor_service__WEBPACK_IMPORTED_MODULE_9__[\"default\"].setExecutor(commandExecutor.current);\n        console.log(\"CommandExecutorService actualizado con una nueva instancia del ejecutor\");\n    }, [\n        stateManager\n    ]);\n    // Manejar click en el botón de imagen\n    const handleImageClick = ()=>{\n        var _fileInputRef_current;\n        (_fileInputRef_current = fileInputRef.current) === null || _fileInputRef_current === void 0 ? void 0 : _fileInputRef_current.click();\n    };\n    // Manejar selección de archivo de imagen\n    const handleFileChange = (e)=>{\n        var _e_target_files;\n        const file = (_e_target_files = e.target.files) === null || _e_target_files === void 0 ? void 0 : _e_target_files[0];\n        if (file) {\n            setImageFile(file);\n            const previewUrl = URL.createObjectURL(file);\n            setImagePreview(previewUrl);\n        }\n    };\n    // Eliminar la imagen seleccionada\n    const handleRemoveImage = ()=>{\n        setImageFile(null);\n        setImagePreview(null);\n        if (fileInputRef.current) fileInputRef.current.value = \"\";\n    };\n    // Subir imagen al servidor\n    const uploadImage = async (file)=>{\n        try {\n            setIsUploading(true);\n            // Obtener URL firmada para subir la imagen\n            const uploadDetails = await (0,_utils_upload__WEBPACK_IMPORTED_MODULE_8__.createUploadsDetails)(file.name, file);\n            // Si no es un mock local, proceder con la carga\n            if (uploadDetails.uploadUrl !== \"local-mock\") {\n                // Subir la imagen\n                await fetch(uploadDetails.uploadUrl, {\n                    method: \"PUT\",\n                    body: file,\n                    headers: {\n                        \"Content-Type\": file.type\n                    }\n                });\n            }\n            // No se necesita hacer fetch si es un mock local (dataURL)\n            // Retornar la URL pública de la imagen\n            return uploadDetails.url;\n        } catch (error) {\n            console.error(\"Error al subir la imagen:\", error);\n            throw new Error(\"No se pudo subir la imagen. Int\\xe9ntalo de nuevo.\");\n        } finally{\n            setIsUploading(false);\n        }\n    };\n    // Función para enviar mensaje\n    const handleSendMessage = async ()=>{\n        if (!input.trim() && !imageFile || isLoading) return;\n        let userMessage = {\n            id: Date.now().toString(),\n            content: input,\n            role: \"user\",\n            timestamp: new Date()\n        };\n        let uploadedImageUrl = \"\";\n        // Variable para rastrear la URL de la imagen actual para esta solicitud específica\n        let currentImageUrlForThisRequest = \"\";\n        // Si hay una imagen para subir, procesarla\n        if (imageFile) {\n            try {\n                uploadedImageUrl = await uploadImage(imageFile);\n                userMessage.imageUrl = uploadedImageUrl;\n                // Guardar la URL de la imagen para posibles referencias futuras\n                setLastUploadedImageUrl(uploadedImageUrl);\n                // Importante: Guardar la URL actual para esta solicitud específica\n                currentImageUrlForThisRequest = uploadedImageUrl;\n                console.log(\"Imagen subida exitosamente:\", uploadedImageUrl.substring(0, 100) + \"...\");\n            } catch (error) {\n                console.error(\"Error en la subida de imagen:\", error);\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            id: (Date.now() + 1).toString(),\n                            content: \"Error al subir la imagen. Por favor, int\\xe9ntalo de nuevo. Detalles: \" + (error instanceof Error ? error.message : \"Error desconocido\"),\n                            role: \"assistant\",\n                            timestamp: new Date()\n                        }\n                    ]);\n                setIsLoading(false);\n                return;\n            }\n        }\n        // Añadir mensaje del usuario\n        setMessages((prev)=>[\n                ...prev,\n                userMessage\n            ]);\n        setInput(\"\");\n        setImageFile(null);\n        setImagePreview(null);\n        if (fileInputRef.current) fileInputRef.current.value = \"\";\n        setIsLoading(true);\n        // Comprobar si estamos en modo agente y es una solicitud de edición automática\n        if (shouldUseAgent(mode, userMessage.content)) {\n            // Ejecutar edición automática\n            await handleAutoEdit();\n            return;\n        }\n        try {\n            var _playerRef_current, _timeline_canvas_getObjects, _timeline_canvas, _timeline_canvas_getObjects1, _timeline_canvas1;\n            // Enviar a la API para procesamiento en lenguaje natural\n            const apiMessages = messages.concat(userMessage).map((msg)=>{\n                // Si el mensaje tiene una imagen, crear un formato especial para el contenido\n                if (msg.imageUrl) {\n                    // Si es una URL de datos (comienza con data:), usar un marcador especial\n                    const isDataUrl = msg.imageUrl.startsWith(\"data:\");\n                    const imageUrlToSend = isDataUrl ? \"[IMAGEN_ADJUNTA]\" : \"[IMAGEN: \".concat(msg.imageUrl, \"]\");\n                    return {\n                        role: msg.role,\n                        content: \"\".concat(msg.content || \"\", \" \").concat(imageUrlToSend)\n                    };\n                }\n                return {\n                    role: msg.role,\n                    content: msg.content\n                };\n            });\n            // Añadir contexto del editor para la IA externa\n            const contextMessage = {\n                role: \"system\",\n                content: \"\\nContexto actual del editor de video:\\n- Posici\\xf3n actual (segundos): \".concat((playerRef === null || playerRef === void 0 ? void 0 : (_playerRef_current = playerRef.current) === null || _playerRef_current === void 0 ? void 0 : _playerRef_current.getCurrentTime) ? Math.floor((playerRef.current.getCurrentTime() || 0) * 100) / 100 : 0, \"\\n- Duraci\\xf3n del proyecto (segundos): \").concat((timeline === null || timeline === void 0 ? void 0 : timeline.duration) ? Math.floor(timeline.duration / 1000) : 0, \"\\n- N\\xfamero de escenas: \").concat((scenes === null || scenes === void 0 ? void 0 : scenes.length) || 0, \"\\n- N\\xfamero de elementos en el timeline: \").concat(((timeline === null || timeline === void 0 ? void 0 : (_timeline_canvas = timeline.canvas) === null || _timeline_canvas === void 0 ? void 0 : (_timeline_canvas_getObjects = _timeline_canvas.getObjects) === null || _timeline_canvas_getObjects === void 0 ? void 0 : _timeline_canvas_getObjects.call(_timeline_canvas)) || []).length - 1 > 0 ? ((timeline === null || timeline === void 0 ? void 0 : (_timeline_canvas1 = timeline.canvas) === null || _timeline_canvas1 === void 0 ? void 0 : (_timeline_canvas_getObjects1 = _timeline_canvas1.getObjects) === null || _timeline_canvas_getObjects1 === void 0 ? void 0 : _timeline_canvas_getObjects1.call(_timeline_canvas1)) || []).length - 1 : 0, \"\\n\").concat(lastUploadedImageUrl ? \"- \\xdaltima imagen compartida por el usuario disponible para usar\" : \"\", '\\n\\nEl usuario puede expresar en lenguaje natural la necesidad de agregar elementos al video.\\nEjemplos:\\n- \"Pon un t\\xedtulo que diga \\'Bienvenidos\\' al inicio\"\\n- \"Quiero un texto blanco que diga \\'Fin\\' al final del video\"\\n- \"Necesito una imagen en el segundo 10\"\\n- \"Coloca un video de introducci\\xf3n al principio\"\\n\\nSi el usuario adjunta una imagen en el mensaje, la URL estar\\xe1 en formato [IMAGEN: url_de_la_imagen].\\nDebes detectar si quiere agregar esta imagen al video y en qu\\xe9 momento temporal.\\n')\n            };\n            try {\n                var _data_message, _elementData_element;\n                // Usar la API correcta según el modo\n                const apiEndpoint = mode === \"agent\" ? \"/api/ai-chat-agent\" : \"/api/ai-chat\";\n                const response = await fetch(apiEndpoint, {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        messages: [\n                            contextMessage,\n                            ...apiMessages\n                        ],\n                        // Usar la URL de la imagen actual para esta solicitud si existe,\n                        // de lo contrario usar la última URL guardada\n                        lastImageUrl: currentImageUrlForThisRequest || lastUploadedImageUrl || \"\"\n                    }),\n                    // Agregar timeout para evitar esperas infinitas\n                    signal: AbortSignal.timeout(15000) // 15 segundos máximo\n                });\n                if (!response.ok) {\n                    throw new Error(\"Error de API: \".concat(response.status, \" \").concat(response.statusText));\n                }\n                const data = await response.json();\n                // Asegurarse de que data.message.content existe\n                const aiResponse = (data === null || data === void 0 ? void 0 : (_data_message = data.message) === null || _data_message === void 0 ? void 0 : _data_message.content) || \"Lo siento, no pude entender tu solicitud.\";\n                // Obtener los datos del elemento si existen (con verificación segura)\n                const elementData = data === null || data === void 0 ? void 0 : data.elementData;\n                // Variable para la respuesta final\n                let finalResponse = aiResponse;\n                // Crear una referencia a la respuesta final para que sea accesible en la función procesadora\n                const finalResponseRef = {\n                    current: finalResponse\n                };\n                let elementAdded = false;\n                // Usar la función de procesamiento de elementos\n                const processResult = await processDetectedElement(elementData, commandExecutor, finalResponseRef, timeline, lastUploadedImageUrl, currentImageUrlForThisRequest);\n                finalResponse = processResult.finalResponse;\n                elementAdded = processResult.elementAdded;\n                // Crear mensaje con los detalles completos\n                const newMessage = {\n                    id: Date.now().toString(),\n                    content: finalResponse || data.message.content,\n                    role: \"assistant\",\n                    timestamp: new Date()\n                };\n                // Si se detectó un elemento de música, agregar las opciones al mensaje\n                if ((elementData === null || elementData === void 0 ? void 0 : elementData.detected) && ((_elementData_element = elementData.element) === null || _elementData_element === void 0 ? void 0 : _elementData_element.type) === \"music\" && Array.isArray(elementData.element.options)) {\n                    newMessage.musicOptions = elementData.element.options;\n                    console.log(\"Opciones de m\\xfasica agregadas al mensaje:\", newMessage.musicOptions);\n                }\n                // Actualizar mensajes\n                setMessages((prev)=>[\n                        ...prev,\n                        newMessage\n                    ]);\n            } catch (apiError) {\n                console.error(\"Error en la comunicaci\\xf3n con la API:\", apiError);\n                // Mensaje de error específico de API\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            id: (Date.now() + 1).toString(),\n                            content: \"Lo siento, ha ocurrido un error al comunicarse con el servicio de IA. Por favor, intenta de nuevo en unos momentos.\",\n                            role: \"assistant\",\n                            timestamp: new Date()\n                        }\n                    ]);\n            }\n        } catch (error) {\n            console.error(\"Error al procesar el mensaje:\", error);\n            // Determinar mensaje de error apropiado\n            let errorMessage = \"Lo siento, ha ocurrido un error al procesar tu mensaje.\";\n            if (error instanceof Error) {\n                if (error.message.includes(\"timeout\") || error.message.includes(\"abort\")) {\n                    errorMessage = \"La solicitud ha tardado demasiado. Prueba con un mensaje m\\xe1s corto.\";\n                } else if (error.message.includes(\"network\") || error.message.includes(\"fetch\")) {\n                    errorMessage = \"Parece que hay un problema de conexi\\xf3n. Verifica tu conexi\\xf3n a internet e intenta de nuevo.\";\n                }\n            }\n            // Mensaje de error\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        id: (Date.now() + 1).toString(),\n                        content: errorMessage,\n                        role: \"assistant\",\n                        timestamp: new Date()\n                    }\n                ]);\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    // Función para manejar la selección de música\n    const handleMusicSelect = async (musicPath)=>{\n        try {\n            console.log(\"Usuario seleccion\\xf3 m\\xfasica: \".concat(musicPath));\n            // Calcular la duración del video en segundos usando el duration del store\n            const videoDuration = duration ? Math.floor(duration / 1000) : 300; // 5 minutos por defecto\n            console.log(\"Duraci\\xf3n del video (desde useStore): \".concat(videoDuration, \" segundos\"));\n            // Configuración de opciones para la música\n            const musicOptions = {\n                startTime: 0,\n                endTime: videoDuration,\n                volume: 80,\n                fadeIn: true,\n                fadeOut: true,\n                respectNativeDuration: true // Respetar la duración natural de la música\n            };\n            // Añadir la música al timeline (respetará la duración natural si es más corta que el video)\n            commandExecutor.current.addMusic(musicPath, musicOptions);\n            // Obtener un nombre amigable para la música\n            const getMusicFriendlyName = (path)=>{\n                const filename = path.split(\"/\").pop() || path;\n                if (filename === \"song1.mp3\") return \"M\\xfasica Energ\\xe9tica\";\n                if (filename === \"song2.mp3\") return \"Melod\\xeda Relajante\";\n                return filename;\n            };\n            // Añadir un mensaje de confirmación\n            const musicName = getMusicFriendlyName(musicPath);\n            const confirmationMsg = {\n                id: Date.now().toString(),\n                content: 'He a\\xf1adido \"'.concat(musicName, '\" a tu video. La m\\xfasica se adaptar\\xe1 autom\\xe1ticamente: si es m\\xe1s corta que el video, mantendr\\xe1 su duraci\\xf3n natural; si es m\\xe1s larga, se ajustar\\xe1 a la duraci\\xf3n del video (').concat(videoDuration, \" segundos).\"),\n                role: \"assistant\",\n                timestamp: new Date()\n            };\n            setMessages((prev)=>[\n                    ...prev,\n                    confirmationMsg\n                ]);\n        } catch (error) {\n            console.error(\"Error al a\\xf1adir m\\xfasica:\", error);\n            // Mensaje de error\n            const errorMsg = {\n                id: Date.now().toString(),\n                content: \"No se pudo a\\xf1adir la m\\xfasica. Error: \".concat(error.message || \"Error desconocido\"),\n                role: \"assistant\",\n                timestamp: new Date()\n            };\n            setMessages((prev)=>[\n                    ...prev,\n                    errorMsg\n                ]);\n        }\n    };\n    // Manejar cambio de modo\n    const handleModeChange = (newMode)=>{\n        // Si el modo es diferente, cambiar y reiniciar la conversación\n        if (newMode !== mode) {\n            setMode(newMode);\n            // Mensaje inicial específico según el modo\n            const initialMessage = newMode === \"chat\" ? \"Hola, soy tu asistente de edici\\xf3n de video. \\xbfEn qu\\xe9 puedo ayudarte?\" : \"\\uD83D\\uDC4B Hola, soy tu agente de edici\\xf3n autom\\xe1tica de video.\\n\\n✨ Puedes simplemente escribir **'edita el video'** y ejecutar\\xe9 autom\\xe1ticamente:\\n\\n1️⃣ Recorte inteligente - Eliminar\\xe9 las partes menos relevantes\\n2️⃣ Subt\\xedtulos autom\\xe1ticos - A\\xf1adir\\xe9 subt\\xedtulos sincronizados\\n\\nEstas acciones optimizar\\xe1n tu video en segundos sin necesidad de instrucciones detalladas.\";\n            // Reiniciar la conversación con el mensaje apropiado\n            setMessages([\n                {\n                    id: Date.now().toString(),\n                    content: initialMessage,\n                    role: \"assistant\",\n                    timestamp: new Date(),\n                    // Marcar el mensaje como inicial para evitar mostrar razonamiento\n                    isInitial: true\n                }\n            ]);\n            // Limpiar otros estados\n            setInput(\"\");\n            setImageFile(null);\n            setImagePreview(null);\n            setLastUploadedImageUrl(\"\");\n            setAutoEditStep(0);\n            setIsAutoEditing(false);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex h-full flex-col bg-[rgb(20,10,30)] border-l border-purple-800/30\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-[rgb(30,15,45)] p-3 flex justify-between items-center border-b border-purple-800/30\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"h-7 w-7 rounded flex items-center justify-center bg-purple-700\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                                    className: \"h-3.5 w-3.5 text-white\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 979,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 978,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                className: \"font-medium text-white text-sm\",\n                                children: \"Asistente IA\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 981,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 977,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center bg-[rgb(40,20,60)] rounded-full p-0.5 mx-auto\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>handleModeChange(\"chat\"),\n                                className: \"px-3 py-1 text-xs rounded-full transition-all \".concat(mode === \"chat\" ? \"bg-purple-700 text-white font-medium\" : \"text-purple-300 hover:text-white\"),\n                                children: \"Chat\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 986,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>handleModeChange(\"agent\"),\n                                className: \"px-3 py-1 text-xs rounded-full transition-all \".concat(mode === \"agent\" ? \"bg-purple-700 text-white font-medium\" : \"text-purple-300 hover:text-white\"),\n                                children: \"Agente\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 996,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 985,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-1\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                            variant: \"ghost\",\n                            size: \"icon\",\n                            className: \"h-7 w-7 rounded hover:bg-purple-800/20\",\n                            onClick: resetChat,\n                            title: \"Reiniciar conversaci\\xf3n\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                                className: \"h-3.5 w-3.5 text-zinc-300\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1016,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 1009,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 1008,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 976,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 overflow-hidden relative max-h-[calc(100%-120px)]\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_4__.ScrollArea, {\n                    className: \"h-full pr-2 chat-scrollbar absolute inset-0\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"p-3 space-y-3\",\n                        children: [\n                            messages.map((message)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex flex-col animate-fadeIn \".concat(message.role === \"assistant\" ? \"items-start\" : \"items-end\"),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"max-w-[85%] rounded-md px-4 py-2 \".concat(message.role === \"assistant\" ? \"bg-[rgb(40,20,60)] text-zinc-200\" : \"bg-purple-700 text-white\"),\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"whitespace-pre-wrap text-sm\",\n                                                    children: message.content\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                    lineNumber: 1039,\n                                                    columnNumber: 19\n                                                }, this),\n                                                message.imageUrl && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"mt-2 rounded overflow-hidden\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                        src: message.imageUrl,\n                                                        alt: \"Imagen adjunta\",\n                                                        className: \"max-h-48 max-w-full object-contain\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                        lineNumber: 1042,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                    lineNumber: 1041,\n                                                    columnNumber: 21\n                                                }, this),\n                                                message.musicOptions && message.musicOptions.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MusicOptions, {\n                                                    options: message.musicOptions,\n                                                    onSelectMusic: handleMusicSelect\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                    lineNumber: 1050,\n                                                    columnNumber: 21\n                                                }, this),\n                                                mode === \"agent\" && message.role === \"assistant\" && !message.isInitial && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ReasoningSection, {\n                                                    reasoning: generateReasoning(message.content)\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                    lineNumber: 1058,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                            lineNumber: 1032,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-[10px] mt-0.5 px-1 \".concat(message.role === \"assistant\" ? \"text-zinc-500\" : \"text-purple-300\"),\n                                            children: message.timestamp.toLocaleTimeString([], {\n                                                hour: \"2-digit\",\n                                                minute: \"2-digit\"\n                                            })\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                            lineNumber: 1061,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, message.id, true, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 1026,\n                                    columnNumber: 15\n                                }, this)),\n                            isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ThinkingAnimation, {}, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1066,\n                                columnNumber: 27\n                            }, this),\n                            isAutoEditing && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex flex-col items-start animate-fadeIn\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"max-w-[85%] rounded-md px-4 py-3 bg-[rgb(40,20,60)] text-zinc-200\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex flex-col gap-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-3\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"h-10 w-10 rounded-full bg-purple-800/50 flex items-center justify-center\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                                            className: \"h-6 w-6 text-purple-300 animate-spin\"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                            lineNumber: 1073,\n                                                            columnNumber: 25\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                        lineNumber: 1072,\n                                                        columnNumber: 23\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"flex flex-col\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                className: \"text-sm font-medium text-white\",\n                                                                children: autoEditStep === 1 ? \"Realizando recorte inteligente...\" : \"Generando subt\\xedtulos...\"\n                                                            }, void 0, false, {\n                                                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                                lineNumber: 1076,\n                                                                columnNumber: 25\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                className: \"text-xs text-zinc-400 mt-0.5\",\n                                                                children: autoEditStep === 1 ? \"Analizando el contenido y eliminando partes irrelevantes\" : \"Creando subt\\xedtulos sincronizados con el audio\"\n                                                            }, void 0, false, {\n                                                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                                lineNumber: 1079,\n                                                                columnNumber: 25\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                        lineNumber: 1075,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                lineNumber: 1071,\n                                                columnNumber: 21\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"mt-1\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"w-full bg-purple-900/30 rounded-full h-2.5\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"bg-gradient-to-r from-purple-600 to-indigo-600 h-2.5 rounded-full transition-all duration-300 ease-in-out\",\n                                                            style: {\n                                                                width: \"\".concat(autoEditStep * 50, \"%\")\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                            lineNumber: 1090,\n                                                            columnNumber: 25\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                        lineNumber: 1089,\n                                                        columnNumber: 23\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"flex justify-between mt-1\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                className: \"text-xs text-purple-300\",\n                                                                children: [\n                                                                    \"Paso \",\n                                                                    autoEditStep,\n                                                                    \" de 2\"\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                                lineNumber: 1096,\n                                                                columnNumber: 25\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                className: \"text-xs text-purple-300\",\n                                                                children: [\n                                                                    autoEditStep * 50,\n                                                                    \"%\"\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                                lineNumber: 1097,\n                                                                columnNumber: 25\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                        lineNumber: 1095,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                lineNumber: 1088,\n                                                columnNumber: 21\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                        lineNumber: 1070,\n                                        columnNumber: 19\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 1069,\n                                    columnNumber: 17\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1068,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                ref: messagesEndRef,\n                                className: \"h-2\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1104,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 1024,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                    lineNumber: 1023,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 1022,\n                columnNumber: 7\n            }, this),\n            imagePreview && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative mx-3 mt-1 mb-2 h-24 bg-[rgb(30,15,45)] p-2 flex items-center justify-center rounded border border-purple-800/30\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                        variant: \"ghost\",\n                        size: \"icon\",\n                        className: \"absolute right-1 top-1 z-10 h-5 w-5 rounded-full bg-black/50\",\n                        onClick: handleRemoveImage,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                            className: \"h-3 w-3 text-white\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 1118,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 1112,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                        src: imagePreview,\n                        alt: \"Vista previa\",\n                        className: \"max-h-full max-w-full object-contain\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 1120,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 1111,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-[rgb(30,15,45)] p-3 border-t border-purple-800/30\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center gap-2\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex rounded overflow-hidden border border-purple-900/50 flex-1 bg-[rgb(25,12,40)]\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                                variant: \"ghost\",\n                                size: \"icon\",\n                                className: \"h-9 w-9 bg-transparent hover:bg-purple-800/20\",\n                                onClick: handleImageClick,\n                                disabled: isLoading || isAutoEditing,\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                                    className: \"h-4 w-4 text-zinc-400\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 1139,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1132,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_input__WEBPACK_IMPORTED_MODULE_3__.Input, {\n                                value: input,\n                                onChange: (e)=>setInput(e.target.value),\n                                onKeyDown: (e)=>{\n                                    if (e.key === \"Enter\" && !e.shiftKey) {\n                                        e.preventDefault();\n                                        handleSendMessage();\n                                    }\n                                },\n                                placeholder: mode === \"agent\" ? \"Escribe 'edita el video' para comenzar...\" : \"Escribe tu mensaje...\",\n                                disabled: isLoading || isAutoEditing,\n                                className: \"flex-1 border-0 bg-transparent h-9 focus:ring-0 focus-visible:ring-0 text-zinc-200\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1142,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                                onClick: handleSendMessage,\n                                disabled: !input.trim() && !imageFile || isLoading || isAutoEditing,\n                                className: \"h-9 px-3 rounded-none \".concat(!input.trim() && !imageFile || isLoading || isAutoEditing ? \"bg-purple-900/50 cursor-not-allowed text-purple-300/50\" : \"bg-purple-700 hover:bg-purple-600 text-white\"),\n                                children: isLoading || isUploading || isAutoEditing ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                    className: \"h-4 w-4 animate-spin\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 1166,\n                                    columnNumber: 17\n                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n                                    className: \"h-3.5 w-3.5\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 1168,\n                                    columnNumber: 17\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1156,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 1131,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                    lineNumber: 1130,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 1129,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                type: \"file\",\n                ref: fileInputRef,\n                onChange: handleFileChange,\n                accept: \"image/*\",\n                className: \"hidden\",\n                disabled: isLoading || isAutoEditing\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 1175,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n        lineNumber: 974,\n        columnNumber: 5\n    }, this);\n}\n_s1(AIChat, \"zSf9oIbobI4Gwu5cNUFZZbnjaxk=\", false, function() {\n    return [\n        _features_editor_hooks_state_manager__WEBPACK_IMPORTED_MODULE_6__.useStateManager,\n        _features_editor_store_use_data_state__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n        _features_editor_store_use_store__WEBPACK_IMPORTED_MODULE_10__[\"default\"]\n    ];\n});\n_c3 = AIChat;\n// Función para generar razonamiento ficticio basado en el contenido del mensaje\nfunction generateReasoning(content) {\n    // Detectar si es un mensaje relacionado con el modo de edición automática\n    if (content.includes(\"Subt\\xedtulos a\\xf1adidos\") || content.includes(\"Recorte inteligente\") || content.includes(\"Voy a a\\xf1adir subt\\xedtulos\") || content.includes(\"edici\\xf3n autom\\xe1tica\")) {\n        return \"AN\\xc1LISIS:\\n• Tipo: Acci\\xf3n autom\\xe1tica\\n• Acci\\xf3n: \".concat(content.includes(\"Subt\\xedtulos\") ? \"Agregar subt\\xedtulos\" : \"Recorte inteligente\", '\\n• Contexto: Modo agente de edici\\xf3n autom\\xe1tica\\n\\nPROCESO:\\n1. Recibir comando de edici\\xf3n → \"edita el video\"\\n2. Determinar acciones requeridas → Subt\\xedtulos + Recorte inteligente\\n3. Ejecutar acciones secuencialmente\\n4. Monitorear resultados\\n\\nSALIDA:\\n→ Informar al usuario del progreso\\n→ Confirmar finalizaci\\xf3n de la tarea\\n→ Ofrecer asistencia adicional');\n    }\n    // Para otros mensajes, mantener el razonamiento original\n    return \"AN\\xc1LISIS:\\n• Tipo: Saludo simple\\n• Idioma: Espa\\xf1ol\\n• Contexto: Inicio de conversaci\\xf3n\\n\\nPROCESO:\\n1. Identificar intenci\\xf3n → Saludo inicial\\n2. Seleccionar respuesta → Protocolo est\\xe1ndar de bienvenida\\n3. Adaptar al contexto → Edici\\xf3n de video\\n\\nSALIDA:\\n→ Responder con saludo amigable\\n→ Ofrecer asistencia espec\\xedfica para edici\\xf3n\";\n}\nvar _c, _c1, _c2, _c3;\n$RefreshReg$(_c, \"MusicOptions\");\n$RefreshReg$(_c1, \"ThinkingAnimation\");\n$RefreshReg$(_c2, \"ReasoningSection\");\n$RefreshReg$(_c3, \"AIChat\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvYWktY2hhdC9pbmRleC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRW9EO0FBQ0o7QUFDRjtBQUNXO0FBQ3VCO0FBQ2Q7QUFDTTtBQUNlO0FBQ2pDO0FBQ21DO0FBQ2hDO0FBRXpELDBEQUEwRDtBQUMxRCxTQUFTa0IsZUFBZUMsSUFBc0IsRUFBRUMsT0FBZTtJQUM3RCxJQUFJRCxTQUFTLFNBQVMsT0FBTztJQUU3QiwwRkFBMEY7SUFDMUYsTUFBTUUsbUJBQW1CO1FBQ3ZCO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNEO0lBRUQsT0FBT0EsaUJBQWlCQyxJQUFJLENBQUNDLENBQUFBLFVBQVdBLFFBQVFDLElBQUksQ0FBQ0osUUFBUUssSUFBSTtBQUNuRTtBQUVBLGtGQUFrRjtBQUNsRixTQUFTQyw2QkFBNkJDLGNBQXNCO0lBQzFELElBQUlDLFlBQVk7SUFDaEIsSUFBSUMsVUFBVTtJQUVkLElBQUksQ0FBQ0YsZ0JBQWdCLE9BQU87UUFBRUM7UUFBV0M7SUFBUTtJQUVqRCx1Q0FBdUM7SUFDdkMsTUFBTUMsb0JBQW9CO1FBQ3hCO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNEO0lBRUQscUNBQXFDO0lBQ3JDLE1BQU1DLGtCQUFrQjtRQUN0QjtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBQ0Q7SUFFRCxtQ0FBbUM7SUFDbkMsTUFBTUMsWUFBWSw0Q0FBNENSLElBQUksQ0FBQ0c7SUFDbkUsTUFBTU0sVUFBVSx1Q0FBdUNULElBQUksQ0FBQ0c7SUFFNUQsc0NBQXNDO0lBQ3RDLEtBQUssTUFBTUosV0FBV08sa0JBQW1CO1FBQ3ZDLE1BQU1JLFFBQVFQLGVBQWVPLEtBQUssQ0FBQ1g7UUFDbkMsSUFBSVcsU0FBU0EsS0FBSyxDQUFD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Olsid2VicGFjazovL19OX0UvLi9jb21wb25lbnRzL2FpLWNoYXQvaW5kZXgudHN4PzRiOTciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9idXR0b25cIjtcbmltcG9ydCB7IElucHV0IH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9pbnB1dFwiO1xuaW1wb3J0IHsgU2Nyb2xsQXJlYSB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvc2Nyb2xsLWFyZWFcIjtcbmltcG9ydCB7IFNlbmQsIExvYWRlcjIsIEltYWdlSWNvbiwgWCwgU3BhcmtsZXMsIFJlZnJlc2hDdyB9IGZyb20gXCJsdWNpZGUtcmVhY3RcIjtcbmltcG9ydCB1c2VEYXRhU3RhdGUgZnJvbSBcIkAvZmVhdHVyZXMvZWRpdG9yL3N0b3JlL3VzZS1kYXRhLXN0YXRlXCI7XG5pbXBvcnQgeyB1c2VTdGF0ZU1hbmFnZXIgfSBmcm9tIFwiQC9mZWF0dXJlcy9lZGl0b3IvaG9va3Mvc3RhdGUtbWFuYWdlclwiO1xuaW1wb3J0IHsgY3JlYXRlVmlkZW9Db21tYW5kRXhlY3V0b3IsIFZpZGVvQ29tbWFuZEV4ZWN1dG9yIH0gZnJvbSBcIi4vYWktdmlkZW8tY29tbWFuZHNcIjtcbmltcG9ydCB7IGNyZWF0ZVVwbG9hZHNEZXRhaWxzIH0gZnJvbSBcIkAvdXRpbHMvdXBsb2FkXCI7XG5pbXBvcnQgQ29tbWFuZEV4ZWN1dG9yU2VydmljZSBmcm9tIFwiQC9mZWF0dXJlcy9lZGl0b3Ivc2VydmljZXMvY29tbWFuZC1leGVjdXRvci1zZXJ2aWNlXCI7XG5pbXBvcnQgdXNlU3RvcmUgZnJvbSBcIkAvZmVhdHVyZXMvZWRpdG9yL3N0b3JlL3VzZS1zdG9yZVwiO1xuXG4vLyBJbmRpY2Egc2kgbGEgc29saWNpdHVkIGRlYmUgc2VyIHByb2Nlc2FkYSBwb3IgZWwgYWdlbnRlXG5mdW5jdGlvbiBzaG91bGRVc2VBZ2VudChtb2RlOiBcImNoYXRcIiB8IFwiYWdlbnRcIiwgbWVzc2FnZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGlmIChtb2RlICE9PSBcImFnZW50XCIpIHJldHVybiBmYWxzZTtcblxuICAvLyBQYXRyb25lcyBxdWUgaW5kaWNhbiBxdWUgZWwgdXN1YXJpbyBxdWllcmUgcXVlIGVsIGFnZW50ZSBlZGl0ZSBhdXRvbcOhdGljYW1lbnRlIGVsIHZpZGVvXG4gIGNvbnN0IGF1dG9FZGl0UGF0dGVybnMgPSBbXG4gICAgL2VkaXRhXFxzKyhlbHxlc3RlfG1pKT9cXHMqdmlkZW8vaSxcbiAgICAvbWVqb3JhXFxzKyhlbHxlc3RlfG1pKT9cXHMqdmlkZW8vaSxcbiAgICAvb3B0aW1pemFcXHMrKGVsfGVzdGV8bWkpP1xccyp2aWRlby9pLFxuICAgIC9wcm9jZXNhXFxzKyhlbHxlc3RlfG1pKT9cXHMqdmlkZW8vaSxcbiAgICAvYXJyZWdsYVxccysoZWx8ZXN0ZXxtaSk/XFxzKnZpZGVvL2ksXG4gICAgL21vZGlmaWNhXFxzKyhlbHxlc3RlfG1pKT9cXHMqdmlkZW8vaSxcbiAgICAvdHJhYmFqYVxccysoZW58Y29uKVxccysoZWx8ZXN0ZXxtaSk/XFxzKnZpZGVvL2ksXG4gICAgL3B1ZWRlc1xccytlZGl0YXIvaSxcbiAgICAvXmVkaXRhJC9pLFxuICAgIC9eZWRpdGFyJC9pLFxuICAgIC9ebWVqb3JhJC9pLFxuICAgIC9eb3B0aW1pemEkL2ksXG4gIF07XG5cbiAgcmV0dXJuIGF1dG9FZGl0UGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChtZXNzYWdlLnRyaW0oKSkpO1xufVxuXG4vLyBGdW5jacOzbiBwYXJhIGV4dHJhZXIgdGllbXBvcyBkZSBpbmljaW8geSBmaW4gZGUgdW5hIGltYWdlbiBhIHBhcnRpciBkZWwgbWVuc2FqZVxuZnVuY3Rpb24gZXh0cmFjdEltYWdlVGltZXNGcm9tTWVzc2FnZShtZXNzYWdlQ29udGVudDogc3RyaW5nKTogeyBzdGFydFRpbWU6IG51bWJlciwgZW5kVGltZTogbnVtYmVyIH0ge1xuICBsZXQgc3RhcnRUaW1lID0gMDtcbiAgbGV0IGVuZFRpbWUgPSA1O1xuXG4gIGlmICghbWVzc2FnZUNvbnRlbnQpIHJldHVybiB7IHN0YXJ0VGltZSwgZW5kVGltZSB9O1xuXG4gIC8vIEJ1c2NhciByZWZlcmVuY2lhcyBhbCB0aWVtcG8gaW5pY2lhbFxuICBjb25zdCBzdGFydFRpbWVQYXR0ZXJucyA9IFtcbiAgICAvZW4gZWwgc2VndW5kbyAoXFxkKykvaSxcbiAgICAvZGVzZGUgZWwgc2VndW5kbyAoXFxkKykvaSxcbiAgICAvYSBwYXJ0aXIgZGVsIHNlZ3VuZG8gKFxcZCspL2ksXG4gICAgL2NvbWVuemFuZG8gZW4gZWwgc2VndW5kbyAoXFxkKykvaSxcbiAgICAvZGVzZGUgZWwgbWludXRvIChcXGQrKS9pLCAvLyBDb252ZXJ0aXIgbWludXRvcyBhIHNlZ3VuZG9zXG4gICAgL2VuIGVsIG1pbnV0byAoXFxkKykvaSwgICAgLy8gQ29udmVydGlyIG1pbnV0b3MgYSBzZWd1bmRvc1xuICAgIC9lbnRyZSBsb3Mgc2VndW5kb3MgKFxcZCspIHkvaSwgLy8gQ2FwdHVyYSBlbCBwcmltZXIgbsO6bWVybyBlbiBcImVudHJlIFggeSBZXCJcbiAgICAvZGVsIHNlZ3VuZG8gKFxcZCspIGFsL2ksXG4gICAgL2VtcGV6YW5kbyBlbiAoXFxkKykvaSxcbiAgICAvc2VndW5kbyAoXFxkKykvaSwgICAgIC8vIFBhdHLDs24gbcOhcyBnZW5lcmFsIHBhcmEgY2FwdHVyYXIgXCJzZWd1bmRvIFhcIlxuICAgIC9lbiAoXFxkKykgc2VndW5kb3MvaSwgLy8gXCJlbiBYIHNlZ3VuZG9zXCJcbiAgICAvZW4gZWwgKFxcZCspL2ksICAgICAgIC8vIFwiZW4gZWwgWFwiIChjdWFuZG8gc2UgcmVmaWVyZSBhIHNlZ3VuZG9zKVxuICBdO1xuXG4gIC8vIEJ1c2NhciByZWZlcmVuY2lhcyBhbCB0aWVtcG8gZmluYWxcbiAgY29uc3QgZW5kVGltZVBhdHRlcm5zID0gW1xuICAgIC9oYXN0YSBlbCBzZWd1bmRvIChcXGQrKS9pLFxuICAgIC9hbCBzZWd1bmRvIChcXGQrKS9pLFxuICAgIC90ZXJtaW5hbmRvIGVuIGVsIHNlZ3VuZG8gKFxcZCspL2ksXG4gICAgL2hhc3RhIGVsIG1pbnV0byAoXFxkKykvaSwgLy8gQ29udmVydGlyIG1pbnV0b3MgYSBzZWd1bmRvc1xuICAgIC9lbnRyZSBsb3Mgc2VndW5kb3MgXFxkKyB5IChcXGQrKS9pLCAvLyBDYXB0dXJhIGVsIHNlZ3VuZG8gbsO6bWVybyBlbiBcImVudHJlIFggeSBZXCJcbiAgICAvZGVsIHNlZ3VuZG8gXFxkKyBhbCAoXFxkKykvaSxcbiAgICAvcG9yIChcXGQrKSBzZWd1bmRvcy9pLCAvLyBEdXJhY2nDs24gcmVsYXRpdmFcbiAgICAvZHVyYW50ZSAoXFxkKykgc2VndW5kb3MvaSwgLy8gRHVyYWNpw7NuIHJlbGF0aXZhXG4gIF07XG5cbiAgLy8gQnVzY2FyIHBhbGFicmFzIGNsYXZlIGVzcGVjaWFsZXNcbiAgY29uc3QgaXNBdFN0YXJ0ID0gL1xcYihhbCBpbmljaW98YWwgcHJpbmNpcGlvfGFsIGNvbWllbnpvKVxcYi9pLnRlc3QobWVzc2FnZUNvbnRlbnQpO1xuICBjb25zdCBpc0F0RW5kID0gL1xcYihhbCBmaW5hbHxhbCB0w6lybWlub3xhbCBhY2FiYXIpXFxiL2kudGVzdChtZXNzYWdlQ29udGVudCk7XG5cbiAgLy8gUHJvY2VzYXIgcGF0cm9uZXMgZGUgdGllbXBvIGluaWNpYWxcbiAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIHN0YXJ0VGltZVBhdHRlcm5zKSB7XG4gICAgY29uc3QgbWF0Y2ggPSBtZXNzYWdlQ29udGVudC5tYXRjaChwYXR0ZXJuKTtcbiAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgIC8vIFNpIGVzIHJlZmVyZW5jaWEgYSBtaW51dG9zLCBjb252ZXJ0aXIgYSBzZWd1bmRvc1xuICAgICAgc3RhcnRUaW1lID0gcGF0dGVybi50b1N0cmluZygpLmluY2x1ZGVzKCdtaW51dG8nKVxuICAgICAgICA/IHBhcnNlSW50KG1hdGNoWzFdKSAqIDYwXG4gICAgICAgIDogcGFyc2VJbnQobWF0Y2hbMV0pO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLy8gUHJvY2VzYXIgcGF0cm9uZXMgZGUgdGllbXBvIGZpbmFsXG4gIGZvciAoY29uc3QgcGF0dGVybiBvZiBlbmRUaW1lUGF0dGVybnMpIHtcbiAgICBjb25zdCBtYXRjaCA9IG1lc3NhZ2VDb250ZW50Lm1hdGNoKHBhdHRlcm4pO1xuICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgICAgaWYgKHBhdHRlcm4udG9TdHJpbmcoKS5pbmNsdWRlcygncG9yJykgfHwgcGF0dGVybi50b1N0cmluZygpLmluY2x1ZGVzKCdkdXJhbnRlJykpIHtcbiAgICAgICAgLy8gRXMgdW5hIGR1cmFjacOzbiByZWxhdGl2YSwgc3VtYXIgYWwgdGllbXBvIGluaWNpYWxcbiAgICAgICAgZW5kVGltZSA9IHN0YXJ0VGltZSArIHBhcnNlSW50KG1hdGNoWzFdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEVzIHVuIHRpZW1wbyBhYnNvbHV0b1xuICAgICAgICBlbmRUaW1lID0gcGF0dGVybi50b1N0cmluZygpLmluY2x1ZGVzKCdtaW51dG8nKVxuICAgICAgICAgID8gcGFyc2VJbnQobWF0Y2hbMV0pICogNjBcbiAgICAgICAgICA6IHBhcnNlSW50KG1hdGNoWzFdKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNpIHNlIG1lbmNpb25hIFwiYWwgaW5pY2lvXCIsIGVzdGFibGVjZXIgdGllbXBvIGEgMFxuICBpZiAoaXNBdFN0YXJ0KSB7XG4gICAgc3RhcnRUaW1lID0gMDtcbiAgICBlbmRUaW1lID0gNTsgLy8gUG9yIGRlZmVjdG8gNSBzZWd1bmRvcyBkZSBkdXJhY2nDs25cbiAgfVxuXG4gIC8vIFNpIHNlIG1lbmNpb25hIFwiYWwgZmluYWxcIiwgZXN0YWJsZWNlciB2YWxvcmVzIHJlbGF0aXZvcyBhbCBmaW5hbFxuICAvLyBOb3RhOiBFbCB2YWxvciByZWFsIHNlIGFqdXN0YXLDoSBlbiBlbCBjbGllbnRlIHNlZ8O6biBsYSBkdXJhY2nDs25cbiAgaWYgKGlzQXRFbmQpIHtcbiAgICBzdGFydFRpbWUgPSAtMTsgLy8gQ8OzZGlnbyBlc3BlY2lhbCBwYXJhIFwiZmluYWwgLSA1IHNlZ3VuZG9zXCJcbiAgICBlbmRUaW1lID0gLTE7ICAgLy8gQ8OzZGlnbyBlc3BlY2lhbCBwYXJhIFwiZmluYWxcIlxuICB9XG5cbiAgLy8gU2kgbm8gc2UgZGV0ZWN0w7MgdGllbXBvIGZpbmFsIHBlcm8gc8OtIGluaWNpYWwsIGVzdGFibGVjZXIgdW5hIGR1cmFjacOzbiBwcmVkZXRlcm1pbmFkYVxuICBpZiAoc3RhcnRUaW1lID4gMCAmJiBlbmRUaW1lID09PSA1ICYmIHN0YXJ0VGltZSAhPT0gMCkge1xuICAgIGVuZFRpbWUgPSBzdGFydFRpbWUgKyA1O1xuICB9XG5cbiAgcmV0dXJuIHsgc3RhcnRUaW1lLCBlbmRUaW1lIH07XG59XG5cbi8vIEZ1bmNpw7NuIHBhcmEgcHJvY2VzYXIgZWxlbWVudG9zIGRldGVjdGFkb3MgcG9yIGxhIElBXG5jb25zdCBwcm9jZXNzRGV0ZWN0ZWRFbGVtZW50ID0gYXN5bmMgKGVsZW1lbnREYXRhLCBjb21tYW5kRXhlY3V0b3IsIGZpbmFsUmVzcG9uc2VSZWYsIHRpbWVsaW5lLCBsYXN0VXBsb2FkZWRJbWFnZVVybCwgY3VycmVudEltYWdlVXJsRm9yVGhpc1JlcXVlc3QpID0+IHtcbiAgbGV0IGVsZW1lbnRBZGRlZCA9IGZhbHNlO1xuICBsZXQgZmluYWxSZXNwb25zZSA9IGZpbmFsUmVzcG9uc2VSZWYuY3VycmVudDtcblxuICB0cnkge1xuICAgIC8vIFNpIHNlIGRldGVjdMOzIHVuIGVsZW1lbnRvIHBhcmEgYWdyZWdhciBjb24gY29uZmlhbnphIHN1ZmljaWVudGVcbiAgICBpZiAoZWxlbWVudERhdGEgJiZcbiAgICAgICAgZWxlbWVudERhdGEuZGV0ZWN0ZWQgPT09IHRydWUgJiZcbiAgICAgICAgdHlwZW9mIGVsZW1lbnREYXRhLmNvbmZpZGVuY2UgPT09ICdudW1iZXInICYmXG4gICAgICAgIGVsZW1lbnREYXRhLmNvbmZpZGVuY2UgPiAwLjcgJiZcbiAgICAgICAgZWxlbWVudERhdGEuZWxlbWVudCkge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnREYXRhLmVsZW1lbnQ7XG5cbiAgICAgIC8vIFByb2Nlc2FyIHNlZ8O6biBlbCB0aXBvIGRlIGVsZW1lbnRvXG4gICAgICBpZiAoZWxlbWVudC50eXBlID09PSBcInRleHRcIiAmJiBlbGVtZW50LmNvbnRlbnQpIHtcbiAgICAgICAgLy8gQ29uZmlndXJhciBvcGNpb25lcyBwYXJhIGVsIHRleHRvXG4gICAgICAgIGNvbnN0IHRleHRPcHRpb25zOiBhbnkgPSB7XG4gICAgICAgICAgc3RhcnRUaW1lOiB0eXBlb2YgZWxlbWVudC5zdGFydFRpbWUgPT09ICdudW1iZXInID8gZWxlbWVudC5zdGFydFRpbWUgOiAwLFxuICAgICAgICAgIGVuZFRpbWU6IHR5cGVvZiBlbGVtZW50LmVuZFRpbWUgPT09ICdudW1iZXInID8gZWxlbWVudC5lbmRUaW1lIDogKHR5cGVvZiBlbGVtZW50LnN0YXJ0VGltZSA9PT0gJ251bWJlcicgPyBlbGVtZW50LnN0YXJ0VGltZSArIDUgOiA1KSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBBc2lnbmFyIGNvbG9yIHNpIGVzdMOhIGRpc3BvbmlibGVcbiAgICAgICAgaWYgKGVsZW1lbnQuY29sb3IpIHtcbiAgICAgICAgICB0ZXh0T3B0aW9ucy5jb2xvciA9IGVsZW1lbnQuY29sb3IudG9Mb3dlckNhc2UoKSA9PT0gXCJibGFuY29cIiA/IFwiI0ZGRkZGRlwiIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNvbG9yLnRvTG93ZXJDYXNlKCkgPT09IFwibmVncm9cIiA/IFwiIzAwMDAwMFwiIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNvbG9yLnRvTG93ZXJDYXNlKCkgPT09IFwicm9qb1wiID8gXCIjRkYwMDAwXCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY29sb3IudG9Mb3dlckNhc2UoKSA9PT0gXCJhenVsXCIgPyBcIiMwMDAwRkZcIiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jb2xvci50b0xvd2VyQ2FzZSgpID09PSBcInZlcmRlXCIgPyBcIiMwMEZGMDBcIiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jb2xvci50b0xvd2VyQ2FzZSgpID09PSBcImFtYXJpbGxvXCIgPyBcIiNGRkZGMDBcIiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jb2xvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEHDsWFkaXIgZWwgdGV4dG9cbiAgICAgICAgY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQuYWRkVGV4dChlbGVtZW50LmNvbnRlbnQsIHRleHRPcHRpb25zKTtcblxuICAgICAgICAvLyBBY3R1YWxpemFyIHJlc3B1ZXN0YVxuICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bSGUgYWdyZWdhZG8gZWwgdGV4dG8gXCIke2VsZW1lbnQuY29udGVudH1cIiAke2VsZW1lbnQuY29sb3IgPyBgY29uIGNvbG9yICR7ZWxlbWVudC5jb2xvcn0gYCA6IFwiXCJ9ZGVzZGUgZWwgc2VndW5kbyAke3RleHRPcHRpb25zLnN0YXJ0VGltZX0gaGFzdGEgZWwgc2VndW5kbyAke3RleHRPcHRpb25zLmVuZFRpbWV9XWA7XG4gICAgICAgIGVsZW1lbnRBZGRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlbGVtZW50LnR5cGUgPT09IFwiaW1hZ2VcIikge1xuICAgICAgICAvLyBDb25maWd1cmFyIG9wY2lvbmVzIHBhcmEgbGEgaW1hZ2VuXG4gICAgICAgIGNvbnN0IGltYWdlT3B0aW9uczogYW55ID0ge1xuICAgICAgICAgIHN0YXJ0VGltZTogdHlwZW9mIGVsZW1lbnQuc3RhcnRUaW1lID09PSAnbnVtYmVyJyA/IGVsZW1lbnQuc3RhcnRUaW1lIDogMCxcbiAgICAgICAgICBlbmRUaW1lOiB0eXBlb2YgZWxlbWVudC5lbmRUaW1lID09PSAnbnVtYmVyJyA/IGVsZW1lbnQuZW5kVGltZSA6ICh0eXBlb2YgZWxlbWVudC5zdGFydFRpbWUgPT09ICdudW1iZXInID8gZWxlbWVudC5zdGFydFRpbWUgKyA1IDogNSksXG4gICAgICAgICAgLy8gUG9zaWNpw7NuIGNlbnRyYWRhIHBvciBkZWZlY3RvXG4gICAgICAgICAgcG9zaXRpb246IHsgeDogMC41LCB5OiAwLjUgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFJlZ2lzdHJhciB0aWVtcG9zIGVzcGVjw61maWNvcyBwYXJhIGRlcHVyYWNpw7NuXG4gICAgICAgIGNvbnNvbGUubG9nKGBUaWVtcG9zIGRlIGltYWdlbiByZWNpYmlkb3MgZGUgbGEgQVBJOiBzdGFydFRpbWU9JHtlbGVtZW50LnN0YXJ0VGltZX0sIGVuZFRpbWU9JHtlbGVtZW50LmVuZFRpbWV9YCk7XG5cbiAgICAgICAgLy8gTWFuZWphciBjYXNvcyBlc3BlY2lhbGVzIHBhcmEgXCJhbCBmaW5hbFwiIGRlbCB2aWRlb1xuICAgICAgICBpZiAoZWxlbWVudC5zdGFydFRpbWUgPT09IC0xIHx8IGVsZW1lbnQuZW5kVGltZSA9PT0gLTEpIHtcbiAgICAgICAgICAvLyBDYWxjdWxhciBsYSBkdXJhY2nDs24gZGVsIHZpZGVvIGVuIHNlZ3VuZG9zXG4gICAgICAgICAgY29uc3QgdmlkZW9EdXJhdGlvbiA9IHRpbWVsaW5lPy5kdXJhdGlvblxuICAgICAgICAgICAgPyBNYXRoLmZsb29yKHRpbWVsaW5lLmR1cmF0aW9uIC8gMTAwMClcbiAgICAgICAgICAgIDogMzA7IC8vIFZhbG9yIHByZWRldGVybWluYWRvIHNpIG5vIGhheSBkdXJhY2nDs25cblxuICAgICAgICAgIGNvbnNvbGUubG9nKGBEdXJhY2nDs24gZGVsIHZpZGVvOiAke3ZpZGVvRHVyYXRpb259c2ApO1xuXG4gICAgICAgICAgaWYgKGVsZW1lbnQuc3RhcnRUaW1lID09PSAtMSAmJiBlbGVtZW50LmVuZFRpbWUgPT09IC0xKSB7XG4gICAgICAgICAgICAvLyBTaSBhbWJvcyBzb24gLTEsIGNvbG9jYXIgZW4gbG9zIMO6bHRpbW9zIDUgc2VndW5kb3NcbiAgICAgICAgICAgIGltYWdlT3B0aW9ucy5zdGFydFRpbWUgPSBNYXRoLm1heCgwLCB2aWRlb0R1cmF0aW9uIC0gNSk7XG4gICAgICAgICAgICBpbWFnZU9wdGlvbnMuZW5kVGltZSA9IHZpZGVvRHVyYXRpb247XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgQWp1c3RhbmRvIHBhcmEgXCJhbCBmaW5hbFwiOiBzdGFydFRpbWU9JHtpbWFnZU9wdGlvbnMuc3RhcnRUaW1lfSwgZW5kVGltZT0ke2ltYWdlT3B0aW9ucy5lbmRUaW1lfWApO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5zdGFydFRpbWUgPT09IC0xKSB7XG4gICAgICAgICAgICAvLyBTb2xvIHN0YXJ0VGltZSBlcyAtMVxuICAgICAgICAgICAgaW1hZ2VPcHRpb25zLnN0YXJ0VGltZSA9IE1hdGgubWF4KDAsIHZpZGVvRHVyYXRpb24gLSA1KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuZW5kVGltZSA9PT0gLTEpIHtcbiAgICAgICAgICAgIC8vIFNvbG8gZW5kVGltZSBlcyAtMVxuICAgICAgICAgICAgaW1hZ2VPcHRpb25zLmVuZFRpbWUgPSB2aWRlb0R1cmF0aW9uO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGBUaWVtcG9zIGRlIGltYWdlbiBhIGFwbGljYXI6IHN0YXJ0VGltZT0ke2ltYWdlT3B0aW9ucy5zdGFydFRpbWV9LCBlbmRUaW1lPSR7aW1hZ2VPcHRpb25zLmVuZFRpbWV9YCk7XG5cbiAgICAgICAgLy8gRGV0ZXJtaW5hciBsYSBVUkwgZGUgbGEgaW1hZ2VuIGEgdXNhclxuICAgICAgICBjb25zdCBpc0dlbmVyaWNVcmwgPSBlbGVtZW50LnVybCA9PT0gJ2ltYWdlbl9hZGp1bnRhX3Bvcl9lbF91c3VhcmlvLmpwZyc7XG4gICAgICAgIGNvbnN0IGlzTG9jYWxJbWFnZSA9IGxhc3RVcGxvYWRlZEltYWdlVXJsICYmIGxhc3RVcGxvYWRlZEltYWdlVXJsLnN0YXJ0c1dpdGgoJ2RhdGE6Jyk7XG5cbiAgICAgICAgbGV0IGltYWdlVXJsOiBzdHJpbmc7XG5cbiAgICAgICAgLy8gUFJJT1JJREFEIDE6IFVzYXIgbGEgaW1hZ2VuIHF1ZSBhY2FiYSBkZSBzdWJpcnNlIGVuIGVzdGUgbWVuc2FqZSBlc3BlY8OtZmljb1xuICAgICAgICBpZiAoY3VycmVudEltYWdlVXJsRm9yVGhpc1JlcXVlc3QpIHtcbiAgICAgICAgICBpbWFnZVVybCA9IGN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0O1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNhbmRvIGxhIGltYWdlbiByZWNpw6luIHN1YmlkYSBwYXJhIGVzdGEgc29saWNpdHVkIGVzcGVjw61maWNhXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBSSU9SSURBRCAyOiBVc2FyIGxhIFVSTCBkZWwgZWxlbWVudG8gc2kgdGllbmUgdW5hIGVzcGVjw61maWNhIHkgTk8gZXMgbGEgVVJMIGdlbsOpcmljYVxuICAgICAgICBlbHNlIGlmIChlbGVtZW50LnVybCAmJiAhaXNHZW5lcmljVXJsICYmICFlbGVtZW50LnVybC5pbmNsdWRlcygnL3VybF9kZV9sYV9pbWFnZW4nKSkge1xuICAgICAgICAgIGltYWdlVXJsID0gZWxlbWVudC51cmw7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJVc2FuZG8gVVJMIGVzcGVjw61maWNhIGRlbCBlbGVtZW50b1wiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQUklPUklEQUQgMzogVXNhciBsYSDDumx0aW1hIGltYWdlbiBzdWJpZGEgZ3VhcmRhZGEgc2kgaGF5IHJlZmVyZW5jaWEgYSBpbWFnZW4gZ2Vuw6lyaWNhXG4gICAgICAgIGVsc2UgaWYgKGlzR2VuZXJpY1VybCAmJiBsYXN0VXBsb2FkZWRJbWFnZVVybCkge1xuICAgICAgICAgIGltYWdlVXJsID0gbGFzdFVwbG9hZGVkSW1hZ2VVcmw7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJVc2FuZG8gbGEgw7psdGltYSBpbWFnZW4gc3ViaWRhIGd1YXJkYWRhXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBSSU9SSURBRCA0OiBGYWxsYmFjayBhIFVSTCBnZW7DqXJpY2FcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgLy8gU2kgdG9kbyBsbyBkZW3DoXMgZmFsbGEsIHVzYXIgdW5hIGltYWdlbiBkZSBlamVtcGxvXG4gICAgICAgICAgaW1hZ2VVcmwgPSBcImh0dHBzOi8vaWsuaW1hZ2VraXQuaW8vd29tYm8vaW1hZ2VzL2ltZzIuanBnXCI7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJVc2FuZG8gaW1hZ2VuIGRlIGVqZW1wbG8gY29tbyBmYWxsYmFja1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEHDsWFkaXIgbGEgaW1hZ2VuXG4gICAgICAgIGNvbW1hbmRFeGVjdXRvci5jdXJyZW50LmFkZEltYWdlKGltYWdlVXJsLCBpbWFnZU9wdGlvbnMpO1xuXG4gICAgICAgIC8vIEFjdHVhbGl6YXIgcmVzcHVlc3RhXG4gICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltIZSBhZ3JlZ2FkbyBsYSBpbWFnZW4gZGVzZGUgZWwgc2VndW5kbyAke2ltYWdlT3B0aW9ucy5zdGFydFRpbWV9IGhhc3RhIGVsIHNlZ3VuZG8gJHtpbWFnZU9wdGlvbnMuZW5kVGltZX1dYDtcbiAgICAgICAgZWxlbWVudEFkZGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVsZW1lbnQudHlwZSA9PT0gXCJ2aWRlb1wiKSB7XG4gICAgICAgIC8vIENvbmZpZ3VyYXIgb3BjaW9uZXMgcGFyYSBlbCB2aWRlb1xuICAgICAgICBjb25zdCB2aWRlb09wdGlvbnM6IGFueSA9IHtcbiAgICAgICAgICBzdGFydFRpbWU6IHR5cGVvZiBlbGVtZW50LnN0YXJ0VGltZSA9PT0gJ251bWJlcicgPyBlbGVtZW50LnN0YXJ0VGltZSA6IDAsXG4gICAgICAgICAgZW5kVGltZTogdHlwZW9mIGVsZW1lbnQuZW5kVGltZSA9PT0gJ251bWJlcicgPyBlbGVtZW50LmVuZFRpbWUgOiAodHlwZW9mIGVsZW1lbnQuc3RhcnRUaW1lID09PSAnbnVtYmVyJyA/IGVsZW1lbnQuc3RhcnRUaW1lICsgMTAgOiAxMCksXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gVVJMIGRlIHZpZGVvIGRlIGVqZW1wbG8gKGVuIHByb2R1Y2Npw7NuIGVzdG8gc2Vyw61hIGRpbsOhbWljbylcbiAgICAgICAgY29uc3QgdmlkZW9VcmwgPSBcImh0dHBzOi8vY2RuLmRlc2lnbmNvbWJvLmRldi92aWRlb3MvZGVtby12aWRlby00Lm1wNFwiO1xuXG4gICAgICAgIC8vIEHDsWFkaXIgZWwgdmlkZW9cbiAgICAgICAgY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQuYWRkVmlkZW8odmlkZW9VcmwsIHZpZGVvT3B0aW9ucyk7XG5cbiAgICAgICAgLy8gQWN0dWFsaXphciByZXNwdWVzdGFcbiAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW0hlIGFncmVnYWRvIGVsIHZpZGVvIGRlc2RlIGVsIHNlZ3VuZG8gJHt2aWRlb09wdGlvbnMuc3RhcnRUaW1lfSBoYXN0YSBlbCBzZWd1bmRvICR7dmlkZW9PcHRpb25zLmVuZFRpbWV9XWA7XG4gICAgICAgIGVsZW1lbnRBZGRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlbGVtZW50LnR5cGUgPT09IFwic3VidGl0bGVzXCIpIHtcbiAgICAgICAgLy8gQ29uZmlndXJhciBvcGNpb25lcyBwYXJhIGxvcyBzdWJ0w610dWxvc1xuICAgICAgICBjb25zdCBzdWJ0aXRsZU9wdGlvbnM6IGFueSA9IHtcbiAgICAgICAgICBncm91cFdvcmRzOiBlbGVtZW50Lmdyb3VwV29yZHMgIT09IHVuZGVmaW5lZCA/IGVsZW1lbnQuZ3JvdXBXb3JkcyA6IHRydWUsXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQcOxYWRpciB0aWVtcG9zIHNpIHNlIGVzcGVjaWZpY2Fyb25cbiAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50LnN0YXJ0VGltZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBzdWJ0aXRsZU9wdGlvbnMuc3RhcnRUaW1lID0gZWxlbWVudC5zdGFydFRpbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50LmVuZFRpbWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgc3VidGl0bGVPcHRpb25zLmVuZFRpbWUgPSBlbGVtZW50LmVuZFRpbWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBw7FhZGlyIGxvcyBzdWJ0w610dWxvc1xuICAgICAgICBjb21tYW5kRXhlY3V0b3IuY3VycmVudC5hZGRTdWJ0aXRsZXMoc3VidGl0bGVPcHRpb25zKTtcblxuICAgICAgICAvLyBBY3R1YWxpemFyIHJlc3B1ZXN0YSBzaWxlbmNpb3NhIChzZSBtYW5lamEgZW4gb3RybyBsYWRvKVxuICAgICAgICBlbGVtZW50QWRkZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZWxlbWVudC50eXBlID09PSBcInNlZ21lbnRzXCIgJiYgQXJyYXkuaXNBcnJheShlbGVtZW50LnNlZ21lbnRzKSAmJiBlbGVtZW50LnNlZ21lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gQ29uZmlndXJhciBsb3Mgc2VnbWVudG9zIGEgZWxpbWluYXJcbiAgICAgICAgY29uc3Qgc2VnbWVudHMgPSBlbGVtZW50LnNlZ21lbnRzLm1hcChzZWdtZW50ID0+ICh7XG4gICAgICAgICAgc3RhcnRUaW1lOiB0eXBlb2Ygc2VnbWVudC5zdGFydFRpbWUgPT09ICdudW1iZXInID8gc2VnbWVudC5zdGFydFRpbWUgOiAwLFxuICAgICAgICAgIGVuZFRpbWU6IHR5cGVvZiBzZWdtZW50LmVuZFRpbWUgPT09ICdudW1iZXInID8gc2VnbWVudC5lbmRUaW1lIDogKHR5cGVvZiBzZWdtZW50LnN0YXJ0VGltZSA9PT0gJ251bWJlcicgPyBzZWdtZW50LnN0YXJ0VGltZSArIDUgOiA1KSxcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGBFbGltaW5hbmRvICR7c2VnbWVudHMubGVuZ3RofSBzZWdtZW50b3M6YCwgc2VnbWVudHMpO1xuXG4gICAgICAgIC8vIEVqZW1wbG8gZGUgZm9ybWF0byBkZSBzZWdtZW50b3MgYSBtb3N0cmFyXG4gICAgICAgIGNvbnN0IHNlZ21lbnRzRm9ybWF0dGVkID0gc2VnbWVudHMubWFwKHMgPT4gYCR7cy5zdGFydFRpbWV9LSR7cy5lbmRUaW1lfXNgKS5qb2luKCcsICcpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gRWplY3V0YXIgbGEgZWxpbWluYWNpw7NuIGRlIHNlZ21lbnRvc1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbW1hbmRFeGVjdXRvci5jdXJyZW50LnJlbW92ZVNlZ21lbnRzKHNlZ21lbnRzKTtcblxuICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltIZSBlbGltaW5hZG8gbG9zIHNlZ21lbnRvcyBzb2xpY2l0YWRvczogJHtzZWdtZW50c0Zvcm1hdHRlZH1dYDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW05vIHB1ZGUgZWxpbWluYXIgbG9zIHNlZ21lbnRvcyBzb2xpY2l0YWRvcy4gQXNlZ8O6cmF0ZSBkZSBxdWUgaGF5IHVuIGVsZW1lbnRvIHNlbGVjY2lvbmFkbyBlbiBsYSB0aW1lbGluZS5dYDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxlbWVudEFkZGVkID0gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgZWxpbWluYXIgc2VnbWVudG9zOlwiLCBlcnJvcik7XG4gICAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW0Vycm9yIGFsIGludGVudGFyIGVsaW1pbmFyIGxvcyBzZWdtZW50b3M6ICR7ZXJyb3IubWVzc2FnZSB8fCBcIkVycm9yIGRlc2Nvbm9jaWRvXCJ9XWA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVsZW1lbnQudHlwZSA9PT0gXCJjb21wYWN0XCIpIHtcbiAgICAgICAgLy8gRWplY3V0YXIgbGEgY29tcGFjdGFjacOzbiBkZWwgdGltZWxpbmVcbiAgICAgICAgY29uc29sZS5sb2coXCJDb21wYWN0YW5kbyB0aW1lbGluZSBwb3Igc29saWNpdHVkIGRlbCB1c3VhcmlvXCIpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gSW5pY2lhciBsYSBjb21wYWN0YWNpw7NuXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQuY29tcGFjdFRpbWVsaW5lKCk7XG5cbiAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bSGUgY29tcGFjdGFkbyBlbCB0aW1lbGluZSBlbGltaW5hbmRvIGxvcyBlc3BhY2lvcyB2YWPDrW9zIGVudHJlIGVsZW1lbnRvc11gO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bTm8gZnVlIHBvc2libGUgY29tcGFjdGFyIGVsIHRpbWVsaW5lLiBQdWVkZSBxdWUgbm8gaGF5YSBlbGVtZW50b3MgbyBlc3BhY2lvcyB2YWPDrW9zIHF1ZSBjb21wYWN0YXJdYDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxlbWVudEFkZGVkID0gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY29tcGFjdGFyIGVsIHRpbWVsaW5lOlwiLCBlcnJvcik7XG4gICAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW0Vycm9yIGFsIGludGVudGFyIGNvbXBhY3RhciBlbCB0aW1lbGluZTogJHtlcnJvci5tZXNzYWdlIHx8IFwiRXJyb3IgZGVzY29ub2NpZG9cIn1dYDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZWxlbWVudC50eXBlID09PSBcInNtYXJ0VHJpbVwiKSB7XG4gICAgICAgIC8vIEVqZWN1dGFyIGVsIHJlY29ydGUgaW50ZWxpZ2VudGVcbiAgICAgICAgY29uc29sZS5sb2coXCJJbmljaWFuZG8gcmVjb3J0ZSBpbnRlbGlnZW50ZSBwb3Igc29saWNpdHVkIGRlbCB1c3VhcmlvXCIpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gTW9zdHJhciBtZW5zYWplIGRlIGFuw6FsaXNpcyBlbiBjdXJzb1xuICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltBbmFsaXphbmRvIGVsIHZpZGVvIHBhcmEgaWRlbnRpZmljYXIgbGFzIHBhcnRlcyBhIGVsaW1pbmFyLi4uXWA7XG5cbiAgICAgICAgICAvLyBJbmljaWFyIGVsIHJlY29ydGUgaW50ZWxpZ2VudGVcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb21tYW5kRXhlY3V0b3IuY3VycmVudC5zbWFydFRyaW0oKTtcblxuICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltIZSByZWFsaXphZG8gdW4gcmVjb3J0ZSBpbnRlbGlnZW50ZSBkZWwgdmlkZW8sIGVsaW1pbmFuZG8gbGFzIHBhcnRlcyBpbm5lY2VzYXJpYXMgeSBjb21wYWN0YW5kbyBlbCB0aW1lbGluZV1gO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bTm8gZnVlIHBvc2libGUgcmVhbGl6YXIgZWwgcmVjb3J0ZSBpbnRlbGlnZW50ZS4gVmVyaWZpY2EgcXVlIGVsIHZpZGVvIHRlbmdhIHVuYSB0cmFuc2NyaXBjacOzbl1gO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbGVtZW50QWRkZWQgPSB0cnVlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCByZWFsaXphciBlbCByZWNvcnRlIGludGVsaWdlbnRlOlwiLCBlcnJvcik7XG4gICAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW0Vycm9yIGFsIGludGVudGFyIHJlYWxpemFyIGVsIHJlY29ydGUgaW50ZWxpZ2VudGU6ICR7ZXJyb3IubWVzc2FnZSB8fCBcIkVycm9yIGRlc2Nvbm9jaWRvXCJ9XWA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVsZW1lbnQudHlwZSA9PT0gXCJtdXNpY1wiICYmIEFycmF5LmlzQXJyYXkoZWxlbWVudC5vcHRpb25zKSAmJiBlbGVtZW50Lm9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBSZXNwdWVzdGEgbcOhcyBjb3J0YSBwYXJhIG3DunNpY2FcbiAgICAgICAgZmluYWxSZXNwb25zZSA9IFwiwr9DdcOhbCBkZSBlc3RhcyBvcGNpb25lcyB0ZSBndXN0YXLDrWEgYcOxYWRpcj9cIjtcbiAgICAgICAgZWxlbWVudEFkZGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIHByb2Nlc2FyIGVsZW1lbnRvIGRldGVjdGFkbzpcIiwgZXJyb3IpO1xuICAgIGZpbmFsUmVzcG9uc2UgKz0gXCJcXG5cXG5bTm8gcHVkZSBwcm9jZXNhciBsYSBzb2xpY2l0dWQgZGViaWRvIGEgdW4gZXJyb3IuXVwiO1xuICB9XG5cbiAgcmV0dXJuIHsgZmluYWxSZXNwb25zZSwgZWxlbWVudEFkZGVkIH07XG59O1xuXG4vLyBUaXBvIHBhcmEgbG9zIG1lbnNhamVzXG50eXBlIE1lc3NhZ2UgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgcm9sZTogXCJhc3Npc3RhbnRcIiB8IFwidXNlclwiO1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIGltYWdlVXJsPzogc3RyaW5nOyAvLyBQcm9waWVkYWQgcGFyYSBVUkxzIGRlIGltYWdlblxuICBtdXNpY09wdGlvbnM/OiBzdHJpbmdbXTsgLy8gUHJvcGllZGFkIHBhcmEgb3BjaW9uZXMgZGUgbcO6c2ljYVxuICBpc0luaXRpYWw/OiBib29sZWFuOyAvLyBQcm9waWVkYWQgcGFyYSBtYXJjYXIgbWVuc2FqZXMgaW5pY2lhbGVzXG59O1xuXG4vLyBDb21wb25lbnRlIHBhcmEgcmVuZGVyaXphciBvcGNpb25lcyBkZSBtw7pzaWNhIGNvbW8gYm90b25lcyBjbGlja2FibGVzXG5jb25zdCBNdXNpY09wdGlvbnMgPSAoeyBvcHRpb25zLCBvblNlbGVjdE11c2ljIH0pID0+IHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KG9wdGlvbnMpIHx8IG9wdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBGdW5jacOzbiBwYXJhIGNvbnZlcnRpciBlbCBub21icmUgZGVsIGFyY2hpdm8gYSB1biBub21icmUgYW1pZ2FibGVcbiAgY29uc3QgZ2V0RnJpZW5kbHlOYW1lID0gKG11c2ljUGF0aCkgPT4ge1xuICAgIGNvbnN0IGZpbGVuYW1lID0gbXVzaWNQYXRoLnNwbGl0KCcvJykucG9wKCkgfHwgbXVzaWNQYXRoO1xuXG4gICAgLy8gTWFwZWFyIG5vbWJyZXMgZGUgYXJjaGl2b3MgYSBub21icmVzIGFtaWdhYmxlc1xuICAgIGlmIChmaWxlbmFtZSA9PT0gXCJzb25nMS5tcDNcIikgcmV0dXJuIFwiTcO6c2ljYSBFbmVyZ8OpdGljYVwiO1xuICAgIGlmIChmaWxlbmFtZSA9PT0gXCJzb25nMi5tcDNcIikgcmV0dXJuIFwiTWVsb2TDrWEgUmVsYWphbnRlXCI7XG5cbiAgICAvLyBTaSBubyBoYXkgbWFwZW8gZXNwZWPDrWZpY28sIGRldm9sdmVyIGVsIG5vbWJyZSBkZWwgYXJjaGl2b1xuICAgIHJldHVybiBmaWxlbmFtZTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBnYXAtMyBtdC0zXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC13cmFwIGdhcC0yXCI+XG4gICAgICAgIHtvcHRpb25zLm1hcCgobXVzaWNQYXRoLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG11c2ljTmFtZSA9IGdldEZyaWVuZGx5TmFtZShtdXNpY1BhdGgpO1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uU2VsZWN0TXVzaWMobXVzaWNQYXRoKX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIHRleHQtc20gYmctZ3JhZGllbnQtdG8tciBmcm9tLXB1cnBsZS02MDAgdG8taW5kaWdvLTYwMCBob3Zlcjpmcm9tLXB1cnBsZS03MDAgaG92ZXI6dG8taW5kaWdvLTcwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1hbGwgc2hhZG93LW1kIGhvdmVyOnNoYWRvdy1sZyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBmb250LW1lZGl1bVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgY2xhc3NOYW1lPVwidy01IGgtNVwiPlxuICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNOSAxOVY2bDEyLTN2MTNNOSAxOWMwIDEuMTA1LTEuMzQzIDItMyAycy0zLS44OTUtMy0yIDEuMzQzLTIgMy0yIDMgLjg5NSAzIDJ6bTEyLTNjMCAxLjEwNS0xLjM0MyAyLTMgMnMtMy0uODk1LTMtMiAxLjM0My0yIDMtMiAzIC44OTUgMyAyek05IDlsMTItM1wiIHN0cm9rZVdpZHRoPVwiMlwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgIHttdXNpY05hbWV9XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICApO1xuICAgICAgICB9KX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuLy8gQ29tcG9uZW50ZSBwYXJhIG1vc3RyYXIgbGEgYW5pbWFjacOzbiBkZSBcInBlbnNhbmRvXCJcbmNvbnN0IFRoaW5raW5nQW5pbWF0aW9uID0gKCkgPT4gKFxuICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtc3RhcnQgYW5pbWF0ZS1mYWRlSW5cIj5cbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm1heC13LVs4NSVdIHJvdW5kZWQtbWQgcHgtNCBweS0yIGJnLVtyZ2IoNDAsMjAsNjApXSB0ZXh0LXppbmMtMjAwXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMVwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImgtMiB3LTIgYmctcHVycGxlLTQwMCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1wdWxzZVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiBcIjBtc1wiIH19Pjwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJoLTIgdy0yIGJnLXB1cnBsZS00MDAgcm91bmRlZC1mdWxsIGFuaW1hdGUtcHVsc2VcIiBzdHlsZT17eyBhbmltYXRpb25EZWxheTogXCIzMDBtc1wiIH19Pjwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJoLTIgdy0yIGJnLXB1cnBsZS00MDAgcm91bmRlZC1mdWxsIGFuaW1hdGUtcHVsc2VcIiBzdHlsZT17eyBhbmltYXRpb25EZWxheTogXCI2MDBtc1wiIH19Pjwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC16aW5jLTQwMFwiPlBlbnNhbmRvLi4uPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuKTtcblxuLy8gQ29tcG9uZW50ZSBwYXJhIG1vc3RyYXIgZWwgcmF6b25hbWllbnRvIGRlc3BsZWdhYmxlXG5jb25zdCBSZWFzb25pbmdTZWN0aW9uID0gKHsgcmVhc29uaW5nIH06IHsgcmVhc29uaW5nOiBzdHJpbmcgfSkgPT4ge1xuICBjb25zdCBbaXNPcGVuLCBzZXRJc09wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHRleHQteHMgYm9yZGVyLXQgYm9yZGVyLXB1cnBsZS04MDAvMzAgcHQtMlwiPlxuICAgICAgPGJ1dHRvblxuICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRJc09wZW4oIWlzT3Blbil9XG4gICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIHRleHQtcHVycGxlLTQwMCBob3Zlcjp0ZXh0LXB1cnBsZS0zMDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgPlxuICAgICAgICA8c3ZnXG4gICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgICAgd2lkdGg9XCIxNFwiXG4gICAgICAgICAgaGVpZ2h0PVwiMTRcIlxuICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxuICAgICAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIlxuICAgICAgICAgIHN0cm9rZVdpZHRoPVwiMlwiXG4gICAgICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICBzdHJva2VMaW5lam9pbj1cInJvdW5kXCJcbiAgICAgICAgICBjbGFzc05hbWU9e2B0cmFuc2l0aW9uLXRyYW5zZm9ybSAke2lzT3BlbiA/ICdyb3RhdGUtMTgwJyA6ICcnfWB9XG4gICAgICAgID5cbiAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiNiA5IDEyIDE1IDE4IDlcIj48L3BvbHlsaW5lPlxuICAgICAgICA8L3N2Zz5cbiAgICAgICAgPHNwYW4+VmVyIHJhem9uYW1pZW50bzwvc3Bhbj5cbiAgICAgIDwvYnV0dG9uPlxuXG4gICAgICB7aXNPcGVuICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHAtMiBiZy1bcmdiKDMwLDE1LDQ1KV0gcm91bmRlZCB0ZXh0LXppbmMtNDAwIHdoaXRlc3BhY2UtcHJlLXdyYXBcIj5cbiAgICAgICAgICB7cmVhc29uaW5nfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBSUNoYXQoKSB7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8TWVzc2FnZVtdPihbXG4gICAge1xuICAgICAgaWQ6IFwiMVwiLFxuICAgICAgY29udGVudDogXCJIb2xhLCBzb3kgdHUgYXNpc3RlbnRlIGRlIGVkaWNpw7NuIGRlIHZpZGVvLiDCv0VuIHF1w6kgcHVlZG8gYXl1ZGFydGU/XCIsXG4gICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgIH0sXG4gIF0pO1xuICBjb25zdCBbaW5wdXQsIHNldElucHV0XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaW1hZ2VGaWxlLCBzZXRJbWFnZUZpbGVdID0gdXNlU3RhdGU8RmlsZSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaW1hZ2VQcmV2aWV3LCBzZXRJbWFnZVByZXZpZXddID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc1VwbG9hZGluZywgc2V0SXNVcGxvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbGFzdFVwbG9hZGVkSW1hZ2VVcmwsIHNldExhc3RVcGxvYWRlZEltYWdlVXJsXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XG4gIGNvbnN0IGZpbGVJbnB1dFJlZiA9IHVzZVJlZjxIVE1MSW5wdXRFbGVtZW50PihudWxsKTtcbiAgY29uc3QgbWVzc2FnZXNFbmRSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICAvLyBFc3RhZG8gcGFyYSByZWFsaXphciB1biBzZWd1aW1pZW50byBkZWwgcHJvZ3Jlc28gZGVsIGF1dG8tZWRpdFxuICBjb25zdCBbYXV0b0VkaXRTdGVwLCBzZXRBdXRvRWRpdFN0ZXBdID0gdXNlU3RhdGU8bnVtYmVyPigwKTtcbiAgY29uc3QgW2lzQXV0b0VkaXRpbmcsIHNldElzQXV0b0VkaXRpbmddID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuXG4gIGNvbnN0IHN0YXRlTWFuYWdlciA9IHVzZVN0YXRlTWFuYWdlcigpO1xuICBjb25zdCB7IHRpbWVsaW5lLCBzY2VuZXMsIHBsYXllclJlZiB9ID0gdXNlRGF0YVN0YXRlKCk7XG4gIGNvbnN0IHsgZHVyYXRpb24gfSA9IHVzZVN0b3JlKCk7IC8vIE9idGVuZXIgbGEgZHVyYWNpw7NuIGRlbCBzdG9yZVxuICBjb25zdCBjb21tYW5kRXhlY3V0b3IgPSB1c2VSZWY8VmlkZW9Db21tYW5kRXhlY3V0b3I+KGNyZWF0ZVZpZGVvQ29tbWFuZEV4ZWN1dG9yKHN0YXRlTWFuYWdlcikpO1xuXG4gIC8vIEHDsWFkaXIgZXN0YWRvIHBhcmEgZWwgbW9kbyAoY2hhdCBvIGFnZW50ZSlcbiAgY29uc3QgW21vZGUsIHNldE1vZGVdID0gdXNlU3RhdGU8XCJjaGF0XCIgfCBcImFnZW50XCI+KFwiY2hhdFwiKTtcblxuICAvLyBJbmljaWFsaXphciBlbCBDb21tYW5kRXhlY3V0b3JTZXJ2aWNlIGNvbiBlbCBleGVjdXRvciBhY3R1YWxcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQpIHtcbiAgICAgIENvbW1hbmRFeGVjdXRvclNlcnZpY2Uuc2V0RXhlY3V0b3IoY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQpO1xuICAgICAgY29uc29sZS5sb2coXCJDb21tYW5kRXhlY3V0b3JTZXJ2aWNlIGluaWNpYWxpemFkbyBjb24gw6l4aXRvXCIpO1xuICAgIH1cbiAgfSwgW2NvbW1hbmRFeGVjdXRvci5jdXJyZW50XSk7XG5cbiAgLy8gRnVuY2nDs24gcGFyYSByZWFsaXphciBsYSBlZGljacOzbiBhdXRvbcOhdGljYSBlbiBtb2RvIGFnZW50ZVxuICBjb25zdCBoYW5kbGVBdXRvRWRpdCA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgc2V0SXNBdXRvRWRpdGluZyh0cnVlKTtcblxuICAgICAgLy8gTWVuc2FqZSBpbmljaWFsIGV4cGxpY2FuZG8gZWwgcGxhbiBjb21wbGV0b1xuICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwge1xuICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICBjb250ZW50OiBcIvCfk50gKipQbGFuIGRlIGVkaWNpw7NuIGF1dG9tw6F0aWNhKipcXG5cXG4x77iP4oOjIFJlYWxpemFyw6kgdW4gcmVjb3J0ZSBpbnRlbGlnZW50ZSBkZWwgdmlkZW8gcGFyYSBlbGltaW5hciBsYXMgcGFydGVzIG1lbm9zIHJlbGV2YW50ZXNcXG4y77iP4oOjIEHDsWFkaXLDqSBzdWJ0w610dWxvcyBhdXRvbcOhdGljb3MgYWwgY29udGVuaWRvIG9wdGltaXphZG9cXG5cXG5Db21lbnphbmRvIHByb2Nlc28uLi5cIixcbiAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgfV0pO1xuXG4gICAgICAvLyBQYXNvIDE6IFJlY29ydGUgaW50ZWxpZ2VudGVcbiAgICAgIHNldEF1dG9FZGl0U3RlcCgxKTtcblxuICAgICAgLy8gTWVuc2FqZSBkZSBpbmljaW8gZGVsIHJlY29ydGUgaW50ZWxpZ2VudGVcbiAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIHtcbiAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgY29udGVudDogXCLwn5SNICoqSW5pY2lhbmRvIHJlY29ydGUgaW50ZWxpZ2VudGUqKlxcblxcbkVzdG95IGFuYWxpemFuZG8gZWwgY29udGVuaWRvIGRlbCB2aWRlbyBwYXJhIGlkZW50aWZpY2FyIGxhcyBwYXJ0ZXMgbcOhcyBpbXBvcnRhbnRlcyB5IGVsaW1pbmFyIHNlZ21lbnRvcyBpbm5lY2VzYXJpb3MuLi5cIixcbiAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgfV0pO1xuXG4gICAgICAvLyBFamVjdXRhciBlbCByZWNvcnRlIGludGVsaWdlbnRlXG4gICAgICBjb25zdCBzbWFydFRyaW1SZXN1bHQgPSBhd2FpdCBjb21tYW5kRXhlY3V0b3IuY3VycmVudC5zbWFydFRyaW0oKTtcblxuICAgICAgLy8gSW5mb3JtYXIgYWwgdXN1YXJpbyBzb2JyZSBlbCByZXN1bHRhZG8gZGVsIHJlY29ydGVcbiAgICAgIGlmIChzbWFydFRyaW1SZXN1bHQpIHtcbiAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwge1xuICAgICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgICAgY29udGVudDogXCLinIUgKipSZWNvcnRlIGludGVsaWdlbnRlIGNvbXBsZXRhZG8qKlxcblxcbkhlIGlkZW50aWZpY2FkbyB5IGVsaW1pbmFkbyBsYXMgcGFydGVzIG1lbm9zIHJlbGV2YW50ZXMgZGVsIHZpZGVvLCBvcHRpbWl6YW5kbyBsYSBkdXJhY2nDs24geSBtYW50ZW5pZW5kbyBlbCBjb250ZW5pZG8gZXNlbmNpYWwuXFxuXFxuUHJvY2VkaWVuZG8gY29uIGVsIHNpZ3VpZW50ZSBwYXNvLi4uXCIsXG4gICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIH1dKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIHtcbiAgICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICAgIGNvbnRlbnQ6IFwi4pqg77iPICoqUmVjb3J0ZSBpbnRlbGlnZW50ZSBubyBjb21wbGV0YWRvKipcXG5cXG5ObyBoZSBwb2RpZG8gcmVhbGl6YXIgZWwgcmVjb3J0ZSBpbnRlbGlnZW50ZS4gRXN0byBwdWVkZSBkZWJlcnNlIGEgcXVlIGVsIHZpZGVvIG5vIHRpZW5lIHVuYSB0cmFuc2NyaXBjacOzbiBhZGVjdWFkYSBvIG5vIHNlIGRldGVjdGFyb24gc2VnbWVudG9zIHBhcmEgb3B0aW1pemFyLlxcblxcbkNvbnRpbnVhcsOpIGNvbiBlbCBzaWd1aWVudGUgcGFzby4uLlwiLFxuICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICB9XSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhc28gMjogQcOxYWRpciBzdWJ0w610dWxvc1xuICAgICAgc2V0QXV0b0VkaXRTdGVwKDIpO1xuXG4gICAgICAvLyBNZW5zYWplIGRlIGluaWNpbyBkZSBhw7FhZGlyIHN1YnTDrXR1bG9zXG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCB7XG4gICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgIGNvbnRlbnQ6IFwi8J+UpCAqKkdlbmVyYW5kbyBzdWJ0w610dWxvcyoqXFxuXFxuRXN0b3kgcHJvY2VzYW5kbyBlbCBhdWRpbyBkZWwgdmlkZW8gcGFyYSBjcmVhciBzdWJ0w610dWxvcyBzaW5jcm9uaXphZG9zIGNvbiBlbCBjb250ZW5pZG8uLi5cIixcbiAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgfV0pO1xuXG4gICAgICAvLyBDb25maWd1cmFyIG9wY2lvbmVzIHBhcmEgbG9zIHN1YnTDrXR1bG9zXG4gICAgICBjb25zdCBzdWJ0aXRsZU9wdGlvbnM6IGFueSA9IHtcbiAgICAgICAgZ3JvdXBXb3JkczogdHJ1ZSxcbiAgICAgICAgc3RhcnRUaW1lOiAwLFxuICAgICAgICBlbmRUaW1lOiAxMDAwMDAwIC8vIEhhc3RhIGVsIGZpbmFsIGRlbCB2aWRlb1xuICAgICAgfTtcblxuICAgICAgLy8gQcOxYWRpciBsb3Mgc3VidMOtdHVsb3NcbiAgICAgIGF3YWl0IGNvbW1hbmRFeGVjdXRvci5jdXJyZW50LmFkZFN1YnRpdGxlcyhzdWJ0aXRsZU9wdGlvbnMpO1xuXG4gICAgICAvLyBNZW5zYWplIGZpbmFsIGNvbiByZXN1bWVuIGRlIGFjY2lvbmVzXG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCB7XG4gICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgIGNvbnRlbnQ6IFwi8J+OiSAqKkVkaWNpw7NuIGF1dG9tw6F0aWNhIGNvbXBsZXRhZGEqKlxcblxcbuKchSBSZWNvcnRlIGludGVsaWdlbnRlOiBQYXJ0ZXMgaXJyZWxldmFudGVzIGVsaW1pbmFkYXNcXG7inIUgU3VidMOtdHVsb3M6IEHDsWFkaWRvcyB5IHNpbmNyb25pemFkb3MgY29uIGVsIGNvbnRlbmlkb1xcblxcbkVsIHZpZGVvIGhhIHNpZG8gb3B0aW1pemFkbyBwYXJhIHVuYSBtZWpvciBleHBlcmllbmNpYSBkZSB2aXN1YWxpemFjacOzbi5cXG5cXG7Cv0Rlc2VhcyByZWFsaXphciBhbGd1bmEgb3RyYSBtZWpvcmE/XCIsXG4gICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIH1dKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIGxhIGVkaWNpw7NuIGF1dG9tw6F0aWNhOlwiLCBlcnJvcik7XG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCB7XG4gICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgIGNvbnRlbnQ6IGDinYwgKipFcnJvciBkdXJhbnRlIGxhIGVkaWNpw7NuIGF1dG9tw6F0aWNhKipcXG5cXG5IYSBvY3VycmlkbyB1biBwcm9ibGVtYTogJHtlcnJvci5tZXNzYWdlIHx8IFwiRXJyb3IgZGVzY29ub2NpZG9cIn1cXG5cXG7Cv1F1aWVyZXMgaW50ZW50YXIgYWxndW5hIG90cmEgYWNjacOzbj9gLFxuICAgICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICB9XSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzQXV0b0VkaXRpbmcoZmFsc2UpO1xuICAgICAgc2V0QXV0b0VkaXRTdGVwKDApO1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gRnVuY2nDs24gcGFyYSByZWluaWNpYXIgZWwgY2hhdFxuICBjb25zdCByZXNldENoYXQgPSAoKSA9PiB7XG4gICAgc2V0TWVzc2FnZXMoW1xuICAgICAge1xuICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICBjb250ZW50OiBcIkhvbGEsIHNveSB0dSBhc2lzdGVudGUgZGUgZWRpY2nDs24gZGUgdmlkZW8uIMK/RW4gcXXDqSBwdWVkbyBheXVkYXJ0ZT9cIixcbiAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBzZXRJbnB1dChcIlwiKTtcbiAgICBzZXRJbWFnZUZpbGUobnVsbCk7XG4gICAgc2V0SW1hZ2VQcmV2aWV3KG51bGwpO1xuICAgIHNldExhc3RVcGxvYWRlZEltYWdlVXJsKFwiXCIpO1xuICB9O1xuXG4gIC8vIFNjcm9sbCBhbCDDumx0aW1vIG1lbnNhamVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBtZXNzYWdlc0VuZFJlZi5jdXJyZW50Py5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiBcInNtb290aFwiIH0pO1xuICB9LCBbbWVzc2FnZXMsIGlzTG9hZGluZ10pO1xuXG4gIC8vIEFjdHVhbGl6YXIgZWwgZWplY3V0b3IgZGUgY29tYW5kb3MgY3VhbmRvIGNhbWJpZSBlbCBzdGF0ZU1hbmFnZXJcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb21tYW5kRXhlY3V0b3IuY3VycmVudCA9IGNyZWF0ZVZpZGVvQ29tbWFuZEV4ZWN1dG9yKHN0YXRlTWFuYWdlcik7XG4gICAgLy8gQWN0dWFsaXphciBlbCBzZXJ2aWNpbyBjb24gbGEgbnVldmEgaW5zdGFuY2lhIGRlbCBlamVjdXRvclxuICAgIENvbW1hbmRFeGVjdXRvclNlcnZpY2Uuc2V0RXhlY3V0b3IoY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQpO1xuICAgIGNvbnNvbGUubG9nKFwiQ29tbWFuZEV4ZWN1dG9yU2VydmljZSBhY3R1YWxpemFkbyBjb24gdW5hIG51ZXZhIGluc3RhbmNpYSBkZWwgZWplY3V0b3JcIik7XG4gIH0sIFtzdGF0ZU1hbmFnZXJdKTtcblxuICAvLyBNYW5lamFyIGNsaWNrIGVuIGVsIGJvdMOzbiBkZSBpbWFnZW5cbiAgY29uc3QgaGFuZGxlSW1hZ2VDbGljayA9ICgpID0+IHtcbiAgICBmaWxlSW5wdXRSZWYuY3VycmVudD8uY2xpY2soKTtcbiAgfTtcblxuICAvLyBNYW5lamFyIHNlbGVjY2nDs24gZGUgYXJjaGl2byBkZSBpbWFnZW5cbiAgY29uc3QgaGFuZGxlRmlsZUNoYW5nZSA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IGZpbGUgPSBlLnRhcmdldC5maWxlcz8uWzBdO1xuICAgIGlmIChmaWxlKSB7XG4gICAgICBzZXRJbWFnZUZpbGUoZmlsZSk7XG4gICAgICBjb25zdCBwcmV2aWV3VXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICAgIHNldEltYWdlUHJldmlldyhwcmV2aWV3VXJsKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gRWxpbWluYXIgbGEgaW1hZ2VuIHNlbGVjY2lvbmFkYVxuICBjb25zdCBoYW5kbGVSZW1vdmVJbWFnZSA9ICgpID0+IHtcbiAgICBzZXRJbWFnZUZpbGUobnVsbCk7XG4gICAgc2V0SW1hZ2VQcmV2aWV3KG51bGwpO1xuICAgIGlmIChmaWxlSW5wdXRSZWYuY3VycmVudCkgZmlsZUlucHV0UmVmLmN1cnJlbnQudmFsdWUgPSAnJztcbiAgfTtcblxuICAvLyBTdWJpciBpbWFnZW4gYWwgc2Vydmlkb3JcbiAgY29uc3QgdXBsb2FkSW1hZ2UgPSBhc3luYyAoZmlsZTogRmlsZSk6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHNldElzVXBsb2FkaW5nKHRydWUpO1xuICAgICAgLy8gT2J0ZW5lciBVUkwgZmlybWFkYSBwYXJhIHN1YmlyIGxhIGltYWdlblxuICAgICAgY29uc3QgdXBsb2FkRGV0YWlscyA9IGF3YWl0IGNyZWF0ZVVwbG9hZHNEZXRhaWxzKGZpbGUubmFtZSwgZmlsZSk7XG5cbiAgICAgIC8vIFNpIG5vIGVzIHVuIG1vY2sgbG9jYWwsIHByb2NlZGVyIGNvbiBsYSBjYXJnYVxuICAgICAgaWYgKHVwbG9hZERldGFpbHMudXBsb2FkVXJsICE9PSBcImxvY2FsLW1vY2tcIikge1xuICAgICAgICAvLyBTdWJpciBsYSBpbWFnZW5cbiAgICAgICAgYXdhaXQgZmV0Y2godXBsb2FkRGV0YWlscy51cGxvYWRVcmwsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgIGJvZHk6IGZpbGUsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IGZpbGUudHlwZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIE5vIHNlIG5lY2VzaXRhIGhhY2VyIGZldGNoIHNpIGVzIHVuIG1vY2sgbG9jYWwgKGRhdGFVUkwpXG5cbiAgICAgIC8vIFJldG9ybmFyIGxhIFVSTCBww7pibGljYSBkZSBsYSBpbWFnZW5cbiAgICAgIHJldHVybiB1cGxvYWREZXRhaWxzLnVybDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIHN1YmlyIGxhIGltYWdlbjpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gc2UgcHVkbyBzdWJpciBsYSBpbWFnZW4uIEludMOpbnRhbG8gZGUgbnVldm8uXCIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc1VwbG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEZ1bmNpw7NuIHBhcmEgZW52aWFyIG1lbnNhamVcbiAgY29uc3QgaGFuZGxlU2VuZE1lc3NhZ2UgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCghaW5wdXQudHJpbSgpICYmICFpbWFnZUZpbGUpIHx8IGlzTG9hZGluZykgcmV0dXJuO1xuXG4gICAgbGV0IHVzZXJNZXNzYWdlOiBNZXNzYWdlID0ge1xuICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgIGNvbnRlbnQ6IGlucHV0LFxuICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgfTtcblxuICAgIGxldCB1cGxvYWRlZEltYWdlVXJsID0gXCJcIjtcbiAgICAvLyBWYXJpYWJsZSBwYXJhIHJhc3RyZWFyIGxhIFVSTCBkZSBsYSBpbWFnZW4gYWN0dWFsIHBhcmEgZXN0YSBzb2xpY2l0dWQgZXNwZWPDrWZpY2FcbiAgICBsZXQgY3VycmVudEltYWdlVXJsRm9yVGhpc1JlcXVlc3QgPSBcIlwiO1xuXG4gICAgLy8gU2kgaGF5IHVuYSBpbWFnZW4gcGFyYSBzdWJpciwgcHJvY2VzYXJsYVxuICAgIGlmIChpbWFnZUZpbGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHVwbG9hZGVkSW1hZ2VVcmwgPSBhd2FpdCB1cGxvYWRJbWFnZShpbWFnZUZpbGUpO1xuICAgICAgICB1c2VyTWVzc2FnZS5pbWFnZVVybCA9IHVwbG9hZGVkSW1hZ2VVcmw7XG4gICAgICAgIC8vIEd1YXJkYXIgbGEgVVJMIGRlIGxhIGltYWdlbiBwYXJhIHBvc2libGVzIHJlZmVyZW5jaWFzIGZ1dHVyYXNcbiAgICAgICAgc2V0TGFzdFVwbG9hZGVkSW1hZ2VVcmwodXBsb2FkZWRJbWFnZVVybCk7XG4gICAgICAgIC8vIEltcG9ydGFudGU6IEd1YXJkYXIgbGEgVVJMIGFjdHVhbCBwYXJhIGVzdGEgc29saWNpdHVkIGVzcGVjw61maWNhXG4gICAgICAgIGN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0ID0gdXBsb2FkZWRJbWFnZVVybDtcbiAgICAgICAgY29uc29sZS5sb2coXCJJbWFnZW4gc3ViaWRhIGV4aXRvc2FtZW50ZTpcIiwgdXBsb2FkZWRJbWFnZVVybC5zdWJzdHJpbmcoMCwgMTAwKSArIFwiLi4uXCIpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIGxhIHN1YmlkYSBkZSBpbWFnZW46XCIsIGVycm9yKTtcbiAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAoRGF0ZS5ub3coKSArIDEpLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBjb250ZW50OiBcIkVycm9yIGFsIHN1YmlyIGxhIGltYWdlbi4gUG9yIGZhdm9yLCBpbnTDqW50YWxvIGRlIG51ZXZvLiBEZXRhbGxlczogXCIgK1xuICAgICAgICAgICAgICAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIkVycm9yIGRlc2Nvbm9jaWRvXCIpLFxuICAgICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICB9LFxuICAgICAgICBdKTtcbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEHDsWFkaXIgbWVuc2FqZSBkZWwgdXN1YXJpb1xuICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbLi4ucHJldiwgdXNlck1lc3NhZ2VdKTtcbiAgICBzZXRJbnB1dChcIlwiKTtcbiAgICBzZXRJbWFnZUZpbGUobnVsbCk7XG4gICAgc2V0SW1hZ2VQcmV2aWV3KG51bGwpO1xuICAgIGlmIChmaWxlSW5wdXRSZWYuY3VycmVudCkgZmlsZUlucHV0UmVmLmN1cnJlbnQudmFsdWUgPSAnJztcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG5cbiAgICAvLyBDb21wcm9iYXIgc2kgZXN0YW1vcyBlbiBtb2RvIGFnZW50ZSB5IGVzIHVuYSBzb2xpY2l0dWQgZGUgZWRpY2nDs24gYXV0b23DoXRpY2FcbiAgICBpZiAoc2hvdWxkVXNlQWdlbnQobW9kZSwgdXNlck1lc3NhZ2UuY29udGVudCkpIHtcbiAgICAgIC8vIEVqZWN1dGFyIGVkaWNpw7NuIGF1dG9tw6F0aWNhXG4gICAgICBhd2FpdCBoYW5kbGVBdXRvRWRpdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBFbnZpYXIgYSBsYSBBUEkgcGFyYSBwcm9jZXNhbWllbnRvIGVuIGxlbmd1YWplIG5hdHVyYWxcbiAgICAgIGNvbnN0IGFwaU1lc3NhZ2VzID0gbWVzc2FnZXNcbiAgICAgICAgLmNvbmNhdCh1c2VyTWVzc2FnZSlcbiAgICAgICAgLm1hcChtc2cgPT4ge1xuICAgICAgICAgIC8vIFNpIGVsIG1lbnNhamUgdGllbmUgdW5hIGltYWdlbiwgY3JlYXIgdW4gZm9ybWF0byBlc3BlY2lhbCBwYXJhIGVsIGNvbnRlbmlkb1xuICAgICAgICAgIGlmIChtc2cuaW1hZ2VVcmwpIHtcbiAgICAgICAgICAgIC8vIFNpIGVzIHVuYSBVUkwgZGUgZGF0b3MgKGNvbWllbnphIGNvbiBkYXRhOiksIHVzYXIgdW4gbWFyY2Fkb3IgZXNwZWNpYWxcbiAgICAgICAgICAgIGNvbnN0IGlzRGF0YVVybCA9IG1zZy5pbWFnZVVybC5zdGFydHNXaXRoKCdkYXRhOicpO1xuICAgICAgICAgICAgY29uc3QgaW1hZ2VVcmxUb1NlbmQgPSBpc0RhdGFVcmxcbiAgICAgICAgICAgICAgPyAnW0lNQUdFTl9BREpVTlRBXSdcbiAgICAgICAgICAgICAgOiBgW0lNQUdFTjogJHttc2cuaW1hZ2VVcmx9XWA7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHJvbGU6IG1zZy5yb2xlLFxuICAgICAgICAgICAgICBjb250ZW50OiBgJHttc2cuY29udGVudCB8fCAnJ30gJHtpbWFnZVVybFRvU2VuZH1gXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb2xlOiBtc2cucm9sZSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1zZy5jb250ZW50XG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgIC8vIEHDsWFkaXIgY29udGV4dG8gZGVsIGVkaXRvciBwYXJhIGxhIElBIGV4dGVybmFcbiAgICAgIGNvbnN0IGNvbnRleHRNZXNzYWdlID0ge1xuICAgICAgICByb2xlOiAnc3lzdGVtJyxcbiAgICAgICAgY29udGVudDogYFxuQ29udGV4dG8gYWN0dWFsIGRlbCBlZGl0b3IgZGUgdmlkZW86XG4tIFBvc2ljacOzbiBhY3R1YWwgKHNlZ3VuZG9zKTogJHtwbGF5ZXJSZWY/LmN1cnJlbnQ/LmdldEN1cnJlbnRUaW1lID8gTWF0aC5mbG9vcigocGxheWVyUmVmLmN1cnJlbnQuZ2V0Q3VycmVudFRpbWUoKSB8fCAwKSAqIDEwMCkgLyAxMDAgOiAwfVxuLSBEdXJhY2nDs24gZGVsIHByb3llY3RvIChzZWd1bmRvcyk6ICR7dGltZWxpbmU/LmR1cmF0aW9uID8gTWF0aC5mbG9vcih0aW1lbGluZS5kdXJhdGlvbiAvIDEwMDApIDogMH1cbi0gTsO6bWVybyBkZSBlc2NlbmFzOiAke3NjZW5lcz8ubGVuZ3RoIHx8IDB9XG4tIE7Dum1lcm8gZGUgZWxlbWVudG9zIGVuIGVsIHRpbWVsaW5lOiAkeyh0aW1lbGluZT8uY2FudmFzPy5nZXRPYmplY3RzPy4oKSB8fCBbXSkubGVuZ3RoIC0gMSA+IDAgPyAodGltZWxpbmU/LmNhbnZhcz8uZ2V0T2JqZWN0cz8uKCkgfHwgW10pLmxlbmd0aCAtIDEgOiAwfVxuJHtsYXN0VXBsb2FkZWRJbWFnZVVybCA/IGAtIMOabHRpbWEgaW1hZ2VuIGNvbXBhcnRpZGEgcG9yIGVsIHVzdWFyaW8gZGlzcG9uaWJsZSBwYXJhIHVzYXJgIDogJyd9XG5cbkVsIHVzdWFyaW8gcHVlZGUgZXhwcmVzYXIgZW4gbGVuZ3VhamUgbmF0dXJhbCBsYSBuZWNlc2lkYWQgZGUgYWdyZWdhciBlbGVtZW50b3MgYWwgdmlkZW8uXG5FamVtcGxvczpcbi0gXCJQb24gdW4gdMOtdHVsbyBxdWUgZGlnYSAnQmllbnZlbmlkb3MnIGFsIGluaWNpb1wiXG4tIFwiUXVpZXJvIHVuIHRleHRvIGJsYW5jbyBxdWUgZGlnYSAnRmluJyBhbCBmaW5hbCBkZWwgdmlkZW9cIlxuLSBcIk5lY2VzaXRvIHVuYSBpbWFnZW4gZW4gZWwgc2VndW5kbyAxMFwiXG4tIFwiQ29sb2NhIHVuIHZpZGVvIGRlIGludHJvZHVjY2nDs24gYWwgcHJpbmNpcGlvXCJcblxuU2kgZWwgdXN1YXJpbyBhZGp1bnRhIHVuYSBpbWFnZW4gZW4gZWwgbWVuc2FqZSwgbGEgVVJMIGVzdGFyw6EgZW4gZm9ybWF0byBbSU1BR0VOOiB1cmxfZGVfbGFfaW1hZ2VuXS5cbkRlYmVzIGRldGVjdGFyIHNpIHF1aWVyZSBhZ3JlZ2FyIGVzdGEgaW1hZ2VuIGFsIHZpZGVvIHkgZW4gcXXDqSBtb21lbnRvIHRlbXBvcmFsLlxuYFxuICAgICAgfTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVXNhciBsYSBBUEkgY29ycmVjdGEgc2Vnw7puIGVsIG1vZG9cbiAgICAgICAgY29uc3QgYXBpRW5kcG9pbnQgPSBtb2RlID09PSBcImFnZW50XCIgPyAnL2FwaS9haS1jaGF0LWFnZW50JyA6ICcvYXBpL2FpLWNoYXQnO1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYXBpRW5kcG9pbnQsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgbWVzc2FnZXM6IFtjb250ZXh0TWVzc2FnZSwgLi4uYXBpTWVzc2FnZXNdLFxuICAgICAgICAgICAgLy8gVXNhciBsYSBVUkwgZGUgbGEgaW1hZ2VuIGFjdHVhbCBwYXJhIGVzdGEgc29saWNpdHVkIHNpIGV4aXN0ZSxcbiAgICAgICAgICAgIC8vIGRlIGxvIGNvbnRyYXJpbyB1c2FyIGxhIMO6bHRpbWEgVVJMIGd1YXJkYWRhXG4gICAgICAgICAgICBsYXN0SW1hZ2VVcmw6IGN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0IHx8IGxhc3RVcGxvYWRlZEltYWdlVXJsIHx8IFwiXCJcbiAgICAgICAgICB9KSxcbiAgICAgICAgICAvLyBBZ3JlZ2FyIHRpbWVvdXQgcGFyYSBldml0YXIgZXNwZXJhcyBpbmZpbml0YXNcbiAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoMTUwMDApIC8vIDE1IHNlZ3VuZG9zIG3DoXhpbW9cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZGUgQVBJOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgICAvLyBBc2VndXJhcnNlIGRlIHF1ZSBkYXRhLm1lc3NhZ2UuY29udGVudCBleGlzdGVcbiAgICAgICAgY29uc3QgYWlSZXNwb25zZSA9IGRhdGE/Lm1lc3NhZ2U/LmNvbnRlbnQgfHwgXCJMbyBzaWVudG8sIG5vIHB1ZGUgZW50ZW5kZXIgdHUgc29saWNpdHVkLlwiO1xuXG4gICAgICAgIC8vIE9idGVuZXIgbG9zIGRhdG9zIGRlbCBlbGVtZW50byBzaSBleGlzdGVuIChjb24gdmVyaWZpY2FjacOzbiBzZWd1cmEpXG4gICAgICAgIGNvbnN0IGVsZW1lbnREYXRhID0gZGF0YT8uZWxlbWVudERhdGE7XG5cbiAgICAgICAgLy8gVmFyaWFibGUgcGFyYSBsYSByZXNwdWVzdGEgZmluYWxcbiAgICAgICAgbGV0IGZpbmFsUmVzcG9uc2UgPSBhaVJlc3BvbnNlO1xuICAgICAgICAvLyBDcmVhciB1bmEgcmVmZXJlbmNpYSBhIGxhIHJlc3B1ZXN0YSBmaW5hbCBwYXJhIHF1ZSBzZWEgYWNjZXNpYmxlIGVuIGxhIGZ1bmNpw7NuIHByb2Nlc2Fkb3JhXG4gICAgICAgIGNvbnN0IGZpbmFsUmVzcG9uc2VSZWYgPSB7IGN1cnJlbnQ6IGZpbmFsUmVzcG9uc2UgfTtcbiAgICAgICAgbGV0IGVsZW1lbnRBZGRlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIFVzYXIgbGEgZnVuY2nDs24gZGUgcHJvY2VzYW1pZW50byBkZSBlbGVtZW50b3NcbiAgICAgICAgY29uc3QgcHJvY2Vzc1Jlc3VsdCA9IGF3YWl0IHByb2Nlc3NEZXRlY3RlZEVsZW1lbnQoXG4gICAgICAgICAgZWxlbWVudERhdGEsXG4gICAgICAgICAgY29tbWFuZEV4ZWN1dG9yLFxuICAgICAgICAgIGZpbmFsUmVzcG9uc2VSZWYsXG4gICAgICAgICAgdGltZWxpbmUsXG4gICAgICAgICAgbGFzdFVwbG9hZGVkSW1hZ2VVcmwsXG4gICAgICAgICAgY3VycmVudEltYWdlVXJsRm9yVGhpc1JlcXVlc3RcbiAgICAgICAgKTtcblxuICAgICAgICBmaW5hbFJlc3BvbnNlID0gcHJvY2Vzc1Jlc3VsdC5maW5hbFJlc3BvbnNlO1xuICAgICAgICBlbGVtZW50QWRkZWQgPSBwcm9jZXNzUmVzdWx0LmVsZW1lbnRBZGRlZDtcblxuICAgICAgICAvLyBDcmVhciBtZW5zYWplIGNvbiBsb3MgZGV0YWxsZXMgY29tcGxldG9zXG4gICAgICAgIGNvbnN0IG5ld01lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgICBjb250ZW50OiBmaW5hbFJlc3BvbnNlIHx8IGRhdGEubWVzc2FnZS5jb250ZW50LFxuICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFNpIHNlIGRldGVjdMOzIHVuIGVsZW1lbnRvIGRlIG3DunNpY2EsIGFncmVnYXIgbGFzIG9wY2lvbmVzIGFsIG1lbnNhamVcbiAgICAgICAgaWYgKGVsZW1lbnREYXRhPy5kZXRlY3RlZCAmJlxuICAgICAgICAgICAgZWxlbWVudERhdGEuZWxlbWVudD8udHlwZSA9PT0gXCJtdXNpY1wiICYmXG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KGVsZW1lbnREYXRhLmVsZW1lbnQub3B0aW9ucykpIHtcblxuICAgICAgICAgIG5ld01lc3NhZ2UubXVzaWNPcHRpb25zID0gZWxlbWVudERhdGEuZWxlbWVudC5vcHRpb25zO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiT3BjaW9uZXMgZGUgbcO6c2ljYSBhZ3JlZ2FkYXMgYWwgbWVuc2FqZTpcIiwgbmV3TWVzc2FnZS5tdXNpY09wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWN0dWFsaXphciBtZW5zYWplc1xuICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCBuZXdNZXNzYWdlXSk7XG4gICAgICB9IGNhdGNoIChhcGlFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbGEgY29tdW5pY2FjacOzbiBjb24gbGEgQVBJOlwiLCBhcGlFcnJvcik7XG5cbiAgICAgICAgLy8gTWVuc2FqZSBkZSBlcnJvciBlc3BlY8OtZmljbyBkZSBBUElcbiAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAoRGF0ZS5ub3coKSArIDEpLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBjb250ZW50OiBcIkxvIHNpZW50bywgaGEgb2N1cnJpZG8gdW4gZXJyb3IgYWwgY29tdW5pY2Fyc2UgY29uIGVsIHNlcnZpY2lvIGRlIElBLiBQb3IgZmF2b3IsIGludGVudGEgZGUgbnVldm8gZW4gdW5vcyBtb21lbnRvcy5cIixcbiAgICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgfSxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBwcm9jZXNhciBlbCBtZW5zYWplOlwiLCBlcnJvcik7XG5cbiAgICAgIC8vIERldGVybWluYXIgbWVuc2FqZSBkZSBlcnJvciBhcHJvcGlhZG9cbiAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSBcIkxvIHNpZW50bywgaGEgb2N1cnJpZG8gdW4gZXJyb3IgYWwgcHJvY2VzYXIgdHUgbWVuc2FqZS5cIjtcblxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJ0aW1lb3V0XCIpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJhYm9ydFwiKSkge1xuICAgICAgICAgIGVycm9yTWVzc2FnZSA9IFwiTGEgc29saWNpdHVkIGhhIHRhcmRhZG8gZGVtYXNpYWRvLiBQcnVlYmEgY29uIHVuIG1lbnNhamUgbcOhcyBjb3J0by5cIjtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwibmV0d29ya1wiKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwiZmV0Y2hcIikpIHtcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIlBhcmVjZSBxdWUgaGF5IHVuIHByb2JsZW1hIGRlIGNvbmV4acOzbi4gVmVyaWZpY2EgdHUgY29uZXhpw7NuIGEgaW50ZXJuZXQgZSBpbnRlbnRhIGRlIG51ZXZvLlwiO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIE1lbnNhamUgZGUgZXJyb3JcbiAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbXG4gICAgICAgIC4uLnByZXYsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogKERhdGUubm93KCkgKyAxKS50b1N0cmluZygpLFxuICAgICAgICAgIGNvbnRlbnQ6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgfSxcbiAgICAgIF0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICAvLyBGdW5jacOzbiBwYXJhIG1hbmVqYXIgbGEgc2VsZWNjacOzbiBkZSBtw7pzaWNhXG4gIGNvbnN0IGhhbmRsZU11c2ljU2VsZWN0ID0gYXN5bmMgKG11c2ljUGF0aDogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGBVc3VhcmlvIHNlbGVjY2lvbsOzIG3DunNpY2E6ICR7bXVzaWNQYXRofWApO1xuXG4gICAgICAvLyBDYWxjdWxhciBsYSBkdXJhY2nDs24gZGVsIHZpZGVvIGVuIHNlZ3VuZG9zIHVzYW5kbyBlbCBkdXJhdGlvbiBkZWwgc3RvcmVcbiAgICAgIGNvbnN0IHZpZGVvRHVyYXRpb24gPSBkdXJhdGlvbiA/IE1hdGguZmxvb3IoZHVyYXRpb24gLyAxMDAwKSA6IDMwMDsgLy8gNSBtaW51dG9zIHBvciBkZWZlY3RvXG4gICAgICBjb25zb2xlLmxvZyhgRHVyYWNpw7NuIGRlbCB2aWRlbyAoZGVzZGUgdXNlU3RvcmUpOiAke3ZpZGVvRHVyYXRpb259IHNlZ3VuZG9zYCk7XG5cbiAgICAgIC8vIENvbmZpZ3VyYWNpw7NuIGRlIG9wY2lvbmVzIHBhcmEgbGEgbcO6c2ljYVxuICAgICAgY29uc3QgbXVzaWNPcHRpb25zID0ge1xuICAgICAgICBzdGFydFRpbWU6IDAsXG4gICAgICAgIGVuZFRpbWU6IHZpZGVvRHVyYXRpb24sIC8vIFVzYXIgdG9kYSBsYSBkdXJhY2nDs24gZGVsIHZpZGVvXG4gICAgICAgIHZvbHVtZTogODAsXG4gICAgICAgIGZhZGVJbjogdHJ1ZSxcbiAgICAgICAgZmFkZU91dDogdHJ1ZSxcbiAgICAgICAgcmVzcGVjdE5hdGl2ZUR1cmF0aW9uOiB0cnVlIC8vIFJlc3BldGFyIGxhIGR1cmFjacOzbiBuYXR1cmFsIGRlIGxhIG3DunNpY2FcbiAgICAgIH07XG5cbiAgICAgIC8vIEHDsWFkaXIgbGEgbcO6c2ljYSBhbCB0aW1lbGluZSAocmVzcGV0YXLDoSBsYSBkdXJhY2nDs24gbmF0dXJhbCBzaSBlcyBtw6FzIGNvcnRhIHF1ZSBlbCB2aWRlbylcbiAgICAgIGNvbW1hbmRFeGVjdXRvci5jdXJyZW50LmFkZE11c2ljKG11c2ljUGF0aCwgbXVzaWNPcHRpb25zKTtcblxuICAgICAgLy8gT2J0ZW5lciB1biBub21icmUgYW1pZ2FibGUgcGFyYSBsYSBtw7pzaWNhXG4gICAgICBjb25zdCBnZXRNdXNpY0ZyaWVuZGx5TmFtZSA9IChwYXRoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gcGF0aC5zcGxpdCgnLycpLnBvcCgpIHx8IHBhdGg7XG4gICAgICAgIGlmIChmaWxlbmFtZSA9PT0gXCJzb25nMS5tcDNcIikgcmV0dXJuIFwiTcO6c2ljYSBFbmVyZ8OpdGljYVwiO1xuICAgICAgICBpZiAoZmlsZW5hbWUgPT09IFwic29uZzIubXAzXCIpIHJldHVybiBcIk1lbG9kw61hIFJlbGFqYW50ZVwiO1xuICAgICAgICByZXR1cm4gZmlsZW5hbWU7XG4gICAgICB9O1xuXG4gICAgICAvLyBBw7FhZGlyIHVuIG1lbnNhamUgZGUgY29uZmlybWFjacOzblxuICAgICAgY29uc3QgbXVzaWNOYW1lID0gZ2V0TXVzaWNGcmllbmRseU5hbWUobXVzaWNQYXRoKTtcbiAgICAgIGNvbnN0IGNvbmZpcm1hdGlvbk1zZzogTWVzc2FnZSA9IHtcbiAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgY29udGVudDogYEhlIGHDsWFkaWRvIFwiJHttdXNpY05hbWV9XCIgYSB0dSB2aWRlby4gTGEgbcO6c2ljYSBzZSBhZGFwdGFyw6EgYXV0b23DoXRpY2FtZW50ZTogc2kgZXMgbcOhcyBjb3J0YSBxdWUgZWwgdmlkZW8sIG1hbnRlbmRyw6Egc3UgZHVyYWNpw7NuIG5hdHVyYWw7IHNpIGVzIG3DoXMgbGFyZ2EsIHNlIGFqdXN0YXLDoSBhIGxhIGR1cmFjacOzbiBkZWwgdmlkZW8gKCR7dmlkZW9EdXJhdGlvbn0gc2VndW5kb3MpLmAsXG4gICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIH07XG5cbiAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIGNvbmZpcm1hdGlvbk1zZ10pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhw7FhZGlyIG3DunNpY2E6XCIsIGVycm9yKTtcblxuICAgICAgLy8gTWVuc2FqZSBkZSBlcnJvclxuICAgICAgY29uc3QgZXJyb3JNc2c6IE1lc3NhZ2UgPSB7XG4gICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgIGNvbnRlbnQ6IGBObyBzZSBwdWRvIGHDsWFkaXIgbGEgbcO6c2ljYS4gRXJyb3I6ICR7ZXJyb3IubWVzc2FnZSB8fCBcIkVycm9yIGRlc2Nvbm9jaWRvXCJ9YCxcbiAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgfTtcblxuICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgZXJyb3JNc2ddKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gTWFuZWphciBjYW1iaW8gZGUgbW9kb1xuICBjb25zdCBoYW5kbGVNb2RlQ2hhbmdlID0gKG5ld01vZGU6IFwiY2hhdFwiIHwgXCJhZ2VudFwiKSA9PiB7XG4gICAgLy8gU2kgZWwgbW9kbyBlcyBkaWZlcmVudGUsIGNhbWJpYXIgeSByZWluaWNpYXIgbGEgY29udmVyc2FjacOzblxuICAgIGlmIChuZXdNb2RlICE9PSBtb2RlKSB7XG4gICAgICBzZXRNb2RlKG5ld01vZGUpO1xuXG4gICAgICAvLyBNZW5zYWplIGluaWNpYWwgZXNwZWPDrWZpY28gc2Vnw7puIGVsIG1vZG9cbiAgICAgIGNvbnN0IGluaXRpYWxNZXNzYWdlID0gbmV3TW9kZSA9PT0gXCJjaGF0XCJcbiAgICAgICAgPyBcIkhvbGEsIHNveSB0dSBhc2lzdGVudGUgZGUgZWRpY2nDs24gZGUgdmlkZW8uIMK/RW4gcXXDqSBwdWVkbyBheXVkYXJ0ZT9cIlxuICAgICAgICA6IFwi8J+RiyBIb2xhLCBzb3kgdHUgYWdlbnRlIGRlIGVkaWNpw7NuIGF1dG9tw6F0aWNhIGRlIHZpZGVvLlxcblxcbuKcqCBQdWVkZXMgc2ltcGxlbWVudGUgZXNjcmliaXIgKionZWRpdGEgZWwgdmlkZW8nKiogeSBlamVjdXRhcsOpIGF1dG9tw6F0aWNhbWVudGU6XFxuXFxuMe+4j+KDoyBSZWNvcnRlIGludGVsaWdlbnRlIC0gRWxpbWluYXLDqSBsYXMgcGFydGVzIG1lbm9zIHJlbGV2YW50ZXNcXG4y77iP4oOjIFN1YnTDrXR1bG9zIGF1dG9tw6F0aWNvcyAtIEHDsWFkaXLDqSBzdWJ0w610dWxvcyBzaW5jcm9uaXphZG9zXFxuXFxuRXN0YXMgYWNjaW9uZXMgb3B0aW1pemFyw6FuIHR1IHZpZGVvIGVuIHNlZ3VuZG9zIHNpbiBuZWNlc2lkYWQgZGUgaW5zdHJ1Y2Npb25lcyBkZXRhbGxhZGFzLlwiO1xuXG4gICAgICAvLyBSZWluaWNpYXIgbGEgY29udmVyc2FjacOzbiBjb24gZWwgbWVuc2FqZSBhcHJvcGlhZG9cbiAgICAgIHNldE1lc3NhZ2VzKFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgICAgY29udGVudDogaW5pdGlhbE1lc3NhZ2UsXG4gICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgLy8gTWFyY2FyIGVsIG1lbnNhamUgY29tbyBpbmljaWFsIHBhcmEgZXZpdGFyIG1vc3RyYXIgcmF6b25hbWllbnRvXG4gICAgICAgICAgaXNJbml0aWFsOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICBdKTtcblxuICAgICAgLy8gTGltcGlhciBvdHJvcyBlc3RhZG9zXG4gICAgICBzZXRJbnB1dChcIlwiKTtcbiAgICAgIHNldEltYWdlRmlsZShudWxsKTtcbiAgICAgIHNldEltYWdlUHJldmlldyhudWxsKTtcbiAgICAgIHNldExhc3RVcGxvYWRlZEltYWdlVXJsKFwiXCIpO1xuICAgICAgc2V0QXV0b0VkaXRTdGVwKDApO1xuICAgICAgc2V0SXNBdXRvRWRpdGluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtZnVsbCBmbGV4LWNvbCBiZy1bcmdiKDIwLDEwLDMwKV0gYm9yZGVyLWwgYm9yZGVyLXB1cnBsZS04MDAvMzBcIj5cbiAgICAgIHsvKiBIZWFkZXIgY29uIHRvZ2dsZSAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctW3JnYigzMCwxNSw0NSldIHAtMyBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgYm9yZGVyLWIgYm9yZGVyLXB1cnBsZS04MDAvMzBcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC03IHctNyByb3VuZGVkIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLXB1cnBsZS03MDBcIj5cbiAgICAgICAgICAgIDxTcGFya2xlcyBjbGFzc05hbWU9XCJoLTMuNSB3LTMuNSB0ZXh0LXdoaXRlXCIgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC13aGl0ZSB0ZXh0LXNtXCI+QXNpc3RlbnRlIElBPC9oMz5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIFRvZ2dsZSBlbnRyZSBDaGF0IHkgQWdlbnRlICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGJnLVtyZ2IoNDAsMjAsNjApXSByb3VuZGVkLWZ1bGwgcC0wLjUgbXgtYXV0b1wiPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZU1vZGVDaGFuZ2UoXCJjaGF0XCIpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgcHgtMyBweS0xIHRleHQteHMgcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tYWxsICR7XG4gICAgICAgICAgICAgIG1vZGUgPT09IFwiY2hhdFwiXG4gICAgICAgICAgICAgICAgPyBcImJnLXB1cnBsZS03MDAgdGV4dC13aGl0ZSBmb250LW1lZGl1bVwiXG4gICAgICAgICAgICAgICAgOiBcInRleHQtcHVycGxlLTMwMCBob3Zlcjp0ZXh0LXdoaXRlXCJcbiAgICAgICAgICAgIH1gfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIENoYXRcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVNb2RlQ2hhbmdlKFwiYWdlbnRcIil9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2BweC0zIHB5LTEgdGV4dC14cyByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbi1hbGwgJHtcbiAgICAgICAgICAgICAgbW9kZSA9PT0gXCJhZ2VudFwiXG4gICAgICAgICAgICAgICAgPyBcImJnLXB1cnBsZS03MDAgdGV4dC13aGl0ZSBmb250LW1lZGl1bVwiXG4gICAgICAgICAgICAgICAgOiBcInRleHQtcHVycGxlLTMwMCBob3Zlcjp0ZXh0LXdoaXRlXCJcbiAgICAgICAgICAgIH1gfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIEFnZW50ZVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xXCI+XG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCJcbiAgICAgICAgICAgIHNpemU9XCJpY29uXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtNyB3LTcgcm91bmRlZCBob3ZlcjpiZy1wdXJwbGUtODAwLzIwXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9e3Jlc2V0Q2hhdH1cbiAgICAgICAgICAgIHRpdGxlPVwiUmVpbmljaWFyIGNvbnZlcnNhY2nDs25cIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxSZWZyZXNoQ3cgY2xhc3NOYW1lPVwiaC0zLjUgdy0zLjUgdGV4dC16aW5jLTMwMFwiIC8+XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiDDgXJlYSBkZSBtZW5zYWplcyBjb24gYWx0dXJhIGZpamEgeSBtw6F4aW1hICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3ctaGlkZGVuIHJlbGF0aXZlIG1heC1oLVtjYWxjKDEwMCUtMTIwcHgpXVwiPlxuICAgICAgICA8U2Nyb2xsQXJlYSBjbGFzc05hbWU9XCJoLWZ1bGwgcHItMiBjaGF0LXNjcm9sbGJhciBhYnNvbHV0ZSBpbnNldC0wXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTMgc3BhY2UteS0zXCI+XG4gICAgICAgICAgICB7bWVzc2FnZXMubWFwKChtZXNzYWdlKSA9PiAoXG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBrZXk9e21lc3NhZ2UuaWR9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCBmbGV4LWNvbCBhbmltYXRlLWZhZGVJbiAke1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb2xlID09PSBcImFzc2lzdGFudFwiID8gXCJpdGVtcy1zdGFydFwiIDogXCJpdGVtcy1lbmRcIlxuICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgbWF4LXctWzg1JV0gcm91bmRlZC1tZCBweC00IHB5LTIgJHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb2xlID09PSBcImFzc2lzdGFudFwiXG4gICAgICAgICAgICAgICAgICAgICAgPyBcImJnLVtyZ2IoNDAsMjAsNjApXSB0ZXh0LXppbmMtMjAwXCJcbiAgICAgICAgICAgICAgICAgICAgICA6IFwiYmctcHVycGxlLTcwMCB0ZXh0LXdoaXRlXCJcbiAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2hpdGVzcGFjZS1wcmUtd3JhcCB0ZXh0LXNtXCI+e21lc3NhZ2UuY29udGVudH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgIHttZXNzYWdlLmltYWdlVXJsICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHJvdW5kZWQgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXttZXNzYWdlLmltYWdlVXJsfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWx0PVwiSW1hZ2VuIGFkanVudGFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWF4LWgtNDggbWF4LXctZnVsbCBvYmplY3QtY29udGFpblwiXG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge21lc3NhZ2UubXVzaWNPcHRpb25zICYmIG1lc3NhZ2UubXVzaWNPcHRpb25zLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8TXVzaWNPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz17bWVzc2FnZS5tdXNpY09wdGlvbnN9XG4gICAgICAgICAgICAgICAgICAgICAgb25TZWxlY3RNdXNpYz17aGFuZGxlTXVzaWNTZWxlY3R9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgICB7LyogU2VjY2nDs24gZGUgcmF6b25hbWllbnRvIChzb2xvIGVuIG1vZG8gYWdlbnRlLCBwYXJhIG1lbnNhamVzIGRlbCBhc2lzdGVudGUsIHkgbm8gcGFyYSBlbCBtZW5zYWplIGluaWNpYWwpICovfVxuICAgICAgICAgICAgICAgICAge21vZGUgPT09IFwiYWdlbnRcIiAmJiBtZXNzYWdlLnJvbGUgPT09IFwiYXNzaXN0YW50XCIgJiYgIW1lc3NhZ2UuaXNJbml0aWFsICYmIChcbiAgICAgICAgICAgICAgICAgICAgPFJlYXNvbmluZ1NlY3Rpb24gcmVhc29uaW5nPXtnZW5lcmF0ZVJlYXNvbmluZyhtZXNzYWdlLmNvbnRlbnQpfSAvPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHRleHQtWzEwcHhdIG10LTAuNSBweC0xICR7bWVzc2FnZS5yb2xlID09PSBcImFzc2lzdGFudFwiID8gXCJ0ZXh0LXppbmMtNTAwXCIgOiBcInRleHQtcHVycGxlLTMwMFwifWB9PlxuICAgICAgICAgICAgICAgICAge21lc3NhZ2UudGltZXN0YW1wLnRvTG9jYWxlVGltZVN0cmluZyhbXSwgeyBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnIH0pfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgICAge2lzTG9hZGluZyAmJiA8VGhpbmtpbmdBbmltYXRpb24gLz59XG4gICAgICAgICAgICB7aXNBdXRvRWRpdGluZyAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1zdGFydCBhbmltYXRlLWZhZGVJblwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctWzg1JV0gcm91bmRlZC1tZCBweC00IHB5LTMgYmctW3JnYig0MCwyMCw2MCldIHRleHQtemluYy0yMDBcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTEwIHctMTAgcm91bmRlZC1mdWxsIGJnLXB1cnBsZS04MDAvNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cImgtNiB3LTYgdGV4dC1wdXJwbGUtMzAwIGFuaW1hdGUtc3BpblwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtd2hpdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2F1dG9FZGl0U3RlcCA9PT0gMSA/IFwiUmVhbGl6YW5kbyByZWNvcnRlIGludGVsaWdlbnRlLi4uXCIgOiBcIkdlbmVyYW5kbyBzdWJ0w610dWxvcy4uLlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXppbmMtNDAwIG10LTAuNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7YXV0b0VkaXRTdGVwID09PSAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIkFuYWxpemFuZG8gZWwgY29udGVuaWRvIHkgZWxpbWluYW5kbyBwYXJ0ZXMgaXJyZWxldmFudGVzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiQ3JlYW5kbyBzdWJ0w610dWxvcyBzaW5jcm9uaXphZG9zIGNvbiBlbCBhdWRpb1wifVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICB7LyogQmFycmEgZGUgcHJvZ3Jlc28gKi99XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMVwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGJnLXB1cnBsZS05MDAvMzAgcm91bmRlZC1mdWxsIGgtMi41XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWdyYWRpZW50LXRvLXIgZnJvbS1wdXJwbGUtNjAwIHRvLWluZGlnby02MDAgaC0yLjUgcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTMwMCBlYXNlLWluLW91dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgJHthdXRvRWRpdFN0ZXAgKiA1MH0lYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gbXQtMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXB1cnBsZS0zMDBcIj5QYXNvIHthdXRvRWRpdFN0ZXB9IGRlIDI8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtcHVycGxlLTMwMFwiPnthdXRvRWRpdFN0ZXAgKiA1MH0lPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8ZGl2IHJlZj17bWVzc2FnZXNFbmRSZWZ9IGNsYXNzTmFtZT1cImgtMlwiIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvU2Nyb2xsQXJlYT5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7Lyogw4FyZWEgZGUgdmlzdGEgcHJldmlhIGRlIGltYWdlbiAqL31cbiAgICAgIHtpbWFnZVByZXZpZXcgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIG14LTMgbXQtMSBtYi0yIGgtMjQgYmctW3JnYigzMCwxNSw0NSldIHAtMiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByb3VuZGVkIGJvcmRlciBib3JkZXItcHVycGxlLTgwMC8zMFwiPlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIHZhcmlhbnQ9XCJnaG9zdFwiXG4gICAgICAgICAgICBzaXplPVwiaWNvblwiXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSByaWdodC0xIHRvcC0xIHotMTAgaC01IHctNSByb3VuZGVkLWZ1bGwgYmctYmxhY2svNTBcIlxuICAgICAgICAgICAgb25DbGljaz17aGFuZGxlUmVtb3ZlSW1hZ2V9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFggY2xhc3NOYW1lPVwiaC0zIHctMyB0ZXh0LXdoaXRlXCIgLz5cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8aW1nXG4gICAgICAgICAgICBzcmM9e2ltYWdlUHJldmlld31cbiAgICAgICAgICAgIGFsdD1cIlZpc3RhIHByZXZpYVwiXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJtYXgtaC1mdWxsIG1heC13LWZ1bGwgb2JqZWN0LWNvbnRhaW5cIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIMOBcmVhIGRlIGVudHJhZGEgc2ltcGxpZmljYWRhICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1bcmdiKDMwLDE1LDQ1KV0gcC0zIGJvcmRlci10IGJvcmRlci1wdXJwbGUtODAwLzMwXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggcm91bmRlZCBvdmVyZmxvdy1oaWRkZW4gYm9yZGVyIGJvcmRlci1wdXJwbGUtOTAwLzUwIGZsZXgtMSBiZy1bcmdiKDI1LDEyLDQwKV1cIj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCJcbiAgICAgICAgICAgICAgc2l6ZT1cImljb25cIlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTkgdy05IGJnLXRyYW5zcGFyZW50IGhvdmVyOmJnLXB1cnBsZS04MDAvMjBcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVJbWFnZUNsaWNrfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17aXNMb2FkaW5nIHx8IGlzQXV0b0VkaXRpbmd9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxJbWFnZUljb24gY2xhc3NOYW1lPVwiaC00IHctNCB0ZXh0LXppbmMtNDAwXCIgLz5cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuXG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgdmFsdWU9e2lucHV0fVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldElucHV0KGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgb25LZXlEb3duPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICBoYW5kbGVTZW5kTWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e21vZGUgPT09IFwiYWdlbnRcIiA/IFwiRXNjcmliZSAnZWRpdGEgZWwgdmlkZW8nIHBhcmEgY29tZW56YXIuLi5cIiA6IFwiRXNjcmliZSB0dSBtZW5zYWplLi4uXCJ9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmcgfHwgaXNBdXRvRWRpdGluZ31cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC0xIGJvcmRlci0wIGJnLXRyYW5zcGFyZW50IGgtOSBmb2N1czpyaW5nLTAgZm9jdXMtdmlzaWJsZTpyaW5nLTAgdGV4dC16aW5jLTIwMFwiXG4gICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNlbmRNZXNzYWdlfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17KCFpbnB1dC50cmltKCkgJiYgIWltYWdlRmlsZSkgfHwgaXNMb2FkaW5nIHx8IGlzQXV0b0VkaXRpbmd9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YGgtOSBweC0zIHJvdW5kZWQtbm9uZSAke1xuICAgICAgICAgICAgICAgICghaW5wdXQudHJpbSgpICYmICFpbWFnZUZpbGUpIHx8IGlzTG9hZGluZyB8fCBpc0F1dG9FZGl0aW5nXG4gICAgICAgICAgICAgICAgICA/IFwiYmctcHVycGxlLTkwMC81MCBjdXJzb3Itbm90LWFsbG93ZWQgdGV4dC1wdXJwbGUtMzAwLzUwXCJcbiAgICAgICAgICAgICAgICAgIDogXCJiZy1wdXJwbGUtNzAwIGhvdmVyOmJnLXB1cnBsZS02MDAgdGV4dC13aGl0ZVwiXG4gICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7aXNMb2FkaW5nIHx8IGlzVXBsb2FkaW5nIHx8IGlzQXV0b0VkaXRpbmcgPyAoXG4gICAgICAgICAgICAgICAgPExvYWRlcjIgY2xhc3NOYW1lPVwiaC00IHctNCBhbmltYXRlLXNwaW5cIiAvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxTZW5kIGNsYXNzTmFtZT1cImgtMy41IHctMy41XCIgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8aW5wdXRcbiAgICAgICAgdHlwZT1cImZpbGVcIlxuICAgICAgICByZWY9e2ZpbGVJbnB1dFJlZn1cbiAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUZpbGVDaGFuZ2V9XG4gICAgICAgIGFjY2VwdD1cImltYWdlLypcIlxuICAgICAgICBjbGFzc05hbWU9XCJoaWRkZW5cIlxuICAgICAgICBkaXNhYmxlZD17aXNMb2FkaW5nIHx8IGlzQXV0b0VkaXRpbmd9XG4gICAgICAvPlxuICAgIDwvZGl2PlxuICApO1xufVxuXG4vLyBGdW5jacOzbiBwYXJhIGdlbmVyYXIgcmF6b25hbWllbnRvIGZpY3RpY2lvIGJhc2FkbyBlbiBlbCBjb250ZW5pZG8gZGVsIG1lbnNhamVcbmZ1bmN0aW9uIGdlbmVyYXRlUmVhc29uaW5nKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIC8vIERldGVjdGFyIHNpIGVzIHVuIG1lbnNhamUgcmVsYWNpb25hZG8gY29uIGVsIG1vZG8gZGUgZWRpY2nDs24gYXV0b23DoXRpY2FcbiAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoXCJTdWJ0w610dWxvcyBhw7FhZGlkb3NcIikgfHxcbiAgICAgIGNvbnRlbnQuaW5jbHVkZXMoXCJSZWNvcnRlIGludGVsaWdlbnRlXCIpIHx8XG4gICAgICBjb250ZW50LmluY2x1ZGVzKFwiVm95IGEgYcOxYWRpciBzdWJ0w610dWxvc1wiKSB8fFxuICAgICAgY29udGVudC5pbmNsdWRlcyhcImVkaWNpw7NuIGF1dG9tw6F0aWNhXCIpKSB7XG4gICAgcmV0dXJuIGBBTsOBTElTSVM6XG7igKIgVGlwbzogQWNjacOzbiBhdXRvbcOhdGljYVxu4oCiIEFjY2nDs246ICR7Y29udGVudC5pbmNsdWRlcyhcIlN1YnTDrXR1bG9zXCIpID8gXCJBZ3JlZ2FyIHN1YnTDrXR1bG9zXCIgOiBcIlJlY29ydGUgaW50ZWxpZ2VudGVcIn1cbuKAoiBDb250ZXh0bzogTW9kbyBhZ2VudGUgZGUgZWRpY2nDs24gYXV0b23DoXRpY2FcblxuUFJPQ0VTTzpcbjEuIFJlY2liaXIgY29tYW5kbyBkZSBlZGljacOzbiDihpIgXCJlZGl0YSBlbCB2aWRlb1wiXG4yLiBEZXRlcm1pbmFyIGFjY2lvbmVzIHJlcXVlcmlkYXMg4oaSIFN1YnTDrXR1bG9zICsgUmVjb3J0ZSBpbnRlbGlnZW50ZVxuMy4gRWplY3V0YXIgYWNjaW9uZXMgc2VjdWVuY2lhbG1lbnRlXG40LiBNb25pdG9yZWFyIHJlc3VsdGFkb3NcblxuU0FMSURBOlxu4oaSIEluZm9ybWFyIGFsIHVzdWFyaW8gZGVsIHByb2dyZXNvXG7ihpIgQ29uZmlybWFyIGZpbmFsaXphY2nDs24gZGUgbGEgdGFyZWFcbuKGkiBPZnJlY2VyIGFzaXN0ZW5jaWEgYWRpY2lvbmFsYDtcbiAgfVxuXG4gIC8vIFBhcmEgb3Ryb3MgbWVuc2FqZXMsIG1hbnRlbmVyIGVsIHJhem9uYW1pZW50byBvcmlnaW5hbFxuICByZXR1cm4gYEFOw4FMSVNJUzpcbuKAoiBUaXBvOiBTYWx1ZG8gc2ltcGxlXG7igKIgSWRpb21hOiBFc3Bhw7FvbFxu4oCiIENvbnRleHRvOiBJbmljaW8gZGUgY29udmVyc2FjacOzblxuXG5QUk9DRVNPOlxuMS4gSWRlbnRpZmljYXIgaW50ZW5jacOzbiDihpIgU2FsdWRvIGluaWNpYWxcbjIuIFNlbGVjY2lvbmFyIHJlc3B1ZXN0YSDihpIgUHJvdG9jb2xvIGVzdMOhbmRhciBkZSBiaWVudmVuaWRhXG4zLiBBZGFwdGFyIGFsIGNvbnRleHRvIOKGkiBFZGljacOzbiBkZSB2aWRlb1xuXG5TQUxJREE6XG7ihpIgUmVzcG9uZGVyIGNvbiBzYWx1ZG8gYW1pZ2FibGVcbuKGkiBPZnJlY2VyIGFzaXN0ZW5jaWEgZXNwZWPDrWZpY2EgcGFyYSBlZGljacOzbmA7XG59XG4iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJCdXR0b24iLCJJbnB1dCIsIlNjcm9sbEFyZWEiLCJTZW5kIiwiTG9hZGVyMiIsIkltYWdlSWNvbiIsIlgiLCJTcGFya2xlcyIsIlJlZnJlc2hDdyIsInVzZURhdGFTdGF0ZSIsInVzZVN0YXRlTWFuYWdlciIsImNyZWF0ZVZpZGVvQ29tbWFuZEV4ZWN1dG9yIiwiY3JlYXRlVXBsb2Fkc0RldGFpbHMiLCJDb21tYW5kRXhlY3V0b3JTZXJ2aWNlIiwidXNlU3RvcmUiLCJzaG91bGRVc2VBZ2VudCIsIm1vZGUiLCJtZXNzYWdlIiwiYXV0b0VkaXRQYXR0ZXJucyIsInNvbWUiLCJwYXR0ZXJuIiwidGVzdCIsInRyaW0iLCJleHRyYWN0SW1hZ2VUaW1lc0Zyb21NZXNzYWdlIiwibWVzc2FnZUNvbnRlbnQiLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwic3RhcnRUaW1lUGF0dGVybnMiLCJlbmRUaW1lUGF0dGVybnMiLCJpc0F0U3RhcnQiLCJpc0F0RW5kIiwibWF0Y2giLCJ0b1N0cmluZyIsImluY2x1ZGVzIiwicGFyc2VJbnQiLCJwcm9jZXNzRGV0ZWN0ZWRFbGVtZW50IiwiZWxlbWVudERhdGEiLCJjb21tYW5kRXhlY3V0b3IiLCJmaW5hbFJlc3BvbnNlUmVmIiwidGltZWxpbmUiLCJsYXN0VXBsb2FkZWRJbWFnZVVybCIsImN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0IiwiZWxlbWVudEFkZGVkIiwiZmluYWxSZXNwb25zZSIsImN1cnJlbnQiLCJkZXRlY3RlZCIsImNvbmZpZGVuY2UiLCJlbGVtZW50IiwidHlwZSIsImNvbnRlbnQiLCJ0ZXh0T3B0aW9ucyIsImNvbG9yIiwidG9Mb3dlckNhc2UiLCJhZGRUZXh0IiwiaW1hZ2VPcHRpb25zIiwicG9zaXRpb24iLCJ4IiwieSIsImNvbnNvbGUiLCJsb2ciLCJ2aWRlb0R1cmF0aW9uIiwiZHVyYXRpb24iLCJNYXRoIiwiZmxvb3IiLCJtYXgiLCJpc0dlbmVyaWNVcmwiLCJ1cmwiLCJpc0xvY2FsSW1hZ2UiLCJzdGFydHNXaXRoIiwiaW1hZ2VVcmwiLCJhZGRJbWFnZSIsInZpZGVvT3B0aW9ucyIsInZpZGVvVXJsIiwiYWRkVmlkZW8iLCJzdWJ0aXRsZU9wdGlvbnMiLCJncm91cFdvcmRzIiwidW5kZWZpbmVkIiwiYWRkU3VidGl0bGVzIiwiQXJyYXkiLCJpc0FycmF5Iiwic2VnbWVudHMiLCJsZW5ndGgiLCJtYXAiLCJzZWdtZW50Iiwic2VnbWVudHNGb3JtYXR0ZWQiLCJzIiwiam9pbiIsInJlc3VsdCIsInJlbW92ZVNlZ21lbnRzIiwiZXJyb3IiLCJjb21wYWN0VGltZWxpbmUiLCJzbWFydFRyaW0iLCJvcHRpb25zIiwiTXVzaWNPcHRpb25zIiwib25TZWxlY3RNdXNpYyIsImdldEZyaWVuZGx5TmFtZSIsIm11c2ljUGF0aCIsImZpbGVuYW1lIiwic3BsaXQiLCJwb3AiLCJkaXYiLCJjbGFzc05hbWUiLCJpbmRleCIsIm11c2ljTmFtZSIsImJ1dHRvbiIsIm9uQ2xpY2siLCJzdmciLCJ4bWxucyIsInZpZXdCb3giLCJmaWxsIiwicGF0aCIsImQiLCJzdHJva2VXaWR0aCIsInN0cm9rZSIsInN0cm9rZUxpbmVjYXAiLCJzdHJva2VMaW5lam9pbiIsIlRoaW5raW5nQW5pbWF0aW9uIiwic3BhbiIsInN0eWxlIiwiYW5pbWF0aW9uRGVsYXkiLCJSZWFzb25pbmdTZWN0aW9uIiwicmVhc29uaW5nIiwiaXNPcGVuIiwic2V0SXNPcGVuIiwid2lkdGgiLCJoZWlnaHQiLCJwb2x5bGluZSIsInBvaW50cyIsIkFJQ2hhdCIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJpZCIsInJvbGUiLCJ0aW1lc3RhbXAiLCJEYXRlIiwiaW5wdXQiLCJzZXRJbnB1dCIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsImltYWdlRmlsZSIsInNldEltYWdlRmlsZSIsImltYWdlUHJldmlldyIsInNldEltYWdlUHJldmlldyIsImlzVXBsb2FkaW5nIiwic2V0SXNVcGxvYWRpbmciLCJzZXRMYXN0VXBsb2FkZWRJbWFnZVVybCIsImZpbGVJbnB1dFJlZiIsIm1lc3NhZ2VzRW5kUmVmIiwiYXV0b0VkaXRTdGVwIiwic2V0QXV0b0VkaXRTdGVwIiwiaXNBdXRvRWRpdGluZyIsInNldElzQXV0b0VkaXRpbmciLCJzdGF0ZU1hbmFnZXIiLCJzY2VuZXMiLCJwbGF5ZXJSZWYiLCJzZXRNb2RlIiwic2V0RXhlY3V0b3IiLCJoYW5kbGVBdXRvRWRpdCIsInByZXYiLCJub3ciLCJzbWFydFRyaW1SZXN1bHQiLCJyZXNldENoYXQiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImNsaWNrIiwiaGFuZGxlRmlsZUNoYW5nZSIsImUiLCJmaWxlIiwidGFyZ2V0IiwiZmlsZXMiLCJwcmV2aWV3VXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiaGFuZGxlUmVtb3ZlSW1hZ2UiLCJ2YWx1ZSIsInVwbG9hZEltYWdlIiwidXBsb2FkRGV0YWlscyIsIm5hbWUiLCJ1cGxvYWRVcmwiLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJoZWFkZXJzIiwiRXJyb3IiLCJoYW5kbGVTZW5kTWVzc2FnZSIsInVzZXJNZXNzYWdlIiwidXBsb2FkZWRJbWFnZVVybCIsInN1YnN0cmluZyIsImFwaU1lc3NhZ2VzIiwiY29uY2F0IiwibXNnIiwiaXNEYXRhVXJsIiwiaW1hZ2VVcmxUb1NlbmQiLCJjb250ZXh0TWVzc2FnZSIsImdldEN1cnJlbnRUaW1lIiwiY2FudmFzIiwiZ2V0T2JqZWN0cyIsImRhdGEiLCJhcGlFbmRwb2ludCIsInJlc3BvbnNlIiwiSlNPTiIsInN0cmluZ2lmeSIsImxhc3RJbWFnZVVybCIsInNpZ25hbCIsIkFib3J0U2lnbmFsIiwidGltZW91dCIsIm9rIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImpzb24iLCJhaVJlc3BvbnNlIiwicHJvY2Vzc1Jlc3VsdCIsIm5ld01lc3NhZ2UiLCJtdXNpY09wdGlvbnMiLCJhcGlFcnJvciIsImVycm9yTWVzc2FnZSIsImhhbmRsZU11c2ljU2VsZWN0Iiwidm9sdW1lIiwiZmFkZUluIiwiZmFkZU91dCIsInJlc3BlY3ROYXRpdmVEdXJhdGlvbiIsImFkZE11c2ljIiwiZ2V0TXVzaWNGcmllbmRseU5hbWUiLCJjb25maXJtYXRpb25Nc2ciLCJlcnJvck1zZyIsImhhbmRsZU1vZGVDaGFuZ2UiLCJuZXdNb2RlIiwiaW5pdGlhbE1lc3NhZ2UiLCJpc0luaXRpYWwiLCJoMyIsInZhcmlhbnQiLCJzaXplIiwidGl0bGUiLCJpbWciLCJzcmMiLCJhbHQiLCJnZW5lcmF0ZVJlYXNvbmluZyIsInRvTG9jYWxlVGltZVN0cmluZyIsImhvdXIiLCJtaW51dGUiLCJyZWYiLCJkaXNhYmxlZCIsIm9uQ2hhbmdlIiwib25LZXlEb3duIiwia2V5Iiwic2hpZnRLZXkiLCJwcmV2ZW50RGVmYXVsdCIsInBsYWNlaG9sZGVyIiwiYWNjZXB0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/ai-chat/index.tsx\n"));

/***/ })

});
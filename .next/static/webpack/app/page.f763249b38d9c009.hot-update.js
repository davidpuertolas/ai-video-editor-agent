"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./components/ai-chat/index.tsx":
/*!**************************************!*\
  !*** ./components/ai-chat/index.tsx ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ AIChat; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! styled-jsx/style */ \"(app-pages-browser)/./node_modules/styled-jsx/style.js\");\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./components/ui/button.tsx\");\n/* harmony import */ var _components_ui_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/ui/input */ \"(app-pages-browser)/./components/ui/input.tsx\");\n/* harmony import */ var _components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/ui/scroll-area */ \"(app-pages-browser)/./components/ui/scroll-area.tsx\");\n/* harmony import */ var _barrel_optimize_names_HelpCircle_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! __barrel_optimize__?names=HelpCircle,ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/sparkles.js\");\n/* harmony import */ var _barrel_optimize_names_HelpCircle_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=HelpCircle,ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/refresh-cw.js\");\n/* harmony import */ var _barrel_optimize_names_HelpCircle_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! __barrel_optimize__?names=HelpCircle,ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _barrel_optimize_names_HelpCircle_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! __barrel_optimize__?names=HelpCircle,ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/image.js\");\n/* harmony import */ var _barrel_optimize_names_HelpCircle_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! __barrel_optimize__?names=HelpCircle,ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_HelpCircle_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! __barrel_optimize__?names=HelpCircle,ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/send.js\");\n/* harmony import */ var _barrel_optimize_names_HelpCircle_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! __barrel_optimize__?names=HelpCircle,ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/circle-help.js\");\n/* harmony import */ var _features_editor_store_use_data_state__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/features/editor/store/use-data-state */ \"(app-pages-browser)/./features/editor/store/use-data-state.ts\");\n/* harmony import */ var _features_editor_hooks_state_manager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/features/editor/hooks/state-manager */ \"(app-pages-browser)/./features/editor/hooks/state-manager.tsx\");\n/* harmony import */ var _ai_video_commands__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ai-video-commands */ \"(app-pages-browser)/./components/ai-chat/ai-video-commands.ts\");\n/* harmony import */ var _utils_upload__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/utils/upload */ \"(app-pages-browser)/./utils/upload.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n// Función para extraer tiempos de inicio y fin de una imagen a partir del mensaje\nfunction extractImageTimesFromMessage(messageContent) {\n    let startTime = 0;\n    let endTime = 5;\n    if (!messageContent) return {\n        startTime,\n        endTime\n    };\n    // Buscar referencias al tiempo inicial\n    const startTimePatterns = [\n        /en el segundo (\\d+)/i,\n        /desde el segundo (\\d+)/i,\n        /a partir del segundo (\\d+)/i,\n        /comenzando en el segundo (\\d+)/i,\n        /desde el minuto (\\d+)/i,\n        /en el minuto (\\d+)/i,\n        /entre los segundos (\\d+) y/i,\n        /del segundo (\\d+) al/i,\n        /empezando en (\\d+)/i,\n        /segundo (\\d+)/i,\n        /en (\\d+) segundos/i,\n        /en el (\\d+)/i\n    ];\n    // Buscar referencias al tiempo final\n    const endTimePatterns = [\n        /hasta el segundo (\\d+)/i,\n        /al segundo (\\d+)/i,\n        /terminando en el segundo (\\d+)/i,\n        /hasta el minuto (\\d+)/i,\n        /entre los segundos \\d+ y (\\d+)/i,\n        /del segundo \\d+ al (\\d+)/i,\n        /por (\\d+) segundos/i,\n        /durante (\\d+) segundos/i\n    ];\n    // Buscar palabras clave especiales\n    const isAtStart = /\\b(al inicio|al principio|al comienzo)\\b/i.test(messageContent);\n    const isAtEnd = /\\b(al final|al término|al acabar)\\b/i.test(messageContent);\n    // Procesar patrones de tiempo inicial\n    for (const pattern of startTimePatterns){\n        const match = messageContent.match(pattern);\n        if (match && match[1]) {\n            // Si es referencia a minutos, convertir a segundos\n            startTime = pattern.toString().includes(\"minuto\") ? parseInt(match[1]) * 60 : parseInt(match[1]);\n            break;\n        }\n    }\n    // Procesar patrones de tiempo final\n    for (const pattern of endTimePatterns){\n        const match = messageContent.match(pattern);\n        if (match && match[1]) {\n            if (pattern.toString().includes(\"por\") || pattern.toString().includes(\"durante\")) {\n                // Es una duración relativa, sumar al tiempo inicial\n                endTime = startTime + parseInt(match[1]);\n            } else {\n                // Es un tiempo absoluto\n                endTime = pattern.toString().includes(\"minuto\") ? parseInt(match[1]) * 60 : parseInt(match[1]);\n            }\n            break;\n        }\n    }\n    // Si se menciona \"al inicio\", establecer tiempo a 0\n    if (isAtStart) {\n        startTime = 0;\n        endTime = 5; // Por defecto 5 segundos de duración\n    }\n    // Si se menciona \"al final\", establecer valores relativos al final\n    // Nota: El valor real se ajustará en el cliente según la duración\n    if (isAtEnd) {\n        startTime = -1; // Código especial para \"final - 5 segundos\"\n        endTime = -1; // Código especial para \"final\"\n    }\n    // Si no se detectó tiempo final pero sí inicial, establecer una duración predeterminada\n    if (startTime > 0 && endTime === 5 && startTime !== 0) {\n        endTime = startTime + 5;\n    }\n    return {\n        startTime,\n        endTime\n    };\n}\n// Función para procesar elementos detectados por la IA\nconst processDetectedElement = async (elementData, commandExecutor, finalResponseRef, timeline, lastUploadedImageUrl, currentImageUrlForThisRequest)=>{\n    let elementAdded = false;\n    let finalResponse = finalResponseRef.current;\n    try {\n        // Si se detectó un elemento para agregar con confianza suficiente\n        if (elementData && elementData.detected === true && typeof elementData.confidence === \"number\" && elementData.confidence > 0.7 && elementData.element) {\n            const element = elementData.element;\n            // Procesar según el tipo de elemento\n            if (element.type === \"text\" && element.content) {\n                // Configurar opciones para el texto\n                const textOptions = {\n                    startTime: typeof element.startTime === \"number\" ? element.startTime : 0,\n                    endTime: typeof element.endTime === \"number\" ? element.endTime : typeof element.startTime === \"number\" ? element.startTime + 5 : 5\n                };\n                // Asignar color si está disponible\n                if (element.color) {\n                    textOptions.color = element.color.toLowerCase() === \"blanco\" ? \"#FFFFFF\" : element.color.toLowerCase() === \"negro\" ? \"#000000\" : element.color.toLowerCase() === \"rojo\" ? \"#FF0000\" : element.color.toLowerCase() === \"azul\" ? \"#0000FF\" : element.color.toLowerCase() === \"verde\" ? \"#00FF00\" : element.color.toLowerCase() === \"amarillo\" ? \"#FFFF00\" : element.color;\n                }\n                // Añadir el texto\n                commandExecutor.current.addText(element.content, textOptions);\n                // Actualizar respuesta\n                finalResponse += '\\n\\n[He agregado el texto \"'.concat(element.content, '\" ').concat(element.color ? \"con color \".concat(element.color, \" \") : \"\", \"desde el segundo \").concat(textOptions.startTime, \" hasta el segundo \").concat(textOptions.endTime, \"]\");\n                elementAdded = true;\n            } else if (element.type === \"image\") {\n                // Configurar opciones para la imagen\n                const imageOptions = {\n                    startTime: typeof element.startTime === \"number\" ? element.startTime : 0,\n                    endTime: typeof element.endTime === \"number\" ? element.endTime : typeof element.startTime === \"number\" ? element.startTime + 5 : 5,\n                    // Posición centrada por defecto\n                    position: {\n                        x: 0.5,\n                        y: 0.5\n                    }\n                };\n                // Registrar tiempos específicos para depuración\n                console.log(\"Tiempos de imagen recibidos de la API: startTime=\".concat(element.startTime, \", endTime=\").concat(element.endTime));\n                // Manejar casos especiales para \"al final\" del video\n                if (element.startTime === -1 || element.endTime === -1) {\n                    // Calcular la duración del video en segundos\n                    const videoDuration = (timeline === null || timeline === void 0 ? void 0 : timeline.duration) ? Math.floor(timeline.duration / 1000) : 30; // Valor predeterminado si no hay duración\n                    console.log(\"Duraci\\xf3n del video: \".concat(videoDuration, \"s\"));\n                    if (element.startTime === -1 && element.endTime === -1) {\n                        // Si ambos son -1, colocar en los últimos 5 segundos\n                        imageOptions.startTime = Math.max(0, videoDuration - 5);\n                        imageOptions.endTime = videoDuration;\n                        console.log('Ajustando para \"al final\": startTime='.concat(imageOptions.startTime, \", endTime=\").concat(imageOptions.endTime));\n                    } else if (element.startTime === -1) {\n                        // Solo startTime es -1\n                        imageOptions.startTime = Math.max(0, videoDuration - 5);\n                    } else if (element.endTime === -1) {\n                        // Solo endTime es -1\n                        imageOptions.endTime = videoDuration;\n                    }\n                }\n                console.log(\"Tiempos de imagen a aplicar: startTime=\".concat(imageOptions.startTime, \", endTime=\").concat(imageOptions.endTime));\n                // Determinar la URL de la imagen a usar\n                const isGenericUrl = element.url === \"imagen_adjunta_por_el_usuario.jpg\";\n                const isLocalImage = lastUploadedImageUrl && lastUploadedImageUrl.startsWith(\"data:\");\n                let imageUrl;\n                // PRIORIDAD 1: Usar la imagen que acaba de subirse en este mensaje específico\n                if (currentImageUrlForThisRequest) {\n                    imageUrl = currentImageUrlForThisRequest;\n                    console.log(\"Usando la imagen reci\\xe9n subida para esta solicitud espec\\xedfica\");\n                } else if (element.url && !isGenericUrl && !element.url.includes(\"/url_de_la_imagen\")) {\n                    imageUrl = element.url;\n                    console.log(\"Usando URL espec\\xedfica del elemento\");\n                } else if (isGenericUrl && lastUploadedImageUrl) {\n                    imageUrl = lastUploadedImageUrl;\n                    console.log(\"Usando la \\xfaltima imagen subida guardada\");\n                } else {\n                    // Si todo lo demás falla, usar una imagen de ejemplo\n                    imageUrl = \"https://ik.imagekit.io/wombo/images/img2.jpg\";\n                    console.log(\"Usando imagen de ejemplo como fallback\");\n                }\n                // Añadir la imagen\n                commandExecutor.current.addImage(imageUrl, imageOptions);\n                // Actualizar respuesta\n                finalResponse += \"\\n\\n[He agregado la imagen desde el segundo \".concat(imageOptions.startTime, \" hasta el segundo \").concat(imageOptions.endTime, \"]\");\n                elementAdded = true;\n            } else if (element.type === \"video\") {\n                // Configurar opciones para el video\n                const videoOptions = {\n                    startTime: typeof element.startTime === \"number\" ? element.startTime : 0,\n                    endTime: typeof element.endTime === \"number\" ? element.endTime : typeof element.startTime === \"number\" ? element.startTime + 10 : 10\n                };\n                // URL de video de ejemplo (en producción esto sería dinámico)\n                const videoUrl = \"https://cdn.designcombo.dev/videos/demo-video-4.mp4\";\n                // Añadir el video\n                commandExecutor.current.addVideo(videoUrl, videoOptions);\n                // Actualizar respuesta\n                finalResponse += \"\\n\\n[He agregado el video desde el segundo \".concat(videoOptions.startTime, \" hasta el segundo \").concat(videoOptions.endTime, \"]\");\n                elementAdded = true;\n            } else if (element.type === \"subtitles\") {\n                // Configurar opciones para los subtítulos\n                const subtitleOptions = {\n                    groupWords: element.groupWords !== undefined ? element.groupWords : true\n                };\n                // Añadir tiempos si se especificaron\n                if (typeof element.startTime === \"number\") {\n                    subtitleOptions.startTime = element.startTime;\n                }\n                if (typeof element.endTime === \"number\") {\n                    subtitleOptions.endTime = element.endTime;\n                }\n                // Añadir los subtítulos\n                commandExecutor.current.addSubtitles(subtitleOptions);\n                // Actualizar respuesta silenciosa (se maneja en otro lado)\n                elementAdded = true;\n            } else if (element.type === \"segments\" && Array.isArray(element.segments) && element.segments.length > 0) {\n                // Configurar los segmentos a eliminar\n                const segments = element.segments.map((segment)=>({\n                        startTime: typeof segment.startTime === \"number\" ? segment.startTime : 0,\n                        endTime: typeof segment.endTime === \"number\" ? segment.endTime : typeof segment.startTime === \"number\" ? segment.startTime + 5 : 5\n                    }));\n                console.log(\"Eliminando \".concat(segments.length, \" segmentos:\"), segments);\n                // Ejemplo de formato de segmentos a mostrar\n                const segmentsFormatted = segments.map((s)=>\"\".concat(s.startTime, \"-\").concat(s.endTime, \"s\")).join(\", \");\n                try {\n                    // Ejecutar la eliminación de segmentos\n                    const result = await commandExecutor.current.removeSegments(segments);\n                    if (result) {\n                        finalResponse += \"\\n\\n[He eliminado los segmentos solicitados: \".concat(segmentsFormatted, \"]\");\n                    } else {\n                        finalResponse += \"\\n\\n[No pude eliminar los segmentos solicitados. Aseg\\xfarate de que hay un elemento seleccionado en la timeline.]\";\n                    }\n                    elementAdded = true;\n                } catch (error) {\n                    console.error(\"Error al eliminar segmentos:\", error);\n                    finalResponse += \"\\n\\n[Error al intentar eliminar los segmentos: \".concat(error.message || \"Error desconocido\", \"]\");\n                }\n            } else if (element.type === \"compact\") {\n                // Ejecutar la compactación del timeline\n                console.log(\"Compactando timeline por solicitud del usuario\");\n                try {\n                    // Iniciar la compactación\n                    const result = await commandExecutor.current.compactTimeline();\n                    if (result) {\n                        finalResponse += \"\\n\\n[He compactado el timeline eliminando los espacios vac\\xedos entre elementos]\";\n                    } else {\n                        finalResponse += \"\\n\\n[No fue posible compactar el timeline. Puede que no haya elementos o espacios vac\\xedos que compactar]\";\n                    }\n                    elementAdded = true;\n                } catch (error) {\n                    console.error(\"Error al compactar el timeline:\", error);\n                    finalResponse += \"\\n\\n[Error al intentar compactar el timeline: \".concat(error.message || \"Error desconocido\", \"]\");\n                }\n            } else if (element.type === \"smartTrim\") {\n                // Ejecutar el recorte inteligente\n                console.log(\"Iniciando recorte inteligente por solicitud del usuario\");\n                try {\n                    // Mostrar mensaje de análisis en curso\n                    finalResponse += \"\\n\\n[Analizando el video para identificar las partes a eliminar...]\";\n                    // Iniciar el recorte inteligente\n                    const result = await commandExecutor.current.smartTrim();\n                    if (result) {\n                        finalResponse += \"\\n\\n[He realizado un recorte inteligente del video, eliminando las partes innecesarias y compactando el timeline]\";\n                    } else {\n                        finalResponse += \"\\n\\n[No fue posible realizar el recorte inteligente. Verifica que el video tenga una transcripci\\xf3n]\";\n                    }\n                    elementAdded = true;\n                } catch (error) {\n                    console.error(\"Error al realizar el recorte inteligente:\", error);\n                    finalResponse += \"\\n\\n[Error al intentar realizar el recorte inteligente: \".concat(error.message || \"Error desconocido\", \"]\");\n                }\n            }\n        }\n    } catch (error) {\n        console.error(\"Error al procesar elemento detectado:\", error);\n        finalResponse += \"\\n\\n[No pude procesar la solicitud debido a un error.]\";\n    }\n    return {\n        finalResponse,\n        elementAdded\n    };\n};\nfunction AIChat() {\n    _s();\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([\n        {\n            id: \"1\",\n            content: \"Hola, soy tu asistente de edici\\xf3n de video. \\xbfEn qu\\xe9 puedo ayudarte?\",\n            role: \"assistant\",\n            timestamp: new Date()\n        }\n    ]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [imageFile, setImageFile] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [imagePreview, setImagePreview] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [isUploading, setIsUploading] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [showResetConfirm, setShowResetConfirm] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    // Almacenar la última imagen subida para poder reutilizarla\n    const [lastUploadedImageUrl, setLastUploadedImageUrl] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    // Referencia al state manager para manipular el editor\n    const stateManager = (0,_features_editor_hooks_state_manager__WEBPACK_IMPORTED_MODULE_7__.useStateManager)();\n    const { timeline, scenes, playerRef } = (0,_features_editor_store_use_data_state__WEBPACK_IMPORTED_MODULE_6__[\"default\"])();\n    const commandExecutor = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)((0,_ai_video_commands__WEBPACK_IMPORTED_MODULE_8__.createVideoCommandExecutor)(stateManager));\n    // Función para reiniciar el chat\n    const resetChat = ()=>{\n        if (showResetConfirm) {\n            setMessages([\n                {\n                    id: Date.now().toString(),\n                    content: \"Hola, soy tu asistente de edici\\xf3n de video. \\xbfEn qu\\xe9 puedo ayudarte?\",\n                    role: \"assistant\",\n                    timestamp: new Date()\n                }\n            ]);\n            setInput(\"\");\n            setImageFile(null);\n            setImagePreview(null);\n            setShowResetConfirm(false);\n            setLastUploadedImageUrl(\"\");\n        } else {\n            // Mostrar confirmación\n            setShowResetConfirm(true);\n            // Ocultar automáticamente después de 3 segundos\n            setTimeout(()=>{\n                setShowResetConfirm(false);\n            }, 3000);\n        }\n    };\n    // Scroll al último mensaje\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    }, [\n        messages\n    ]);\n    // Actualizar el ejecutor de comandos cuando cambie el stateManager\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        commandExecutor.current = (0,_ai_video_commands__WEBPACK_IMPORTED_MODULE_8__.createVideoCommandExecutor)(stateManager);\n    }, [\n        stateManager\n    ]);\n    // Manejar click en el botón de imagen\n    const handleImageClick = ()=>{\n        var _fileInputRef_current;\n        (_fileInputRef_current = fileInputRef.current) === null || _fileInputRef_current === void 0 ? void 0 : _fileInputRef_current.click();\n    };\n    // Manejar selección de archivo de imagen\n    const handleFileChange = (e)=>{\n        var _e_target_files;\n        const file = (_e_target_files = e.target.files) === null || _e_target_files === void 0 ? void 0 : _e_target_files[0];\n        if (file) {\n            setImageFile(file);\n            const previewUrl = URL.createObjectURL(file);\n            setImagePreview(previewUrl);\n        }\n    };\n    // Eliminar la imagen seleccionada\n    const handleRemoveImage = ()=>{\n        setImageFile(null);\n        setImagePreview(null);\n        if (fileInputRef.current) fileInputRef.current.value = \"\";\n    };\n    // Subir imagen al servidor\n    const uploadImage = async (file)=>{\n        try {\n            setIsUploading(true);\n            // Obtener URL firmada para subir la imagen\n            const uploadDetails = await (0,_utils_upload__WEBPACK_IMPORTED_MODULE_9__.createUploadsDetails)(file.name, file);\n            // Si no es un mock local, proceder con la carga\n            if (uploadDetails.uploadUrl !== \"local-mock\") {\n                // Subir la imagen\n                await fetch(uploadDetails.uploadUrl, {\n                    method: \"PUT\",\n                    body: file,\n                    headers: {\n                        \"Content-Type\": file.type\n                    }\n                });\n            }\n            // No se necesita hacer fetch si es un mock local (dataURL)\n            // Retornar la URL pública de la imagen\n            return uploadDetails.url;\n        } catch (error) {\n            console.error(\"Error al subir la imagen:\", error);\n            throw new Error(\"No se pudo subir la imagen. Int\\xe9ntalo de nuevo.\");\n        } finally{\n            setIsUploading(false);\n        }\n    };\n    // Función para enviar mensaje\n    const handleSendMessage = async ()=>{\n        if (!input.trim() && !imageFile || isLoading) return;\n        let userMessage = {\n            id: Date.now().toString(),\n            content: input,\n            role: \"user\",\n            timestamp: new Date()\n        };\n        let uploadedImageUrl = \"\";\n        // Variable para rastrear la URL de la imagen actual para esta solicitud específica\n        let currentImageUrlForThisRequest = \"\";\n        // Si hay una imagen para subir, procesarla\n        if (imageFile) {\n            try {\n                uploadedImageUrl = await uploadImage(imageFile);\n                userMessage.imageUrl = uploadedImageUrl;\n                // Guardar la URL de la imagen para posibles referencias futuras\n                setLastUploadedImageUrl(uploadedImageUrl);\n                // Importante: Guardar la URL actual para esta solicitud específica\n                currentImageUrlForThisRequest = uploadedImageUrl;\n                console.log(\"Imagen subida exitosamente:\", uploadedImageUrl.substring(0, 100) + \"...\");\n            } catch (error) {\n                console.error(\"Error en la subida de imagen:\", error);\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            id: (Date.now() + 1).toString(),\n                            content: \"Error al subir la imagen. Por favor, int\\xe9ntalo de nuevo. Detalles: \" + (error instanceof Error ? error.message : \"Error desconocido\"),\n                            role: \"assistant\",\n                            timestamp: new Date()\n                        }\n                    ]);\n                setIsLoading(false);\n                return;\n            }\n        }\n        // Añadir mensaje del usuario\n        setMessages((prev)=>[\n                ...prev,\n                userMessage\n            ]);\n        setInput(\"\");\n        setImageFile(null);\n        setImagePreview(null);\n        if (fileInputRef.current) fileInputRef.current.value = \"\";\n        setIsLoading(true);\n        try {\n            var _playerRef_current, _timeline_canvas_getObjects, _timeline_canvas, _timeline_canvas_getObjects1, _timeline_canvas1;\n            // Enviar a la API para procesamiento en lenguaje natural\n            const apiMessages = messages.concat(userMessage).map((msg)=>{\n                // Si el mensaje tiene una imagen, crear un formato especial para el contenido\n                if (msg.imageUrl) {\n                    // Si es una URL de datos (comienza con data:), usar un marcador especial\n                    const isDataUrl = msg.imageUrl.startsWith(\"data:\");\n                    const imageUrlToSend = isDataUrl ? \"[IMAGEN_ADJUNTA]\" : \"[IMAGEN: \".concat(msg.imageUrl, \"]\");\n                    return {\n                        role: msg.role,\n                        content: \"\".concat(msg.content || \"\", \" \").concat(imageUrlToSend)\n                    };\n                }\n                return {\n                    role: msg.role,\n                    content: msg.content\n                };\n            });\n            // Añadir contexto del editor para la IA externa\n            const contextMessage = {\n                role: \"system\",\n                content: \"\\nContexto actual del editor de video:\\n- Posici\\xf3n actual (segundos): \".concat((playerRef === null || playerRef === void 0 ? void 0 : (_playerRef_current = playerRef.current) === null || _playerRef_current === void 0 ? void 0 : _playerRef_current.getCurrentTime) ? Math.floor((playerRef.current.getCurrentTime() || 0) * 100) / 100 : 0, \"\\n- Duraci\\xf3n del proyecto (segundos): \").concat((timeline === null || timeline === void 0 ? void 0 : timeline.duration) ? Math.floor(timeline.duration / 1000) : 0, \"\\n- N\\xfamero de escenas: \").concat((scenes === null || scenes === void 0 ? void 0 : scenes.length) || 0, \"\\n- N\\xfamero de elementos en el timeline: \").concat(((timeline === null || timeline === void 0 ? void 0 : (_timeline_canvas = timeline.canvas) === null || _timeline_canvas === void 0 ? void 0 : (_timeline_canvas_getObjects = _timeline_canvas.getObjects) === null || _timeline_canvas_getObjects === void 0 ? void 0 : _timeline_canvas_getObjects.call(_timeline_canvas)) || []).length - 1 > 0 ? ((timeline === null || timeline === void 0 ? void 0 : (_timeline_canvas1 = timeline.canvas) === null || _timeline_canvas1 === void 0 ? void 0 : (_timeline_canvas_getObjects1 = _timeline_canvas1.getObjects) === null || _timeline_canvas_getObjects1 === void 0 ? void 0 : _timeline_canvas_getObjects1.call(_timeline_canvas1)) || []).length - 1 : 0, \"\\n\").concat(lastUploadedImageUrl ? \"- \\xdaltima imagen compartida por el usuario disponible para usar\" : \"\", '\\n\\nEl usuario puede expresar en lenguaje natural la necesidad de agregar elementos al video.\\nEjemplos:\\n- \"Pon un t\\xedtulo que diga \\'Bienvenidos\\' al inicio\"\\n- \"Quiero un texto blanco que diga \\'Fin\\' al final del video\"\\n- \"Necesito una imagen en el segundo 10\"\\n- \"Coloca un video de introducci\\xf3n al principio\"\\n\\nSi el usuario adjunta una imagen en el mensaje, la URL estar\\xe1 en formato [IMAGEN: url_de_la_imagen].\\nDebes detectar si quiere agregar esta imagen al video y en qu\\xe9 momento temporal.\\n')\n            };\n            try {\n                var _data_message;\n                const response = await fetch(\"/api/ai\", {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        messages: [\n                            contextMessage,\n                            ...apiMessages\n                        ],\n                        // Usar la URL de la imagen actual para esta solicitud si existe,\n                        // de lo contrario usar la última URL guardada\n                        lastImageUrl: currentImageUrlForThisRequest || lastUploadedImageUrl || \"\"\n                    }),\n                    // Agregar timeout para evitar esperas infinitas\n                    signal: AbortSignal.timeout(15000) // 15 segundos máximo\n                });\n                if (!response.ok) {\n                    throw new Error(\"Error de API: \".concat(response.status, \" \").concat(response.statusText));\n                }\n                const data = await response.json();\n                // Asegurarse de que data.message.content existe\n                const aiResponse = (data === null || data === void 0 ? void 0 : (_data_message = data.message) === null || _data_message === void 0 ? void 0 : _data_message.content) || \"Lo siento, no pude entender tu solicitud.\";\n                // Obtener los datos del elemento si existen (con verificación segura)\n                const elementData = data === null || data === void 0 ? void 0 : data.elementData;\n                // Variable para la respuesta final\n                let finalResponse = aiResponse;\n                // Crear una referencia a la respuesta final para que sea accesible en la función procesadora\n                const finalResponseRef = {\n                    current: finalResponse\n                };\n                let elementAdded = false;\n                // Usar la función de procesamiento de elementos\n                const processResult = await processDetectedElement(elementData, commandExecutor, finalResponseRef, timeline, lastUploadedImageUrl, currentImageUrlForThisRequest);\n                finalResponse = processResult.finalResponse;\n                elementAdded = processResult.elementAdded;\n                const assistantMessage = {\n                    id: (Date.now() + 1).toString(),\n                    content: finalResponse,\n                    role: \"assistant\",\n                    timestamp: new Date()\n                };\n                setMessages((prev)=>[\n                        ...prev,\n                        assistantMessage\n                    ]);\n            } catch (apiError) {\n                console.error(\"Error en la comunicaci\\xf3n con la API:\", apiError);\n                // Mensaje de error específico de API\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            id: (Date.now() + 1).toString(),\n                            content: \"Lo siento, ha ocurrido un error al comunicarse con el servicio de IA. Por favor, intenta de nuevo en unos momentos.\",\n                            role: \"assistant\",\n                            timestamp: new Date()\n                        }\n                    ]);\n            }\n        } catch (error) {\n            console.error(\"Error al procesar el mensaje:\", error);\n            // Determinar mensaje de error apropiado\n            let errorMessage = \"Lo siento, ha ocurrido un error al procesar tu mensaje.\";\n            if (error instanceof Error) {\n                if (error.message.includes(\"timeout\") || error.message.includes(\"abort\")) {\n                    errorMessage = \"La solicitud ha tardado demasiado. Prueba con un mensaje m\\xe1s corto.\";\n                } else if (error.message.includes(\"network\") || error.message.includes(\"fetch\")) {\n                    errorMessage = \"Parece que hay un problema de conexi\\xf3n. Verifica tu conexi\\xf3n a internet e intenta de nuevo.\";\n                }\n            }\n            // Mensaje de error\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        id: (Date.now() + 1).toString(),\n                        content: errorMessage,\n                        role: \"assistant\",\n                        timestamp: new Date()\n                    }\n                ]);\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"jsx-bd4f647ea310f19c\" + \" \" + \"flex h-full flex-col border-r border-border/80 bg-sidebar\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"jsx-bd4f647ea310f19c\" + \" \" + \"bg-[#1a1625] border-b border-purple-900/30 p-3 flex justify-between items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"jsx-bd4f647ea310f19c\" + \" \" + \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"jsx-bd4f647ea310f19c\" + \" \" + \"h-8 w-8 rounded-full flex items-center justify-center bg-gradient-to-br from-purple-600 to-indigo-700 text-white shadow-md\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_HelpCircle_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                                    className: \"h-4 w-4\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 653,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 652,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"jsx-bd4f647ea310f19c\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                        className: \"jsx-bd4f647ea310f19c\" + \" \" + \"font-medium text-purple-50\",\n                                        children: \"Asistente Wands\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                        lineNumber: 656,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"jsx-bd4f647ea310f19c\" + \" \" + \"text-xs text-purple-300/70\",\n                                        children: \"Edici\\xf3n inteligente\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                        lineNumber: 657,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 655,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 651,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"jsx-bd4f647ea310f19c\" + \" \" + \"flex gap-1\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                            variant: \"ghost\",\n                            size: \"icon\",\n                            className: \"relative h-7 w-7 rounded-full \".concat(showResetConfirm ? \"bg-red-800/60 text-white\" : \"hover:bg-purple-800/40 text-purple-300\"),\n                            onClick: resetChat,\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_HelpCircle_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                                    className: \"h-3.5 w-3.5 \".concat(showResetConfirm ? \"animate-spin\" : \"\")\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 667,\n                                    columnNumber: 13\n                                }, this),\n                                showResetConfirm && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"jsx-bd4f647ea310f19c\" + \" \" + \"absolute -bottom-8 right-0 text-[10px] bg-red-900/90 text-white px-2 py-0.5 rounded whitespace-nowrap shadow-lg\",\n                                    children: \"\\xbfConfirmar?\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 669,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 661,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 660,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 650,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"jsx-bd4f647ea310f19c\" + \" \" + \"flex-1 overflow-hidden bg-gradient-to-b from-[#1a1625] to-[#211a2c]\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_5__.ScrollArea, {\n                    className: \"h-full custom-scrollbar\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"jsx-bd4f647ea310f19c\" + \" \" + \"flex flex-col gap-4 p-4\",\n                        children: [\n                            messages.map((message)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"jsx-bd4f647ea310f19c\" + \" \" + \"flex flex-col \".concat(message.role === \"assistant\" ? \"items-start\" : \"items-end\"),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"jsx-bd4f647ea310f19c\" + \" \" + \"max-w-[85%] rounded-lg px-4 py-2.5 shadow-sm \".concat(message.role === \"assistant\" ? \"bg-[#2a1f35] text-purple-50 border border-purple-900/30\" : \"bg-gradient-to-r from-purple-600 to-indigo-700 text-white\"),\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"jsx-bd4f647ea310f19c\" + \" \" + \"whitespace-pre-wrap\",\n                                                    children: message.content\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                    lineNumber: 695,\n                                                    columnNumber: 19\n                                                }, this),\n                                                message.imageUrl && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"jsx-bd4f647ea310f19c\" + \" \" + \"mt-2\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                        src: message.imageUrl,\n                                                        alt: \"Imagen adjunta\",\n                                                        style: {\n                                                            maxWidth: \"100%\"\n                                                        },\n                                                        className: \"jsx-bd4f647ea310f19c\" + \" \" + \"max-h-48 max-w-full rounded-md object-contain\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                        lineNumber: 698,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                    lineNumber: 697,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                            lineNumber: 688,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"jsx-bd4f647ea310f19c\" + \" \" + \"mt-1 px-1 text-xs text-purple-400/70\",\n                                            children: message.timestamp.toLocaleTimeString([], {\n                                                hour: \"2-digit\",\n                                                minute: \"2-digit\"\n                                            })\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                            lineNumber: 707,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, message.id, true, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 682,\n                                    columnNumber: 15\n                                }, this)),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                ref: messagesEndRef,\n                                className: \"jsx-bd4f647ea310f19c\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 715,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 680,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                    lineNumber: 679,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 678,\n                columnNumber: 7\n            }, this),\n            imagePreview && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"jsx-bd4f647ea310f19c\" + \" \" + \"relative mx-4 mt-1 mb-2 h-24 rounded-md bg-[#2a1f35] border border-purple-800/30 p-2 flex items-center justify-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                        variant: \"ghost\",\n                        size: \"icon\",\n                        className: \"absolute right-1 top-1 z-10 h-5 w-5 rounded-full bg-[#211a2c]/80 hover:bg-red-800/80 transition-colors\",\n                        onClick: handleRemoveImage,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_HelpCircle_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                            className: \"h-3 w-3 text-purple-200\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 729,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 723,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                        src: imagePreview,\n                        alt: \"Vista previa\",\n                        className: \"jsx-bd4f647ea310f19c\" + \" \" + \"max-h-full max-w-full rounded object-contain\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 731,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 722,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"jsx-bd4f647ea310f19c\" + \" \" + \"border-t border-purple-900/30 bg-[#1a1625] p-3\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"jsx-bd4f647ea310f19c\" + \" \" + \"flex flex-col gap-2\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"jsx-bd4f647ea310f19c\" + \" \" + \"flex gap-1 px-1 mb-1 overflow-x-auto hide-scrollbar\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                    variant: \"ghost\",\n                                    size: \"sm\",\n                                    className: \"flex-shrink-0 h-7 text-xs rounded-full bg-[#2a1f35]/70 hover:bg-purple-800/40 text-purple-300 px-3\",\n                                    onClick: ()=>setInput(\"A\\xf1ade un t\\xedtulo que diga 'Bienvenidos'\"),\n                                    children: \"A\\xf1adir t\\xedtulo\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 744,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                    variant: \"ghost\",\n                                    size: \"sm\",\n                                    className: \"flex-shrink-0 h-7 text-xs rounded-full bg-[#2a1f35]/70 hover:bg-purple-800/40 text-purple-300 px-3\",\n                                    onClick: ()=>setInput(\"Pon m\\xfasica de fondo\"),\n                                    children: \"M\\xfasica\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 752,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                    variant: \"ghost\",\n                                    size: \"sm\",\n                                    className: \"flex-shrink-0 h-7 text-xs rounded-full bg-[#2a1f35]/70 hover:bg-purple-800/40 text-purple-300 px-3\",\n                                    onClick: ()=>setInput(\"A\\xf1ade un efecto de transici\\xf3n\"),\n                                    children: \"Transiciones\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 760,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 743,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"jsx-bd4f647ea310f19c\" + \" \" + \"flex items-center gap-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"jsx-bd4f647ea310f19c\" + \" \" + \"flex bg-[#2a1f35] rounded-l-full rounded-r-full border border-purple-900/30 flex-1 overflow-hidden\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                            variant: \"ghost\",\n                                            size: \"icon\",\n                                            className: \"rounded-l-full h-10 w-10 bg-transparent hover:bg-purple-800/30\",\n                                            onClick: handleImageClick,\n                                            disabled: isLoading,\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_HelpCircle_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                                className: \"h-5 w-5 text-purple-300\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                lineNumber: 780,\n                                                columnNumber: 17\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                            lineNumber: 773,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_input__WEBPACK_IMPORTED_MODULE_4__.Input, {\n                                            value: input,\n                                            onChange: (e)=>setInput(e.target.value),\n                                            onKeyDown: (e)=>{\n                                                if (e.key === \"Enter\" && !e.shiftKey) {\n                                                    e.preventDefault();\n                                                    handleSendMessage();\n                                                }\n                                            },\n                                            placeholder: \"Escribe tu mensaje...\",\n                                            disabled: isLoading,\n                                            className: \"flex-1 border-0 bg-transparent h-10 focus:ring-0 focus-visible:ring-0 text-purple-50 placeholder:text-purple-400/70\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                            lineNumber: 783,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                            onClick: handleSendMessage,\n                                            disabled: !input.trim() && !imageFile || isLoading,\n                                            className: \"rounded-r-full h-10 bg-transparent hover:bg-purple-800/30 text-purple-300 hover:text-white transition-colors\",\n                                            children: isLoading || isUploading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_HelpCircle_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                                                className: \"h-5 w-5 animate-spin\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                lineNumber: 803,\n                                                columnNumber: 19\n                                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_HelpCircle_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                                                className: \"h-4 w-4\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                lineNumber: 805,\n                                                columnNumber: 19\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                            lineNumber: 797,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 772,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                    variant: \"ghost\",\n                                    className: \"h-10 w-10 rounded-full bg-gradient-to-r from-purple-600 to-indigo-700 hover:from-purple-700 hover:to-indigo-800 text-white\",\n                                    onClick: ()=>{\n                                        // Mensaje de tip\n                                        setMessages((prev)=>[\n                                                ...prev,\n                                                {\n                                                    id: Date.now().toString(),\n                                                    content: \"\\uD83D\\uDCA1 Tip: Puedes pedirme que a\\xf1ada textos, im\\xe1genes o efectos a tu video. Prueba diciendo 'A\\xf1ade un texto que diga Hola al inicio'.\",\n                                                    role: \"assistant\",\n                                                    timestamp: new Date()\n                                                }\n                                            ]);\n                                    },\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_HelpCircle_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n                                        className: \"h-5 w-5\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                        lineNumber: 823,\n                                        columnNumber: 15\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 810,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 771,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                    lineNumber: 741,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 740,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                type: \"file\",\n                ref: fileInputRef,\n                onChange: handleFileChange,\n                accept: \"image/*\",\n                disabled: isLoading,\n                className: \"jsx-bd4f647ea310f19c\" + \" \" + \"hidden\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 829,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default()), {\n                id: \"bd4f647ea310f19c\",\n                children: \".custom-scrollbar::-webkit-scrollbar{width:6px}.custom-scrollbar::-webkit-scrollbar-track{background:rgba(90,60,140,.1);-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.custom-scrollbar::-webkit-scrollbar-thumb{background:rgba(138,75,255,.3);-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.custom-scrollbar::-webkit-scrollbar-thumb:hover{background:rgba(138,75,255,.5)}.hide-scrollbar::-webkit-scrollbar{display:none}.hide-scrollbar{-ms-overflow-style:none;scrollbar-width:none}\"\n            }, void 0, false, void 0, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n        lineNumber: 648,\n        columnNumber: 5\n    }, this);\n}\n_s(AIChat, \"+hPGLkrzAnuYvuRKZuB6VEUUkTw=\", false, function() {\n    return [\n        _features_editor_hooks_state_manager__WEBPACK_IMPORTED_MODULE_7__.useStateManager,\n        _features_editor_store_use_data_state__WEBPACK_IMPORTED_MODULE_6__[\"default\"]\n    ];\n});\n_c = AIChat;\nvar _c;\n$RefreshReg$(_c, \"AIChat\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvYWktY2hhdC9pbmRleC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFb0Q7QUFDSjtBQUNGO0FBQ1c7QUFDbUM7QUFDMUI7QUFDTTtBQUNlO0FBQ2pDO0FBRXRELGtGQUFrRjtBQUNsRixTQUFTaUIsNkJBQTZCQyxjQUFzQjtJQUMxRCxJQUFJQyxZQUFZO0lBQ2hCLElBQUlDLFVBQVU7SUFFZCxJQUFJLENBQUNGLGdCQUFnQixPQUFPO1FBQUVDO1FBQVdDO0lBQVE7SUFFakQsdUNBQXVDO0lBQ3ZDLE1BQU1DLG9CQUFvQjtRQUN4QjtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7S0FDRDtJQUVELHFDQUFxQztJQUNyQyxNQUFNQyxrQkFBa0I7UUFDdEI7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNEO0lBRUQsbUNBQW1DO0lBQ25DLE1BQU1DLFlBQVksNENBQTRDQyxJQUFJLENBQUNOO0lBQ25FLE1BQU1PLFVBQVUsdUNBQXVDRCxJQUFJLENBQUNOO0lBRTVELHNDQUFzQztJQUN0QyxLQUFLLE1BQU1RLFdBQVdMLGtCQUFtQjtRQUN2QyxNQUFNTSxRQUFRVCxlQUFlUyxLQUFLLENBQUNEO1FBQ25DLElBQUlDLFNBQVNBLEtBQUssQ0FBQyxFQUFFLEVBQUU7WUFDckIsbURBQW1EO1lBQ25EUixZQUFZTyxRQUFRRSxRQUFRLEdBQUdDLFFBQVEsQ0FBQyxZQUNwQ0MsU0FBU0gsS0FBSyxDQUFDLEVBQUUsSUFBSSxLQUNyQkcsU0FBU0gsS0FBSyxDQUFDLEVBQUU7WUFDckI7UUFDRjtJQUNGO0lBRUEsb0NBQW9DO0lBQ3BDLEtBQUssTUFBTUQsV0FBV0osZ0JBQWlCO1FBQ3JDLE1BQU1LLFFBQVFULGVBQWVTLEtBQUssQ0FBQ0Q7UUFDbkMsSUFBSUMsU0FBU0EsS0FBSyxDQUFDLEVBQUUsRUFBRTtZ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QTtnREFBQ3VLLFdBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7OzhDQUt0Qiw4REFBQzFLLHlEQUFNQTtvQ0FDTDZLLFNBQVE7b0NBQ1JILFdBQVU7b0NBQ1ZLLFNBQVM7d0NBQ1AsaUJBQWlCO3dDQUNqQnZGLFlBQVlzRCxDQUFBQSxPQUFRO21EQUFJQTtnREFBTTtvREFDNUJyRCxJQUFJRyxLQUFLb0IsR0FBRyxHQUFHdkYsUUFBUTtvREFDdkJpQixTQUFTO29EQUNUZ0QsTUFBTTtvREFDTkMsV0FBVyxJQUFJQztnREFDakI7NkNBQUU7b0NBQ0o7OENBRUEsNEVBQUNuRixtSUFBVUE7d0NBQUNpSyxXQUFVOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBCQU05Qiw4REFBQzdFO2dCQUNDcEQsTUFBSztnQkFDTGdKLEtBQUsvRTtnQkFDTGlGLFVBQVVyRTtnQkFDVjJFLFFBQU87Z0JBRVBQLFVBQVUzRjswREFEQTs7Ozs7Ozs7Ozs7Ozs7OztBQW1DbEI7R0FwaEJ3QlQ7O1FBcUJEM0UsaUZBQWVBO1FBQ0lELDZFQUFZQTs7O0tBdEI5QjRFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvYWktY2hhdC9pbmRleC50c3g/NGI5NyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2J1dHRvblwiO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2lucHV0XCI7XG5pbXBvcnQgeyBTY3JvbGxBcmVhIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9zY3JvbGwtYXJlYVwiO1xuaW1wb3J0IHsgU2VuZCwgTG9hZGVyMiwgSW1hZ2VJY29uLCBYLCBTcGFya2xlcywgUmVmcmVzaEN3LCBIZWxwQ2lyY2xlIH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuaW1wb3J0IHVzZURhdGFTdGF0ZSBmcm9tIFwiQC9mZWF0dXJlcy9lZGl0b3Ivc3RvcmUvdXNlLWRhdGEtc3RhdGVcIjtcbmltcG9ydCB7IHVzZVN0YXRlTWFuYWdlciB9IGZyb20gXCJAL2ZlYXR1cmVzL2VkaXRvci9ob29rcy9zdGF0ZS1tYW5hZ2VyXCI7XG5pbXBvcnQgeyBjcmVhdGVWaWRlb0NvbW1hbmRFeGVjdXRvciwgVmlkZW9Db21tYW5kRXhlY3V0b3IgfSBmcm9tIFwiLi9haS12aWRlby1jb21tYW5kc1wiO1xuaW1wb3J0IHsgY3JlYXRlVXBsb2Fkc0RldGFpbHMgfSBmcm9tIFwiQC91dGlscy91cGxvYWRcIjtcblxuLy8gRnVuY2nDs24gcGFyYSBleHRyYWVyIHRpZW1wb3MgZGUgaW5pY2lvIHkgZmluIGRlIHVuYSBpbWFnZW4gYSBwYXJ0aXIgZGVsIG1lbnNhamVcbmZ1bmN0aW9uIGV4dHJhY3RJbWFnZVRpbWVzRnJvbU1lc3NhZ2UobWVzc2FnZUNvbnRlbnQ6IHN0cmluZyk6IHsgc3RhcnRUaW1lOiBudW1iZXIsIGVuZFRpbWU6IG51bWJlciB9IHtcbiAgbGV0IHN0YXJ0VGltZSA9IDA7XG4gIGxldCBlbmRUaW1lID0gNTtcblxuICBpZiAoIW1lc3NhZ2VDb250ZW50KSByZXR1cm4geyBzdGFydFRpbWUsIGVuZFRpbWUgfTtcblxuICAvLyBCdXNjYXIgcmVmZXJlbmNpYXMgYWwgdGllbXBvIGluaWNpYWxcbiAgY29uc3Qgc3RhcnRUaW1lUGF0dGVybnMgPSBbXG4gICAgL2VuIGVsIHNlZ3VuZG8gKFxcZCspL2ksXG4gICAgL2Rlc2RlIGVsIHNlZ3VuZG8gKFxcZCspL2ksXG4gICAgL2EgcGFydGlyIGRlbCBzZWd1bmRvIChcXGQrKS9pLFxuICAgIC9jb21lbnphbmRvIGVuIGVsIHNlZ3VuZG8gKFxcZCspL2ksXG4gICAgL2Rlc2RlIGVsIG1pbnV0byAoXFxkKykvaSwgLy8gQ29udmVydGlyIG1pbnV0b3MgYSBzZWd1bmRvc1xuICAgIC9lbiBlbCBtaW51dG8gKFxcZCspL2ksICAgIC8vIENvbnZlcnRpciBtaW51dG9zIGEgc2VndW5kb3NcbiAgICAvZW50cmUgbG9zIHNlZ3VuZG9zIChcXGQrKSB5L2ksIC8vIENhcHR1cmEgZWwgcHJpbWVyIG7Dum1lcm8gZW4gXCJlbnRyZSBYIHkgWVwiXG4gICAgL2RlbCBzZWd1bmRvIChcXGQrKSBhbC9pLFxuICAgIC9lbXBlemFuZG8gZW4gKFxcZCspL2ksXG4gICAgL3NlZ3VuZG8gKFxcZCspL2ksICAgICAvLyBQYXRyw7NuIG3DoXMgZ2VuZXJhbCBwYXJhIGNhcHR1cmFyIFwic2VndW5kbyBYXCJcbiAgICAvZW4gKFxcZCspIHNlZ3VuZG9zL2ksIC8vIFwiZW4gWCBzZWd1bmRvc1wiXG4gICAgL2VuIGVsIChcXGQrKS9pLCAgICAgICAvLyBcImVuIGVsIFhcIiAoY3VhbmRvIHNlIHJlZmllcmUgYSBzZWd1bmRvcylcbiAgXTtcblxuICAvLyBCdXNjYXIgcmVmZXJlbmNpYXMgYWwgdGllbXBvIGZpbmFsXG4gIGNvbnN0IGVuZFRpbWVQYXR0ZXJucyA9IFtcbiAgICAvaGFzdGEgZWwgc2VndW5kbyAoXFxkKykvaSxcbiAgICAvYWwgc2VndW5kbyAoXFxkKykvaSxcbiAgICAvdGVybWluYW5kbyBlbiBlbCBzZWd1bmRvIChcXGQrKS9pLFxuICAgIC9oYXN0YSBlbCBtaW51dG8gKFxcZCspL2ksIC8vIENvbnZlcnRpciBtaW51dG9zIGEgc2VndW5kb3NcbiAgICAvZW50cmUgbG9zIHNlZ3VuZG9zIFxcZCsgeSAoXFxkKykvaSwgLy8gQ2FwdHVyYSBlbCBzZWd1bmRvIG7Dum1lcm8gZW4gXCJlbnRyZSBYIHkgWVwiXG4gICAgL2RlbCBzZWd1bmRvIFxcZCsgYWwgKFxcZCspL2ksXG4gICAgL3BvciAoXFxkKykgc2VndW5kb3MvaSwgLy8gRHVyYWNpw7NuIHJlbGF0aXZhXG4gICAgL2R1cmFudGUgKFxcZCspIHNlZ3VuZG9zL2ksIC8vIER1cmFjacOzbiByZWxhdGl2YVxuICBdO1xuXG4gIC8vIEJ1c2NhciBwYWxhYnJhcyBjbGF2ZSBlc3BlY2lhbGVzXG4gIGNvbnN0IGlzQXRTdGFydCA9IC9cXGIoYWwgaW5pY2lvfGFsIHByaW5jaXBpb3xhbCBjb21pZW56bylcXGIvaS50ZXN0KG1lc3NhZ2VDb250ZW50KTtcbiAgY29uc3QgaXNBdEVuZCA9IC9cXGIoYWwgZmluYWx8YWwgdMOpcm1pbm98YWwgYWNhYmFyKVxcYi9pLnRlc3QobWVzc2FnZUNvbnRlbnQpO1xuXG4gIC8vIFByb2Nlc2FyIHBhdHJvbmVzIGRlIHRpZW1wbyBpbmljaWFsXG4gIGZvciAoY29uc3QgcGF0dGVybiBvZiBzdGFydFRpbWVQYXR0ZXJucykge1xuICAgIGNvbnN0IG1hdGNoID0gbWVzc2FnZUNvbnRlbnQubWF0Y2gocGF0dGVybik7XG4gICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XG4gICAgICAvLyBTaSBlcyByZWZlcmVuY2lhIGEgbWludXRvcywgY29udmVydGlyIGEgc2VndW5kb3NcbiAgICAgIHN0YXJ0VGltZSA9IHBhdHRlcm4udG9TdHJpbmcoKS5pbmNsdWRlcygnbWludXRvJylcbiAgICAgICAgPyBwYXJzZUludChtYXRjaFsxXSkgKiA2MFxuICAgICAgICA6IHBhcnNlSW50KG1hdGNoWzFdKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vIFByb2Nlc2FyIHBhdHJvbmVzIGRlIHRpZW1wbyBmaW5hbFxuICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgZW5kVGltZVBhdHRlcm5zKSB7XG4gICAgY29uc3QgbWF0Y2ggPSBtZXNzYWdlQ29udGVudC5tYXRjaChwYXR0ZXJuKTtcbiAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgIGlmIChwYXR0ZXJuLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ3BvcicpIHx8IHBhdHRlcm4udG9TdHJpbmcoKS5pbmNsdWRlcygnZHVyYW50ZScpKSB7XG4gICAgICAgIC8vIEVzIHVuYSBkdXJhY2nDs24gcmVsYXRpdmEsIHN1bWFyIGFsIHRpZW1wbyBpbmljaWFsXG4gICAgICAgIGVuZFRpbWUgPSBzdGFydFRpbWUgKyBwYXJzZUludChtYXRjaFsxXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBFcyB1biB0aWVtcG8gYWJzb2x1dG9cbiAgICAgICAgZW5kVGltZSA9IHBhdHRlcm4udG9TdHJpbmcoKS5pbmNsdWRlcygnbWludXRvJylcbiAgICAgICAgICA/IHBhcnNlSW50KG1hdGNoWzFdKSAqIDYwXG4gICAgICAgICAgOiBwYXJzZUludChtYXRjaFsxXSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvLyBTaSBzZSBtZW5jaW9uYSBcImFsIGluaWNpb1wiLCBlc3RhYmxlY2VyIHRpZW1wbyBhIDBcbiAgaWYgKGlzQXRTdGFydCkge1xuICAgIHN0YXJ0VGltZSA9IDA7XG4gICAgZW5kVGltZSA9IDU7IC8vIFBvciBkZWZlY3RvIDUgc2VndW5kb3MgZGUgZHVyYWNpw7NuXG4gIH1cblxuICAvLyBTaSBzZSBtZW5jaW9uYSBcImFsIGZpbmFsXCIsIGVzdGFibGVjZXIgdmFsb3JlcyByZWxhdGl2b3MgYWwgZmluYWxcbiAgLy8gTm90YTogRWwgdmFsb3IgcmVhbCBzZSBhanVzdGFyw6EgZW4gZWwgY2xpZW50ZSBzZWfDum4gbGEgZHVyYWNpw7NuXG4gIGlmIChpc0F0RW5kKSB7XG4gICAgc3RhcnRUaW1lID0gLTE7IC8vIEPDs2RpZ28gZXNwZWNpYWwgcGFyYSBcImZpbmFsIC0gNSBzZWd1bmRvc1wiXG4gICAgZW5kVGltZSA9IC0xOyAgIC8vIEPDs2RpZ28gZXNwZWNpYWwgcGFyYSBcImZpbmFsXCJcbiAgfVxuXG4gIC8vIFNpIG5vIHNlIGRldGVjdMOzIHRpZW1wbyBmaW5hbCBwZXJvIHPDrSBpbmljaWFsLCBlc3RhYmxlY2VyIHVuYSBkdXJhY2nDs24gcHJlZGV0ZXJtaW5hZGFcbiAgaWYgKHN0YXJ0VGltZSA+IDAgJiYgZW5kVGltZSA9PT0gNSAmJiBzdGFydFRpbWUgIT09IDApIHtcbiAgICBlbmRUaW1lID0gc3RhcnRUaW1lICsgNTtcbiAgfVxuXG4gIHJldHVybiB7IHN0YXJ0VGltZSwgZW5kVGltZSB9O1xufVxuXG4vLyBUaXBvIHBhcmEgbG9zIG1lbnNhamVzXG50eXBlIE1lc3NhZ2UgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgcm9sZTogXCJhc3Npc3RhbnRcIiB8IFwidXNlclwiO1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIGltYWdlVXJsPzogc3RyaW5nOyAvLyBOdWV2YSBwcm9waWVkYWQgcGFyYSBVUkxzIGRlIGltYWdlblxufTtcblxuLy8gRnVuY2nDs24gcGFyYSBwcm9jZXNhciBlbGVtZW50b3MgZGV0ZWN0YWRvcyBwb3IgbGEgSUFcbmNvbnN0IHByb2Nlc3NEZXRlY3RlZEVsZW1lbnQgPSBhc3luYyAoZWxlbWVudERhdGEsIGNvbW1hbmRFeGVjdXRvciwgZmluYWxSZXNwb25zZVJlZiwgdGltZWxpbmUsIGxhc3RVcGxvYWRlZEltYWdlVXJsLCBjdXJyZW50SW1hZ2VVcmxGb3JUaGlzUmVxdWVzdCkgPT4ge1xuICBsZXQgZWxlbWVudEFkZGVkID0gZmFsc2U7XG4gIGxldCBmaW5hbFJlc3BvbnNlID0gZmluYWxSZXNwb25zZVJlZi5jdXJyZW50O1xuXG4gIHRyeSB7XG4gICAgLy8gU2kgc2UgZGV0ZWN0w7MgdW4gZWxlbWVudG8gcGFyYSBhZ3JlZ2FyIGNvbiBjb25maWFuemEgc3VmaWNpZW50ZVxuICAgIGlmIChlbGVtZW50RGF0YSAmJlxuICAgICAgICBlbGVtZW50RGF0YS5kZXRlY3RlZCA9PT0gdHJ1ZSAmJlxuICAgICAgICB0eXBlb2YgZWxlbWVudERhdGEuY29uZmlkZW5jZSA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgZWxlbWVudERhdGEuY29uZmlkZW5jZSA+IDAuNyAmJlxuICAgICAgICBlbGVtZW50RGF0YS5lbGVtZW50KSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudERhdGEuZWxlbWVudDtcblxuICAgICAgLy8gUHJvY2VzYXIgc2Vnw7puIGVsIHRpcG8gZGUgZWxlbWVudG9cbiAgICAgIGlmIChlbGVtZW50LnR5cGUgPT09IFwidGV4dFwiICYmIGVsZW1lbnQuY29udGVudCkge1xuICAgICAgICAvLyBDb25maWd1cmFyIG9wY2lvbmVzIHBhcmEgZWwgdGV4dG9cbiAgICAgICAgY29uc3QgdGV4dE9wdGlvbnM6IGFueSA9IHtcbiAgICAgICAgICBzdGFydFRpbWU6IHR5cGVvZiBlbGVtZW50LnN0YXJ0VGltZSA9PT0gJ251bWJlcicgPyBlbGVtZW50LnN0YXJ0VGltZSA6IDAsXG4gICAgICAgICAgZW5kVGltZTogdHlwZW9mIGVsZW1lbnQuZW5kVGltZSA9PT0gJ251bWJlcicgPyBlbGVtZW50LmVuZFRpbWUgOiAodHlwZW9mIGVsZW1lbnQuc3RhcnRUaW1lID09PSAnbnVtYmVyJyA/IGVsZW1lbnQuc3RhcnRUaW1lICsgNSA6IDUpLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEFzaWduYXIgY29sb3Igc2kgZXN0w6EgZGlzcG9uaWJsZVxuICAgICAgICBpZiAoZWxlbWVudC5jb2xvcikge1xuICAgICAgICAgIHRleHRPcHRpb25zLmNvbG9yID0gZWxlbWVudC5jb2xvci50b0xvd2VyQ2FzZSgpID09PSBcImJsYW5jb1wiID8gXCIjRkZGRkZGXCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY29sb3IudG9Mb3dlckNhc2UoKSA9PT0gXCJuZWdyb1wiID8gXCIjMDAwMDAwXCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY29sb3IudG9Mb3dlckNhc2UoKSA9PT0gXCJyb2pvXCIgPyBcIiNGRjAwMDBcIiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jb2xvci50b0xvd2VyQ2FzZSgpID09PSBcImF6dWxcIiA/IFwiIzAwMDBGRlwiIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNvbG9yLnRvTG93ZXJDYXNlKCkgPT09IFwidmVyZGVcIiA/IFwiIzAwRkYwMFwiIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNvbG9yLnRvTG93ZXJDYXNlKCkgPT09IFwiYW1hcmlsbG9cIiA/IFwiI0ZGRkYwMFwiIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNvbG9yO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQcOxYWRpciBlbCB0ZXh0b1xuICAgICAgICBjb21tYW5kRXhlY3V0b3IuY3VycmVudC5hZGRUZXh0KGVsZW1lbnQuY29udGVudCwgdGV4dE9wdGlvbnMpO1xuXG4gICAgICAgIC8vIEFjdHVhbGl6YXIgcmVzcHVlc3RhXG4gICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltIZSBhZ3JlZ2FkbyBlbCB0ZXh0byBcIiR7ZWxlbWVudC5jb250ZW50fVwiICR7ZWxlbWVudC5jb2xvciA/IGBjb24gY29sb3IgJHtlbGVtZW50LmNvbG9yfSBgIDogXCJcIn1kZXNkZSBlbCBzZWd1bmRvICR7dGV4dE9wdGlvbnMuc3RhcnRUaW1lfSBoYXN0YSBlbCBzZWd1bmRvICR7dGV4dE9wdGlvbnMuZW5kVGltZX1dYDtcbiAgICAgICAgZWxlbWVudEFkZGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVsZW1lbnQudHlwZSA9PT0gXCJpbWFnZVwiKSB7XG4gICAgICAgIC8vIENvbmZpZ3VyYXIgb3BjaW9uZXMgcGFyYSBsYSBpbWFnZW5cbiAgICAgICAgY29uc3QgaW1hZ2VPcHRpb25zOiBhbnkgPSB7XG4gICAgICAgICAgc3RhcnRUaW1lOiB0eXBlb2YgZWxlbWVudC5zdGFydFRpbWUgPT09ICdudW1iZXInID8gZWxlbWVudC5zdGFydFRpbWUgOiAwLFxuICAgICAgICAgIGVuZFRpbWU6IHR5cGVvZiBlbGVtZW50LmVuZFRpbWUgPT09ICdudW1iZXInID8gZWxlbWVudC5lbmRUaW1lIDogKHR5cGVvZiBlbGVtZW50LnN0YXJ0VGltZSA9PT0gJ251bWJlcicgPyBlbGVtZW50LnN0YXJ0VGltZSArIDUgOiA1KSxcbiAgICAgICAgICAvLyBQb3NpY2nDs24gY2VudHJhZGEgcG9yIGRlZmVjdG9cbiAgICAgICAgICBwb3NpdGlvbjogeyB4OiAwLjUsIHk6IDAuNSB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gUmVnaXN0cmFyIHRpZW1wb3MgZXNwZWPDrWZpY29zIHBhcmEgZGVwdXJhY2nDs25cbiAgICAgICAgY29uc29sZS5sb2coYFRpZW1wb3MgZGUgaW1hZ2VuIHJlY2liaWRvcyBkZSBsYSBBUEk6IHN0YXJ0VGltZT0ke2VsZW1lbnQuc3RhcnRUaW1lfSwgZW5kVGltZT0ke2VsZW1lbnQuZW5kVGltZX1gKTtcblxuICAgICAgICAvLyBNYW5lamFyIGNhc29zIGVzcGVjaWFsZXMgcGFyYSBcImFsIGZpbmFsXCIgZGVsIHZpZGVvXG4gICAgICAgIGlmIChlbGVtZW50LnN0YXJ0VGltZSA9PT0gLTEgfHwgZWxlbWVudC5lbmRUaW1lID09PSAtMSkge1xuICAgICAgICAgIC8vIENhbGN1bGFyIGxhIGR1cmFjacOzbiBkZWwgdmlkZW8gZW4gc2VndW5kb3NcbiAgICAgICAgICBjb25zdCB2aWRlb0R1cmF0aW9uID0gdGltZWxpbmU/LmR1cmF0aW9uXG4gICAgICAgICAgICA/IE1hdGguZmxvb3IodGltZWxpbmUuZHVyYXRpb24gLyAxMDAwKVxuICAgICAgICAgICAgOiAzMDsgLy8gVmFsb3IgcHJlZGV0ZXJtaW5hZG8gc2kgbm8gaGF5IGR1cmFjacOzblxuXG4gICAgICAgICAgY29uc29sZS5sb2coYER1cmFjacOzbiBkZWwgdmlkZW86ICR7dmlkZW9EdXJhdGlvbn1zYCk7XG5cbiAgICAgICAgICBpZiAoZWxlbWVudC5zdGFydFRpbWUgPT09IC0xICYmIGVsZW1lbnQuZW5kVGltZSA9PT0gLTEpIHtcbiAgICAgICAgICAgIC8vIFNpIGFtYm9zIHNvbiAtMSwgY29sb2NhciBlbiBsb3Mgw7psdGltb3MgNSBzZWd1bmRvc1xuICAgICAgICAgICAgaW1hZ2VPcHRpb25zLnN0YXJ0VGltZSA9IE1hdGgubWF4KDAsIHZpZGVvRHVyYXRpb24gLSA1KTtcbiAgICAgICAgICAgIGltYWdlT3B0aW9ucy5lbmRUaW1lID0gdmlkZW9EdXJhdGlvbjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBBanVzdGFuZG8gcGFyYSBcImFsIGZpbmFsXCI6IHN0YXJ0VGltZT0ke2ltYWdlT3B0aW9ucy5zdGFydFRpbWV9LCBlbmRUaW1lPSR7aW1hZ2VPcHRpb25zLmVuZFRpbWV9YCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LnN0YXJ0VGltZSA9PT0gLTEpIHtcbiAgICAgICAgICAgIC8vIFNvbG8gc3RhcnRUaW1lIGVzIC0xXG4gICAgICAgICAgICBpbWFnZU9wdGlvbnMuc3RhcnRUaW1lID0gTWF0aC5tYXgoMCwgdmlkZW9EdXJhdGlvbiAtIDUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5lbmRUaW1lID09PSAtMSkge1xuICAgICAgICAgICAgLy8gU29sbyBlbmRUaW1lIGVzIC0xXG4gICAgICAgICAgICBpbWFnZU9wdGlvbnMuZW5kVGltZSA9IHZpZGVvRHVyYXRpb247XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coYFRpZW1wb3MgZGUgaW1hZ2VuIGEgYXBsaWNhcjogc3RhcnRUaW1lPSR7aW1hZ2VPcHRpb25zLnN0YXJ0VGltZX0sIGVuZFRpbWU9JHtpbWFnZU9wdGlvbnMuZW5kVGltZX1gKTtcblxuICAgICAgICAvLyBEZXRlcm1pbmFyIGxhIFVSTCBkZSBsYSBpbWFnZW4gYSB1c2FyXG4gICAgICAgIGNvbnN0IGlzR2VuZXJpY1VybCA9IGVsZW1lbnQudXJsID09PSAnaW1hZ2VuX2FkanVudGFfcG9yX2VsX3VzdWFyaW8uanBnJztcbiAgICAgICAgY29uc3QgaXNMb2NhbEltYWdlID0gbGFzdFVwbG9hZGVkSW1hZ2VVcmwgJiYgbGFzdFVwbG9hZGVkSW1hZ2VVcmwuc3RhcnRzV2l0aCgnZGF0YTonKTtcblxuICAgICAgICBsZXQgaW1hZ2VVcmw6IHN0cmluZztcblxuICAgICAgICAvLyBQUklPUklEQUQgMTogVXNhciBsYSBpbWFnZW4gcXVlIGFjYWJhIGRlIHN1Ymlyc2UgZW4gZXN0ZSBtZW5zYWplIGVzcGVjw61maWNvXG4gICAgICAgIGlmIChjdXJyZW50SW1hZ2VVcmxGb3JUaGlzUmVxdWVzdCkge1xuICAgICAgICAgIGltYWdlVXJsID0gY3VycmVudEltYWdlVXJsRm9yVGhpc1JlcXVlc3Q7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJVc2FuZG8gbGEgaW1hZ2VuIHJlY2nDqW4gc3ViaWRhIHBhcmEgZXN0YSBzb2xpY2l0dWQgZXNwZWPDrWZpY2FcIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUFJJT1JJREFEIDI6IFVzYXIgbGEgVVJMIGRlbCBlbGVtZW50byBzaSB0aWVuZSB1bmEgZXNwZWPDrWZpY2EgeSBOTyBlcyBsYSBVUkwgZ2Vuw6lyaWNhXG4gICAgICAgIGVsc2UgaWYgKGVsZW1lbnQudXJsICYmICFpc0dlbmVyaWNVcmwgJiYgIWVsZW1lbnQudXJsLmluY2x1ZGVzKCcvdXJsX2RlX2xhX2ltYWdlbicpKSB7XG4gICAgICAgICAgaW1hZ2VVcmwgPSBlbGVtZW50LnVybDtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzYW5kbyBVUkwgZXNwZWPDrWZpY2EgZGVsIGVsZW1lbnRvXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBSSU9SSURBRCAzOiBVc2FyIGxhIMO6bHRpbWEgaW1hZ2VuIHN1YmlkYSBndWFyZGFkYSBzaSBoYXkgcmVmZXJlbmNpYSBhIGltYWdlbiBnZW7DqXJpY2FcbiAgICAgICAgZWxzZSBpZiAoaXNHZW5lcmljVXJsICYmIGxhc3RVcGxvYWRlZEltYWdlVXJsKSB7XG4gICAgICAgICAgaW1hZ2VVcmwgPSBsYXN0VXBsb2FkZWRJbWFnZVVybDtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzYW5kbyBsYSDDumx0aW1hIGltYWdlbiBzdWJpZGEgZ3VhcmRhZGFcIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUFJJT1JJREFEIDQ6IEZhbGxiYWNrIGEgVVJMIGdlbsOpcmljYVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAvLyBTaSB0b2RvIGxvIGRlbcOhcyBmYWxsYSwgdXNhciB1bmEgaW1hZ2VuIGRlIGVqZW1wbG9cbiAgICAgICAgICBpbWFnZVVybCA9IFwiaHR0cHM6Ly9pay5pbWFnZWtpdC5pby93b21iby9pbWFnZXMvaW1nMi5qcGdcIjtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzYW5kbyBpbWFnZW4gZGUgZWplbXBsbyBjb21vIGZhbGxiYWNrXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQcOxYWRpciBsYSBpbWFnZW5cbiAgICAgICAgY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQuYWRkSW1hZ2UoaW1hZ2VVcmwsIGltYWdlT3B0aW9ucyk7XG5cbiAgICAgICAgLy8gQWN0dWFsaXphciByZXNwdWVzdGFcbiAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW0hlIGFncmVnYWRvIGxhIGltYWdlbiBkZXNkZSBlbCBzZWd1bmRvICR7aW1hZ2VPcHRpb25zLnN0YXJ0VGltZX0gaGFzdGEgZWwgc2VndW5kbyAke2ltYWdlT3B0aW9ucy5lbmRUaW1lfV1gO1xuICAgICAgICBlbGVtZW50QWRkZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZWxlbWVudC50eXBlID09PSBcInZpZGVvXCIpIHtcbiAgICAgICAgLy8gQ29uZmlndXJhciBvcGNpb25lcyBwYXJhIGVsIHZpZGVvXG4gICAgICAgIGNvbnN0IHZpZGVvT3B0aW9uczogYW55ID0ge1xuICAgICAgICAgIHN0YXJ0VGltZTogdHlwZW9mIGVsZW1lbnQuc3RhcnRUaW1lID09PSAnbnVtYmVyJyA/IGVsZW1lbnQuc3RhcnRUaW1lIDogMCxcbiAgICAgICAgICBlbmRUaW1lOiB0eXBlb2YgZWxlbWVudC5lbmRUaW1lID09PSAnbnVtYmVyJyA/IGVsZW1lbnQuZW5kVGltZSA6ICh0eXBlb2YgZWxlbWVudC5zdGFydFRpbWUgPT09ICdudW1iZXInID8gZWxlbWVudC5zdGFydFRpbWUgKyAxMCA6IDEwKSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBVUkwgZGUgdmlkZW8gZGUgZWplbXBsbyAoZW4gcHJvZHVjY2nDs24gZXN0byBzZXLDrWEgZGluw6FtaWNvKVxuICAgICAgICBjb25zdCB2aWRlb1VybCA9IFwiaHR0cHM6Ly9jZG4uZGVzaWduY29tYm8uZGV2L3ZpZGVvcy9kZW1vLXZpZGVvLTQubXA0XCI7XG5cbiAgICAgICAgLy8gQcOxYWRpciBlbCB2aWRlb1xuICAgICAgICBjb21tYW5kRXhlY3V0b3IuY3VycmVudC5hZGRWaWRlbyh2aWRlb1VybCwgdmlkZW9PcHRpb25zKTtcblxuICAgICAgICAvLyBBY3R1YWxpemFyIHJlc3B1ZXN0YVxuICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bSGUgYWdyZWdhZG8gZWwgdmlkZW8gZGVzZGUgZWwgc2VndW5kbyAke3ZpZGVvT3B0aW9ucy5zdGFydFRpbWV9IGhhc3RhIGVsIHNlZ3VuZG8gJHt2aWRlb09wdGlvbnMuZW5kVGltZX1dYDtcbiAgICAgICAgZWxlbWVudEFkZGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVsZW1lbnQudHlwZSA9PT0gXCJzdWJ0aXRsZXNcIikge1xuICAgICAgICAvLyBDb25maWd1cmFyIG9wY2lvbmVzIHBhcmEgbG9zIHN1YnTDrXR1bG9zXG4gICAgICAgIGNvbnN0IHN1YnRpdGxlT3B0aW9uczogYW55ID0ge1xuICAgICAgICAgIGdyb3VwV29yZHM6IGVsZW1lbnQuZ3JvdXBXb3JkcyAhPT0gdW5kZWZpbmVkID8gZWxlbWVudC5ncm91cFdvcmRzIDogdHJ1ZSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBBw7FhZGlyIHRpZW1wb3Mgc2kgc2UgZXNwZWNpZmljYXJvblxuICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQuc3RhcnRUaW1lID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHN1YnRpdGxlT3B0aW9ucy5zdGFydFRpbWUgPSBlbGVtZW50LnN0YXJ0VGltZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQuZW5kVGltZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBzdWJ0aXRsZU9wdGlvbnMuZW5kVGltZSA9IGVsZW1lbnQuZW5kVGltZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEHDsWFkaXIgbG9zIHN1YnTDrXR1bG9zXG4gICAgICAgIGNvbW1hbmRFeGVjdXRvci5jdXJyZW50LmFkZFN1YnRpdGxlcyhzdWJ0aXRsZU9wdGlvbnMpO1xuXG4gICAgICAgIC8vIEFjdHVhbGl6YXIgcmVzcHVlc3RhIHNpbGVuY2lvc2EgKHNlIG1hbmVqYSBlbiBvdHJvIGxhZG8pXG4gICAgICAgIGVsZW1lbnRBZGRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlbGVtZW50LnR5cGUgPT09IFwic2VnbWVudHNcIiAmJiBBcnJheS5pc0FycmF5KGVsZW1lbnQuc2VnbWVudHMpICYmIGVsZW1lbnQuc2VnbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBDb25maWd1cmFyIGxvcyBzZWdtZW50b3MgYSBlbGltaW5hclxuICAgICAgICBjb25zdCBzZWdtZW50cyA9IGVsZW1lbnQuc2VnbWVudHMubWFwKHNlZ21lbnQgPT4gKHtcbiAgICAgICAgICBzdGFydFRpbWU6IHR5cGVvZiBzZWdtZW50LnN0YXJ0VGltZSA9PT0gJ251bWJlcicgPyBzZWdtZW50LnN0YXJ0VGltZSA6IDAsXG4gICAgICAgICAgZW5kVGltZTogdHlwZW9mIHNlZ21lbnQuZW5kVGltZSA9PT0gJ251bWJlcicgPyBzZWdtZW50LmVuZFRpbWUgOiAodHlwZW9mIHNlZ21lbnQuc3RhcnRUaW1lID09PSAnbnVtYmVyJyA/IHNlZ21lbnQuc3RhcnRUaW1lICsgNSA6IDUpLFxuICAgICAgICB9KSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coYEVsaW1pbmFuZG8gJHtzZWdtZW50cy5sZW5ndGh9IHNlZ21lbnRvczpgLCBzZWdtZW50cyk7XG5cbiAgICAgICAgLy8gRWplbXBsbyBkZSBmb3JtYXRvIGRlIHNlZ21lbnRvcyBhIG1vc3RyYXJcbiAgICAgICAgY29uc3Qgc2VnbWVudHNGb3JtYXR0ZWQgPSBzZWdtZW50cy5tYXAocyA9PiBgJHtzLnN0YXJ0VGltZX0tJHtzLmVuZFRpbWV9c2ApLmpvaW4oJywgJyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBFamVjdXRhciBsYSBlbGltaW5hY2nDs24gZGUgc2VnbWVudG9zXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQucmVtb3ZlU2VnbWVudHMoc2VnbWVudHMpO1xuXG4gICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW0hlIGVsaW1pbmFkbyBsb3Mgc2VnbWVudG9zIHNvbGljaXRhZG9zOiAke3NlZ21lbnRzRm9ybWF0dGVkfV1gO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bTm8gcHVkZSBlbGltaW5hciBsb3Mgc2VnbWVudG9zIHNvbGljaXRhZG9zLiBBc2Vnw7pyYXRlIGRlIHF1ZSBoYXkgdW4gZWxlbWVudG8gc2VsZWNjaW9uYWRvIGVuIGxhIHRpbWVsaW5lLl1gO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbGVtZW50QWRkZWQgPSB0cnVlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBlbGltaW5hciBzZWdtZW50b3M6XCIsIGVycm9yKTtcbiAgICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bRXJyb3IgYWwgaW50ZW50YXIgZWxpbWluYXIgbG9zIHNlZ21lbnRvczogJHtlcnJvci5tZXNzYWdlIHx8IFwiRXJyb3IgZGVzY29ub2NpZG9cIn1dYDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZWxlbWVudC50eXBlID09PSBcImNvbXBhY3RcIikge1xuICAgICAgICAvLyBFamVjdXRhciBsYSBjb21wYWN0YWNpw7NuIGRlbCB0aW1lbGluZVxuICAgICAgICBjb25zb2xlLmxvZyhcIkNvbXBhY3RhbmRvIHRpbWVsaW5lIHBvciBzb2xpY2l0dWQgZGVsIHVzdWFyaW9cIik7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBJbmljaWFyIGxhIGNvbXBhY3RhY2nDs25cbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb21tYW5kRXhlY3V0b3IuY3VycmVudC5jb21wYWN0VGltZWxpbmUoKTtcblxuICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltIZSBjb21wYWN0YWRvIGVsIHRpbWVsaW5lIGVsaW1pbmFuZG8gbG9zIGVzcGFjaW9zIHZhY8Otb3MgZW50cmUgZWxlbWVudG9zXWA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltObyBmdWUgcG9zaWJsZSBjb21wYWN0YXIgZWwgdGltZWxpbmUuIFB1ZWRlIHF1ZSBubyBoYXlhIGVsZW1lbnRvcyBvIGVzcGFjaW9zIHZhY8Otb3MgcXVlIGNvbXBhY3Rhcl1gO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbGVtZW50QWRkZWQgPSB0cnVlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjb21wYWN0YXIgZWwgdGltZWxpbmU6XCIsIGVycm9yKTtcbiAgICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bRXJyb3IgYWwgaW50ZW50YXIgY29tcGFjdGFyIGVsIHRpbWVsaW5lOiAke2Vycm9yLm1lc3NhZ2UgfHwgXCJFcnJvciBkZXNjb25vY2lkb1wifV1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlbGVtZW50LnR5cGUgPT09IFwic21hcnRUcmltXCIpIHtcbiAgICAgICAgLy8gRWplY3V0YXIgZWwgcmVjb3J0ZSBpbnRlbGlnZW50ZVxuICAgICAgICBjb25zb2xlLmxvZyhcIkluaWNpYW5kbyByZWNvcnRlIGludGVsaWdlbnRlIHBvciBzb2xpY2l0dWQgZGVsIHVzdWFyaW9cIik7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBNb3N0cmFyIG1lbnNhamUgZGUgYW7DoWxpc2lzIGVuIGN1cnNvXG4gICAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW0FuYWxpemFuZG8gZWwgdmlkZW8gcGFyYSBpZGVudGlmaWNhciBsYXMgcGFydGVzIGEgZWxpbWluYXIuLi5dYDtcblxuICAgICAgICAgIC8vIEluaWNpYXIgZWwgcmVjb3J0ZSBpbnRlbGlnZW50ZVxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbW1hbmRFeGVjdXRvci5jdXJyZW50LnNtYXJ0VHJpbSgpO1xuXG4gICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW0hlIHJlYWxpemFkbyB1biByZWNvcnRlIGludGVsaWdlbnRlIGRlbCB2aWRlbywgZWxpbWluYW5kbyBsYXMgcGFydGVzIGlubmVjZXNhcmlhcyB5IGNvbXBhY3RhbmRvIGVsIHRpbWVsaW5lXWA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltObyBmdWUgcG9zaWJsZSByZWFsaXphciBlbCByZWNvcnRlIGludGVsaWdlbnRlLiBWZXJpZmljYSBxdWUgZWwgdmlkZW8gdGVuZ2EgdW5hIHRyYW5zY3JpcGNpw7NuXWA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsZW1lbnRBZGRlZCA9IHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIHJlYWxpemFyIGVsIHJlY29ydGUgaW50ZWxpZ2VudGU6XCIsIGVycm9yKTtcbiAgICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bRXJyb3IgYWwgaW50ZW50YXIgcmVhbGl6YXIgZWwgcmVjb3J0ZSBpbnRlbGlnZW50ZTogJHtlcnJvci5tZXNzYWdlIHx8IFwiRXJyb3IgZGVzY29ub2NpZG9cIn1dYDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgcHJvY2VzYXIgZWxlbWVudG8gZGV0ZWN0YWRvOlwiLCBlcnJvcik7XG4gICAgZmluYWxSZXNwb25zZSArPSBcIlxcblxcbltObyBwdWRlIHByb2Nlc2FyIGxhIHNvbGljaXR1ZCBkZWJpZG8gYSB1biBlcnJvci5dXCI7XG4gIH1cblxuICByZXR1cm4geyBmaW5hbFJlc3BvbnNlLCBlbGVtZW50QWRkZWQgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFJQ2hhdCgpIHtcbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZTxNZXNzYWdlW10+KFtcbiAgICB7XG4gICAgICBpZDogXCIxXCIsXG4gICAgICBjb250ZW50OiBcIkhvbGEsIHNveSB0dSBhc2lzdGVudGUgZGUgZWRpY2nDs24gZGUgdmlkZW8uIMK/RW4gcXXDqSBwdWVkbyBheXVkYXJ0ZT9cIixcbiAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgfSxcbiAgXSk7XG4gIGNvbnN0IFtpbnB1dCwgc2V0SW5wdXRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpbWFnZUZpbGUsIHNldEltYWdlRmlsZV0gPSB1c2VTdGF0ZTxGaWxlIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpbWFnZVByZXZpZXcsIHNldEltYWdlUHJldmlld10gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzVXBsb2FkaW5nLCBzZXRJc1VwbG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93UmVzZXRDb25maXJtLCBzZXRTaG93UmVzZXRDb25maXJtXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgLy8gQWxtYWNlbmFyIGxhIMO6bHRpbWEgaW1hZ2VuIHN1YmlkYSBwYXJhIHBvZGVyIHJldXRpbGl6YXJsYVxuICBjb25zdCBbbGFzdFVwbG9hZGVkSW1hZ2VVcmwsIHNldExhc3RVcGxvYWRlZEltYWdlVXJsXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XG4gIGNvbnN0IGZpbGVJbnB1dFJlZiA9IHVzZVJlZjxIVE1MSW5wdXRFbGVtZW50PihudWxsKTtcbiAgY29uc3QgbWVzc2FnZXNFbmRSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuXG4gIC8vIFJlZmVyZW5jaWEgYWwgc3RhdGUgbWFuYWdlciBwYXJhIG1hbmlwdWxhciBlbCBlZGl0b3JcbiAgY29uc3Qgc3RhdGVNYW5hZ2VyID0gdXNlU3RhdGVNYW5hZ2VyKCk7XG4gIGNvbnN0IHsgdGltZWxpbmUsIHNjZW5lcywgcGxheWVyUmVmIH0gPSB1c2VEYXRhU3RhdGUoKTtcbiAgY29uc3QgY29tbWFuZEV4ZWN1dG9yID0gdXNlUmVmPFZpZGVvQ29tbWFuZEV4ZWN1dG9yPihjcmVhdGVWaWRlb0NvbW1hbmRFeGVjdXRvcihzdGF0ZU1hbmFnZXIpKTtcblxuICAvLyBGdW5jacOzbiBwYXJhIHJlaW5pY2lhciBlbCBjaGF0XG4gIGNvbnN0IHJlc2V0Q2hhdCA9ICgpID0+IHtcbiAgICBpZiAoc2hvd1Jlc2V0Q29uZmlybSkge1xuICAgICAgc2V0TWVzc2FnZXMoW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgICBjb250ZW50OiBcIkhvbGEsIHNveSB0dSBhc2lzdGVudGUgZGUgZWRpY2nDs24gZGUgdmlkZW8uIMK/RW4gcXXDqSBwdWVkbyBheXVkYXJ0ZT9cIixcbiAgICAgICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgfSxcbiAgICAgIF0pO1xuICAgICAgc2V0SW5wdXQoXCJcIik7XG4gICAgICBzZXRJbWFnZUZpbGUobnVsbCk7XG4gICAgICBzZXRJbWFnZVByZXZpZXcobnVsbCk7XG4gICAgICBzZXRTaG93UmVzZXRDb25maXJtKGZhbHNlKTtcbiAgICAgIHNldExhc3RVcGxvYWRlZEltYWdlVXJsKFwiXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBNb3N0cmFyIGNvbmZpcm1hY2nDs25cbiAgICAgIHNldFNob3dSZXNldENvbmZpcm0odHJ1ZSk7XG5cbiAgICAgIC8vIE9jdWx0YXIgYXV0b23DoXRpY2FtZW50ZSBkZXNwdcOpcyBkZSAzIHNlZ3VuZG9zXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgc2V0U2hvd1Jlc2V0Q29uZmlybShmYWxzZSk7XG4gICAgICB9LCAzMDAwKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gU2Nyb2xsIGFsIMO6bHRpbW8gbWVuc2FqZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIG1lc3NhZ2VzRW5kUmVmLmN1cnJlbnQ/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6IFwic21vb3RoXCIgfSk7XG4gIH0sIFttZXNzYWdlc10pO1xuXG4gIC8vIEFjdHVhbGl6YXIgZWwgZWplY3V0b3IgZGUgY29tYW5kb3MgY3VhbmRvIGNhbWJpZSBlbCBzdGF0ZU1hbmFnZXJcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb21tYW5kRXhlY3V0b3IuY3VycmVudCA9IGNyZWF0ZVZpZGVvQ29tbWFuZEV4ZWN1dG9yKHN0YXRlTWFuYWdlcik7XG4gIH0sIFtzdGF0ZU1hbmFnZXJdKTtcblxuICAvLyBNYW5lamFyIGNsaWNrIGVuIGVsIGJvdMOzbiBkZSBpbWFnZW5cbiAgY29uc3QgaGFuZGxlSW1hZ2VDbGljayA9ICgpID0+IHtcbiAgICBmaWxlSW5wdXRSZWYuY3VycmVudD8uY2xpY2soKTtcbiAgfTtcblxuICAvLyBNYW5lamFyIHNlbGVjY2nDs24gZGUgYXJjaGl2byBkZSBpbWFnZW5cbiAgY29uc3QgaGFuZGxlRmlsZUNoYW5nZSA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IGZpbGUgPSBlLnRhcmdldC5maWxlcz8uWzBdO1xuICAgIGlmIChmaWxlKSB7XG4gICAgICBzZXRJbWFnZUZpbGUoZmlsZSk7XG4gICAgICBjb25zdCBwcmV2aWV3VXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICAgIHNldEltYWdlUHJldmlldyhwcmV2aWV3VXJsKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gRWxpbWluYXIgbGEgaW1hZ2VuIHNlbGVjY2lvbmFkYVxuICBjb25zdCBoYW5kbGVSZW1vdmVJbWFnZSA9ICgpID0+IHtcbiAgICBzZXRJbWFnZUZpbGUobnVsbCk7XG4gICAgc2V0SW1hZ2VQcmV2aWV3KG51bGwpO1xuICAgIGlmIChmaWxlSW5wdXRSZWYuY3VycmVudCkgZmlsZUlucHV0UmVmLmN1cnJlbnQudmFsdWUgPSAnJztcbiAgfTtcblxuICAvLyBTdWJpciBpbWFnZW4gYWwgc2Vydmlkb3JcbiAgY29uc3QgdXBsb2FkSW1hZ2UgPSBhc3luYyAoZmlsZTogRmlsZSk6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHNldElzVXBsb2FkaW5nKHRydWUpO1xuICAgICAgLy8gT2J0ZW5lciBVUkwgZmlybWFkYSBwYXJhIHN1YmlyIGxhIGltYWdlblxuICAgICAgY29uc3QgdXBsb2FkRGV0YWlscyA9IGF3YWl0IGNyZWF0ZVVwbG9hZHNEZXRhaWxzKGZpbGUubmFtZSwgZmlsZSk7XG5cbiAgICAgIC8vIFNpIG5vIGVzIHVuIG1vY2sgbG9jYWwsIHByb2NlZGVyIGNvbiBsYSBjYXJnYVxuICAgICAgaWYgKHVwbG9hZERldGFpbHMudXBsb2FkVXJsICE9PSBcImxvY2FsLW1vY2tcIikge1xuICAgICAgICAvLyBTdWJpciBsYSBpbWFnZW5cbiAgICAgICAgYXdhaXQgZmV0Y2godXBsb2FkRGV0YWlscy51cGxvYWRVcmwsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgIGJvZHk6IGZpbGUsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IGZpbGUudHlwZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIE5vIHNlIG5lY2VzaXRhIGhhY2VyIGZldGNoIHNpIGVzIHVuIG1vY2sgbG9jYWwgKGRhdGFVUkwpXG5cbiAgICAgIC8vIFJldG9ybmFyIGxhIFVSTCBww7pibGljYSBkZSBsYSBpbWFnZW5cbiAgICAgIHJldHVybiB1cGxvYWREZXRhaWxzLnVybDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIHN1YmlyIGxhIGltYWdlbjpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gc2UgcHVkbyBzdWJpciBsYSBpbWFnZW4uIEludMOpbnRhbG8gZGUgbnVldm8uXCIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc1VwbG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEZ1bmNpw7NuIHBhcmEgZW52aWFyIG1lbnNhamVcbiAgY29uc3QgaGFuZGxlU2VuZE1lc3NhZ2UgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCghaW5wdXQudHJpbSgpICYmICFpbWFnZUZpbGUpIHx8IGlzTG9hZGluZykgcmV0dXJuO1xuXG4gICAgbGV0IHVzZXJNZXNzYWdlOiBNZXNzYWdlID0ge1xuICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgIGNvbnRlbnQ6IGlucHV0LFxuICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgfTtcblxuICAgIGxldCB1cGxvYWRlZEltYWdlVXJsID0gXCJcIjtcbiAgICAvLyBWYXJpYWJsZSBwYXJhIHJhc3RyZWFyIGxhIFVSTCBkZSBsYSBpbWFnZW4gYWN0dWFsIHBhcmEgZXN0YSBzb2xpY2l0dWQgZXNwZWPDrWZpY2FcbiAgICBsZXQgY3VycmVudEltYWdlVXJsRm9yVGhpc1JlcXVlc3QgPSBcIlwiO1xuXG4gICAgLy8gU2kgaGF5IHVuYSBpbWFnZW4gcGFyYSBzdWJpciwgcHJvY2VzYXJsYVxuICAgIGlmIChpbWFnZUZpbGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHVwbG9hZGVkSW1hZ2VVcmwgPSBhd2FpdCB1cGxvYWRJbWFnZShpbWFnZUZpbGUpO1xuICAgICAgICB1c2VyTWVzc2FnZS5pbWFnZVVybCA9IHVwbG9hZGVkSW1hZ2VVcmw7XG4gICAgICAgIC8vIEd1YXJkYXIgbGEgVVJMIGRlIGxhIGltYWdlbiBwYXJhIHBvc2libGVzIHJlZmVyZW5jaWFzIGZ1dHVyYXNcbiAgICAgICAgc2V0TGFzdFVwbG9hZGVkSW1hZ2VVcmwodXBsb2FkZWRJbWFnZVVybCk7XG4gICAgICAgIC8vIEltcG9ydGFudGU6IEd1YXJkYXIgbGEgVVJMIGFjdHVhbCBwYXJhIGVzdGEgc29saWNpdHVkIGVzcGVjw61maWNhXG4gICAgICAgIGN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0ID0gdXBsb2FkZWRJbWFnZVVybDtcbiAgICAgICAgY29uc29sZS5sb2coXCJJbWFnZW4gc3ViaWRhIGV4aXRvc2FtZW50ZTpcIiwgdXBsb2FkZWRJbWFnZVVybC5zdWJzdHJpbmcoMCwgMTAwKSArIFwiLi4uXCIpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIGxhIHN1YmlkYSBkZSBpbWFnZW46XCIsIGVycm9yKTtcbiAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAoRGF0ZS5ub3coKSArIDEpLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBjb250ZW50OiBcIkVycm9yIGFsIHN1YmlyIGxhIGltYWdlbi4gUG9yIGZhdm9yLCBpbnTDqW50YWxvIGRlIG51ZXZvLiBEZXRhbGxlczogXCIgK1xuICAgICAgICAgICAgICAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIkVycm9yIGRlc2Nvbm9jaWRvXCIpLFxuICAgICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICB9LFxuICAgICAgICBdKTtcbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEHDsWFkaXIgbWVuc2FqZSBkZWwgdXN1YXJpb1xuICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbLi4ucHJldiwgdXNlck1lc3NhZ2VdKTtcbiAgICBzZXRJbnB1dChcIlwiKTtcbiAgICBzZXRJbWFnZUZpbGUobnVsbCk7XG4gICAgc2V0SW1hZ2VQcmV2aWV3KG51bGwpO1xuICAgIGlmIChmaWxlSW5wdXRSZWYuY3VycmVudCkgZmlsZUlucHV0UmVmLmN1cnJlbnQudmFsdWUgPSAnJztcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gRW52aWFyIGEgbGEgQVBJIHBhcmEgcHJvY2VzYW1pZW50byBlbiBsZW5ndWFqZSBuYXR1cmFsXG4gICAgICBjb25zdCBhcGlNZXNzYWdlcyA9IG1lc3NhZ2VzXG4gICAgICAgIC5jb25jYXQodXNlck1lc3NhZ2UpXG4gICAgICAgIC5tYXAobXNnID0+IHtcbiAgICAgICAgICAvLyBTaSBlbCBtZW5zYWplIHRpZW5lIHVuYSBpbWFnZW4sIGNyZWFyIHVuIGZvcm1hdG8gZXNwZWNpYWwgcGFyYSBlbCBjb250ZW5pZG9cbiAgICAgICAgICBpZiAobXNnLmltYWdlVXJsKSB7XG4gICAgICAgICAgICAvLyBTaSBlcyB1bmEgVVJMIGRlIGRhdG9zIChjb21pZW56YSBjb24gZGF0YTopLCB1c2FyIHVuIG1hcmNhZG9yIGVzcGVjaWFsXG4gICAgICAgICAgICBjb25zdCBpc0RhdGFVcmwgPSBtc2cuaW1hZ2VVcmwuc3RhcnRzV2l0aCgnZGF0YTonKTtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlVXJsVG9TZW5kID0gaXNEYXRhVXJsXG4gICAgICAgICAgICAgID8gJ1tJTUFHRU5fQURKVU5UQV0nXG4gICAgICAgICAgICAgIDogYFtJTUFHRU46ICR7bXNnLmltYWdlVXJsfV1gO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICByb2xlOiBtc2cucm9sZSxcbiAgICAgICAgICAgICAgY29udGVudDogYCR7bXNnLmNvbnRlbnQgfHwgJyd9ICR7aW1hZ2VVcmxUb1NlbmR9YFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcm9sZTogbXNnLnJvbGUsXG4gICAgICAgICAgICBjb250ZW50OiBtc2cuY29udGVudFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAvLyBBw7FhZGlyIGNvbnRleHRvIGRlbCBlZGl0b3IgcGFyYSBsYSBJQSBleHRlcm5hXG4gICAgICBjb25zdCBjb250ZXh0TWVzc2FnZSA9IHtcbiAgICAgICAgcm9sZTogJ3N5c3RlbScsXG4gICAgICAgIGNvbnRlbnQ6IGBcbkNvbnRleHRvIGFjdHVhbCBkZWwgZWRpdG9yIGRlIHZpZGVvOlxuLSBQb3NpY2nDs24gYWN0dWFsIChzZWd1bmRvcyk6ICR7cGxheWVyUmVmPy5jdXJyZW50Py5nZXRDdXJyZW50VGltZSA/IE1hdGguZmxvb3IoKHBsYXllclJlZi5jdXJyZW50LmdldEN1cnJlbnRUaW1lKCkgfHwgMCkgKiAxMDApIC8gMTAwIDogMH1cbi0gRHVyYWNpw7NuIGRlbCBwcm95ZWN0byAoc2VndW5kb3MpOiAke3RpbWVsaW5lPy5kdXJhdGlvbiA/IE1hdGguZmxvb3IodGltZWxpbmUuZHVyYXRpb24gLyAxMDAwKSA6IDB9XG4tIE7Dum1lcm8gZGUgZXNjZW5hczogJHtzY2VuZXM/Lmxlbmd0aCB8fCAwfVxuLSBOw7ptZXJvIGRlIGVsZW1lbnRvcyBlbiBlbCB0aW1lbGluZTogJHsodGltZWxpbmU/LmNhbnZhcz8uZ2V0T2JqZWN0cz8uKCkgfHwgW10pLmxlbmd0aCAtIDEgPiAwID8gKHRpbWVsaW5lPy5jYW52YXM/LmdldE9iamVjdHM/LigpIHx8IFtdKS5sZW5ndGggLSAxIDogMH1cbiR7bGFzdFVwbG9hZGVkSW1hZ2VVcmwgPyBgLSDDmmx0aW1hIGltYWdlbiBjb21wYXJ0aWRhIHBvciBlbCB1c3VhcmlvIGRpc3BvbmlibGUgcGFyYSB1c2FyYCA6ICcnfVxuXG5FbCB1c3VhcmlvIHB1ZWRlIGV4cHJlc2FyIGVuIGxlbmd1YWplIG5hdHVyYWwgbGEgbmVjZXNpZGFkIGRlIGFncmVnYXIgZWxlbWVudG9zIGFsIHZpZGVvLlxuRWplbXBsb3M6XG4tIFwiUG9uIHVuIHTDrXR1bG8gcXVlIGRpZ2EgJ0JpZW52ZW5pZG9zJyBhbCBpbmljaW9cIlxuLSBcIlF1aWVybyB1biB0ZXh0byBibGFuY28gcXVlIGRpZ2EgJ0ZpbicgYWwgZmluYWwgZGVsIHZpZGVvXCJcbi0gXCJOZWNlc2l0byB1bmEgaW1hZ2VuIGVuIGVsIHNlZ3VuZG8gMTBcIlxuLSBcIkNvbG9jYSB1biB2aWRlbyBkZSBpbnRyb2R1Y2Npw7NuIGFsIHByaW5jaXBpb1wiXG5cblNpIGVsIHVzdWFyaW8gYWRqdW50YSB1bmEgaW1hZ2VuIGVuIGVsIG1lbnNhamUsIGxhIFVSTCBlc3RhcsOhIGVuIGZvcm1hdG8gW0lNQUdFTjogdXJsX2RlX2xhX2ltYWdlbl0uXG5EZWJlcyBkZXRlY3RhciBzaSBxdWllcmUgYWdyZWdhciBlc3RhIGltYWdlbiBhbCB2aWRlbyB5IGVuIHF1w6kgbW9tZW50byB0ZW1wb3JhbC5cbmBcbiAgICAgIH07XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvYWknLCB7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIG1lc3NhZ2VzOiBbY29udGV4dE1lc3NhZ2UsIC4uLmFwaU1lc3NhZ2VzXSxcbiAgICAgICAgICAgIC8vIFVzYXIgbGEgVVJMIGRlIGxhIGltYWdlbiBhY3R1YWwgcGFyYSBlc3RhIHNvbGljaXR1ZCBzaSBleGlzdGUsXG4gICAgICAgICAgICAvLyBkZSBsbyBjb250cmFyaW8gdXNhciBsYSDDumx0aW1hIFVSTCBndWFyZGFkYVxuICAgICAgICAgICAgbGFzdEltYWdlVXJsOiBjdXJyZW50SW1hZ2VVcmxGb3JUaGlzUmVxdWVzdCB8fCBsYXN0VXBsb2FkZWRJbWFnZVVybCB8fCBcIlwiXG4gICAgICAgICAgfSksXG4gICAgICAgICAgLy8gQWdyZWdhciB0aW1lb3V0IHBhcmEgZXZpdGFyIGVzcGVyYXMgaW5maW5pdGFzXG4gICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KDE1MDAwKSAvLyAxNSBzZWd1bmRvcyBtw6F4aW1vXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGRlIEFQSTogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgICAgLy8gQXNlZ3VyYXJzZSBkZSBxdWUgZGF0YS5tZXNzYWdlLmNvbnRlbnQgZXhpc3RlXG4gICAgICAgIGNvbnN0IGFpUmVzcG9uc2UgPSBkYXRhPy5tZXNzYWdlPy5jb250ZW50IHx8IFwiTG8gc2llbnRvLCBubyBwdWRlIGVudGVuZGVyIHR1IHNvbGljaXR1ZC5cIjtcblxuICAgICAgICAvLyBPYnRlbmVyIGxvcyBkYXRvcyBkZWwgZWxlbWVudG8gc2kgZXhpc3RlbiAoY29uIHZlcmlmaWNhY2nDs24gc2VndXJhKVxuICAgICAgICBjb25zdCBlbGVtZW50RGF0YSA9IGRhdGE/LmVsZW1lbnREYXRhO1xuXG4gICAgICAgIC8vIFZhcmlhYmxlIHBhcmEgbGEgcmVzcHVlc3RhIGZpbmFsXG4gICAgICAgIGxldCBmaW5hbFJlc3BvbnNlID0gYWlSZXNwb25zZTtcbiAgICAgICAgLy8gQ3JlYXIgdW5hIHJlZmVyZW5jaWEgYSBsYSByZXNwdWVzdGEgZmluYWwgcGFyYSBxdWUgc2VhIGFjY2VzaWJsZSBlbiBsYSBmdW5jacOzbiBwcm9jZXNhZG9yYVxuICAgICAgICBjb25zdCBmaW5hbFJlc3BvbnNlUmVmID0geyBjdXJyZW50OiBmaW5hbFJlc3BvbnNlIH07XG4gICAgICAgIGxldCBlbGVtZW50QWRkZWQgPSBmYWxzZTtcblxuICAgICAgICAvLyBVc2FyIGxhIGZ1bmNpw7NuIGRlIHByb2Nlc2FtaWVudG8gZGUgZWxlbWVudG9zXG4gICAgICAgIGNvbnN0IHByb2Nlc3NSZXN1bHQgPSBhd2FpdCBwcm9jZXNzRGV0ZWN0ZWRFbGVtZW50KFxuICAgICAgICAgIGVsZW1lbnREYXRhLFxuICAgICAgICAgIGNvbW1hbmRFeGVjdXRvcixcbiAgICAgICAgICBmaW5hbFJlc3BvbnNlUmVmLFxuICAgICAgICAgIHRpbWVsaW5lLFxuICAgICAgICAgIGxhc3RVcGxvYWRlZEltYWdlVXJsLFxuICAgICAgICAgIGN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0XG4gICAgICAgICk7XG5cbiAgICAgICAgZmluYWxSZXNwb25zZSA9IHByb2Nlc3NSZXN1bHQuZmluYWxSZXNwb25zZTtcbiAgICAgICAgZWxlbWVudEFkZGVkID0gcHJvY2Vzc1Jlc3VsdC5lbGVtZW50QWRkZWQ7XG5cbiAgICAgICAgY29uc3QgYXNzaXN0YW50TWVzc2FnZTogTWVzc2FnZSA9IHtcbiAgICAgICAgICBpZDogKERhdGUubm93KCkgKyAxKS50b1N0cmluZygpLFxuICAgICAgICAgIGNvbnRlbnQ6IGZpbmFsUmVzcG9uc2UsXG4gICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIH07XG5cbiAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFsuLi5wcmV2LCBhc3Npc3RhbnRNZXNzYWdlXSk7XG4gICAgICB9IGNhdGNoIChhcGlFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbGEgY29tdW5pY2FjacOzbiBjb24gbGEgQVBJOlwiLCBhcGlFcnJvcik7XG5cbiAgICAgICAgLy8gTWVuc2FqZSBkZSBlcnJvciBlc3BlY8OtZmljbyBkZSBBUElcbiAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAoRGF0ZS5ub3coKSArIDEpLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBjb250ZW50OiBcIkxvIHNpZW50bywgaGEgb2N1cnJpZG8gdW4gZXJyb3IgYWwgY29tdW5pY2Fyc2UgY29uIGVsIHNlcnZpY2lvIGRlIElBLiBQb3IgZmF2b3IsIGludGVudGEgZGUgbnVldm8gZW4gdW5vcyBtb21lbnRvcy5cIixcbiAgICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgfSxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBwcm9jZXNhciBlbCBtZW5zYWplOlwiLCBlcnJvcik7XG5cbiAgICAgIC8vIERldGVybWluYXIgbWVuc2FqZSBkZSBlcnJvciBhcHJvcGlhZG9cbiAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSBcIkxvIHNpZW50bywgaGEgb2N1cnJpZG8gdW4gZXJyb3IgYWwgcHJvY2VzYXIgdHUgbWVuc2FqZS5cIjtcblxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJ0aW1lb3V0XCIpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJhYm9ydFwiKSkge1xuICAgICAgICAgIGVycm9yTWVzc2FnZSA9IFwiTGEgc29saWNpdHVkIGhhIHRhcmRhZG8gZGVtYXNpYWRvLiBQcnVlYmEgY29uIHVuIG1lbnNhamUgbcOhcyBjb3J0by5cIjtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwibmV0d29ya1wiKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwiZmV0Y2hcIikpIHtcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIlBhcmVjZSBxdWUgaGF5IHVuIHByb2JsZW1hIGRlIGNvbmV4acOzbi4gVmVyaWZpY2EgdHUgY29uZXhpw7NuIGEgaW50ZXJuZXQgZSBpbnRlbnRhIGRlIG51ZXZvLlwiO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIE1lbnNhamUgZGUgZXJyb3JcbiAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbXG4gICAgICAgIC4uLnByZXYsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogKERhdGUubm93KCkgKyAxKS50b1N0cmluZygpLFxuICAgICAgICAgIGNvbnRlbnQ6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgfSxcbiAgICAgIF0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLWZ1bGwgZmxleC1jb2wgYm9yZGVyLXIgYm9yZGVyLWJvcmRlci84MCBiZy1zaWRlYmFyXCI+XG4gICAgICB7LyogSGVhZGVyIGRlbCBjaGF0ICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1bIzFhMTYyNV0gYm9yZGVyLWIgYm9yZGVyLXB1cnBsZS05MDAvMzAgcC0zIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTggdy04IHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ncmFkaWVudC10by1iciBmcm9tLXB1cnBsZS02MDAgdG8taW5kaWdvLTcwMCB0ZXh0LXdoaXRlIHNoYWRvdy1tZFwiPlxuICAgICAgICAgICAgPFNwYXJrbGVzIGNsYXNzTmFtZT1cImgtNCB3LTRcIiAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1wdXJwbGUtNTBcIj5Bc2lzdGVudGUgV2FuZHM8L2gzPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXB1cnBsZS0zMDAvNzBcIj5FZGljacOzbiBpbnRlbGlnZW50ZTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMVwiPlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIHZhcmlhbnQ9XCJnaG9zdFwiXG4gICAgICAgICAgICBzaXplPVwiaWNvblwiXG4gICAgICAgICAgICBjbGFzc05hbWU9e2ByZWxhdGl2ZSBoLTcgdy03IHJvdW5kZWQtZnVsbCAke3Nob3dSZXNldENvbmZpcm0gPyAnYmctcmVkLTgwMC82MCB0ZXh0LXdoaXRlJyA6ICdob3ZlcjpiZy1wdXJwbGUtODAwLzQwIHRleHQtcHVycGxlLTMwMCd9YH1cbiAgICAgICAgICAgIG9uQ2xpY2s9e3Jlc2V0Q2hhdH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8UmVmcmVzaEN3IGNsYXNzTmFtZT17YGgtMy41IHctMy41ICR7c2hvd1Jlc2V0Q29uZmlybSA/ICdhbmltYXRlLXNwaW4nIDogJyd9YH0gLz5cbiAgICAgICAgICAgIHtzaG93UmVzZXRDb25maXJtICYmIChcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYWJzb2x1dGUgLWJvdHRvbS04IHJpZ2h0LTAgdGV4dC1bMTBweF0gYmctcmVkLTkwMC85MCB0ZXh0LXdoaXRlIHB4LTIgcHktMC41IHJvdW5kZWQgd2hpdGVzcGFjZS1ub3dyYXAgc2hhZG93LWxnXCI+XG4gICAgICAgICAgICAgICAgwr9Db25maXJtYXI/XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiDDgXJlYSBkZSBtZW5zYWplcyBjb24gc2Nyb2xsIHBlcnNvbmFsaXphZG8gKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy1oaWRkZW4gYmctZ3JhZGllbnQtdG8tYiBmcm9tLVsjMWExNjI1XSB0by1bIzIxMWEyY11cIj5cbiAgICAgICAgPFNjcm9sbEFyZWEgY2xhc3NOYW1lPVwiaC1mdWxsIGN1c3RvbS1zY3JvbGxiYXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgZ2FwLTQgcC00XCI+XG4gICAgICAgICAgICB7bWVzc2FnZXMubWFwKChtZXNzYWdlKSA9PiAoXG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBrZXk9e21lc3NhZ2UuaWR9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCBmbGV4LWNvbCAke1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb2xlID09PSBcImFzc2lzdGFudFwiID8gXCJpdGVtcy1zdGFydFwiIDogXCJpdGVtcy1lbmRcIlxuICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgbWF4LXctWzg1JV0gcm91bmRlZC1sZyBweC00IHB5LTIuNSBzaGFkb3ctc20gJHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb2xlID09PSBcImFzc2lzdGFudFwiXG4gICAgICAgICAgICAgICAgICAgICAgPyBcImJnLVsjMmExZjM1XSB0ZXh0LXB1cnBsZS01MCBib3JkZXIgYm9yZGVyLXB1cnBsZS05MDAvMzBcIlxuICAgICAgICAgICAgICAgICAgICAgIDogXCJiZy1ncmFkaWVudC10by1yIGZyb20tcHVycGxlLTYwMCB0by1pbmRpZ28tNzAwIHRleHQtd2hpdGVcIlxuICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3aGl0ZXNwYWNlLXByZS13cmFwXCI+e21lc3NhZ2UuY29udGVudH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgIHttZXNzYWdlLmltYWdlVXJsICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXttZXNzYWdlLmltYWdlVXJsfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWx0PVwiSW1hZ2VuIGFkanVudGFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWF4LWgtNDggbWF4LXctZnVsbCByb3VuZGVkLW1kIG9iamVjdC1jb250YWluXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1heFdpZHRoOiAnMTAwJScgfX1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0xIHB4LTEgdGV4dC14cyB0ZXh0LXB1cnBsZS00MDAvNzBcIj5cbiAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnRpbWVzdGFtcC50b0xvY2FsZVRpbWVTdHJpbmcoW10sIHtcbiAgICAgICAgICAgICAgICAgICAgaG91cjogXCIyLWRpZ2l0XCIsXG4gICAgICAgICAgICAgICAgICAgIG1pbnV0ZTogXCIyLWRpZ2l0XCIsXG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDxkaXYgcmVmPXttZXNzYWdlc0VuZFJlZn0gLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9TY3JvbGxBcmVhPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiDDgXJlYSBkZSB2aXN0YSBwcmV2aWEgZGUgaW1hZ2VuIGNvbiBtZWpvciBlc3RpbG8gKi99XG4gICAgICB7aW1hZ2VQcmV2aWV3ICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSBteC00IG10LTEgbWItMiBoLTI0IHJvdW5kZWQtbWQgYmctWyMyYTFmMzVdIGJvcmRlciBib3JkZXItcHVycGxlLTgwMC8zMCBwLTIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICB2YXJpYW50PVwiZ2hvc3RcIlxuICAgICAgICAgICAgc2l6ZT1cImljb25cIlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgcmlnaHQtMSB0b3AtMSB6LTEwIGgtNSB3LTUgcm91bmRlZC1mdWxsIGJnLVsjMjExYTJjXS84MCBob3ZlcjpiZy1yZWQtODAwLzgwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVJlbW92ZUltYWdlfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxYIGNsYXNzTmFtZT1cImgtMyB3LTMgdGV4dC1wdXJwbGUtMjAwXCIgLz5cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8aW1nXG4gICAgICAgICAgICBzcmM9e2ltYWdlUHJldmlld31cbiAgICAgICAgICAgIGFsdD1cIlZpc3RhIHByZXZpYVwiXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJtYXgtaC1mdWxsIG1heC13LWZ1bGwgcm91bmRlZCBvYmplY3QtY29udGFpblwiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7Lyogw4FyZWEgZGUgZW50cmFkYSBtZWpvcmFkYSAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLXQgYm9yZGVyLXB1cnBsZS05MDAvMzAgYmctWyMxYTE2MjVdIHAtM1wiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgZ2FwLTJcIj5cbiAgICAgICAgICB7LyogQm90b25lcyBkZSBhY2Npb25lcyByw6FwaWRhcyAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTEgcHgtMSBtYi0xIG92ZXJmbG93LXgtYXV0byBoaWRlLXNjcm9sbGJhclwiPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB2YXJpYW50PVwiZ2hvc3RcIlxuICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LXNocmluay0wIGgtNyB0ZXh0LXhzIHJvdW5kZWQtZnVsbCBiZy1bIzJhMWYzNV0vNzAgaG92ZXI6YmctcHVycGxlLTgwMC80MCB0ZXh0LXB1cnBsZS0zMDAgcHgtM1wiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldElucHV0KFwiQcOxYWRlIHVuIHTDrXR1bG8gcXVlIGRpZ2EgJ0JpZW52ZW5pZG9zJ1wiKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgQcOxYWRpciB0w610dWxvXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCJcbiAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC1zaHJpbmstMCBoLTcgdGV4dC14cyByb3VuZGVkLWZ1bGwgYmctWyMyYTFmMzVdLzcwIGhvdmVyOmJnLXB1cnBsZS04MDAvNDAgdGV4dC1wdXJwbGUtMzAwIHB4LTNcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRJbnB1dChcIlBvbiBtw7pzaWNhIGRlIGZvbmRvXCIpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBNw7pzaWNhXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCJcbiAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC1zaHJpbmstMCBoLTcgdGV4dC14cyByb3VuZGVkLWZ1bGwgYmctWyMyYTFmMzVdLzcwIGhvdmVyOmJnLXB1cnBsZS04MDAvNDAgdGV4dC1wdXJwbGUtMzAwIHB4LTNcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRJbnB1dChcIkHDsWFkZSB1biBlZmVjdG8gZGUgdHJhbnNpY2nDs25cIil9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIFRyYW5zaWNpb25lc1xuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogQ2FtcG8gZGUgZW50cmFkYSB5IGJvdG9uZXMgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGJnLVsjMmExZjM1XSByb3VuZGVkLWwtZnVsbCByb3VuZGVkLXItZnVsbCBib3JkZXIgYm9yZGVyLXB1cnBsZS05MDAvMzAgZmxleC0xIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCJcbiAgICAgICAgICAgICAgICBzaXplPVwiaWNvblwiXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZC1sLWZ1bGwgaC0xMCB3LTEwIGJnLXRyYW5zcGFyZW50IGhvdmVyOmJnLXB1cnBsZS04MDAvMzBcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUltYWdlQ2xpY2t9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZ31cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxJbWFnZUljb24gY2xhc3NOYW1lPVwiaC01IHctNSB0ZXh0LXB1cnBsZS0zMDBcIiAvPlxuICAgICAgICAgICAgICA8L0J1dHRvbj5cblxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICB2YWx1ZT17aW5wdXR9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRJbnB1dChlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgb25LZXlEb3duPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVTZW5kTWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFc2NyaWJlIHR1IG1lbnNhamUuLi5cIlxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmd9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC0xIGJvcmRlci0wIGJnLXRyYW5zcGFyZW50IGgtMTAgZm9jdXM6cmluZy0wIGZvY3VzLXZpc2libGU6cmluZy0wIHRleHQtcHVycGxlLTUwIHBsYWNlaG9sZGVyOnRleHQtcHVycGxlLTQwMC83MFwiXG4gICAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNlbmRNZXNzYWdlfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXsoIWlucHV0LnRyaW0oKSAmJiAhaW1hZ2VGaWxlKSB8fCBpc0xvYWRpbmd9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZC1yLWZ1bGwgaC0xMCBiZy10cmFuc3BhcmVudCBob3ZlcjpiZy1wdXJwbGUtODAwLzMwIHRleHQtcHVycGxlLTMwMCBob3Zlcjp0ZXh0LXdoaXRlIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtpc0xvYWRpbmcgfHwgaXNVcGxvYWRpbmcgPyAoXG4gICAgICAgICAgICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9XCJoLTUgdy01IGFuaW1hdGUtc3BpblwiIC8+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxTZW5kIGNsYXNzTmFtZT1cImgtNCB3LTRcIiAvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC0xMCB3LTEwIHJvdW5kZWQtZnVsbCBiZy1ncmFkaWVudC10by1yIGZyb20tcHVycGxlLTYwMCB0by1pbmRpZ28tNzAwIGhvdmVyOmZyb20tcHVycGxlLTcwMCBob3Zlcjp0by1pbmRpZ28tODAwIHRleHQtd2hpdGVcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gTWVuc2FqZSBkZSB0aXBcbiAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCB7XG4gICAgICAgICAgICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgY29udGVudDogXCLwn5KhIFRpcDogUHVlZGVzIHBlZGlybWUgcXVlIGHDsWFkYSB0ZXh0b3MsIGltw6FnZW5lcyBvIGVmZWN0b3MgYSB0dSB2aWRlby4gUHJ1ZWJhIGRpY2llbmRvICdBw7FhZGUgdW4gdGV4dG8gcXVlIGRpZ2EgSG9sYSBhbCBpbmljaW8nLlwiLFxuICAgICAgICAgICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPEhlbHBDaXJjbGUgY2xhc3NOYW1lPVwiaC01IHctNVwiIC8+XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGlucHV0XG4gICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgcmVmPXtmaWxlSW5wdXRSZWZ9XG4gICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVGaWxlQ2hhbmdlfVxuICAgICAgICBhY2NlcHQ9XCJpbWFnZS8qXCJcbiAgICAgICAgY2xhc3NOYW1lPVwiaGlkZGVuXCJcbiAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZ31cbiAgICAgIC8+XG5cbiAgICAgIHsvKiBFc3RpbG9zIGFkaWNpb25hbGVzIGNvbW8gY3NzIGdsb2JhbCBlbiBlbCBjb21wb25lbnRlICovfVxuICAgICAgPHN0eWxlIGpzeCBnbG9iYWw+e2BcbiAgICAgICAgLmN1c3RvbS1zY3JvbGxiYXI6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgICAgICAgICB3aWR0aDogNnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmN1c3RvbS1zY3JvbGxiYXI6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDkwLCA2MCwgMTQwLCAwLjEpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5jdXN0b20tc2Nyb2xsYmFyOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XG4gICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgxMzgsIDc1LCAyNTUsIDAuMyk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmN1c3RvbS1zY3JvbGxiYXI6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDEzOCwgNzUsIDI1NSwgMC41KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5oaWRlLXNjcm9sbGJhcjo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIH1cblxuICAgICAgICAuaGlkZS1zY3JvbGxiYXIge1xuICAgICAgICAgIC1tcy1vdmVyZmxvdy1zdHlsZTogbm9uZTtcbiAgICAgICAgICBzY3JvbGxiYXItd2lkdGg6IG5vbmU7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZVJlZiIsInVzZUVmZmVjdCIsIkJ1dHRvbiIsIklucHV0IiwiU2Nyb2xsQXJlYSIsIlNlbmQiLCJMb2FkZXIyIiwiSW1hZ2VJY29uIiwiWCIsIlNwYXJrbGVzIiwiUmVmcmVzaEN3IiwiSGVscENpcmNsZSIsInVzZURhdGFTdGF0ZSIsInVzZVN0YXRlTWFuYWdlciIsImNyZWF0ZVZpZGVvQ29tbWFuZEV4ZWN1dG9yIiwiY3JlYXRlVXBsb2Fkc0RldGFpbHMiLCJleHRyYWN0SW1hZ2VUaW1lc0Zyb21NZXNzYWdlIiwibWVzc2FnZUNvbnRlbnQiLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwic3RhcnRUaW1lUGF0dGVybnMiLCJlbmRUaW1lUGF0dGVybnMiLCJpc0F0U3RhcnQiLCJ0ZXN0IiwiaXNBdEVuZCIsInBhdHRlcm4iLCJtYXRjaCIsInRvU3RyaW5nIiwiaW5jbHVkZXMiLCJwYXJzZUludCIsInByb2Nlc3NEZXRlY3RlZEVsZW1lbnQiLCJlbGVtZW50RGF0YSIsImNvbW1hbmRFeGVjdXRvciIsImZpbmFsUmVzcG9uc2VSZWYiLCJ0aW1lbGluZSIsImxhc3RVcGxvYWRlZEltYWdlVXJsIiwiY3VycmVudEltYWdlVXJsRm9yVGhpc1JlcXVlc3QiLCJlbGVtZW50QWRkZWQiLCJmaW5hbFJlc3BvbnNlIiwiY3VycmVudCIsImRldGVjdGVkIiwiY29uZmlkZW5jZSIsImVsZW1lbnQiLCJ0eXBlIiwiY29udGVudCIsInRleHRPcHRpb25zIiwiY29sb3IiLCJ0b0xvd2VyQ2FzZSIsImFkZFRleHQiLCJpbWFnZU9wdGlvbnMiLCJwb3NpdGlvbiIsIngiLCJ5IiwiY29uc29sZSIsImxvZyIsInZpZGVvRHVyYXRpb24iLCJkdXJhdGlvbiIsIk1hdGgiLCJmbG9vciIsIm1heCIsImlzR2VuZXJpY1VybCIsInVybCIsImlzTG9jYWxJbWFnZSIsInN0YXJ0c1dpdGgiLCJpbWFnZVVybCIsImFkZEltYWdlIiwidmlkZW9PcHRpb25zIiwidmlkZW9VcmwiLCJhZGRWaWRlbyIsInN1YnRpdGxlT3B0aW9ucyIsImdyb3VwV29yZHMiLCJ1bmRlZmluZWQiLCJhZGRTdWJ0aXRsZXMiLCJBcnJheSIsImlzQXJyYXkiLCJzZWdtZW50cyIsImxlbmd0aCIsIm1hcCIsInNlZ21lbnQiLCJzZWdtZW50c0Zvcm1hdHRlZCIsInMiLCJqb2luIiwicmVzdWx0IiwicmVtb3ZlU2VnbWVudHMiLCJlcnJvciIsIm1lc3NhZ2UiLCJjb21wYWN0VGltZWxpbmUiLCJzbWFydFRyaW0iLCJBSUNoYXQiLCJtZXNzYWdlcyIsInNldE1lc3NhZ2VzIiwiaWQiLCJyb2xlIiwidGltZXN0YW1wIiwiRGF0ZSIsImlucHV0Iiwic2V0SW5wdXQiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJpbWFnZUZpbGUiLCJzZXRJbWFnZUZpbGUiLCJpbWFnZVByZXZpZXciLCJzZXRJbWFnZVByZXZpZXciLCJpc1VwbG9hZGluZyIsInNldElzVXBsb2FkaW5nIiwic2hvd1Jlc2V0Q29uZmlybSIsInNldFNob3dSZXNldENvbmZpcm0iLCJzZXRMYXN0VXBsb2FkZWRJbWFnZVVybCIsImZpbGVJbnB1dFJlZiIsIm1lc3NhZ2VzRW5kUmVmIiwic3RhdGVNYW5hZ2VyIiwic2NlbmVzIiwicGxheWVyUmVmIiwicmVzZXRDaGF0Iiwibm93Iiwic2V0VGltZW91dCIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiY2xpY2siLCJoYW5kbGVGaWxlQ2hhbmdlIiwiZSIsImZpbGUiLCJ0YXJnZXQiLCJmaWxlcyIsInByZXZpZXdVcmwiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJoYW5kbGVSZW1vdmVJbWFnZSIsInZhbHVlIiwidXBsb2FkSW1hZ2UiLCJ1cGxvYWREZXRhaWxzIiwibmFtZSIsInVwbG9hZFVybCIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsImhlYWRlcnMiLCJFcnJvciIsImhhbmRsZVNlbmRNZXNzYWdlIiwidHJpbSIsInVzZXJNZXNzYWdlIiwidXBsb2FkZWRJbWFnZVVybCIsInN1YnN0cmluZyIsInByZXYiLCJhcGlNZXNzYWdlcyIsImNvbmNhdCIsIm1zZyIsImlzRGF0YVVybCIsImltYWdlVXJsVG9TZW5kIiwiY29udGV4dE1lc3NhZ2UiLCJnZXRDdXJyZW50VGltZSIsImNhbnZhcyIsImdldE9iamVjdHMiLCJkYXRhIiwicmVzcG9uc2UiLCJKU09OIiwic3RyaW5naWZ5IiwibGFzdEltYWdlVXJsIiwic2lnbmFsIiwiQWJvcnRTaWduYWwiLCJ0aW1lb3V0Iiwib2siLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwianNvbiIsImFpUmVzcG9uc2UiLCJwcm9jZXNzUmVzdWx0IiwiYXNzaXN0YW50TWVzc2FnZSIsImFwaUVycm9yIiwiZXJyb3JNZXNzYWdlIiwiZGl2IiwiY2xhc3NOYW1lIiwiaDMiLCJwIiwidmFyaWFudCIsInNpemUiLCJvbkNsaWNrIiwic3BhbiIsImltZyIsInNyYyIsImFsdCIsInN0eWxlIiwibWF4V2lkdGgiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJob3VyIiwibWludXRlIiwicmVmIiwiZGlzYWJsZWQiLCJvbkNoYW5nZSIsIm9uS2V5RG93biIsImtleSIsInNoaWZ0S2V5IiwicHJldmVudERlZmF1bHQiLCJwbGFjZWhvbGRlciIsImFjY2VwdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/ai-chat/index.tsx\n"));

/***/ })

});
"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./components/ai-chat/index.tsx":
/*!**************************************!*\
  !*** ./components/ai-chat/index.tsx ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ AIChat; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./components/ui/button.tsx\");\n/* harmony import */ var _components_ui_input__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/ui/input */ \"(app-pages-browser)/./components/ui/input.tsx\");\n/* harmony import */ var _components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/ui/scroll-area */ \"(app-pages-browser)/./components/ui/scroll-area.tsx\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/sparkles.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/refresh-cw.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/image.js\");\n/* harmony import */ var _barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! __barrel_optimize__?names=ImageIcon,Loader2,RefreshCw,Send,Sparkles,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/send.js\");\n/* harmony import */ var _features_editor_store_use_data_state__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/features/editor/store/use-data-state */ \"(app-pages-browser)/./features/editor/store/use-data-state.ts\");\n/* harmony import */ var _features_editor_hooks_state_manager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/features/editor/hooks/state-manager */ \"(app-pages-browser)/./features/editor/hooks/state-manager.tsx\");\n/* harmony import */ var _ai_video_commands__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ai-video-commands */ \"(app-pages-browser)/./components/ai-chat/ai-video-commands.ts\");\n/* harmony import */ var _utils_upload__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/utils/upload */ \"(app-pages-browser)/./utils/upload.ts\");\n/* harmony import */ var _features_editor_services_command_executor_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/features/editor/services/command-executor-service */ \"(app-pages-browser)/./features/editor/services/command-executor-service.ts\");\n/* harmony import */ var _features_editor_store_use_store__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/features/editor/store/use-store */ \"(app-pages-browser)/./features/editor/store/use-store.ts\");\n/* harmony import */ var react_markdown__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react-markdown */ \"(app-pages-browser)/./node_modules/react-markdown/lib/index.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$(), _s2 = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n\n// Indica si la solicitud debe ser procesada por el agente\nfunction shouldUseAgent(mode, message) {\n    if (mode !== \"agent\") return false;\n    // Patrones que indican que el usuario quiere que el agente edite automáticamente el video\n    const autoEditPatterns = [\n        /edita\\s+(el|este|mi)?\\s*video/i,\n        /mejora\\s+(el|este|mi)?\\s*video/i,\n        /optimiza\\s+(el|este|mi)?\\s*video/i,\n        /procesa\\s+(el|este|mi)?\\s*video/i,\n        /arregla\\s+(el|este|mi)?\\s*video/i,\n        /modifica\\s+(el|este|mi)?\\s*video/i,\n        /trabaja\\s+(en|con)\\s+(el|este|mi)?\\s*video/i,\n        /puedes\\s+editar/i,\n        /^edita$/i,\n        /^editar$/i,\n        /^mejora$/i,\n        /^optimiza$/i\n    ];\n    return autoEditPatterns.some((pattern)=>pattern.test(message.trim()));\n}\n// Función para extraer tiempos de inicio y fin de una imagen a partir del mensaje\nfunction extractImageTimesFromMessage(messageContent) {\n    let startTime = 0;\n    let endTime = 5;\n    if (!messageContent) return {\n        startTime,\n        endTime\n    };\n    // Buscar referencias al tiempo inicial\n    const startTimePatterns = [\n        /en el segundo (\\d+)/i,\n        /desde el segundo (\\d+)/i,\n        /a partir del segundo (\\d+)/i,\n        /comenzando en el segundo (\\d+)/i,\n        /desde el minuto (\\d+)/i,\n        /en el minuto (\\d+)/i,\n        /entre los segundos (\\d+) y/i,\n        /del segundo (\\d+) al/i,\n        /empezando en (\\d+)/i,\n        /segundo (\\d+)/i,\n        /en (\\d+) segundos/i,\n        /en el (\\d+)/i\n    ];\n    // Buscar referencias al tiempo final\n    const endTimePatterns = [\n        /hasta el segundo (\\d+)/i,\n        /al segundo (\\d+)/i,\n        /terminando en el segundo (\\d+)/i,\n        /hasta el minuto (\\d+)/i,\n        /entre los segundos \\d+ y (\\d+)/i,\n        /del segundo \\d+ al (\\d+)/i,\n        /por (\\d+) segundos/i,\n        /durante (\\d+) segundos/i\n    ];\n    // Buscar palabras clave especiales\n    const isAtStart = /\\b(al inicio|al principio|al comienzo)\\b/i.test(messageContent);\n    const isAtEnd = /\\b(al final|al término|al acabar)\\b/i.test(messageContent);\n    // Procesar patrones de tiempo inicial\n    for (const pattern of startTimePatterns){\n        const match = messageContent.match(pattern);\n        if (match && match[1]) {\n            // Si es referencia a minutos, convertir a segundos\n            startTime = pattern.toString().includes(\"minuto\") ? parseInt(match[1]) * 60 : parseInt(match[1]);\n            break;\n        }\n    }\n    // Procesar patrones de tiempo final\n    for (const pattern of endTimePatterns){\n        const match = messageContent.match(pattern);\n        if (match && match[1]) {\n            if (pattern.toString().includes(\"por\") || pattern.toString().includes(\"durante\")) {\n                // Es una duración relativa, sumar al tiempo inicial\n                endTime = startTime + parseInt(match[1]);\n            } else {\n                // Es un tiempo absoluto\n                endTime = pattern.toString().includes(\"minuto\") ? parseInt(match[1]) * 60 : parseInt(match[1]);\n            }\n            break;\n        }\n    }\n    // Si se menciona \"al inicio\", establecer tiempo a 0\n    if (isAtStart) {\n        startTime = 0;\n        endTime = 5; // Por defecto 5 segundos de duración\n    }\n    // Si se menciona \"al final\", establecer valores relativos al final\n    // Nota: El valor real se ajustará en el cliente según la duración\n    if (isAtEnd) {\n        startTime = -1; // Código especial para \"final - 5 segundos\"\n        endTime = -1; // Código especial para \"final\"\n    }\n    // Si no se detectó tiempo final pero sí inicial, establecer una duración predeterminada\n    if (startTime > 0 && endTime === 5 && startTime !== 0) {\n        endTime = startTime + 5;\n    }\n    return {\n        startTime,\n        endTime\n    };\n}\n// Función para procesar elementos detectados por la IA\nconst processDetectedElement = async (elementData, commandExecutor, finalResponseRef, timeline, lastUploadedImageUrl, currentImageUrlForThisRequest)=>{\n    let elementAdded = false;\n    let finalResponse = finalResponseRef.current;\n    try {\n        // Si se detectó un elemento para agregar con confianza suficiente\n        if (elementData && elementData.detected === true && typeof elementData.confidence === \"number\" && elementData.confidence > 0.7 && elementData.element) {\n            const element = elementData.element;\n            // Procesar según el tipo de elemento\n            if (element.type === \"text\" && element.content) {\n                // Configurar opciones para el texto\n                const textOptions = {\n                    startTime: typeof element.startTime === \"number\" ? element.startTime : 0,\n                    endTime: typeof element.endTime === \"number\" ? element.endTime : typeof element.startTime === \"number\" ? element.startTime + 5 : 5\n                };\n                // Asignar color si está disponible\n                if (element.color) {\n                    textOptions.color = element.color.toLowerCase() === \"blanco\" ? \"#FFFFFF\" : element.color.toLowerCase() === \"negro\" ? \"#000000\" : element.color.toLowerCase() === \"rojo\" ? \"#FF0000\" : element.color.toLowerCase() === \"azul\" ? \"#0000FF\" : element.color.toLowerCase() === \"verde\" ? \"#00FF00\" : element.color.toLowerCase() === \"amarillo\" ? \"#FFFF00\" : element.color;\n                }\n                // Añadir el texto\n                commandExecutor.current.addText(element.content, textOptions);\n                // Actualizar respuesta\n                finalResponse += '\\n\\n[He agregado el texto \"'.concat(element.content, '\" ').concat(element.color ? \"con color \".concat(element.color, \" \") : \"\", \"desde el segundo \").concat(textOptions.startTime, \" hasta el segundo \").concat(textOptions.endTime, \"]\");\n                elementAdded = true;\n            } else if (element.type === \"image\") {\n                // Configurar opciones para la imagen\n                const imageOptions = {\n                    startTime: typeof element.startTime === \"number\" ? element.startTime : 0,\n                    endTime: typeof element.endTime === \"number\" ? element.endTime : typeof element.startTime === \"number\" ? element.startTime + 5 : 5,\n                    // Posición centrada por defecto\n                    position: {\n                        x: 0.5,\n                        y: 0.5\n                    }\n                };\n                // Registrar tiempos específicos para depuración\n                console.log(\"Tiempos de imagen recibidos de la API: startTime=\".concat(element.startTime, \", endTime=\").concat(element.endTime));\n                // Manejar casos especiales para \"al final\" del video\n                if (element.startTime === -1 || element.endTime === -1) {\n                    // Calcular la duración del video en segundos\n                    const videoDuration = (timeline === null || timeline === void 0 ? void 0 : timeline.duration) ? Math.floor(timeline.duration / 1000) : 30; // Valor predeterminado si no hay duración\n                    console.log(\"Duraci\\xf3n del video: \".concat(videoDuration, \"s\"));\n                    if (element.startTime === -1 && element.endTime === -1) {\n                        // Si ambos son -1, colocar en los últimos 5 segundos\n                        imageOptions.startTime = Math.max(0, videoDuration - 5);\n                        imageOptions.endTime = videoDuration;\n                        console.log('Ajustando para \"al final\": startTime='.concat(imageOptions.startTime, \", endTime=\").concat(imageOptions.endTime));\n                    } else if (element.startTime === -1) {\n                        // Solo startTime es -1\n                        imageOptions.startTime = Math.max(0, videoDuration - 5);\n                    } else if (element.endTime === -1) {\n                        // Solo endTime es -1\n                        imageOptions.endTime = videoDuration;\n                    }\n                }\n                console.log(\"Tiempos de imagen a aplicar: startTime=\".concat(imageOptions.startTime, \", endTime=\").concat(imageOptions.endTime));\n                // Determinar la URL de la imagen a usar\n                const isGenericUrl = element.url === \"imagen_adjunta_por_el_usuario.jpg\";\n                const isLocalImage = lastUploadedImageUrl && lastUploadedImageUrl.startsWith(\"data:\");\n                let imageUrl;\n                // PRIORIDAD 1: Usar la imagen que acaba de subirse en este mensaje específico\n                if (currentImageUrlForThisRequest) {\n                    imageUrl = currentImageUrlForThisRequest;\n                    console.log(\"Usando la imagen reci\\xe9n subida para esta solicitud espec\\xedfica\");\n                } else if (element.url && !isGenericUrl && !element.url.includes(\"/url_de_la_imagen\")) {\n                    imageUrl = element.url;\n                    console.log(\"Usando URL espec\\xedfica del elemento\");\n                } else if (isGenericUrl && lastUploadedImageUrl) {\n                    imageUrl = lastUploadedImageUrl;\n                    console.log(\"Usando la \\xfaltima imagen subida guardada\");\n                } else {\n                    // Si todo lo demás falla, usar una imagen de ejemplo\n                    imageUrl = \"https://ik.imagekit.io/wombo/images/img2.jpg\";\n                    console.log(\"Usando imagen de ejemplo como fallback\");\n                }\n                // Añadir la imagen\n                commandExecutor.current.addImage(imageUrl, imageOptions);\n                // Actualizar respuesta\n                finalResponse += \"\\n\\n[He agregado la imagen desde el segundo \".concat(imageOptions.startTime, \" hasta el segundo \").concat(imageOptions.endTime, \"]\");\n                elementAdded = true;\n            } else if (element.type === \"video\") {\n                // Configurar opciones para el video\n                const videoOptions = {\n                    startTime: typeof element.startTime === \"number\" ? element.startTime : 0,\n                    endTime: typeof element.endTime === \"number\" ? element.endTime : typeof element.startTime === \"number\" ? element.startTime + 10 : 10\n                };\n                // URL de video de ejemplo (en producción esto sería dinámico)\n                const videoUrl = \"https://cdn.designcombo.dev/videos/demo-video-4.mp4\";\n                // Añadir el video\n                commandExecutor.current.addVideo(videoUrl, videoOptions);\n                // Actualizar respuesta\n                finalResponse += \"\\n\\n[He agregado el video desde el segundo \".concat(videoOptions.startTime, \" hasta el segundo \").concat(videoOptions.endTime, \"]\");\n                elementAdded = true;\n            } else if (element.type === \"subtitles\") {\n                // Configurar opciones para los subtítulos\n                const subtitleOptions = {\n                    groupWords: element.groupWords !== undefined ? element.groupWords : true\n                };\n                // Añadir tiempos si se especificaron\n                if (typeof element.startTime === \"number\") {\n                    subtitleOptions.startTime = element.startTime;\n                }\n                if (typeof element.endTime === \"number\") {\n                    subtitleOptions.endTime = element.endTime;\n                }\n                // Añadir los subtítulos\n                commandExecutor.current.addSubtitles(subtitleOptions);\n                // Actualizar respuesta silenciosa (se maneja en otro lado)\n                elementAdded = true;\n            } else if (element.type === \"segments\" && Array.isArray(element.segments) && element.segments.length > 0) {\n                // Configurar los segmentos a eliminar\n                const segments = element.segments.map((segment)=>({\n                        startTime: typeof segment.startTime === \"number\" ? segment.startTime : 0,\n                        endTime: typeof segment.endTime === \"number\" ? segment.endTime : typeof segment.startTime === \"number\" ? segment.startTime + 5 : 5\n                    }));\n                console.log(\"Eliminando \".concat(segments.length, \" segmentos:\"), segments);\n                // Ejemplo de formato de segmentos a mostrar\n                const segmentsFormatted = segments.map((s)=>\"\".concat(s.startTime, \"-\").concat(s.endTime, \"s\")).join(\", \");\n                try {\n                    // Ejecutar la eliminación de segmentos\n                    const result = await commandExecutor.current.removeSegments(segments);\n                    if (result) {\n                        finalResponse += \"\\n\\n[He eliminado los segmentos solicitados: \".concat(segmentsFormatted, \"]\");\n                    } else {\n                        finalResponse += \"\\n\\n[No pude eliminar los segmentos solicitados. Aseg\\xfarate de que hay un elemento seleccionado en la timeline.]\";\n                    }\n                    elementAdded = true;\n                } catch (error) {\n                    console.error(\"Error al eliminar segmentos:\", error);\n                    finalResponse += \"\\n\\n[Error al intentar eliminar los segmentos: \".concat(error.message || \"Error desconocido\", \"]\");\n                }\n            } else if (element.type === \"compact\") {\n                // Ejecutar la compactación del timeline\n                console.log(\"Compactando timeline por solicitud del usuario\");\n                try {\n                    // Iniciar la compactación\n                    const result = await commandExecutor.current.compactTimeline();\n                    if (result) {\n                        finalResponse += \"\\n\\n[He compactado el timeline eliminando los espacios vac\\xedos entre elementos]\";\n                    } else {\n                        finalResponse += \"\\n\\n[No fue posible compactar el timeline. Puede que no haya elementos o espacios vac\\xedos que compactar]\";\n                    }\n                    elementAdded = true;\n                } catch (error) {\n                    console.error(\"Error al compactar el timeline:\", error);\n                    finalResponse += \"\\n\\n[Error al intentar compactar el timeline: \".concat(error.message || \"Error desconocido\", \"]\");\n                }\n            } else if (element.type === \"smartTrim\") {\n                // Ejecutar el recorte inteligente\n                console.log(\"Iniciando recorte inteligente por solicitud del usuario\");\n                try {\n                    // Mostrar mensaje de análisis en curso\n                    finalResponse += \"\\n\\n[Analizando el video para identificar las partes a eliminar...]\";\n                    // Iniciar el recorte inteligente\n                    const result = await commandExecutor.current.smartTrim();\n                    if (result) {\n                        finalResponse += \"\\n\\n[He realizado un recorte inteligente del video, eliminando las partes innecesarias y compactando el timeline]\";\n                    } else {\n                        finalResponse += \"\\n\\n[No fue posible realizar el recorte inteligente. Verifica que el video tenga una transcripci\\xf3n]\";\n                    }\n                    elementAdded = true;\n                } catch (error) {\n                    console.error(\"Error al realizar el recorte inteligente:\", error);\n                    finalResponse += \"\\n\\n[Error al intentar realizar el recorte inteligente: \".concat(error.message || \"Error desconocido\", \"]\");\n                }\n            } else if (element.type === \"music\" && Array.isArray(element.options) && element.options.length > 0) {\n                // Respuesta más corta para música\n                finalResponse = \"\\xbfCu\\xe1l de estas opciones te gustar\\xeda a\\xf1adir?\";\n                elementAdded = true;\n            }\n        }\n    } catch (error) {\n        console.error(\"Error al procesar elemento detectado:\", error);\n        finalResponse += \"\\n\\n[No pude procesar la solicitud debido a un error.]\";\n    }\n    return {\n        finalResponse,\n        elementAdded\n    };\n};\n// Componente para renderizar opciones de música como botones clickables\nconst MusicOptions = (param)=>{\n    let { options, onSelectMusic } = param;\n    if (!Array.isArray(options) || options.length === 0) {\n        return null;\n    }\n    // Función para convertir el nombre del archivo a un nombre amigable\n    const getFriendlyName = (musicPath)=>{\n        const filename = musicPath.split(\"/\").pop() || musicPath;\n        // Mapear nombres de archivos a nombres amigables\n        if (filename === \"song1.mp3\") return \"M\\xfasica Energ\\xe9tica\";\n        if (filename === \"song2.mp3\") return \"Melod\\xeda Relajante\";\n        // Si no hay mapeo específico, devolver el nombre del archivo\n        return filename;\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col gap-3 mt-3\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-wrap gap-2\",\n            children: options.map((musicPath, index)=>{\n                const musicName = getFriendlyName(musicPath);\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    onClick: ()=>onSelectMusic(musicPath),\n                    className: \"px-4 py-2 text-sm bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-lg transition-all shadow-md hover:shadow-lg flex items-center gap-2 font-medium\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"currentColor\",\n                            className: \"w-5 h-5\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                d: \"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 9l12-3\",\n                                strokeWidth: \"2\",\n                                stroke: \"currentColor\",\n                                fill: \"none\",\n                                strokeLinecap: \"round\",\n                                strokeLinejoin: \"round\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 402,\n                                columnNumber: 17\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 401,\n                            columnNumber: 15\n                        }, undefined),\n                        musicName\n                    ]\n                }, index, true, {\n                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                    lineNumber: 396,\n                    columnNumber: 13\n                }, undefined);\n            })\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n            lineNumber: 392,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n        lineNumber: 391,\n        columnNumber: 5\n    }, undefined);\n};\n_c = MusicOptions;\n// Componente para mostrar la animación de \"pensando\"\nconst ThinkingAnimation = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col items-start animate-fadeIn\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"max-w-[85%] rounded-md px-4 py-2 bg-[rgb(40,20,60)] text-zinc-200\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex gap-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"h-2 w-2 bg-purple-400 rounded-full animate-pulse\",\n                                style: {\n                                    animationDelay: \"0ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 419,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"h-2 w-2 bg-purple-400 rounded-full animate-pulse\",\n                                style: {\n                                    animationDelay: \"300ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 420,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"h-2 w-2 bg-purple-400 rounded-full animate-pulse\",\n                                style: {\n                                    animationDelay: \"600ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 421,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 418,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"text-xs text-zinc-400\",\n                        children: \"Pensando...\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 423,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 417,\n                columnNumber: 7\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n            lineNumber: 416,\n            columnNumber: 5\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n        lineNumber: 415,\n        columnNumber: 3\n    }, undefined);\n_c1 = ThinkingAnimation;\n// Componente para mostrar el razonamiento desplegable\nconst ReasoningSection = (param)=>{\n    let { reasoning } = param;\n    _s();\n    const [isOpen, setIsOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"mt-2 text-xs border-t border-purple-800/30 pt-2\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: ()=>setIsOpen(!isOpen),\n                className: \"flex items-center gap-1 text-purple-400 hover:text-purple-300 transition-colors\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                        xmlns: \"http://www.w3.org/2000/svg\",\n                        width: \"14\",\n                        height: \"14\",\n                        viewBox: \"0 0 24 24\",\n                        fill: \"none\",\n                        stroke: \"currentColor\",\n                        strokeWidth: \"2\",\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\",\n                        className: \"transition-transform \".concat(isOpen ? \"rotate-180\" : \"\"),\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"polyline\", {\n                            points: \"6 9 12 15 18 9\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 451,\n                            columnNumber: 11\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 439,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Ver razonamiento\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 453,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 435,\n                columnNumber: 7\n            }, undefined),\n            isOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 p-2 bg-[rgb(30,15,45)] rounded text-zinc-400 whitespace-pre-wrap\",\n                children: reasoning\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 457,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n        lineNumber: 434,\n        columnNumber: 5\n    }, undefined);\n};\n_s(ReasoningSection, \"+sus0Lb0ewKHdwiUhiTAJFoFyQ0=\");\n_c2 = ReasoningSection;\n// Componente para simular el efecto de texto en streaming\nconst StreamingText = (param)=>{\n    let { text, onComplete } = param;\n    _s1();\n    const [displayedText, setDisplayedText] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isComplete, setIsComplete] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let index = 0;\n        const intervalId = setInterval(()=>{\n            setDisplayedText(text.substring(0, index + 1));\n            index++;\n            if (index >= text.length) {\n                clearInterval(intervalId);\n                setIsComplete(true);\n                if (onComplete) onComplete();\n            }\n        }, 5); // Aceleramos la velocidad de tipeo de 15ms a 5ms\n        return ()=>clearInterval(intervalId);\n    }, [\n        text,\n        onComplete\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"whitespace-pre-wrap\",\n        children: displayedText\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n        lineNumber: 486,\n        columnNumber: 10\n    }, undefined);\n};\n_s1(StreamingText, \"WN1VuAEIPMGz60gkJRv2eVErXF0=\");\n_c3 = StreamingText;\nfunction AIChat() {\n    _s2();\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([\n        {\n            id: \"1\",\n            content: \"Hola, soy tu asistente de edici\\xf3n de video. \\xbfEn qu\\xe9 puedo ayudarte?\",\n            role: \"assistant\",\n            timestamp: new Date()\n        }\n    ]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [imageFile, setImageFile] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [imagePreview, setImagePreview] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isUploading, setIsUploading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [lastUploadedImageUrl, setLastUploadedImageUrl] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Estado para realizar un seguimiento del progreso del auto-edit\n    const [autoEditStep, setAutoEditStep] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [isAutoEditing, setIsAutoEditing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const stateManager = (0,_features_editor_hooks_state_manager__WEBPACK_IMPORTED_MODULE_6__.useStateManager)();\n    const { timeline, scenes, playerRef } = (0,_features_editor_store_use_data_state__WEBPACK_IMPORTED_MODULE_5__[\"default\"])();\n    const { duration } = (0,_features_editor_store_use_store__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(); // Obtener la duración del store\n    const commandExecutor = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)((0,_ai_video_commands__WEBPACK_IMPORTED_MODULE_7__.createVideoCommandExecutor)(stateManager));\n    // Añadir estado para el modo (chat o agente)\n    const [mode, setMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"chat\");\n    // Inicializar el CommandExecutorService con el executor actual\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (commandExecutor.current) {\n            _features_editor_services_command_executor_service__WEBPACK_IMPORTED_MODULE_9__[\"default\"].setExecutor(commandExecutor.current);\n            console.log(\"CommandExecutorService inicializado con \\xe9xito\");\n        }\n    }, [\n        commandExecutor.current\n    ]);\n    // Función para realizar la edición automática en modo agente\n    const handleAutoEdit = async ()=>{\n        try {\n            setIsAutoEditing(true);\n            // Función para añadir un mensaje y esperar a que termine de mostrarse\n            const addMessageAndWait = (content)=>{\n                return new Promise((resolve)=>{\n                    const messageId = Date.now().toString();\n                    setMessages((prev)=>[\n                            ...prev,\n                            {\n                                id: messageId,\n                                content: content,\n                                role: \"assistant\",\n                                timestamp: new Date(),\n                                isStreaming: true,\n                                // Pasamos el callback onComplete a través de una propiedad adicional\n                                onStreamingComplete: ()=>resolve()\n                            }\n                        ]);\n                });\n            };\n            // Mensaje inicial explicando el plan\n            await addMessageAndWait(\"Ge:\\n\\n1. Realizar\\xe9 un recorte inteligente del video para eliminar las partes menos relevantes\\n2. A\\xf1adir\\xe9 subt\\xedtulos autom\\xe1ticos al contenido optimizado\\n\\nComenzando proceso...\");\n            // Esperar un poco para que el usuario pueda leer el mensaje inicial\n            await new Promise((resolve)=>setTimeout(resolve, 1000));\n            // Paso 1: Recorte inteligente\n            setAutoEditStep(1);\n            // Mensaje de inicio del recorte inteligente\n            await addMessageAndWait(\"Iniciando recorte inteligente.\\n\\nEstoy analizando el contenido del video para identificar las partes m\\xe1s importantes y eliminar segmentos innecesarios...\");\n            // Ejecutar el recorte inteligente\n            const smartTrimResult = await commandExecutor.current.smartTrim();\n            // Informar al usuario sobre el resultado del recorte\n            if (smartTrimResult) {\n                await addMessageAndWait(\"Recorte inteligente completado.\\n\\nHe identificado y eliminado las partes menos relevantes del video, optimizando la duraci\\xf3n y manteniendo el contenido esencial.\\n\\nProcediendo con el siguiente paso...\");\n            } else {\n                await addMessageAndWait(\"No pude completar el recorte inteligente.\\n\\nEsto puede deberse a que el video no tiene una transcripci\\xf3n adecuada o no se detectaron segmentos para optimizar.\\n\\nContinuar\\xe9 con el siguiente paso...\");\n            }\n            // Paso 2: Añadir subtítulos\n            setAutoEditStep(2);\n            // Mensaje de inicio de añadir subtítulos\n            await addMessageAndWait(\"Generando subt\\xedtulos.\\n\\nEstoy procesando el audio del video para crear subt\\xedtulos sincronizados con el contenido...\");\n            // Configurar opciones para los subtítulos\n            const subtitleOptions = {\n                groupWords: true,\n                startTime: 0,\n                endTime: 1000000 // Hasta el final del video\n            };\n            // Añadir los subtítulos\n            await commandExecutor.current.addSubtitles(subtitleOptions);\n            // Mensaje final con resumen de acciones\n            await addMessageAndWait(\"Edici\\xf3n autom\\xe1tica completada.\\n\\n- Recorte inteligente: Partes irrelevantes eliminadas\\n- Subt\\xedtulos: A\\xf1adidos y sincronizados con el contenido\\n\\nEl video ha sido optimizado para una mejor experiencia de visualizaci\\xf3n.\\n\\n\\xbfDeseas realizar alguna otra mejora?\");\n        } catch (error) {\n            console.error(\"Error en la edici\\xf3n autom\\xe1tica:\", error);\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        id: Date.now().toString(),\n                        content: \"Error durante la edici\\xf3n autom\\xe1tica.\\n\\nHa ocurrido un problema: \".concat(error.message || \"Error desconocido\", \"\\n\\n\\xbfQuieres intentar alguna otra acci\\xf3n?\"),\n                        role: \"assistant\",\n                        timestamp: new Date(),\n                        isStreaming: true\n                    }\n                ]);\n        } finally{\n            await new Promise((resolve)=>setTimeout(resolve, 500));\n            setIsAutoEditing(false);\n            setAutoEditStep(0);\n            setIsLoading(false);\n        }\n    };\n    // Función para reiniciar el chat\n    const resetChat = ()=>{\n        setMessages([\n            {\n                id: Date.now().toString(),\n                content: \"Hola, soy tu asistente de edici\\xf3n de video. \\xbfEn qu\\xe9 puedo ayudarte?\",\n                role: \"assistant\",\n                timestamp: new Date()\n            }\n        ]);\n        setInput(\"\");\n        setImageFile(null);\n        setImagePreview(null);\n        setLastUploadedImageUrl(\"\");\n    };\n    // Scroll al último mensaje\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    }, [\n        messages,\n        isLoading\n    ]);\n    // Actualizar el ejecutor de comandos cuando cambie el stateManager\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        commandExecutor.current = (0,_ai_video_commands__WEBPACK_IMPORTED_MODULE_7__.createVideoCommandExecutor)(stateManager);\n        // Actualizar el servicio con la nueva instancia del ejecutor\n        _features_editor_services_command_executor_service__WEBPACK_IMPORTED_MODULE_9__[\"default\"].setExecutor(commandExecutor.current);\n        console.log(\"CommandExecutorService actualizado con una nueva instancia del ejecutor\");\n    }, [\n        stateManager\n    ]);\n    // Manejar click en el botón de imagen\n    const handleImageClick = ()=>{\n        var _fileInputRef_current;\n        (_fileInputRef_current = fileInputRef.current) === null || _fileInputRef_current === void 0 ? void 0 : _fileInputRef_current.click();\n    };\n    // Manejar selección de archivo de imagen\n    const handleFileChange = (e)=>{\n        var _e_target_files;\n        const file = (_e_target_files = e.target.files) === null || _e_target_files === void 0 ? void 0 : _e_target_files[0];\n        if (file) {\n            setImageFile(file);\n            const previewUrl = URL.createObjectURL(file);\n            setImagePreview(previewUrl);\n        }\n    };\n    // Eliminar la imagen seleccionada\n    const handleRemoveImage = ()=>{\n        setImageFile(null);\n        setImagePreview(null);\n        if (fileInputRef.current) fileInputRef.current.value = \"\";\n    };\n    // Subir imagen al servidor\n    const uploadImage = async (file)=>{\n        try {\n            setIsUploading(true);\n            // Obtener URL firmada para subir la imagen\n            const uploadDetails = await (0,_utils_upload__WEBPACK_IMPORTED_MODULE_8__.createUploadsDetails)(file.name, file);\n            // Si no es un mock local, proceder con la carga\n            if (uploadDetails.uploadUrl !== \"local-mock\") {\n                // Subir la imagen\n                await fetch(uploadDetails.uploadUrl, {\n                    method: \"PUT\",\n                    body: file,\n                    headers: {\n                        \"Content-Type\": file.type\n                    }\n                });\n            }\n            // No se necesita hacer fetch si es un mock local (dataURL)\n            // Retornar la URL pública de la imagen\n            return uploadDetails.url;\n        } catch (error) {\n            console.error(\"Error al subir la imagen:\", error);\n            throw new Error(\"No se pudo subir la imagen. Int\\xe9ntalo de nuevo.\");\n        } finally{\n            setIsUploading(false);\n        }\n    };\n    // Función para enviar mensaje\n    const handleSendMessage = async ()=>{\n        if (!input.trim() && !imageFile || isLoading) return;\n        let userMessage = {\n            id: Date.now().toString(),\n            content: input,\n            role: \"user\",\n            timestamp: new Date()\n        };\n        let uploadedImageUrl = \"\";\n        // Variable para rastrear la URL de la imagen actual para esta solicitud específica\n        let currentImageUrlForThisRequest = \"\";\n        // Si hay una imagen para subir, procesarla\n        if (imageFile) {\n            try {\n                uploadedImageUrl = await uploadImage(imageFile);\n                userMessage.imageUrl = uploadedImageUrl;\n                // Guardar la URL de la imagen para posibles referencias futuras\n                setLastUploadedImageUrl(uploadedImageUrl);\n                // Importante: Guardar la URL actual para esta solicitud específica\n                currentImageUrlForThisRequest = uploadedImageUrl;\n                console.log(\"Imagen subida exitosamente:\", uploadedImageUrl.substring(0, 100) + \"...\");\n            } catch (error) {\n                console.error(\"Error en la subida de imagen:\", error);\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            id: (Date.now() + 1).toString(),\n                            content: \"Error al subir la imagen. Por favor, int\\xe9ntalo de nuevo. Detalles: \" + (error instanceof Error ? error.message : \"Error desconocido\"),\n                            role: \"assistant\",\n                            timestamp: new Date()\n                        }\n                    ]);\n                setIsLoading(false);\n                return;\n            }\n        }\n        // Añadir mensaje del usuario\n        setMessages((prev)=>[\n                ...prev,\n                userMessage\n            ]);\n        setInput(\"\");\n        setImageFile(null);\n        setImagePreview(null);\n        if (fileInputRef.current) fileInputRef.current.value = \"\";\n        setIsLoading(true);\n        // Comprobar si estamos en modo agente y es una solicitud de edición automática\n        if (shouldUseAgent(mode, userMessage.content)) {\n            // Ejecutar edición automática\n            await handleAutoEdit();\n            return;\n        }\n        try {\n            var _playerRef_current, _timeline_canvas_getObjects, _timeline_canvas, _timeline_canvas_getObjects1, _timeline_canvas1;\n            // Enviar a la API para procesamiento en lenguaje natural\n            const apiMessages = messages.concat(userMessage).map((msg)=>{\n                // Si el mensaje tiene una imagen, crear un formato especial para el contenido\n                if (msg.imageUrl) {\n                    // Si es una URL de datos (comienza con data:), usar un marcador especial\n                    const isDataUrl = msg.imageUrl.startsWith(\"data:\");\n                    const imageUrlToSend = isDataUrl ? \"[IMAGEN_ADJUNTA]\" : \"[IMAGEN: \".concat(msg.imageUrl, \"]\");\n                    return {\n                        role: msg.role,\n                        content: \"\".concat(msg.content || \"\", \" \").concat(imageUrlToSend)\n                    };\n                }\n                return {\n                    role: msg.role,\n                    content: msg.content\n                };\n            });\n            // Añadir contexto del editor para la IA externa\n            const contextMessage = {\n                role: \"system\",\n                content: \"\\nContexto actual del editor de video:\\n- Posici\\xf3n actual (segundos): \".concat((playerRef === null || playerRef === void 0 ? void 0 : (_playerRef_current = playerRef.current) === null || _playerRef_current === void 0 ? void 0 : _playerRef_current.getCurrentTime) ? Math.floor((playerRef.current.getCurrentTime() || 0) * 100) / 100 : 0, \"\\n- Duraci\\xf3n del proyecto (segundos): \").concat((timeline === null || timeline === void 0 ? void 0 : timeline.duration) ? Math.floor(timeline.duration / 1000) : 0, \"\\n- N\\xfamero de escenas: \").concat((scenes === null || scenes === void 0 ? void 0 : scenes.length) || 0, \"\\n- N\\xfamero de elementos en el timeline: \").concat(((timeline === null || timeline === void 0 ? void 0 : (_timeline_canvas = timeline.canvas) === null || _timeline_canvas === void 0 ? void 0 : (_timeline_canvas_getObjects = _timeline_canvas.getObjects) === null || _timeline_canvas_getObjects === void 0 ? void 0 : _timeline_canvas_getObjects.call(_timeline_canvas)) || []).length - 1 > 0 ? ((timeline === null || timeline === void 0 ? void 0 : (_timeline_canvas1 = timeline.canvas) === null || _timeline_canvas1 === void 0 ? void 0 : (_timeline_canvas_getObjects1 = _timeline_canvas1.getObjects) === null || _timeline_canvas_getObjects1 === void 0 ? void 0 : _timeline_canvas_getObjects1.call(_timeline_canvas1)) || []).length - 1 : 0, \"\\n\").concat(lastUploadedImageUrl ? \"- \\xdaltima imagen compartida por el usuario disponible para usar\" : \"\", '\\n\\nEl usuario puede expresar en lenguaje natural la necesidad de agregar elementos al video.\\nEjemplos:\\n- \"Pon un t\\xedtulo que diga \\'Bienvenidos\\' al inicio\"\\n- \"Quiero un texto blanco que diga \\'Fin\\' al final del video\"\\n- \"Necesito una imagen en el segundo 10\"\\n- \"Coloca un video de introducci\\xf3n al principio\"\\n\\nSi el usuario adjunta una imagen en el mensaje, la URL estar\\xe1 en formato [IMAGEN: url_de_la_imagen].\\nDebes detectar si quiere agregar esta imagen al video y en qu\\xe9 momento temporal.\\n')\n            };\n            try {\n                var _data_message, _elementData_element;\n                // Usar la API correcta según el modo\n                const apiEndpoint = mode === \"agent\" ? \"/api/ai-chat-agent\" : \"/api/ai-chat\";\n                const response = await fetch(apiEndpoint, {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        messages: [\n                            contextMessage,\n                            ...apiMessages\n                        ],\n                        // Usar la URL de la imagen actual para esta solicitud si existe,\n                        // de lo contrario usar la última URL guardada\n                        lastImageUrl: currentImageUrlForThisRequest || lastUploadedImageUrl || \"\"\n                    }),\n                    // Agregar timeout para evitar esperas infinitas\n                    signal: AbortSignal.timeout(15000) // 15 segundos máximo\n                });\n                if (!response.ok) {\n                    throw new Error(\"Error de API: \".concat(response.status, \" \").concat(response.statusText));\n                }\n                const data = await response.json();\n                // Asegurarse de que data.message.content existe\n                const aiResponse = (data === null || data === void 0 ? void 0 : (_data_message = data.message) === null || _data_message === void 0 ? void 0 : _data_message.content) || \"Lo siento, no pude entender tu solicitud.\";\n                // Obtener los datos del elemento si existen (con verificación segura)\n                const elementData = data === null || data === void 0 ? void 0 : data.elementData;\n                // Variable para la respuesta final\n                let finalResponse = aiResponse;\n                // Crear una referencia a la respuesta final para que sea accesible en la función procesadora\n                const finalResponseRef = {\n                    current: finalResponse\n                };\n                let elementAdded = false;\n                // Usar la función de procesamiento de elementos\n                const processResult = await processDetectedElement(elementData, commandExecutor, finalResponseRef, timeline, lastUploadedImageUrl, currentImageUrlForThisRequest);\n                finalResponse = processResult.finalResponse;\n                elementAdded = processResult.elementAdded;\n                // Crear mensaje con los detalles completos\n                const newMessage = {\n                    id: Date.now().toString(),\n                    content: finalResponse || data.message.content,\n                    role: \"assistant\",\n                    timestamp: new Date()\n                };\n                // Si se detectó un elemento de música, agregar las opciones al mensaje\n                if ((elementData === null || elementData === void 0 ? void 0 : elementData.detected) && ((_elementData_element = elementData.element) === null || _elementData_element === void 0 ? void 0 : _elementData_element.type) === \"music\" && Array.isArray(elementData.element.options)) {\n                    newMessage.musicOptions = elementData.element.options;\n                    console.log(\"Opciones de m\\xfasica agregadas al mensaje:\", newMessage.musicOptions);\n                }\n                // Actualizar mensajes\n                setMessages((prev)=>[\n                        ...prev,\n                        newMessage\n                    ]);\n            } catch (apiError) {\n                console.error(\"Error en la comunicaci\\xf3n con la API:\", apiError);\n                // Mensaje de error específico de API\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            id: (Date.now() + 1).toString(),\n                            content: \"Lo siento, ha ocurrido un error al comunicarse con el servicio de IA. Por favor, intenta de nuevo en unos momentos.\",\n                            role: \"assistant\",\n                            timestamp: new Date()\n                        }\n                    ]);\n            }\n        } catch (error) {\n            console.error(\"Error al procesar el mensaje:\", error);\n            // Determinar mensaje de error apropiado\n            let errorMessage = \"Lo siento, ha ocurrido un error al procesar tu mensaje.\";\n            if (error instanceof Error) {\n                if (error.message.includes(\"timeout\") || error.message.includes(\"abort\")) {\n                    errorMessage = \"La solicitud ha tardado demasiado. Prueba con un mensaje m\\xe1s corto.\";\n                } else if (error.message.includes(\"network\") || error.message.includes(\"fetch\")) {\n                    errorMessage = \"Parece que hay un problema de conexi\\xf3n. Verifica tu conexi\\xf3n a internet e intenta de nuevo.\";\n                }\n            }\n            // Mensaje de error\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        id: (Date.now() + 1).toString(),\n                        content: errorMessage,\n                        role: \"assistant\",\n                        timestamp: new Date()\n                    }\n                ]);\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    // Función para manejar la selección de música\n    const handleMusicSelect = async (musicPath)=>{\n        try {\n            console.log(\"Usuario seleccion\\xf3 m\\xfasica: \".concat(musicPath));\n            // Calcular la duración del video en segundos usando el duration del store\n            const videoDuration = duration ? Math.floor(duration / 1000) : 300; // 5 minutos por defecto\n            console.log(\"Duraci\\xf3n del video (desde useStore): \".concat(videoDuration, \" segundos\"));\n            // Configuración de opciones para la música\n            const musicOptions = {\n                startTime: 0,\n                endTime: videoDuration,\n                volume: 80,\n                fadeIn: true,\n                fadeOut: true,\n                respectNativeDuration: true // Respetar la duración natural de la música\n            };\n            // Añadir la música al timeline (respetará la duración natural si es más corta que el video)\n            commandExecutor.current.addMusic(musicPath, musicOptions);\n            // Obtener un nombre amigable para la música\n            const getMusicFriendlyName = (path)=>{\n                const filename = path.split(\"/\").pop() || path;\n                if (filename === \"song1.mp3\") return \"M\\xfasica Energ\\xe9tica\";\n                if (filename === \"song2.mp3\") return \"Melod\\xeda Relajante\";\n                return filename;\n            };\n            // Añadir un mensaje de confirmación\n            const musicName = getMusicFriendlyName(musicPath);\n            const confirmationMsg = {\n                id: Date.now().toString(),\n                content: 'He a\\xf1adido \"'.concat(musicName, '\" a tu video. La m\\xfasica se adaptar\\xe1 autom\\xe1ticamente: si es m\\xe1s corta que el video, mantendr\\xe1 su duraci\\xf3n natural; si es m\\xe1s larga, se ajustar\\xe1 a la duraci\\xf3n del video (').concat(videoDuration, \" segundos).\"),\n                role: \"assistant\",\n                timestamp: new Date()\n            };\n            setMessages((prev)=>[\n                    ...prev,\n                    confirmationMsg\n                ]);\n        } catch (error) {\n            console.error(\"Error al a\\xf1adir m\\xfasica:\", error);\n            // Mensaje de error\n            const errorMsg = {\n                id: Date.now().toString(),\n                content: \"No se pudo a\\xf1adir la m\\xfasica. Error: \".concat(error.message || \"Error desconocido\"),\n                role: \"assistant\",\n                timestamp: new Date()\n            };\n            setMessages((prev)=>[\n                    ...prev,\n                    errorMsg\n                ]);\n        }\n    };\n    // Manejar cambio de modo\n    const handleModeChange = (newMode)=>{\n        // Si el modo es diferente, cambiar y reiniciar la conversación\n        if (newMode !== mode) {\n            setMode(newMode);\n            // Mensaje inicial específico según el modo\n            const initialMessage = newMode === \"chat\" ? \"Hola, soy tu asistente de edici\\xf3n de video. \\xbfEn qu\\xe9 puedo ayudarte?\" : \"Hola, soy tu asistente de edici\\xf3n de video. \\xbfEn qu\\xe9 puedo ayudarte?\";\n            // Reiniciar la conversación con el mensaje apropiado\n            setMessages([\n                {\n                    id: Date.now().toString(),\n                    content: initialMessage,\n                    role: \"assistant\",\n                    timestamp: new Date(),\n                    // Marcar el mensaje como inicial para evitar mostrar razonamiento\n                    isInitial: true,\n                    // Ya no aplicamos streaming al mensaje inicial\n                    isStreaming: false\n                }\n            ]);\n            // Limpiar otros estados\n            setInput(\"\");\n            setImageFile(null);\n            setImagePreview(null);\n            setLastUploadedImageUrl(\"\");\n            setAutoEditStep(0);\n            setIsAutoEditing(false);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex h-full flex-col bg-[rgb(20,10,30)] border-l border-purple-800/30\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-[rgb(30,15,45)] p-3 flex justify-between items-center border-b border-purple-800/30\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"h-7 w-7 rounded flex items-center justify-center bg-purple-700\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                                    className: \"h-3.5 w-3.5 text-white\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 1001,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1000,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                className: \"font-medium text-white text-sm\",\n                                children: \"Asistente IA\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1003,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 999,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center bg-[rgb(40,20,60)] rounded-full p-0.5 mx-auto\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>handleModeChange(\"chat\"),\n                                className: \"px-3 py-1 text-xs rounded-full transition-all \".concat(mode === \"chat\" ? \"bg-purple-700 text-white font-medium\" : \"text-purple-300 hover:text-white\"),\n                                children: \"Chat\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1008,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>handleModeChange(\"agent\"),\n                                className: \"px-3 py-1 text-xs rounded-full transition-all \".concat(mode === \"agent\" ? \"bg-purple-700 text-white font-medium\" : \"text-purple-300 hover:text-white\"),\n                                children: \"Agente\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1018,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 1007,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-1\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                            variant: \"ghost\",\n                            size: \"icon\",\n                            className: \"h-7 w-7 rounded hover:bg-purple-800/20\",\n                            onClick: resetChat,\n                            title: \"Reiniciar conversaci\\xf3n\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                                className: \"h-3.5 w-3.5 text-zinc-300\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1038,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 1031,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 1030,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 998,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 overflow-hidden relative max-h-[calc(100%-120px)]\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_4__.ScrollArea, {\n                    className: \"h-full pr-2 chat-scrollbar absolute inset-0\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"p-3 space-y-3\",\n                        children: [\n                            messages.map((message)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex flex-col animate-fadeIn \".concat(message.role === \"assistant\" ? \"items-start\" : \"items-end\"),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"max-w-[85%] rounded-md px-4 py-2 \".concat(message.role === \"assistant\" ? \"bg-[rgb(40,20,60)] text-zinc-200\" : \"bg-purple-700 text-white\"),\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"whitespace-pre-wrap text-sm markdown-content\",\n                                                    children: message.isStreaming ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(StreamingText, {\n                                                        text: message.content,\n                                                        onComplete: message.onStreamingComplete\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                        lineNumber: 1063,\n                                                        columnNumber: 23\n                                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_markdown__WEBPACK_IMPORTED_MODULE_13__.Markdown, {\n                                                        children: message.content\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                        lineNumber: 1068,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                    lineNumber: 1061,\n                                                    columnNumber: 19\n                                                }, this),\n                                                message.imageUrl && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"mt-2 rounded overflow-hidden\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                        src: message.imageUrl,\n                                                        alt: \"Imagen adjunta\",\n                                                        className: \"max-h-48 max-w-full object-contain\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                        lineNumber: 1075,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                    lineNumber: 1074,\n                                                    columnNumber: 21\n                                                }, this),\n                                                message.musicOptions && message.musicOptions.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MusicOptions, {\n                                                    options: message.musicOptions,\n                                                    onSelectMusic: handleMusicSelect\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                    lineNumber: 1083,\n                                                    columnNumber: 21\n                                                }, this),\n                                                mode === \"agent\" && message.role === \"assistant\" && !message.isInitial && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ReasoningSection, {\n                                                    reasoning: generateReasoning(message.content)\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                    lineNumber: 1091,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                            lineNumber: 1054,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-[10px] mt-0.5 px-1 \".concat(message.role === \"assistant\" ? \"text-zinc-500\" : \"text-purple-300\"),\n                                            children: message.timestamp.toLocaleTimeString([], {\n                                                hour: \"2-digit\",\n                                                minute: \"2-digit\"\n                                            })\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                            lineNumber: 1094,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, message.id, true, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 1048,\n                                    columnNumber: 15\n                                }, this)),\n                            isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ThinkingAnimation, {}, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1099,\n                                columnNumber: 27\n                            }, this),\n                            isAutoEditing && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex flex-col items-start animate-fadeIn\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"max-w-[85%] rounded-md px-4 py-3 bg-[rgb(40,20,60)] text-zinc-200\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex flex-col\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex items-center gap-3\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"h-8 w-8 rounded-full bg-purple-800/50 flex items-center justify-center\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                                                        className: \"h-5 w-5 text-purple-300 animate-spin\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                        lineNumber: 1106,\n                                                        columnNumber: 25\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                    lineNumber: 1105,\n                                                    columnNumber: 23\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex flex-col\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-sm font-medium text-white\",\n                                                        children: [\n                                                            \"Procesando video\",\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                className: \"animate-pulse\",\n                                                                children: \"...\"\n                                                            }, void 0, false, {\n                                                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                                lineNumber: 1111,\n                                                                columnNumber: 27\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                        lineNumber: 1109,\n                                                        columnNumber: 25\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                                    lineNumber: 1108,\n                                                    columnNumber: 23\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                            lineNumber: 1104,\n                                            columnNumber: 21\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                        lineNumber: 1103,\n                                        columnNumber: 19\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 1102,\n                                    columnNumber: 17\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1101,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                ref: messagesEndRef,\n                                className: \"h-2\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1119,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 1046,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                    lineNumber: 1045,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 1044,\n                columnNumber: 7\n            }, this),\n            imagePreview && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative mx-3 mt-1 mb-2 h-24 bg-[rgb(30,15,45)] p-2 flex items-center justify-center rounded border border-purple-800/30\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                        variant: \"ghost\",\n                        size: \"icon\",\n                        className: \"absolute right-1 top-1 z-10 h-5 w-5 rounded-full bg-black/50\",\n                        onClick: handleRemoveImage,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                            className: \"h-3 w-3 text-white\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                            lineNumber: 1133,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 1127,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                        src: imagePreview,\n                        alt: \"Vista previa\",\n                        className: \"max-h-full max-w-full object-contain\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 1135,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 1126,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-[rgb(30,15,45)] p-3 border-t border-purple-800/30\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center gap-2\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex rounded overflow-hidden border border-purple-900/50 flex-1 bg-[rgb(25,12,40)]\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                                variant: \"ghost\",\n                                size: \"icon\",\n                                className: \"h-9 w-9 bg-transparent hover:bg-purple-800/20\",\n                                onClick: handleImageClick,\n                                disabled: isLoading || isAutoEditing,\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n                                    className: \"h-4 w-4 text-zinc-400\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 1154,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1147,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_input__WEBPACK_IMPORTED_MODULE_3__.Input, {\n                                value: input,\n                                onChange: (e)=>setInput(e.target.value),\n                                onKeyDown: (e)=>{\n                                    if (e.key === \"Enter\" && !e.shiftKey) {\n                                        e.preventDefault();\n                                        handleSendMessage();\n                                    }\n                                },\n                                placeholder: mode === \"agent\" ? \"Escribe 'edita el video' para comenzar...\" : \"Escribe tu mensaje...\",\n                                disabled: isLoading || isAutoEditing,\n                                className: \"flex-1 border-0 bg-transparent h-9 focus:ring-0 focus-visible:ring-0 text-zinc-200\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1157,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                                onClick: handleSendMessage,\n                                disabled: !input.trim() && !imageFile || isLoading || isAutoEditing,\n                                className: \"h-9 px-3 rounded-none \".concat(!input.trim() && !imageFile || isLoading || isAutoEditing ? \"bg-purple-900/50 cursor-not-allowed text-purple-300/50\" : \"bg-purple-700 hover:bg-purple-600 text-white\"),\n                                children: isLoading || isUploading || isAutoEditing ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                                    className: \"h-4 w-4 animate-spin\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 1181,\n                                    columnNumber: 17\n                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ImageIcon_Loader2_RefreshCw_Send_Sparkles_X_lucide_react__WEBPACK_IMPORTED_MODULE_17__[\"default\"], {\n                                    className: \"h-3.5 w-3.5\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                    lineNumber: 1183,\n                                    columnNumber: 17\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                                lineNumber: 1171,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                        lineNumber: 1146,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                    lineNumber: 1145,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 1144,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                type: \"file\",\n                ref: fileInputRef,\n                onChange: handleFileChange,\n                accept: \"image/*\",\n                className: \"hidden\",\n                disabled: isLoading || isAutoEditing\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n                lineNumber: 1190,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\components\\\\ai-chat\\\\index.tsx\",\n        lineNumber: 996,\n        columnNumber: 5\n    }, this);\n}\n_s2(AIChat, \"zSf9oIbobI4Gwu5cNUFZZbnjaxk=\", false, function() {\n    return [\n        _features_editor_hooks_state_manager__WEBPACK_IMPORTED_MODULE_6__.useStateManager,\n        _features_editor_store_use_data_state__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n        _features_editor_store_use_store__WEBPACK_IMPORTED_MODULE_10__[\"default\"]\n    ];\n});\n_c4 = AIChat;\n// Función para generar razonamiento ficticio basado en el contenido del mensaje\nfunction generateReasoning(content) {\n    // Detectar si es un mensaje relacionado con el modo de edición automática\n    if (content.includes(\"Subt\\xedtulos\") || content.includes(\"Recorte inteligente\") || content.includes(\"Plan de edici\\xf3n\") || content.includes(\"edici\\xf3n autom\\xe1tica\")) {\n        // Determinar el tipo de mensaje\n        let etapa = \"Planificaci\\xf3n\";\n        if (content.includes(\"Iniciando recorte\")) {\n            etapa = \"An\\xe1lisis de contenido\";\n        } else if (content.includes(\"Recorte inteligente completado\")) {\n            etapa = \"Optimizaci\\xf3n de video\";\n        } else if (content.includes(\"Generando subt\\xedtulos\")) {\n            etapa = \"Transcripci\\xf3n y sincronizaci\\xf3n\";\n        } else if (content.includes(\"Edici\\xf3n autom\\xe1tica completada\")) {\n            etapa = \"Finalizaci\\xf3n\";\n        }\n        return \"AN\\xc1LISIS:\\n• Tipo: Edici\\xf3n autom\\xe1tica\\n• Etapa: \".concat(etapa, '\\n• Contexto: Proceso secuencial de optimizaci\\xf3n de video\\n\\nPROCESO:\\n1. Analizar la instrucci\\xf3n del usuario (\"edita el video\")\\n2. Determinar las acciones m\\xe1s beneficiosas (recorte + subt\\xedtulos)\\n3. Ejecutar secuencialmente para mantener calidad\\n4. Reportar progreso de forma clara y concisa\\n\\nRAZONAMIENTO:\\nEl usuario busca mejorar su video sin tener que especificar detalles t\\xe9cnicos.\\nLa combinaci\\xf3n de recorte inteligente seguido de subt\\xedtulos ofrece el mejor\\nbalance entre duraci\\xf3n optimizada y accesibilidad del contenido.');\n    }\n    // Para otros mensajes, mantener un razonamiento general\n    return \"AN\\xc1LISIS:\\n• Tipo: Interacci\\xf3n est\\xe1ndar\\n• Contexto: Asistencia en edici\\xf3n de video\\n\\nPROCESO:\\n1. Interpretar solicitud del usuario\\n2. Proporcionar informaci\\xf3n relevante\\n3. Ofrecer opciones de acci\\xf3n apropiadas\\n\\nRAZONAMIENTO:\\nLa respuesta se ha dise\\xf1ado para ser clara y directa,\\nproporcionando la informaci\\xf3n necesaria sin elementos\\ndistractores o irrelevantes para la tarea actual.\";\n}\nvar _c, _c1, _c2, _c3, _c4;\n$RefreshReg$(_c, \"MusicOptions\");\n$RefreshReg$(_c1, \"ThinkingAnimation\");\n$RefreshReg$(_c2, \"ReasoningSection\");\n$RefreshReg$(_c3, \"StreamingText\");\n$RefreshReg$(_c4, \"AIChat\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvYWktY2hhdC9pbmRleC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVvRDtBQUNKO0FBQ0Y7QUFDVztBQUN1QjtBQUNkO0FBQ007QUFDZTtBQUNqQztBQUNtQztBQUNoQztBQUNkO0FBRTNDLDBEQUEwRDtBQUMxRCxTQUFTbUIsZUFBZUMsSUFBc0IsRUFBRUMsT0FBZTtJQUM3RCxJQUFJRCxTQUFTLFNBQVMsT0FBTztJQUU3QiwwRkFBMEY7SUFDMUYsTUFBTUUsbUJBQW1CO1FBQ3ZCO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNEO0lBRUQsT0FBT0EsaUJBQWlCQyxJQUFJLENBQUNDLENBQUFBLFVBQVdBLFFBQVFDLElBQUksQ0FBQ0osUUFBUUssSUFBSTtBQUNuRTtBQUVBLGtGQUFrRjtBQUNsRixTQUFTQyw2QkFBNkJDLGNBQXNCO0lBQzFELElBQUlDLFlBQVk7SUFDaEIsSUFBSUMsVUFBVTtJQUVkLElBQUksQ0FBQ0YsZ0JBQWdCLE9BQU87UUFBRUM7UUFBV0M7SUFBUTtJQUVqRCx1Q0FBdUM7SUFDdkMsTUFBTUMsb0JBQW9CO1FBQ3hCO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNEO0lBRUQscUNBQXFDO0lBQ3JDLE1BQU1DLGtCQUFrQjtRQUN0QjtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBQ0Q7SUFFRCxtQ0FBbUM7SUFDbkMsTUFBTUMsWUFBWSw0Q0FBNENSLElBQUksQ0FBQ0c7SUFDbkUsTUFBTU0sVUFBVSx1Q0FBdUNULElBQUksQ0FBQ0c7SUFFNUQsc0NBQXNDO0lBQ3RDLEtBQUssTUFBTUosV0FBV08sa0JBQW1CO1FBQ3ZDLE1BQU1JLFFBQVFQLGVBQWVPLEtBQUssQ0FBQ1g7UUFDbkMsSUFBSVcsU0FBU0EsS0FB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QU8sSUFBSTFOLFFBQVFoQixRQUFRLENBQUMsbUNBQW1DO1lBQzdEME8sUUFBUTtRQUNWLE9BQU8sSUFBSTFOLFFBQVFoQixRQUFRLENBQUMsNEJBQXlCO1lBQ25EME8sUUFBUTtRQUNWLE9BQU8sSUFBSTFOLFFBQVFoQixRQUFRLENBQUMsd0NBQWtDO1lBQzVEME8sUUFBUTtRQUNWO1FBRUEsT0FBTyw0REFFTSxPQUFOQSxPQUFNO0lBYWY7SUFFQSx3REFBd0Q7SUFDeEQsT0FBUTtBQWFWIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvYWktY2hhdC9pbmRleC50c3g/NGI5NyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2J1dHRvblwiO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2lucHV0XCI7XG5pbXBvcnQgeyBTY3JvbGxBcmVhIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9zY3JvbGwtYXJlYVwiO1xuaW1wb3J0IHsgU2VuZCwgTG9hZGVyMiwgSW1hZ2VJY29uLCBYLCBTcGFya2xlcywgUmVmcmVzaEN3IH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuaW1wb3J0IHVzZURhdGFTdGF0ZSBmcm9tIFwiQC9mZWF0dXJlcy9lZGl0b3Ivc3RvcmUvdXNlLWRhdGEtc3RhdGVcIjtcbmltcG9ydCB7IHVzZVN0YXRlTWFuYWdlciB9IGZyb20gXCJAL2ZlYXR1cmVzL2VkaXRvci9ob29rcy9zdGF0ZS1tYW5hZ2VyXCI7XG5pbXBvcnQgeyBjcmVhdGVWaWRlb0NvbW1hbmRFeGVjdXRvciwgVmlkZW9Db21tYW5kRXhlY3V0b3IgfSBmcm9tIFwiLi9haS12aWRlby1jb21tYW5kc1wiO1xuaW1wb3J0IHsgY3JlYXRlVXBsb2Fkc0RldGFpbHMgfSBmcm9tIFwiQC91dGlscy91cGxvYWRcIjtcbmltcG9ydCBDb21tYW5kRXhlY3V0b3JTZXJ2aWNlIGZyb20gXCJAL2ZlYXR1cmVzL2VkaXRvci9zZXJ2aWNlcy9jb21tYW5kLWV4ZWN1dG9yLXNlcnZpY2VcIjtcbmltcG9ydCB1c2VTdG9yZSBmcm9tIFwiQC9mZWF0dXJlcy9lZGl0b3Ivc3RvcmUvdXNlLXN0b3JlXCI7XG5pbXBvcnQgUmVhY3RNYXJrZG93biBmcm9tIFwicmVhY3QtbWFya2Rvd25cIjtcblxuLy8gSW5kaWNhIHNpIGxhIHNvbGljaXR1ZCBkZWJlIHNlciBwcm9jZXNhZGEgcG9yIGVsIGFnZW50ZVxuZnVuY3Rpb24gc2hvdWxkVXNlQWdlbnQobW9kZTogXCJjaGF0XCIgfCBcImFnZW50XCIsIG1lc3NhZ2U6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBpZiAobW9kZSAhPT0gXCJhZ2VudFwiKSByZXR1cm4gZmFsc2U7XG5cbiAgLy8gUGF0cm9uZXMgcXVlIGluZGljYW4gcXVlIGVsIHVzdWFyaW8gcXVpZXJlIHF1ZSBlbCBhZ2VudGUgZWRpdGUgYXV0b23DoXRpY2FtZW50ZSBlbCB2aWRlb1xuICBjb25zdCBhdXRvRWRpdFBhdHRlcm5zID0gW1xuICAgIC9lZGl0YVxccysoZWx8ZXN0ZXxtaSk/XFxzKnZpZGVvL2ksXG4gICAgL21lam9yYVxccysoZWx8ZXN0ZXxtaSk/XFxzKnZpZGVvL2ksXG4gICAgL29wdGltaXphXFxzKyhlbHxlc3RlfG1pKT9cXHMqdmlkZW8vaSxcbiAgICAvcHJvY2VzYVxccysoZWx8ZXN0ZXxtaSk/XFxzKnZpZGVvL2ksXG4gICAgL2FycmVnbGFcXHMrKGVsfGVzdGV8bWkpP1xccyp2aWRlby9pLFxuICAgIC9tb2RpZmljYVxccysoZWx8ZXN0ZXxtaSk/XFxzKnZpZGVvL2ksXG4gICAgL3RyYWJhamFcXHMrKGVufGNvbilcXHMrKGVsfGVzdGV8bWkpP1xccyp2aWRlby9pLFxuICAgIC9wdWVkZXNcXHMrZWRpdGFyL2ksXG4gICAgL15lZGl0YSQvaSxcbiAgICAvXmVkaXRhciQvaSxcbiAgICAvXm1lam9yYSQvaSxcbiAgICAvXm9wdGltaXphJC9pLFxuICBdO1xuXG4gIHJldHVybiBhdXRvRWRpdFBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QobWVzc2FnZS50cmltKCkpKTtcbn1cblxuLy8gRnVuY2nDs24gcGFyYSBleHRyYWVyIHRpZW1wb3MgZGUgaW5pY2lvIHkgZmluIGRlIHVuYSBpbWFnZW4gYSBwYXJ0aXIgZGVsIG1lbnNhamVcbmZ1bmN0aW9uIGV4dHJhY3RJbWFnZVRpbWVzRnJvbU1lc3NhZ2UobWVzc2FnZUNvbnRlbnQ6IHN0cmluZyk6IHsgc3RhcnRUaW1lOiBudW1iZXIsIGVuZFRpbWU6IG51bWJlciB9IHtcbiAgbGV0IHN0YXJ0VGltZSA9IDA7XG4gIGxldCBlbmRUaW1lID0gNTtcblxuICBpZiAoIW1lc3NhZ2VDb250ZW50KSByZXR1cm4geyBzdGFydFRpbWUsIGVuZFRpbWUgfTtcblxuICAvLyBCdXNjYXIgcmVmZXJlbmNpYXMgYWwgdGllbXBvIGluaWNpYWxcbiAgY29uc3Qgc3RhcnRUaW1lUGF0dGVybnMgPSBbXG4gICAgL2VuIGVsIHNlZ3VuZG8gKFxcZCspL2ksXG4gICAgL2Rlc2RlIGVsIHNlZ3VuZG8gKFxcZCspL2ksXG4gICAgL2EgcGFydGlyIGRlbCBzZWd1bmRvIChcXGQrKS9pLFxuICAgIC9jb21lbnphbmRvIGVuIGVsIHNlZ3VuZG8gKFxcZCspL2ksXG4gICAgL2Rlc2RlIGVsIG1pbnV0byAoXFxkKykvaSwgLy8gQ29udmVydGlyIG1pbnV0b3MgYSBzZWd1bmRvc1xuICAgIC9lbiBlbCBtaW51dG8gKFxcZCspL2ksICAgIC8vIENvbnZlcnRpciBtaW51dG9zIGEgc2VndW5kb3NcbiAgICAvZW50cmUgbG9zIHNlZ3VuZG9zIChcXGQrKSB5L2ksIC8vIENhcHR1cmEgZWwgcHJpbWVyIG7Dum1lcm8gZW4gXCJlbnRyZSBYIHkgWVwiXG4gICAgL2RlbCBzZWd1bmRvIChcXGQrKSBhbC9pLFxuICAgIC9lbXBlemFuZG8gZW4gKFxcZCspL2ksXG4gICAgL3NlZ3VuZG8gKFxcZCspL2ksICAgICAvLyBQYXRyw7NuIG3DoXMgZ2VuZXJhbCBwYXJhIGNhcHR1cmFyIFwic2VndW5kbyBYXCJcbiAgICAvZW4gKFxcZCspIHNlZ3VuZG9zL2ksIC8vIFwiZW4gWCBzZWd1bmRvc1wiXG4gICAgL2VuIGVsIChcXGQrKS9pLCAgICAgICAvLyBcImVuIGVsIFhcIiAoY3VhbmRvIHNlIHJlZmllcmUgYSBzZWd1bmRvcylcbiAgXTtcblxuICAvLyBCdXNjYXIgcmVmZXJlbmNpYXMgYWwgdGllbXBvIGZpbmFsXG4gIGNvbnN0IGVuZFRpbWVQYXR0ZXJucyA9IFtcbiAgICAvaGFzdGEgZWwgc2VndW5kbyAoXFxkKykvaSxcbiAgICAvYWwgc2VndW5kbyAoXFxkKykvaSxcbiAgICAvdGVybWluYW5kbyBlbiBlbCBzZWd1bmRvIChcXGQrKS9pLFxuICAgIC9oYXN0YSBlbCBtaW51dG8gKFxcZCspL2ksIC8vIENvbnZlcnRpciBtaW51dG9zIGEgc2VndW5kb3NcbiAgICAvZW50cmUgbG9zIHNlZ3VuZG9zIFxcZCsgeSAoXFxkKykvaSwgLy8gQ2FwdHVyYSBlbCBzZWd1bmRvIG7Dum1lcm8gZW4gXCJlbnRyZSBYIHkgWVwiXG4gICAgL2RlbCBzZWd1bmRvIFxcZCsgYWwgKFxcZCspL2ksXG4gICAgL3BvciAoXFxkKykgc2VndW5kb3MvaSwgLy8gRHVyYWNpw7NuIHJlbGF0aXZhXG4gICAgL2R1cmFudGUgKFxcZCspIHNlZ3VuZG9zL2ksIC8vIER1cmFjacOzbiByZWxhdGl2YVxuICBdO1xuXG4gIC8vIEJ1c2NhciBwYWxhYnJhcyBjbGF2ZSBlc3BlY2lhbGVzXG4gIGNvbnN0IGlzQXRTdGFydCA9IC9cXGIoYWwgaW5pY2lvfGFsIHByaW5jaXBpb3xhbCBjb21pZW56bylcXGIvaS50ZXN0KG1lc3NhZ2VDb250ZW50KTtcbiAgY29uc3QgaXNBdEVuZCA9IC9cXGIoYWwgZmluYWx8YWwgdMOpcm1pbm98YWwgYWNhYmFyKVxcYi9pLnRlc3QobWVzc2FnZUNvbnRlbnQpO1xuXG4gIC8vIFByb2Nlc2FyIHBhdHJvbmVzIGRlIHRpZW1wbyBpbmljaWFsXG4gIGZvciAoY29uc3QgcGF0dGVybiBvZiBzdGFydFRpbWVQYXR0ZXJucykge1xuICAgIGNvbnN0IG1hdGNoID0gbWVzc2FnZUNvbnRlbnQubWF0Y2gocGF0dGVybik7XG4gICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XG4gICAgICAvLyBTaSBlcyByZWZlcmVuY2lhIGEgbWludXRvcywgY29udmVydGlyIGEgc2VndW5kb3NcbiAgICAgIHN0YXJ0VGltZSA9IHBhdHRlcm4udG9TdHJpbmcoKS5pbmNsdWRlcygnbWludXRvJylcbiAgICAgICAgPyBwYXJzZUludChtYXRjaFsxXSkgKiA2MFxuICAgICAgICA6IHBhcnNlSW50KG1hdGNoWzFdKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vIFByb2Nlc2FyIHBhdHJvbmVzIGRlIHRpZW1wbyBmaW5hbFxuICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgZW5kVGltZVBhdHRlcm5zKSB7XG4gICAgY29uc3QgbWF0Y2ggPSBtZXNzYWdlQ29udGVudC5tYXRjaChwYXR0ZXJuKTtcbiAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgIGlmIChwYXR0ZXJuLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ3BvcicpIHx8IHBhdHRlcm4udG9TdHJpbmcoKS5pbmNsdWRlcygnZHVyYW50ZScpKSB7XG4gICAgICAgIC8vIEVzIHVuYSBkdXJhY2nDs24gcmVsYXRpdmEsIHN1bWFyIGFsIHRpZW1wbyBpbmljaWFsXG4gICAgICAgIGVuZFRpbWUgPSBzdGFydFRpbWUgKyBwYXJzZUludChtYXRjaFsxXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBFcyB1biB0aWVtcG8gYWJzb2x1dG9cbiAgICAgICAgZW5kVGltZSA9IHBhdHRlcm4udG9TdHJpbmcoKS5pbmNsdWRlcygnbWludXRvJylcbiAgICAgICAgICA/IHBhcnNlSW50KG1hdGNoWzFdKSAqIDYwXG4gICAgICAgICAgOiBwYXJzZUludChtYXRjaFsxXSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvLyBTaSBzZSBtZW5jaW9uYSBcImFsIGluaWNpb1wiLCBlc3RhYmxlY2VyIHRpZW1wbyBhIDBcbiAgaWYgKGlzQXRTdGFydCkge1xuICAgIHN0YXJ0VGltZSA9IDA7XG4gICAgZW5kVGltZSA9IDU7IC8vIFBvciBkZWZlY3RvIDUgc2VndW5kb3MgZGUgZHVyYWNpw7NuXG4gIH1cblxuICAvLyBTaSBzZSBtZW5jaW9uYSBcImFsIGZpbmFsXCIsIGVzdGFibGVjZXIgdmFsb3JlcyByZWxhdGl2b3MgYWwgZmluYWxcbiAgLy8gTm90YTogRWwgdmFsb3IgcmVhbCBzZSBhanVzdGFyw6EgZW4gZWwgY2xpZW50ZSBzZWfDum4gbGEgZHVyYWNpw7NuXG4gIGlmIChpc0F0RW5kKSB7XG4gICAgc3RhcnRUaW1lID0gLTE7IC8vIEPDs2RpZ28gZXNwZWNpYWwgcGFyYSBcImZpbmFsIC0gNSBzZWd1bmRvc1wiXG4gICAgZW5kVGltZSA9IC0xOyAgIC8vIEPDs2RpZ28gZXNwZWNpYWwgcGFyYSBcImZpbmFsXCJcbiAgfVxuXG4gIC8vIFNpIG5vIHNlIGRldGVjdMOzIHRpZW1wbyBmaW5hbCBwZXJvIHPDrSBpbmljaWFsLCBlc3RhYmxlY2VyIHVuYSBkdXJhY2nDs24gcHJlZGV0ZXJtaW5hZGFcbiAgaWYgKHN0YXJ0VGltZSA+IDAgJiYgZW5kVGltZSA9PT0gNSAmJiBzdGFydFRpbWUgIT09IDApIHtcbiAgICBlbmRUaW1lID0gc3RhcnRUaW1lICsgNTtcbiAgfVxuXG4gIHJldHVybiB7IHN0YXJ0VGltZSwgZW5kVGltZSB9O1xufVxuXG4vLyBGdW5jacOzbiBwYXJhIHByb2Nlc2FyIGVsZW1lbnRvcyBkZXRlY3RhZG9zIHBvciBsYSBJQVxuY29uc3QgcHJvY2Vzc0RldGVjdGVkRWxlbWVudCA9IGFzeW5jIChlbGVtZW50RGF0YSwgY29tbWFuZEV4ZWN1dG9yLCBmaW5hbFJlc3BvbnNlUmVmLCB0aW1lbGluZSwgbGFzdFVwbG9hZGVkSW1hZ2VVcmwsIGN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0KSA9PiB7XG4gIGxldCBlbGVtZW50QWRkZWQgPSBmYWxzZTtcbiAgbGV0IGZpbmFsUmVzcG9uc2UgPSBmaW5hbFJlc3BvbnNlUmVmLmN1cnJlbnQ7XG5cbiAgdHJ5IHtcbiAgICAvLyBTaSBzZSBkZXRlY3TDsyB1biBlbGVtZW50byBwYXJhIGFncmVnYXIgY29uIGNvbmZpYW56YSBzdWZpY2llbnRlXG4gICAgaWYgKGVsZW1lbnREYXRhICYmXG4gICAgICAgIGVsZW1lbnREYXRhLmRldGVjdGVkID09PSB0cnVlICYmXG4gICAgICAgIHR5cGVvZiBlbGVtZW50RGF0YS5jb25maWRlbmNlID09PSAnbnVtYmVyJyAmJlxuICAgICAgICBlbGVtZW50RGF0YS5jb25maWRlbmNlID4gMC43ICYmXG4gICAgICAgIGVsZW1lbnREYXRhLmVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50RGF0YS5lbGVtZW50O1xuXG4gICAgICAvLyBQcm9jZXNhciBzZWfDum4gZWwgdGlwbyBkZSBlbGVtZW50b1xuICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gXCJ0ZXh0XCIgJiYgZWxlbWVudC5jb250ZW50KSB7XG4gICAgICAgIC8vIENvbmZpZ3VyYXIgb3BjaW9uZXMgcGFyYSBlbCB0ZXh0b1xuICAgICAgICBjb25zdCB0ZXh0T3B0aW9uczogYW55ID0ge1xuICAgICAgICAgIHN0YXJ0VGltZTogdHlwZW9mIGVsZW1lbnQuc3RhcnRUaW1lID09PSAnbnVtYmVyJyA/IGVsZW1lbnQuc3RhcnRUaW1lIDogMCxcbiAgICAgICAgICBlbmRUaW1lOiB0eXBlb2YgZWxlbWVudC5lbmRUaW1lID09PSAnbnVtYmVyJyA/IGVsZW1lbnQuZW5kVGltZSA6ICh0eXBlb2YgZWxlbWVudC5zdGFydFRpbWUgPT09ICdudW1iZXInID8gZWxlbWVudC5zdGFydFRpbWUgKyA1IDogNSksXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQXNpZ25hciBjb2xvciBzaSBlc3TDoSBkaXNwb25pYmxlXG4gICAgICAgIGlmIChlbGVtZW50LmNvbG9yKSB7XG4gICAgICAgICAgdGV4dE9wdGlvbnMuY29sb3IgPSBlbGVtZW50LmNvbG9yLnRvTG93ZXJDYXNlKCkgPT09IFwiYmxhbmNvXCIgPyBcIiNGRkZGRkZcIiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jb2xvci50b0xvd2VyQ2FzZSgpID09PSBcIm5lZ3JvXCIgPyBcIiMwMDAwMDBcIiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jb2xvci50b0xvd2VyQ2FzZSgpID09PSBcInJvam9cIiA/IFwiI0ZGMDAwMFwiIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNvbG9yLnRvTG93ZXJDYXNlKCkgPT09IFwiYXp1bFwiID8gXCIjMDAwMEZGXCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY29sb3IudG9Mb3dlckNhc2UoKSA9PT0gXCJ2ZXJkZVwiID8gXCIjMDBGRjAwXCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY29sb3IudG9Mb3dlckNhc2UoKSA9PT0gXCJhbWFyaWxsb1wiID8gXCIjRkZGRjAwXCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY29sb3I7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBw7FhZGlyIGVsIHRleHRvXG4gICAgICAgIGNvbW1hbmRFeGVjdXRvci5jdXJyZW50LmFkZFRleHQoZWxlbWVudC5jb250ZW50LCB0ZXh0T3B0aW9ucyk7XG5cbiAgICAgICAgLy8gQWN0dWFsaXphciByZXNwdWVzdGFcbiAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW0hlIGFncmVnYWRvIGVsIHRleHRvIFwiJHtlbGVtZW50LmNvbnRlbnR9XCIgJHtlbGVtZW50LmNvbG9yID8gYGNvbiBjb2xvciAke2VsZW1lbnQuY29sb3J9IGAgOiBcIlwifWRlc2RlIGVsIHNlZ3VuZG8gJHt0ZXh0T3B0aW9ucy5zdGFydFRpbWV9IGhhc3RhIGVsIHNlZ3VuZG8gJHt0ZXh0T3B0aW9ucy5lbmRUaW1lfV1gO1xuICAgICAgICBlbGVtZW50QWRkZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZWxlbWVudC50eXBlID09PSBcImltYWdlXCIpIHtcbiAgICAgICAgLy8gQ29uZmlndXJhciBvcGNpb25lcyBwYXJhIGxhIGltYWdlblxuICAgICAgICBjb25zdCBpbWFnZU9wdGlvbnM6IGFueSA9IHtcbiAgICAgICAgICBzdGFydFRpbWU6IHR5cGVvZiBlbGVtZW50LnN0YXJ0VGltZSA9PT0gJ251bWJlcicgPyBlbGVtZW50LnN0YXJ0VGltZSA6IDAsXG4gICAgICAgICAgZW5kVGltZTogdHlwZW9mIGVsZW1lbnQuZW5kVGltZSA9PT0gJ251bWJlcicgPyBlbGVtZW50LmVuZFRpbWUgOiAodHlwZW9mIGVsZW1lbnQuc3RhcnRUaW1lID09PSAnbnVtYmVyJyA/IGVsZW1lbnQuc3RhcnRUaW1lICsgNSA6IDUpLFxuICAgICAgICAgIC8vIFBvc2ljacOzbiBjZW50cmFkYSBwb3IgZGVmZWN0b1xuICAgICAgICAgIHBvc2l0aW9uOiB7IHg6IDAuNSwgeTogMC41IH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBSZWdpc3RyYXIgdGllbXBvcyBlc3BlY8OtZmljb3MgcGFyYSBkZXB1cmFjacOzblxuICAgICAgICBjb25zb2xlLmxvZyhgVGllbXBvcyBkZSBpbWFnZW4gcmVjaWJpZG9zIGRlIGxhIEFQSTogc3RhcnRUaW1lPSR7ZWxlbWVudC5zdGFydFRpbWV9LCBlbmRUaW1lPSR7ZWxlbWVudC5lbmRUaW1lfWApO1xuXG4gICAgICAgIC8vIE1hbmVqYXIgY2Fzb3MgZXNwZWNpYWxlcyBwYXJhIFwiYWwgZmluYWxcIiBkZWwgdmlkZW9cbiAgICAgICAgaWYgKGVsZW1lbnQuc3RhcnRUaW1lID09PSAtMSB8fCBlbGVtZW50LmVuZFRpbWUgPT09IC0xKSB7XG4gICAgICAgICAgLy8gQ2FsY3VsYXIgbGEgZHVyYWNpw7NuIGRlbCB2aWRlbyBlbiBzZWd1bmRvc1xuICAgICAgICAgIGNvbnN0IHZpZGVvRHVyYXRpb24gPSB0aW1lbGluZT8uZHVyYXRpb25cbiAgICAgICAgICAgID8gTWF0aC5mbG9vcih0aW1lbGluZS5kdXJhdGlvbiAvIDEwMDApXG4gICAgICAgICAgICA6IDMwOyAvLyBWYWxvciBwcmVkZXRlcm1pbmFkbyBzaSBubyBoYXkgZHVyYWNpw7NuXG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhgRHVyYWNpw7NuIGRlbCB2aWRlbzogJHt2aWRlb0R1cmF0aW9ufXNgKTtcblxuICAgICAgICAgIGlmIChlbGVtZW50LnN0YXJ0VGltZSA9PT0gLTEgJiYgZWxlbWVudC5lbmRUaW1lID09PSAtMSkge1xuICAgICAgICAgICAgLy8gU2kgYW1ib3Mgc29uIC0xLCBjb2xvY2FyIGVuIGxvcyDDumx0aW1vcyA1IHNlZ3VuZG9zXG4gICAgICAgICAgICBpbWFnZU9wdGlvbnMuc3RhcnRUaW1lID0gTWF0aC5tYXgoMCwgdmlkZW9EdXJhdGlvbiAtIDUpO1xuICAgICAgICAgICAgaW1hZ2VPcHRpb25zLmVuZFRpbWUgPSB2aWRlb0R1cmF0aW9uO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEFqdXN0YW5kbyBwYXJhIFwiYWwgZmluYWxcIjogc3RhcnRUaW1lPSR7aW1hZ2VPcHRpb25zLnN0YXJ0VGltZX0sIGVuZFRpbWU9JHtpbWFnZU9wdGlvbnMuZW5kVGltZX1gKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuc3RhcnRUaW1lID09PSAtMSkge1xuICAgICAgICAgICAgLy8gU29sbyBzdGFydFRpbWUgZXMgLTFcbiAgICAgICAgICAgIGltYWdlT3B0aW9ucy5zdGFydFRpbWUgPSBNYXRoLm1heCgwLCB2aWRlb0R1cmF0aW9uIC0gNSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LmVuZFRpbWUgPT09IC0xKSB7XG4gICAgICAgICAgICAvLyBTb2xvIGVuZFRpbWUgZXMgLTFcbiAgICAgICAgICAgIGltYWdlT3B0aW9ucy5lbmRUaW1lID0gdmlkZW9EdXJhdGlvbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZyhgVGllbXBvcyBkZSBpbWFnZW4gYSBhcGxpY2FyOiBzdGFydFRpbWU9JHtpbWFnZU9wdGlvbnMuc3RhcnRUaW1lfSwgZW5kVGltZT0ke2ltYWdlT3B0aW9ucy5lbmRUaW1lfWApO1xuXG4gICAgICAgIC8vIERldGVybWluYXIgbGEgVVJMIGRlIGxhIGltYWdlbiBhIHVzYXJcbiAgICAgICAgY29uc3QgaXNHZW5lcmljVXJsID0gZWxlbWVudC51cmwgPT09ICdpbWFnZW5fYWRqdW50YV9wb3JfZWxfdXN1YXJpby5qcGcnO1xuICAgICAgICBjb25zdCBpc0xvY2FsSW1hZ2UgPSBsYXN0VXBsb2FkZWRJbWFnZVVybCAmJiBsYXN0VXBsb2FkZWRJbWFnZVVybC5zdGFydHNXaXRoKCdkYXRhOicpO1xuXG4gICAgICAgIGxldCBpbWFnZVVybDogc3RyaW5nO1xuXG4gICAgICAgIC8vIFBSSU9SSURBRCAxOiBVc2FyIGxhIGltYWdlbiBxdWUgYWNhYmEgZGUgc3ViaXJzZSBlbiBlc3RlIG1lbnNhamUgZXNwZWPDrWZpY29cbiAgICAgICAgaWYgKGN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0KSB7XG4gICAgICAgICAgaW1hZ2VVcmwgPSBjdXJyZW50SW1hZ2VVcmxGb3JUaGlzUmVxdWVzdDtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzYW5kbyBsYSBpbWFnZW4gcmVjacOpbiBzdWJpZGEgcGFyYSBlc3RhIHNvbGljaXR1ZCBlc3BlY8OtZmljYVwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQUklPUklEQUQgMjogVXNhciBsYSBVUkwgZGVsIGVsZW1lbnRvIHNpIHRpZW5lIHVuYSBlc3BlY8OtZmljYSB5IE5PIGVzIGxhIFVSTCBnZW7DqXJpY2FcbiAgICAgICAgZWxzZSBpZiAoZWxlbWVudC51cmwgJiYgIWlzR2VuZXJpY1VybCAmJiAhZWxlbWVudC51cmwuaW5jbHVkZXMoJy91cmxfZGVfbGFfaW1hZ2VuJykpIHtcbiAgICAgICAgICBpbWFnZVVybCA9IGVsZW1lbnQudXJsO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNhbmRvIFVSTCBlc3BlY8OtZmljYSBkZWwgZWxlbWVudG9cIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUFJJT1JJREFEIDM6IFVzYXIgbGEgw7psdGltYSBpbWFnZW4gc3ViaWRhIGd1YXJkYWRhIHNpIGhheSByZWZlcmVuY2lhIGEgaW1hZ2VuIGdlbsOpcmljYVxuICAgICAgICBlbHNlIGlmIChpc0dlbmVyaWNVcmwgJiYgbGFzdFVwbG9hZGVkSW1hZ2VVcmwpIHtcbiAgICAgICAgICBpbWFnZVVybCA9IGxhc3RVcGxvYWRlZEltYWdlVXJsO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNhbmRvIGxhIMO6bHRpbWEgaW1hZ2VuIHN1YmlkYSBndWFyZGFkYVwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQUklPUklEQUQgNDogRmFsbGJhY2sgYSBVUkwgZ2Vuw6lyaWNhXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIFNpIHRvZG8gbG8gZGVtw6FzIGZhbGxhLCB1c2FyIHVuYSBpbWFnZW4gZGUgZWplbXBsb1xuICAgICAgICAgIGltYWdlVXJsID0gXCJodHRwczovL2lrLmltYWdla2l0LmlvL3dvbWJvL2ltYWdlcy9pbWcyLmpwZ1wiO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNhbmRvIGltYWdlbiBkZSBlamVtcGxvIGNvbW8gZmFsbGJhY2tcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBw7FhZGlyIGxhIGltYWdlblxuICAgICAgICBjb21tYW5kRXhlY3V0b3IuY3VycmVudC5hZGRJbWFnZShpbWFnZVVybCwgaW1hZ2VPcHRpb25zKTtcblxuICAgICAgICAvLyBBY3R1YWxpemFyIHJlc3B1ZXN0YVxuICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bSGUgYWdyZWdhZG8gbGEgaW1hZ2VuIGRlc2RlIGVsIHNlZ3VuZG8gJHtpbWFnZU9wdGlvbnMuc3RhcnRUaW1lfSBoYXN0YSBlbCBzZWd1bmRvICR7aW1hZ2VPcHRpb25zLmVuZFRpbWV9XWA7XG4gICAgICAgIGVsZW1lbnRBZGRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlbGVtZW50LnR5cGUgPT09IFwidmlkZW9cIikge1xuICAgICAgICAvLyBDb25maWd1cmFyIG9wY2lvbmVzIHBhcmEgZWwgdmlkZW9cbiAgICAgICAgY29uc3QgdmlkZW9PcHRpb25zOiBhbnkgPSB7XG4gICAgICAgICAgc3RhcnRUaW1lOiB0eXBlb2YgZWxlbWVudC5zdGFydFRpbWUgPT09ICdudW1iZXInID8gZWxlbWVudC5zdGFydFRpbWUgOiAwLFxuICAgICAgICAgIGVuZFRpbWU6IHR5cGVvZiBlbGVtZW50LmVuZFRpbWUgPT09ICdudW1iZXInID8gZWxlbWVudC5lbmRUaW1lIDogKHR5cGVvZiBlbGVtZW50LnN0YXJ0VGltZSA9PT0gJ251bWJlcicgPyBlbGVtZW50LnN0YXJ0VGltZSArIDEwIDogMTApLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFVSTCBkZSB2aWRlbyBkZSBlamVtcGxvIChlbiBwcm9kdWNjacOzbiBlc3RvIHNlcsOtYSBkaW7DoW1pY28pXG4gICAgICAgIGNvbnN0IHZpZGVvVXJsID0gXCJodHRwczovL2Nkbi5kZXNpZ25jb21iby5kZXYvdmlkZW9zL2RlbW8tdmlkZW8tNC5tcDRcIjtcblxuICAgICAgICAvLyBBw7FhZGlyIGVsIHZpZGVvXG4gICAgICAgIGNvbW1hbmRFeGVjdXRvci5jdXJyZW50LmFkZFZpZGVvKHZpZGVvVXJsLCB2aWRlb09wdGlvbnMpO1xuXG4gICAgICAgIC8vIEFjdHVhbGl6YXIgcmVzcHVlc3RhXG4gICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltIZSBhZ3JlZ2FkbyBlbCB2aWRlbyBkZXNkZSBlbCBzZWd1bmRvICR7dmlkZW9PcHRpb25zLnN0YXJ0VGltZX0gaGFzdGEgZWwgc2VndW5kbyAke3ZpZGVvT3B0aW9ucy5lbmRUaW1lfV1gO1xuICAgICAgICBlbGVtZW50QWRkZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZWxlbWVudC50eXBlID09PSBcInN1YnRpdGxlc1wiKSB7XG4gICAgICAgIC8vIENvbmZpZ3VyYXIgb3BjaW9uZXMgcGFyYSBsb3Mgc3VidMOtdHVsb3NcbiAgICAgICAgY29uc3Qgc3VidGl0bGVPcHRpb25zOiBhbnkgPSB7XG4gICAgICAgICAgZ3JvdXBXb3JkczogZWxlbWVudC5ncm91cFdvcmRzICE9PSB1bmRlZmluZWQgPyBlbGVtZW50Lmdyb3VwV29yZHMgOiB0cnVlLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEHDsWFkaXIgdGllbXBvcyBzaSBzZSBlc3BlY2lmaWNhcm9uXG4gICAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5zdGFydFRpbWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgc3VidGl0bGVPcHRpb25zLnN0YXJ0VGltZSA9IGVsZW1lbnQuc3RhcnRUaW1lO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5lbmRUaW1lID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHN1YnRpdGxlT3B0aW9ucy5lbmRUaW1lID0gZWxlbWVudC5lbmRUaW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQcOxYWRpciBsb3Mgc3VidMOtdHVsb3NcbiAgICAgICAgY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQuYWRkU3VidGl0bGVzKHN1YnRpdGxlT3B0aW9ucyk7XG5cbiAgICAgICAgLy8gQWN0dWFsaXphciByZXNwdWVzdGEgc2lsZW5jaW9zYSAoc2UgbWFuZWphIGVuIG90cm8gbGFkbylcbiAgICAgICAgZWxlbWVudEFkZGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVsZW1lbnQudHlwZSA9PT0gXCJzZWdtZW50c1wiICYmIEFycmF5LmlzQXJyYXkoZWxlbWVudC5zZWdtZW50cykgJiYgZWxlbWVudC5zZWdtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIENvbmZpZ3VyYXIgbG9zIHNlZ21lbnRvcyBhIGVsaW1pbmFyXG4gICAgICAgIGNvbnN0IHNlZ21lbnRzID0gZWxlbWVudC5zZWdtZW50cy5tYXAoc2VnbWVudCA9PiAoe1xuICAgICAgICAgIHN0YXJ0VGltZTogdHlwZW9mIHNlZ21lbnQuc3RhcnRUaW1lID09PSAnbnVtYmVyJyA/IHNlZ21lbnQuc3RhcnRUaW1lIDogMCxcbiAgICAgICAgICBlbmRUaW1lOiB0eXBlb2Ygc2VnbWVudC5lbmRUaW1lID09PSAnbnVtYmVyJyA/IHNlZ21lbnQuZW5kVGltZSA6ICh0eXBlb2Ygc2VnbWVudC5zdGFydFRpbWUgPT09ICdudW1iZXInID8gc2VnbWVudC5zdGFydFRpbWUgKyA1IDogNSksXG4gICAgICAgIH0pKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhgRWxpbWluYW5kbyAke3NlZ21lbnRzLmxlbmd0aH0gc2VnbWVudG9zOmAsIHNlZ21lbnRzKTtcblxuICAgICAgICAvLyBFamVtcGxvIGRlIGZvcm1hdG8gZGUgc2VnbWVudG9zIGEgbW9zdHJhclxuICAgICAgICBjb25zdCBzZWdtZW50c0Zvcm1hdHRlZCA9IHNlZ21lbnRzLm1hcChzID0+IGAke3Muc3RhcnRUaW1lfS0ke3MuZW5kVGltZX1zYCkuam9pbignLCAnKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIEVqZWN1dGFyIGxhIGVsaW1pbmFjacOzbiBkZSBzZWdtZW50b3NcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb21tYW5kRXhlY3V0b3IuY3VycmVudC5yZW1vdmVTZWdtZW50cyhzZWdtZW50cyk7XG5cbiAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bSGUgZWxpbWluYWRvIGxvcyBzZWdtZW50b3Mgc29saWNpdGFkb3M6ICR7c2VnbWVudHNGb3JtYXR0ZWR9XWA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltObyBwdWRlIGVsaW1pbmFyIGxvcyBzZWdtZW50b3Mgc29saWNpdGFkb3MuIEFzZWfDunJhdGUgZGUgcXVlIGhheSB1biBlbGVtZW50byBzZWxlY2Npb25hZG8gZW4gbGEgdGltZWxpbmUuXWA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsZW1lbnRBZGRlZCA9IHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGVsaW1pbmFyIHNlZ21lbnRvczpcIiwgZXJyb3IpO1xuICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltFcnJvciBhbCBpbnRlbnRhciBlbGltaW5hciBsb3Mgc2VnbWVudG9zOiAke2Vycm9yLm1lc3NhZ2UgfHwgXCJFcnJvciBkZXNjb25vY2lkb1wifV1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlbGVtZW50LnR5cGUgPT09IFwiY29tcGFjdFwiKSB7XG4gICAgICAgIC8vIEVqZWN1dGFyIGxhIGNvbXBhY3RhY2nDs24gZGVsIHRpbWVsaW5lXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ29tcGFjdGFuZG8gdGltZWxpbmUgcG9yIHNvbGljaXR1ZCBkZWwgdXN1YXJpb1wiKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIEluaWNpYXIgbGEgY29tcGFjdGFjacOzblxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbW1hbmRFeGVjdXRvci5jdXJyZW50LmNvbXBhY3RUaW1lbGluZSgpO1xuXG4gICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW0hlIGNvbXBhY3RhZG8gZWwgdGltZWxpbmUgZWxpbWluYW5kbyBsb3MgZXNwYWNpb3MgdmFjw61vcyBlbnRyZSBlbGVtZW50b3NdYDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW05vIGZ1ZSBwb3NpYmxlIGNvbXBhY3RhciBlbCB0aW1lbGluZS4gUHVlZGUgcXVlIG5vIGhheWEgZWxlbWVudG9zIG8gZXNwYWNpb3MgdmFjw61vcyBxdWUgY29tcGFjdGFyXWA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsZW1lbnRBZGRlZCA9IHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNvbXBhY3RhciBlbCB0aW1lbGluZTpcIiwgZXJyb3IpO1xuICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltFcnJvciBhbCBpbnRlbnRhciBjb21wYWN0YXIgZWwgdGltZWxpbmU6ICR7ZXJyb3IubWVzc2FnZSB8fCBcIkVycm9yIGRlc2Nvbm9jaWRvXCJ9XWA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVsZW1lbnQudHlwZSA9PT0gXCJzbWFydFRyaW1cIikge1xuICAgICAgICAvLyBFamVjdXRhciBlbCByZWNvcnRlIGludGVsaWdlbnRlXG4gICAgICAgIGNvbnNvbGUubG9nKFwiSW5pY2lhbmRvIHJlY29ydGUgaW50ZWxpZ2VudGUgcG9yIHNvbGljaXR1ZCBkZWwgdXN1YXJpb1wiKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIE1vc3RyYXIgbWVuc2FqZSBkZSBhbsOhbGlzaXMgZW4gY3Vyc29cbiAgICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bQW5hbGl6YW5kbyBlbCB2aWRlbyBwYXJhIGlkZW50aWZpY2FyIGxhcyBwYXJ0ZXMgYSBlbGltaW5hci4uLl1gO1xuXG4gICAgICAgICAgLy8gSW5pY2lhciBlbCByZWNvcnRlIGludGVsaWdlbnRlXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQuc21hcnRUcmltKCk7XG5cbiAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICBmaW5hbFJlc3BvbnNlICs9IGBcXG5cXG5bSGUgcmVhbGl6YWRvIHVuIHJlY29ydGUgaW50ZWxpZ2VudGUgZGVsIHZpZGVvLCBlbGltaW5hbmRvIGxhcyBwYXJ0ZXMgaW5uZWNlc2FyaWFzIHkgY29tcGFjdGFuZG8gZWwgdGltZWxpbmVdYDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmluYWxSZXNwb25zZSArPSBgXFxuXFxuW05vIGZ1ZSBwb3NpYmxlIHJlYWxpemFyIGVsIHJlY29ydGUgaW50ZWxpZ2VudGUuIFZlcmlmaWNhIHF1ZSBlbCB2aWRlbyB0ZW5nYSB1bmEgdHJhbnNjcmlwY2nDs25dYDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxlbWVudEFkZGVkID0gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgcmVhbGl6YXIgZWwgcmVjb3J0ZSBpbnRlbGlnZW50ZTpcIiwgZXJyb3IpO1xuICAgICAgICAgIGZpbmFsUmVzcG9uc2UgKz0gYFxcblxcbltFcnJvciBhbCBpbnRlbnRhciByZWFsaXphciBlbCByZWNvcnRlIGludGVsaWdlbnRlOiAke2Vycm9yLm1lc3NhZ2UgfHwgXCJFcnJvciBkZXNjb25vY2lkb1wifV1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlbGVtZW50LnR5cGUgPT09IFwibXVzaWNcIiAmJiBBcnJheS5pc0FycmF5KGVsZW1lbnQub3B0aW9ucykgJiYgZWxlbWVudC5vcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gUmVzcHVlc3RhIG3DoXMgY29ydGEgcGFyYSBtw7pzaWNhXG4gICAgICAgIGZpbmFsUmVzcG9uc2UgPSBcIsK/Q3XDoWwgZGUgZXN0YXMgb3BjaW9uZXMgdGUgZ3VzdGFyw61hIGHDsWFkaXI/XCI7XG4gICAgICAgIGVsZW1lbnRBZGRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBwcm9jZXNhciBlbGVtZW50byBkZXRlY3RhZG86XCIsIGVycm9yKTtcbiAgICBmaW5hbFJlc3BvbnNlICs9IFwiXFxuXFxuW05vIHB1ZGUgcHJvY2VzYXIgbGEgc29saWNpdHVkIGRlYmlkbyBhIHVuIGVycm9yLl1cIjtcbiAgfVxuXG4gIHJldHVybiB7IGZpbmFsUmVzcG9uc2UsIGVsZW1lbnRBZGRlZCB9O1xufTtcblxuLy8gVGlwbyBwYXJhIGxvcyBtZW5zYWplc1xudHlwZSBNZXNzYWdlID0ge1xuICBpZDogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIHJvbGU6IFwiYXNzaXN0YW50XCIgfCBcInVzZXJcIjtcbiAgdGltZXN0YW1wOiBEYXRlO1xuICBpbWFnZVVybD86IHN0cmluZzsgLy8gUHJvcGllZGFkIHBhcmEgVVJMcyBkZSBpbWFnZW5cbiAgbXVzaWNPcHRpb25zPzogc3RyaW5nW107IC8vIFByb3BpZWRhZCBwYXJhIG9wY2lvbmVzIGRlIG3DunNpY2FcbiAgaXNJbml0aWFsPzogYm9vbGVhbjsgLy8gUHJvcGllZGFkIHBhcmEgbWFyY2FyIG1lbnNhamVzIGluaWNpYWxlc1xuICBpc1N0cmVhbWluZz86IGJvb2xlYW47IC8vIFByb3BpZWRhZCBwYXJhIG1hcmNhciBtZW5zYWplcyBlbiBzdHJlYW1pbmdcbiAgb25TdHJlYW1pbmdDb21wbGV0ZT86ICgpID0+IHZvaWQ7IC8vIFByb3BpZWRhZCBwYXJhIG1hbmVqYXIgbGEgZmluYWxpemFjacOzbiBkZSBzdHJlYW1pbmdcbn07XG5cbi8vIENvbXBvbmVudGUgcGFyYSByZW5kZXJpemFyIG9wY2lvbmVzIGRlIG3DunNpY2EgY29tbyBib3RvbmVzIGNsaWNrYWJsZXNcbmNvbnN0IE11c2ljT3B0aW9ucyA9ICh7IG9wdGlvbnMsIG9uU2VsZWN0TXVzaWMgfSkgPT4ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkob3B0aW9ucykgfHwgb3B0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIEZ1bmNpw7NuIHBhcmEgY29udmVydGlyIGVsIG5vbWJyZSBkZWwgYXJjaGl2byBhIHVuIG5vbWJyZSBhbWlnYWJsZVxuICBjb25zdCBnZXRGcmllbmRseU5hbWUgPSAobXVzaWNQYXRoKSA9PiB7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBtdXNpY1BhdGguc3BsaXQoJy8nKS5wb3AoKSB8fCBtdXNpY1BhdGg7XG5cbiAgICAvLyBNYXBlYXIgbm9tYnJlcyBkZSBhcmNoaXZvcyBhIG5vbWJyZXMgYW1pZ2FibGVzXG4gICAgaWYgKGZpbGVuYW1lID09PSBcInNvbmcxLm1wM1wiKSByZXR1cm4gXCJNw7pzaWNhIEVuZXJnw6l0aWNhXCI7XG4gICAgaWYgKGZpbGVuYW1lID09PSBcInNvbmcyLm1wM1wiKSByZXR1cm4gXCJNZWxvZMOtYSBSZWxhamFudGVcIjtcblxuICAgIC8vIFNpIG5vIGhheSBtYXBlbyBlc3BlY8OtZmljbywgZGV2b2x2ZXIgZWwgbm9tYnJlIGRlbCBhcmNoaXZvXG4gICAgcmV0dXJuIGZpbGVuYW1lO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGdhcC0zIG10LTNcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXdyYXAgZ2FwLTJcIj5cbiAgICAgICAge29wdGlvbnMubWFwKChtdXNpY1BhdGgsIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgbXVzaWNOYW1lID0gZ2V0RnJpZW5kbHlOYW1lKG11c2ljUGF0aCk7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb25TZWxlY3RNdXNpYyhtdXNpY1BhdGgpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgdGV4dC1zbSBiZy1ncmFkaWVudC10by1yIGZyb20tcHVycGxlLTYwMCB0by1pbmRpZ28tNjAwIGhvdmVyOmZyb20tcHVycGxlLTcwMCBob3Zlcjp0by1pbmRpZ28tNzAwIHRleHQtd2hpdGUgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWFsbCBzaGFkb3ctbWQgaG92ZXI6c2hhZG93LWxnIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGZvbnQtbWVkaXVtXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBjbGFzc05hbWU9XCJ3LTUgaC01XCI+XG4gICAgICAgICAgICAgICAgPHBhdGggZD1cIk05IDE5VjZsMTItM3YxM005IDE5YzAgMS4xMDUtMS4zNDMgMi0zIDJzLTMtLjg5NS0zLTIgMS4zNDMtMiAzLTIgMyAuODk1IDMgMnptMTItM2MwIDEuMTA1LTEuMzQzIDItMyAycy0zLS44OTUtMy0yIDEuMzQzLTIgMy0yIDMgLjg5NSAzIDJ6TTkgOWwxMi0zXCIgc3Ryb2tlV2lkdGg9XCIyXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAge211c2ljTmFtZX1cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICk7XG4gICAgICAgIH0pfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG4vLyBDb21wb25lbnRlIHBhcmEgbW9zdHJhciBsYSBhbmltYWNpw7NuIGRlIFwicGVuc2FuZG9cIlxuY29uc3QgVGhpbmtpbmdBbmltYXRpb24gPSAoKSA9PiAoXG4gIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1zdGFydCBhbmltYXRlLWZhZGVJblwiPlxuICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctWzg1JV0gcm91bmRlZC1tZCBweC00IHB5LTIgYmctW3JnYig0MCwyMCw2MCldIHRleHQtemluYy0yMDBcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC0xXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaC0yIHctMiBiZy1wdXJwbGUtNDAwIHJvdW5kZWQtZnVsbCBhbmltYXRlLXB1bHNlXCIgc3R5bGU9e3sgYW5pbWF0aW9uRGVsYXk6IFwiMG1zXCIgfX0+PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImgtMiB3LTIgYmctcHVycGxlLTQwMCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1wdWxzZVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiBcIjMwMG1zXCIgfX0+PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImgtMiB3LTIgYmctcHVycGxlLTQwMCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1wdWxzZVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiBcIjYwMG1zXCIgfX0+PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXppbmMtNDAwXCI+UGVuc2FuZG8uLi48L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4pO1xuXG4vLyBDb21wb25lbnRlIHBhcmEgbW9zdHJhciBlbCByYXpvbmFtaWVudG8gZGVzcGxlZ2FibGVcbmNvbnN0IFJlYXNvbmluZ1NlY3Rpb24gPSAoeyByZWFzb25pbmcgfTogeyByZWFzb25pbmc6IHN0cmluZyB9KSA9PiB7XG4gIGNvbnN0IFtpc09wZW4sIHNldElzT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgdGV4dC14cyBib3JkZXItdCBib3JkZXItcHVycGxlLTgwMC8zMCBwdC0yXCI+XG4gICAgICA8YnV0dG9uXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHNldElzT3BlbighaXNPcGVuKX1cbiAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgdGV4dC1wdXJwbGUtNDAwIGhvdmVyOnRleHQtcHVycGxlLTMwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICA+XG4gICAgICAgIDxzdmdcbiAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICB3aWR0aD1cIjE0XCJcbiAgICAgICAgICBoZWlnaHQ9XCIxNFwiXG4gICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICAgICAgZmlsbD1cIm5vbmVcIlxuICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiXG4gICAgICAgICAgc3Ryb2tlV2lkdGg9XCIyXCJcbiAgICAgICAgICBzdHJva2VMaW5lY2FwPVwicm91bmRcIlxuICAgICAgICAgIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIlxuICAgICAgICAgIGNsYXNzTmFtZT17YHRyYW5zaXRpb24tdHJhbnNmb3JtICR7aXNPcGVuID8gJ3JvdGF0ZS0xODAnIDogJyd9YH1cbiAgICAgICAgPlxuICAgICAgICAgIDxwb2x5bGluZSBwb2ludHM9XCI2IDkgMTIgMTUgMTggOVwiPjwvcG9seWxpbmU+XG4gICAgICAgIDwvc3ZnPlxuICAgICAgICA8c3Bhbj5WZXIgcmF6b25hbWllbnRvPC9zcGFuPlxuICAgICAgPC9idXR0b24+XG5cbiAgICAgIHtpc09wZW4gJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgcC0yIGJnLVtyZ2IoMzAsMTUsNDUpXSByb3VuZGVkIHRleHQtemluYy00MDAgd2hpdGVzcGFjZS1wcmUtd3JhcFwiPlxuICAgICAgICAgIHtyZWFzb25pbmd9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbi8vIENvbXBvbmVudGUgcGFyYSBzaW11bGFyIGVsIGVmZWN0byBkZSB0ZXh0byBlbiBzdHJlYW1pbmdcbmNvbnN0IFN0cmVhbWluZ1RleHQgPSAoeyB0ZXh0LCBvbkNvbXBsZXRlIH06IHsgdGV4dDogc3RyaW5nLCBvbkNvbXBsZXRlPzogKCkgPT4gdm9pZCB9KSA9PiB7XG4gIGNvbnN0IFtkaXNwbGF5ZWRUZXh0LCBzZXREaXNwbGF5ZWRUZXh0XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbaXNDb21wbGV0ZSwgc2V0SXNDb21wbGV0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIGNvbnN0IGludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBzZXREaXNwbGF5ZWRUZXh0KHRleHQuc3Vic3RyaW5nKDAsIGluZGV4ICsgMSkpO1xuICAgICAgaW5kZXgrKztcblxuICAgICAgaWYgKGluZGV4ID49IHRleHQubGVuZ3RoKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7XG4gICAgICAgIHNldElzQ29tcGxldGUodHJ1ZSk7XG4gICAgICAgIGlmIChvbkNvbXBsZXRlKSBvbkNvbXBsZXRlKCk7XG4gICAgICB9XG4gICAgfSwgNSk7IC8vIEFjZWxlcmFtb3MgbGEgdmVsb2NpZGFkIGRlIHRpcGVvIGRlIDE1bXMgYSA1bXNcblxuICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKGludGVydmFsSWQpO1xuICB9LCBbdGV4dCwgb25Db21wbGV0ZV0pO1xuXG4gIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cIndoaXRlc3BhY2UtcHJlLXdyYXBcIj57ZGlzcGxheWVkVGV4dH08L2Rpdj47XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBSUNoYXQoKSB7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8TWVzc2FnZVtdPihbXG4gICAge1xuICAgICAgaWQ6IFwiMVwiLFxuICAgICAgY29udGVudDogXCJIb2xhLCBzb3kgdHUgYXNpc3RlbnRlIGRlIGVkaWNpw7NuIGRlIHZpZGVvLiDCv0VuIHF1w6kgcHVlZG8gYXl1ZGFydGU/XCIsXG4gICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgIH0sXG4gIF0pO1xuICBjb25zdCBbaW5wdXQsIHNldElucHV0XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaW1hZ2VGaWxlLCBzZXRJbWFnZUZpbGVdID0gdXNlU3RhdGU8RmlsZSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaW1hZ2VQcmV2aWV3LCBzZXRJbWFnZVByZXZpZXddID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc1VwbG9hZGluZywgc2V0SXNVcGxvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbGFzdFVwbG9hZGVkSW1hZ2VVcmwsIHNldExhc3RVcGxvYWRlZEltYWdlVXJsXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XG4gIGNvbnN0IGZpbGVJbnB1dFJlZiA9IHVzZVJlZjxIVE1MSW5wdXRFbGVtZW50PihudWxsKTtcbiAgY29uc3QgbWVzc2FnZXNFbmRSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICAvLyBFc3RhZG8gcGFyYSByZWFsaXphciB1biBzZWd1aW1pZW50byBkZWwgcHJvZ3Jlc28gZGVsIGF1dG8tZWRpdFxuICBjb25zdCBbYXV0b0VkaXRTdGVwLCBzZXRBdXRvRWRpdFN0ZXBdID0gdXNlU3RhdGU8bnVtYmVyPigwKTtcbiAgY29uc3QgW2lzQXV0b0VkaXRpbmcsIHNldElzQXV0b0VkaXRpbmddID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuXG4gIGNvbnN0IHN0YXRlTWFuYWdlciA9IHVzZVN0YXRlTWFuYWdlcigpO1xuICBjb25zdCB7IHRpbWVsaW5lLCBzY2VuZXMsIHBsYXllclJlZiB9ID0gdXNlRGF0YVN0YXRlKCk7XG4gIGNvbnN0IHsgZHVyYXRpb24gfSA9IHVzZVN0b3JlKCk7IC8vIE9idGVuZXIgbGEgZHVyYWNpw7NuIGRlbCBzdG9yZVxuICBjb25zdCBjb21tYW5kRXhlY3V0b3IgPSB1c2VSZWY8VmlkZW9Db21tYW5kRXhlY3V0b3I+KGNyZWF0ZVZpZGVvQ29tbWFuZEV4ZWN1dG9yKHN0YXRlTWFuYWdlcikpO1xuXG4gIC8vIEHDsWFkaXIgZXN0YWRvIHBhcmEgZWwgbW9kbyAoY2hhdCBvIGFnZW50ZSlcbiAgY29uc3QgW21vZGUsIHNldE1vZGVdID0gdXNlU3RhdGU8XCJjaGF0XCIgfCBcImFnZW50XCI+KFwiY2hhdFwiKTtcblxuICAvLyBJbmljaWFsaXphciBlbCBDb21tYW5kRXhlY3V0b3JTZXJ2aWNlIGNvbiBlbCBleGVjdXRvciBhY3R1YWxcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQpIHtcbiAgICAgIENvbW1hbmRFeGVjdXRvclNlcnZpY2Uuc2V0RXhlY3V0b3IoY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQpO1xuICAgICAgY29uc29sZS5sb2coXCJDb21tYW5kRXhlY3V0b3JTZXJ2aWNlIGluaWNpYWxpemFkbyBjb24gw6l4aXRvXCIpO1xuICAgIH1cbiAgfSwgW2NvbW1hbmRFeGVjdXRvci5jdXJyZW50XSk7XG5cbiAgLy8gRnVuY2nDs24gcGFyYSByZWFsaXphciBsYSBlZGljacOzbiBhdXRvbcOhdGljYSBlbiBtb2RvIGFnZW50ZVxuICBjb25zdCBoYW5kbGVBdXRvRWRpdCA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgc2V0SXNBdXRvRWRpdGluZyh0cnVlKTtcblxuICAgICAgLy8gRnVuY2nDs24gcGFyYSBhw7FhZGlyIHVuIG1lbnNhamUgeSBlc3BlcmFyIGEgcXVlIHRlcm1pbmUgZGUgbW9zdHJhcnNlXG4gICAgICBjb25zdCBhZGRNZXNzYWdlQW5kV2FpdCA9IChjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgY29uc3QgbWVzc2FnZUlkID0gRGF0ZS5ub3coKS50b1N0cmluZygpO1xuXG4gICAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwge1xuICAgICAgICAgICAgaWQ6IG1lc3NhZ2VJZCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgaXNTdHJlYW1pbmc6IHRydWUsXG4gICAgICAgICAgICAvLyBQYXNhbW9zIGVsIGNhbGxiYWNrIG9uQ29tcGxldGUgYSB0cmF2w6lzIGRlIHVuYSBwcm9waWVkYWQgYWRpY2lvbmFsXG4gICAgICAgICAgICBvblN0cmVhbWluZ0NvbXBsZXRlOiAoKSA9PiByZXNvbHZlKClcbiAgICAgICAgICB9XSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgLy8gTWVuc2FqZSBpbmljaWFsIGV4cGxpY2FuZG8gZWwgcGxhblxuICAgICAgYXdhaXQgYWRkTWVzc2FnZUFuZFdhaXQoXCJHZTpcXG5cXG4xLiBSZWFsaXphcsOpIHVuIHJlY29ydGUgaW50ZWxpZ2VudGUgZGVsIHZpZGVvIHBhcmEgZWxpbWluYXIgbGFzIHBhcnRlcyBtZW5vcyByZWxldmFudGVzXFxuMi4gQcOxYWRpcsOpIHN1YnTDrXR1bG9zIGF1dG9tw6F0aWNvcyBhbCBjb250ZW5pZG8gb3B0aW1pemFkb1xcblxcbkNvbWVuemFuZG8gcHJvY2Vzby4uLlwiKTtcblxuICAgICAgLy8gRXNwZXJhciB1biBwb2NvIHBhcmEgcXVlIGVsIHVzdWFyaW8gcHVlZGEgbGVlciBlbCBtZW5zYWplIGluaWNpYWxcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7XG5cbiAgICAgIC8vIFBhc28gMTogUmVjb3J0ZSBpbnRlbGlnZW50ZVxuICAgICAgc2V0QXV0b0VkaXRTdGVwKDEpO1xuXG4gICAgICAvLyBNZW5zYWplIGRlIGluaWNpbyBkZWwgcmVjb3J0ZSBpbnRlbGlnZW50ZVxuICAgICAgYXdhaXQgYWRkTWVzc2FnZUFuZFdhaXQoXCJJbmljaWFuZG8gcmVjb3J0ZSBpbnRlbGlnZW50ZS5cXG5cXG5Fc3RveSBhbmFsaXphbmRvIGVsIGNvbnRlbmlkbyBkZWwgdmlkZW8gcGFyYSBpZGVudGlmaWNhciBsYXMgcGFydGVzIG3DoXMgaW1wb3J0YW50ZXMgeSBlbGltaW5hciBzZWdtZW50b3MgaW5uZWNlc2FyaW9zLi4uXCIpO1xuXG4gICAgICAvLyBFamVjdXRhciBlbCByZWNvcnRlIGludGVsaWdlbnRlXG4gICAgICBjb25zdCBzbWFydFRyaW1SZXN1bHQgPSBhd2FpdCBjb21tYW5kRXhlY3V0b3IuY3VycmVudC5zbWFydFRyaW0oKTtcblxuICAgICAgLy8gSW5mb3JtYXIgYWwgdXN1YXJpbyBzb2JyZSBlbCByZXN1bHRhZG8gZGVsIHJlY29ydGVcbiAgICAgIGlmIChzbWFydFRyaW1SZXN1bHQpIHtcbiAgICAgICAgYXdhaXQgYWRkTWVzc2FnZUFuZFdhaXQoXCJSZWNvcnRlIGludGVsaWdlbnRlIGNvbXBsZXRhZG8uXFxuXFxuSGUgaWRlbnRpZmljYWRvIHkgZWxpbWluYWRvIGxhcyBwYXJ0ZXMgbWVub3MgcmVsZXZhbnRlcyBkZWwgdmlkZW8sIG9wdGltaXphbmRvIGxhIGR1cmFjacOzbiB5IG1hbnRlbmllbmRvIGVsIGNvbnRlbmlkbyBlc2VuY2lhbC5cXG5cXG5Qcm9jZWRpZW5kbyBjb24gZWwgc2lndWllbnRlIHBhc28uLi5cIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCBhZGRNZXNzYWdlQW5kV2FpdChcIk5vIHB1ZGUgY29tcGxldGFyIGVsIHJlY29ydGUgaW50ZWxpZ2VudGUuXFxuXFxuRXN0byBwdWVkZSBkZWJlcnNlIGEgcXVlIGVsIHZpZGVvIG5vIHRpZW5lIHVuYSB0cmFuc2NyaXBjacOzbiBhZGVjdWFkYSBvIG5vIHNlIGRldGVjdGFyb24gc2VnbWVudG9zIHBhcmEgb3B0aW1pemFyLlxcblxcbkNvbnRpbnVhcsOpIGNvbiBlbCBzaWd1aWVudGUgcGFzby4uLlwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gUGFzbyAyOiBBw7FhZGlyIHN1YnTDrXR1bG9zXG4gICAgICBzZXRBdXRvRWRpdFN0ZXAoMik7XG5cbiAgICAgIC8vIE1lbnNhamUgZGUgaW5pY2lvIGRlIGHDsWFkaXIgc3VidMOtdHVsb3NcbiAgICAgIGF3YWl0IGFkZE1lc3NhZ2VBbmRXYWl0KFwiR2VuZXJhbmRvIHN1YnTDrXR1bG9zLlxcblxcbkVzdG95IHByb2Nlc2FuZG8gZWwgYXVkaW8gZGVsIHZpZGVvIHBhcmEgY3JlYXIgc3VidMOtdHVsb3Mgc2luY3Jvbml6YWRvcyBjb24gZWwgY29udGVuaWRvLi4uXCIpO1xuXG4gICAgICAvLyBDb25maWd1cmFyIG9wY2lvbmVzIHBhcmEgbG9zIHN1YnTDrXR1bG9zXG4gICAgICBjb25zdCBzdWJ0aXRsZU9wdGlvbnM6IGFueSA9IHtcbiAgICAgICAgZ3JvdXBXb3JkczogdHJ1ZSxcbiAgICAgICAgc3RhcnRUaW1lOiAwLFxuICAgICAgICBlbmRUaW1lOiAxMDAwMDAwIC8vIEhhc3RhIGVsIGZpbmFsIGRlbCB2aWRlb1xuICAgICAgfTtcblxuICAgICAgLy8gQcOxYWRpciBsb3Mgc3VidMOtdHVsb3NcbiAgICAgIGF3YWl0IGNvbW1hbmRFeGVjdXRvci5jdXJyZW50LmFkZFN1YnRpdGxlcyhzdWJ0aXRsZU9wdGlvbnMpO1xuXG4gICAgICAvLyBNZW5zYWplIGZpbmFsIGNvbiByZXN1bWVuIGRlIGFjY2lvbmVzXG4gICAgICBhd2FpdCBhZGRNZXNzYWdlQW5kV2FpdChcIkVkaWNpw7NuIGF1dG9tw6F0aWNhIGNvbXBsZXRhZGEuXFxuXFxuLSBSZWNvcnRlIGludGVsaWdlbnRlOiBQYXJ0ZXMgaXJyZWxldmFudGVzIGVsaW1pbmFkYXNcXG4tIFN1YnTDrXR1bG9zOiBBw7FhZGlkb3MgeSBzaW5jcm9uaXphZG9zIGNvbiBlbCBjb250ZW5pZG9cXG5cXG5FbCB2aWRlbyBoYSBzaWRvIG9wdGltaXphZG8gcGFyYSB1bmEgbWVqb3IgZXhwZXJpZW5jaWEgZGUgdmlzdWFsaXphY2nDs24uXFxuXFxuwr9EZXNlYXMgcmVhbGl6YXIgYWxndW5hIG90cmEgbWVqb3JhP1wiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIGxhIGVkaWNpw7NuIGF1dG9tw6F0aWNhOlwiLCBlcnJvcik7XG5cbiAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIHtcbiAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgY29udGVudDogYEVycm9yIGR1cmFudGUgbGEgZWRpY2nDs24gYXV0b23DoXRpY2EuXFxuXFxuSGEgb2N1cnJpZG8gdW4gcHJvYmxlbWE6ICR7ZXJyb3IubWVzc2FnZSB8fCBcIkVycm9yIGRlc2Nvbm9jaWRvXCJ9XFxuXFxuwr9RdWllcmVzIGludGVudGFyIGFsZ3VuYSBvdHJhIGFjY2nDs24/YCxcbiAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICBpc1N0cmVhbWluZzogdHJ1ZVxuICAgICAgfV0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwKSk7XG4gICAgICBzZXRJc0F1dG9FZGl0aW5nKGZhbHNlKTtcbiAgICAgIHNldEF1dG9FZGl0U3RlcCgwKTtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEZ1bmNpw7NuIHBhcmEgcmVpbmljaWFyIGVsIGNoYXRcbiAgY29uc3QgcmVzZXRDaGF0ID0gKCkgPT4ge1xuICAgIHNldE1lc3NhZ2VzKFtcbiAgICAgIHtcbiAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgY29udGVudDogXCJIb2xhLCBzb3kgdHUgYXNpc3RlbnRlIGRlIGVkaWNpw7NuIGRlIHZpZGVvLiDCv0VuIHF1w6kgcHVlZG8gYXl1ZGFydGU/XCIsXG4gICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIH0sXG4gICAgXSk7XG4gICAgc2V0SW5wdXQoXCJcIik7XG4gICAgc2V0SW1hZ2VGaWxlKG51bGwpO1xuICAgIHNldEltYWdlUHJldmlldyhudWxsKTtcbiAgICBzZXRMYXN0VXBsb2FkZWRJbWFnZVVybChcIlwiKTtcbiAgfTtcblxuICAvLyBTY3JvbGwgYWwgw7psdGltbyBtZW5zYWplXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbWVzc2FnZXNFbmRSZWYuY3VycmVudD8uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogXCJzbW9vdGhcIiB9KTtcbiAgfSwgW21lc3NhZ2VzLCBpc0xvYWRpbmddKTtcblxuICAvLyBBY3R1YWxpemFyIGVsIGVqZWN1dG9yIGRlIGNvbWFuZG9zIGN1YW5kbyBjYW1iaWUgZWwgc3RhdGVNYW5hZ2VyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29tbWFuZEV4ZWN1dG9yLmN1cnJlbnQgPSBjcmVhdGVWaWRlb0NvbW1hbmRFeGVjdXRvcihzdGF0ZU1hbmFnZXIpO1xuICAgIC8vIEFjdHVhbGl6YXIgZWwgc2VydmljaW8gY29uIGxhIG51ZXZhIGluc3RhbmNpYSBkZWwgZWplY3V0b3JcbiAgICBDb21tYW5kRXhlY3V0b3JTZXJ2aWNlLnNldEV4ZWN1dG9yKGNvbW1hbmRFeGVjdXRvci5jdXJyZW50KTtcbiAgICBjb25zb2xlLmxvZyhcIkNvbW1hbmRFeGVjdXRvclNlcnZpY2UgYWN0dWFsaXphZG8gY29uIHVuYSBudWV2YSBpbnN0YW5jaWEgZGVsIGVqZWN1dG9yXCIpO1xuICB9LCBbc3RhdGVNYW5hZ2VyXSk7XG5cbiAgLy8gTWFuZWphciBjbGljayBlbiBlbCBib3TDs24gZGUgaW1hZ2VuXG4gIGNvbnN0IGhhbmRsZUltYWdlQ2xpY2sgPSAoKSA9PiB7XG4gICAgZmlsZUlucHV0UmVmLmN1cnJlbnQ/LmNsaWNrKCk7XG4gIH07XG5cbiAgLy8gTWFuZWphciBzZWxlY2Npw7NuIGRlIGFyY2hpdm8gZGUgaW1hZ2VuXG4gIGNvbnN0IGhhbmRsZUZpbGVDaGFuZ2UgPSAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXM/LlswXTtcbiAgICBpZiAoZmlsZSkge1xuICAgICAgc2V0SW1hZ2VGaWxlKGZpbGUpO1xuICAgICAgY29uc3QgcHJldmlld1VybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7XG4gICAgICBzZXRJbWFnZVByZXZpZXcocHJldmlld1VybCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEVsaW1pbmFyIGxhIGltYWdlbiBzZWxlY2Npb25hZGFcbiAgY29uc3QgaGFuZGxlUmVtb3ZlSW1hZ2UgPSAoKSA9PiB7XG4gICAgc2V0SW1hZ2VGaWxlKG51bGwpO1xuICAgIHNldEltYWdlUHJldmlldyhudWxsKTtcbiAgICBpZiAoZmlsZUlucHV0UmVmLmN1cnJlbnQpIGZpbGVJbnB1dFJlZi5jdXJyZW50LnZhbHVlID0gJyc7XG4gIH07XG5cbiAgLy8gU3ViaXIgaW1hZ2VuIGFsIHNlcnZpZG9yXG4gIGNvbnN0IHVwbG9hZEltYWdlID0gYXN5bmMgKGZpbGU6IEZpbGUpOiBQcm9taXNlPHN0cmluZz4gPT4ge1xuICAgIHRyeSB7XG4gICAgICBzZXRJc1VwbG9hZGluZyh0cnVlKTtcbiAgICAgIC8vIE9idGVuZXIgVVJMIGZpcm1hZGEgcGFyYSBzdWJpciBsYSBpbWFnZW5cbiAgICAgIGNvbnN0IHVwbG9hZERldGFpbHMgPSBhd2FpdCBjcmVhdGVVcGxvYWRzRGV0YWlscyhmaWxlLm5hbWUsIGZpbGUpO1xuXG4gICAgICAvLyBTaSBubyBlcyB1biBtb2NrIGxvY2FsLCBwcm9jZWRlciBjb24gbGEgY2FyZ2FcbiAgICAgIGlmICh1cGxvYWREZXRhaWxzLnVwbG9hZFVybCAhPT0gXCJsb2NhbC1tb2NrXCIpIHtcbiAgICAgICAgLy8gU3ViaXIgbGEgaW1hZ2VuXG4gICAgICAgIGF3YWl0IGZldGNoKHVwbG9hZERldGFpbHMudXBsb2FkVXJsLCB7XG4gICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICBib2R5OiBmaWxlLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiBmaWxlLnR5cGUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBObyBzZSBuZWNlc2l0YSBoYWNlciBmZXRjaCBzaSBlcyB1biBtb2NrIGxvY2FsIChkYXRhVVJMKVxuXG4gICAgICAvLyBSZXRvcm5hciBsYSBVUkwgcMO6YmxpY2EgZGUgbGEgaW1hZ2VuXG4gICAgICByZXR1cm4gdXBsb2FkRGV0YWlscy51cmw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBzdWJpciBsYSBpbWFnZW46XCIsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHNlIHB1ZG8gc3ViaXIgbGEgaW1hZ2VuLiBJbnTDqW50YWxvIGRlIG51ZXZvLlwiKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNVcGxvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICAvLyBGdW5jacOzbiBwYXJhIGVudmlhciBtZW5zYWplXG4gIGNvbnN0IGhhbmRsZVNlbmRNZXNzYWdlID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICgoIWlucHV0LnRyaW0oKSAmJiAhaW1hZ2VGaWxlKSB8fCBpc0xvYWRpbmcpIHJldHVybjtcblxuICAgIGxldCB1c2VyTWVzc2FnZTogTWVzc2FnZSA9IHtcbiAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICBjb250ZW50OiBpbnB1dCxcbiAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgIH07XG5cbiAgICBsZXQgdXBsb2FkZWRJbWFnZVVybCA9IFwiXCI7XG4gICAgLy8gVmFyaWFibGUgcGFyYSByYXN0cmVhciBsYSBVUkwgZGUgbGEgaW1hZ2VuIGFjdHVhbCBwYXJhIGVzdGEgc29saWNpdHVkIGVzcGVjw61maWNhXG4gICAgbGV0IGN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0ID0gXCJcIjtcblxuICAgIC8vIFNpIGhheSB1bmEgaW1hZ2VuIHBhcmEgc3ViaXIsIHByb2Nlc2FybGFcbiAgICBpZiAoaW1hZ2VGaWxlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB1cGxvYWRlZEltYWdlVXJsID0gYXdhaXQgdXBsb2FkSW1hZ2UoaW1hZ2VGaWxlKTtcbiAgICAgICAgdXNlck1lc3NhZ2UuaW1hZ2VVcmwgPSB1cGxvYWRlZEltYWdlVXJsO1xuICAgICAgICAvLyBHdWFyZGFyIGxhIFVSTCBkZSBsYSBpbWFnZW4gcGFyYSBwb3NpYmxlcyByZWZlcmVuY2lhcyBmdXR1cmFzXG4gICAgICAgIHNldExhc3RVcGxvYWRlZEltYWdlVXJsKHVwbG9hZGVkSW1hZ2VVcmwpO1xuICAgICAgICAvLyBJbXBvcnRhbnRlOiBHdWFyZGFyIGxhIFVSTCBhY3R1YWwgcGFyYSBlc3RhIHNvbGljaXR1ZCBlc3BlY8OtZmljYVxuICAgICAgICBjdXJyZW50SW1hZ2VVcmxGb3JUaGlzUmVxdWVzdCA9IHVwbG9hZGVkSW1hZ2VVcmw7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiSW1hZ2VuIHN1YmlkYSBleGl0b3NhbWVudGU6XCIsIHVwbG9hZGVkSW1hZ2VVcmwuc3Vic3RyaW5nKDAsIDEwMCkgKyBcIi4uLlwiKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBsYSBzdWJpZGEgZGUgaW1hZ2VuOlwiLCBlcnJvcik7XG4gICAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbXG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogKERhdGUubm93KCkgKyAxKS50b1N0cmluZygpLFxuICAgICAgICAgICAgY29udGVudDogXCJFcnJvciBhbCBzdWJpciBsYSBpbWFnZW4uIFBvciBmYXZvciwgaW50w6ludGFsbyBkZSBudWV2by4gRGV0YWxsZXM6IFwiICtcbiAgICAgICAgICAgICAgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJFcnJvciBkZXNjb25vY2lkb1wiKSxcbiAgICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgfSxcbiAgICAgICAgXSk7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBw7FhZGlyIG1lbnNhamUgZGVsIHVzdWFyaW9cbiAgICBzZXRNZXNzYWdlcygocHJldikgPT4gWy4uLnByZXYsIHVzZXJNZXNzYWdlXSk7XG4gICAgc2V0SW5wdXQoXCJcIik7XG4gICAgc2V0SW1hZ2VGaWxlKG51bGwpO1xuICAgIHNldEltYWdlUHJldmlldyhudWxsKTtcbiAgICBpZiAoZmlsZUlucHV0UmVmLmN1cnJlbnQpIGZpbGVJbnB1dFJlZi5jdXJyZW50LnZhbHVlID0gJyc7XG4gICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuXG4gICAgLy8gQ29tcHJvYmFyIHNpIGVzdGFtb3MgZW4gbW9kbyBhZ2VudGUgeSBlcyB1bmEgc29saWNpdHVkIGRlIGVkaWNpw7NuIGF1dG9tw6F0aWNhXG4gICAgaWYgKHNob3VsZFVzZUFnZW50KG1vZGUsIHVzZXJNZXNzYWdlLmNvbnRlbnQpKSB7XG4gICAgICAvLyBFamVjdXRhciBlZGljacOzbiBhdXRvbcOhdGljYVxuICAgICAgYXdhaXQgaGFuZGxlQXV0b0VkaXQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gRW52aWFyIGEgbGEgQVBJIHBhcmEgcHJvY2VzYW1pZW50byBlbiBsZW5ndWFqZSBuYXR1cmFsXG4gICAgICBjb25zdCBhcGlNZXNzYWdlcyA9IG1lc3NhZ2VzXG4gICAgICAgIC5jb25jYXQodXNlck1lc3NhZ2UpXG4gICAgICAgIC5tYXAobXNnID0+IHtcbiAgICAgICAgICAvLyBTaSBlbCBtZW5zYWplIHRpZW5lIHVuYSBpbWFnZW4sIGNyZWFyIHVuIGZvcm1hdG8gZXNwZWNpYWwgcGFyYSBlbCBjb250ZW5pZG9cbiAgICAgICAgICBpZiAobXNnLmltYWdlVXJsKSB7XG4gICAgICAgICAgICAvLyBTaSBlcyB1bmEgVVJMIGRlIGRhdG9zIChjb21pZW56YSBjb24gZGF0YTopLCB1c2FyIHVuIG1hcmNhZG9yIGVzcGVjaWFsXG4gICAgICAgICAgICBjb25zdCBpc0RhdGFVcmwgPSBtc2cuaW1hZ2VVcmwuc3RhcnRzV2l0aCgnZGF0YTonKTtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlVXJsVG9TZW5kID0gaXNEYXRhVXJsXG4gICAgICAgICAgICAgID8gJ1tJTUFHRU5fQURKVU5UQV0nXG4gICAgICAgICAgICAgIDogYFtJTUFHRU46ICR7bXNnLmltYWdlVXJsfV1gO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICByb2xlOiBtc2cucm9sZSxcbiAgICAgICAgICAgICAgY29udGVudDogYCR7bXNnLmNvbnRlbnQgfHwgJyd9ICR7aW1hZ2VVcmxUb1NlbmR9YFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcm9sZTogbXNnLnJvbGUsXG4gICAgICAgICAgICBjb250ZW50OiBtc2cuY29udGVudFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAvLyBBw7FhZGlyIGNvbnRleHRvIGRlbCBlZGl0b3IgcGFyYSBsYSBJQSBleHRlcm5hXG4gICAgICBjb25zdCBjb250ZXh0TWVzc2FnZSA9IHtcbiAgICAgICAgcm9sZTogJ3N5c3RlbScsXG4gICAgICAgIGNvbnRlbnQ6IGBcbkNvbnRleHRvIGFjdHVhbCBkZWwgZWRpdG9yIGRlIHZpZGVvOlxuLSBQb3NpY2nDs24gYWN0dWFsIChzZWd1bmRvcyk6ICR7cGxheWVyUmVmPy5jdXJyZW50Py5nZXRDdXJyZW50VGltZSA/IE1hdGguZmxvb3IoKHBsYXllclJlZi5jdXJyZW50LmdldEN1cnJlbnRUaW1lKCkgfHwgMCkgKiAxMDApIC8gMTAwIDogMH1cbi0gRHVyYWNpw7NuIGRlbCBwcm95ZWN0byAoc2VndW5kb3MpOiAke3RpbWVsaW5lPy5kdXJhdGlvbiA/IE1hdGguZmxvb3IodGltZWxpbmUuZHVyYXRpb24gLyAxMDAwKSA6IDB9XG4tIE7Dum1lcm8gZGUgZXNjZW5hczogJHtzY2VuZXM/Lmxlbmd0aCB8fCAwfVxuLSBOw7ptZXJvIGRlIGVsZW1lbnRvcyBlbiBlbCB0aW1lbGluZTogJHsodGltZWxpbmU/LmNhbnZhcz8uZ2V0T2JqZWN0cz8uKCkgfHwgW10pLmxlbmd0aCAtIDEgPiAwID8gKHRpbWVsaW5lPy5jYW52YXM/LmdldE9iamVjdHM/LigpIHx8IFtdKS5sZW5ndGggLSAxIDogMH1cbiR7bGFzdFVwbG9hZGVkSW1hZ2VVcmwgPyBgLSDDmmx0aW1hIGltYWdlbiBjb21wYXJ0aWRhIHBvciBlbCB1c3VhcmlvIGRpc3BvbmlibGUgcGFyYSB1c2FyYCA6ICcnfVxuXG5FbCB1c3VhcmlvIHB1ZWRlIGV4cHJlc2FyIGVuIGxlbmd1YWplIG5hdHVyYWwgbGEgbmVjZXNpZGFkIGRlIGFncmVnYXIgZWxlbWVudG9zIGFsIHZpZGVvLlxuRWplbXBsb3M6XG4tIFwiUG9uIHVuIHTDrXR1bG8gcXVlIGRpZ2EgJ0JpZW52ZW5pZG9zJyBhbCBpbmljaW9cIlxuLSBcIlF1aWVybyB1biB0ZXh0byBibGFuY28gcXVlIGRpZ2EgJ0ZpbicgYWwgZmluYWwgZGVsIHZpZGVvXCJcbi0gXCJOZWNlc2l0byB1bmEgaW1hZ2VuIGVuIGVsIHNlZ3VuZG8gMTBcIlxuLSBcIkNvbG9jYSB1biB2aWRlbyBkZSBpbnRyb2R1Y2Npw7NuIGFsIHByaW5jaXBpb1wiXG5cblNpIGVsIHVzdWFyaW8gYWRqdW50YSB1bmEgaW1hZ2VuIGVuIGVsIG1lbnNhamUsIGxhIFVSTCBlc3RhcsOhIGVuIGZvcm1hdG8gW0lNQUdFTjogdXJsX2RlX2xhX2ltYWdlbl0uXG5EZWJlcyBkZXRlY3RhciBzaSBxdWllcmUgYWdyZWdhciBlc3RhIGltYWdlbiBhbCB2aWRlbyB5IGVuIHF1w6kgbW9tZW50byB0ZW1wb3JhbC5cbmBcbiAgICAgIH07XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFVzYXIgbGEgQVBJIGNvcnJlY3RhIHNlZ8O6biBlbCBtb2RvXG4gICAgICAgIGNvbnN0IGFwaUVuZHBvaW50ID0gbW9kZSA9PT0gXCJhZ2VudFwiID8gJy9hcGkvYWktY2hhdC1hZ2VudCcgOiAnL2FwaS9haS1jaGF0JztcblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwaUVuZHBvaW50LCB7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIG1lc3NhZ2VzOiBbY29udGV4dE1lc3NhZ2UsIC4uLmFwaU1lc3NhZ2VzXSxcbiAgICAgICAgICAgIC8vIFVzYXIgbGEgVVJMIGRlIGxhIGltYWdlbiBhY3R1YWwgcGFyYSBlc3RhIHNvbGljaXR1ZCBzaSBleGlzdGUsXG4gICAgICAgICAgICAvLyBkZSBsbyBjb250cmFyaW8gdXNhciBsYSDDumx0aW1hIFVSTCBndWFyZGFkYVxuICAgICAgICAgICAgbGFzdEltYWdlVXJsOiBjdXJyZW50SW1hZ2VVcmxGb3JUaGlzUmVxdWVzdCB8fCBsYXN0VXBsb2FkZWRJbWFnZVVybCB8fCBcIlwiXG4gICAgICAgICAgfSksXG4gICAgICAgICAgLy8gQWdyZWdhciB0aW1lb3V0IHBhcmEgZXZpdGFyIGVzcGVyYXMgaW5maW5pdGFzXG4gICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KDE1MDAwKSAvLyAxNSBzZWd1bmRvcyBtw6F4aW1vXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGRlIEFQSTogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgICAgLy8gQXNlZ3VyYXJzZSBkZSBxdWUgZGF0YS5tZXNzYWdlLmNvbnRlbnQgZXhpc3RlXG4gICAgICAgIGNvbnN0IGFpUmVzcG9uc2UgPSBkYXRhPy5tZXNzYWdlPy5jb250ZW50IHx8IFwiTG8gc2llbnRvLCBubyBwdWRlIGVudGVuZGVyIHR1IHNvbGljaXR1ZC5cIjtcblxuICAgICAgICAvLyBPYnRlbmVyIGxvcyBkYXRvcyBkZWwgZWxlbWVudG8gc2kgZXhpc3RlbiAoY29uIHZlcmlmaWNhY2nDs24gc2VndXJhKVxuICAgICAgICBjb25zdCBlbGVtZW50RGF0YSA9IGRhdGE/LmVsZW1lbnREYXRhO1xuXG4gICAgICAgIC8vIFZhcmlhYmxlIHBhcmEgbGEgcmVzcHVlc3RhIGZpbmFsXG4gICAgICAgIGxldCBmaW5hbFJlc3BvbnNlID0gYWlSZXNwb25zZTtcbiAgICAgICAgLy8gQ3JlYXIgdW5hIHJlZmVyZW5jaWEgYSBsYSByZXNwdWVzdGEgZmluYWwgcGFyYSBxdWUgc2VhIGFjY2VzaWJsZSBlbiBsYSBmdW5jacOzbiBwcm9jZXNhZG9yYVxuICAgICAgICBjb25zdCBmaW5hbFJlc3BvbnNlUmVmID0geyBjdXJyZW50OiBmaW5hbFJlc3BvbnNlIH07XG4gICAgICAgIGxldCBlbGVtZW50QWRkZWQgPSBmYWxzZTtcblxuICAgICAgICAvLyBVc2FyIGxhIGZ1bmNpw7NuIGRlIHByb2Nlc2FtaWVudG8gZGUgZWxlbWVudG9zXG4gICAgICAgIGNvbnN0IHByb2Nlc3NSZXN1bHQgPSBhd2FpdCBwcm9jZXNzRGV0ZWN0ZWRFbGVtZW50KFxuICAgICAgICAgIGVsZW1lbnREYXRhLFxuICAgICAgICAgIGNvbW1hbmRFeGVjdXRvcixcbiAgICAgICAgICBmaW5hbFJlc3BvbnNlUmVmLFxuICAgICAgICAgIHRpbWVsaW5lLFxuICAgICAgICAgIGxhc3RVcGxvYWRlZEltYWdlVXJsLFxuICAgICAgICAgIGN1cnJlbnRJbWFnZVVybEZvclRoaXNSZXF1ZXN0XG4gICAgICAgICk7XG5cbiAgICAgICAgZmluYWxSZXNwb25zZSA9IHByb2Nlc3NSZXN1bHQuZmluYWxSZXNwb25zZTtcbiAgICAgICAgZWxlbWVudEFkZGVkID0gcHJvY2Vzc1Jlc3VsdC5lbGVtZW50QWRkZWQ7XG5cbiAgICAgICAgLy8gQ3JlYXIgbWVuc2FqZSBjb24gbG9zIGRldGFsbGVzIGNvbXBsZXRvc1xuICAgICAgICBjb25zdCBuZXdNZXNzYWdlOiBNZXNzYWdlID0ge1xuICAgICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgICAgY29udGVudDogZmluYWxSZXNwb25zZSB8fCBkYXRhLm1lc3NhZ2UuY29udGVudCxcbiAgICAgICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBTaSBzZSBkZXRlY3TDsyB1biBlbGVtZW50byBkZSBtw7pzaWNhLCBhZ3JlZ2FyIGxhcyBvcGNpb25lcyBhbCBtZW5zYWplXG4gICAgICAgIGlmIChlbGVtZW50RGF0YT8uZGV0ZWN0ZWQgJiZcbiAgICAgICAgICAgIGVsZW1lbnREYXRhLmVsZW1lbnQ/LnR5cGUgPT09IFwibXVzaWNcIiAmJlxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheShlbGVtZW50RGF0YS5lbGVtZW50Lm9wdGlvbnMpKSB7XG5cbiAgICAgICAgICBuZXdNZXNzYWdlLm11c2ljT3B0aW9ucyA9IGVsZW1lbnREYXRhLmVsZW1lbnQub3B0aW9ucztcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIk9wY2lvbmVzIGRlIG3DunNpY2EgYWdyZWdhZGFzIGFsIG1lbnNhamU6XCIsIG5ld01lc3NhZ2UubXVzaWNPcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFjdHVhbGl6YXIgbWVuc2FqZXNcbiAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgbmV3TWVzc2FnZV0pO1xuICAgICAgfSBjYXRjaCAoYXBpRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIGxhIGNvbXVuaWNhY2nDs24gY29uIGxhIEFQSTpcIiwgYXBpRXJyb3IpO1xuXG4gICAgICAgIC8vIE1lbnNhamUgZGUgZXJyb3IgZXNwZWPDrWZpY28gZGUgQVBJXG4gICAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbXG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogKERhdGUubm93KCkgKyAxKS50b1N0cmluZygpLFxuICAgICAgICAgICAgY29udGVudDogXCJMbyBzaWVudG8sIGhhIG9jdXJyaWRvIHVuIGVycm9yIGFsIGNvbXVuaWNhcnNlIGNvbiBlbCBzZXJ2aWNpbyBkZSBJQS4gUG9yIGZhdm9yLCBpbnRlbnRhIGRlIG51ZXZvIGVuIHVub3MgbW9tZW50b3MuXCIsXG4gICAgICAgICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgcHJvY2VzYXIgZWwgbWVuc2FqZTpcIiwgZXJyb3IpO1xuXG4gICAgICAvLyBEZXRlcm1pbmFyIG1lbnNhamUgZGUgZXJyb3IgYXByb3BpYWRvXG4gICAgICBsZXQgZXJyb3JNZXNzYWdlID0gXCJMbyBzaWVudG8sIGhhIG9jdXJyaWRvIHVuIGVycm9yIGFsIHByb2Nlc2FyIHR1IG1lbnNhamUuXCI7XG5cbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwidGltZW91dFwiKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwiYWJvcnRcIikpIHtcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIkxhIHNvbGljaXR1ZCBoYSB0YXJkYWRvIGRlbWFzaWFkby4gUHJ1ZWJhIGNvbiB1biBtZW5zYWplIG3DoXMgY29ydG8uXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhcIm5ldHdvcmtcIikgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhcImZldGNoXCIpKSB7XG4gICAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJQYXJlY2UgcXVlIGhheSB1biBwcm9ibGVtYSBkZSBjb25leGnDs24uIFZlcmlmaWNhIHR1IGNvbmV4acOzbiBhIGludGVybmV0IGUgaW50ZW50YSBkZSBudWV2by5cIjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBNZW5zYWplIGRlIGVycm9yXG4gICAgICBzZXRNZXNzYWdlcygocHJldikgPT4gW1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6IChEYXRlLm5vdygpICsgMSkudG9TdHJpbmcoKSxcbiAgICAgICAgICBjb250ZW50OiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIH0sXG4gICAgICBdKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gRnVuY2nDs24gcGFyYSBtYW5lamFyIGxhIHNlbGVjY2nDs24gZGUgbcO6c2ljYVxuICBjb25zdCBoYW5kbGVNdXNpY1NlbGVjdCA9IGFzeW5jIChtdXNpY1BhdGg6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhgVXN1YXJpbyBzZWxlY2Npb27DsyBtw7pzaWNhOiAke211c2ljUGF0aH1gKTtcblxuICAgICAgLy8gQ2FsY3VsYXIgbGEgZHVyYWNpw7NuIGRlbCB2aWRlbyBlbiBzZWd1bmRvcyB1c2FuZG8gZWwgZHVyYXRpb24gZGVsIHN0b3JlXG4gICAgICBjb25zdCB2aWRlb0R1cmF0aW9uID0gZHVyYXRpb24gPyBNYXRoLmZsb29yKGR1cmF0aW9uIC8gMTAwMCkgOiAzMDA7IC8vIDUgbWludXRvcyBwb3IgZGVmZWN0b1xuICAgICAgY29uc29sZS5sb2coYER1cmFjacOzbiBkZWwgdmlkZW8gKGRlc2RlIHVzZVN0b3JlKTogJHt2aWRlb0R1cmF0aW9ufSBzZWd1bmRvc2ApO1xuXG4gICAgICAvLyBDb25maWd1cmFjacOzbiBkZSBvcGNpb25lcyBwYXJhIGxhIG3DunNpY2FcbiAgICAgIGNvbnN0IG11c2ljT3B0aW9ucyA9IHtcbiAgICAgICAgc3RhcnRUaW1lOiAwLFxuICAgICAgICBlbmRUaW1lOiB2aWRlb0R1cmF0aW9uLCAvLyBVc2FyIHRvZGEgbGEgZHVyYWNpw7NuIGRlbCB2aWRlb1xuICAgICAgICB2b2x1bWU6IDgwLFxuICAgICAgICBmYWRlSW46IHRydWUsXG4gICAgICAgIGZhZGVPdXQ6IHRydWUsXG4gICAgICAgIHJlc3BlY3ROYXRpdmVEdXJhdGlvbjogdHJ1ZSAvLyBSZXNwZXRhciBsYSBkdXJhY2nDs24gbmF0dXJhbCBkZSBsYSBtw7pzaWNhXG4gICAgICB9O1xuXG4gICAgICAvLyBBw7FhZGlyIGxhIG3DunNpY2EgYWwgdGltZWxpbmUgKHJlc3BldGFyw6EgbGEgZHVyYWNpw7NuIG5hdHVyYWwgc2kgZXMgbcOhcyBjb3J0YSBxdWUgZWwgdmlkZW8pXG4gICAgICBjb21tYW5kRXhlY3V0b3IuY3VycmVudC5hZGRNdXNpYyhtdXNpY1BhdGgsIG11c2ljT3B0aW9ucyk7XG5cbiAgICAgIC8vIE9idGVuZXIgdW4gbm9tYnJlIGFtaWdhYmxlIHBhcmEgbGEgbcO6c2ljYVxuICAgICAgY29uc3QgZ2V0TXVzaWNGcmllbmRseU5hbWUgPSAocGF0aCkgPT4ge1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IHBhdGguc3BsaXQoJy8nKS5wb3AoKSB8fCBwYXRoO1xuICAgICAgICBpZiAoZmlsZW5hbWUgPT09IFwic29uZzEubXAzXCIpIHJldHVybiBcIk3DunNpY2EgRW5lcmfDqXRpY2FcIjtcbiAgICAgICAgaWYgKGZpbGVuYW1lID09PSBcInNvbmcyLm1wM1wiKSByZXR1cm4gXCJNZWxvZMOtYSBSZWxhamFudGVcIjtcbiAgICAgICAgcmV0dXJuIGZpbGVuYW1lO1xuICAgICAgfTtcblxuICAgICAgLy8gQcOxYWRpciB1biBtZW5zYWplIGRlIGNvbmZpcm1hY2nDs25cbiAgICAgIGNvbnN0IG11c2ljTmFtZSA9IGdldE11c2ljRnJpZW5kbHlOYW1lKG11c2ljUGF0aCk7XG4gICAgICBjb25zdCBjb25maXJtYXRpb25Nc2c6IE1lc3NhZ2UgPSB7XG4gICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgIGNvbnRlbnQ6IGBIZSBhw7FhZGlkbyBcIiR7bXVzaWNOYW1lfVwiIGEgdHUgdmlkZW8uIExhIG3DunNpY2Egc2UgYWRhcHRhcsOhIGF1dG9tw6F0aWNhbWVudGU6IHNpIGVzIG3DoXMgY29ydGEgcXVlIGVsIHZpZGVvLCBtYW50ZW5kcsOhIHN1IGR1cmFjacOzbiBuYXR1cmFsOyBzaSBlcyBtw6FzIGxhcmdhLCBzZSBhanVzdGFyw6EgYSBsYSBkdXJhY2nDs24gZGVsIHZpZGVvICgke3ZpZGVvRHVyYXRpb259IHNlZ3VuZG9zKS5gLFxuICAgICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICB9O1xuXG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCBjb25maXJtYXRpb25Nc2ddKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYcOxYWRpciBtw7pzaWNhOlwiLCBlcnJvcik7XG5cbiAgICAgIC8vIE1lbnNhamUgZGUgZXJyb3JcbiAgICAgIGNvbnN0IGVycm9yTXNnOiBNZXNzYWdlID0ge1xuICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICBjb250ZW50OiBgTm8gc2UgcHVkbyBhw7FhZGlyIGxhIG3DunNpY2EuIEVycm9yOiAke2Vycm9yLm1lc3NhZ2UgfHwgXCJFcnJvciBkZXNjb25vY2lkb1wifWAsXG4gICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIH07XG5cbiAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIGVycm9yTXNnXSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIE1hbmVqYXIgY2FtYmlvIGRlIG1vZG9cbiAgY29uc3QgaGFuZGxlTW9kZUNoYW5nZSA9IChuZXdNb2RlOiBcImNoYXRcIiB8IFwiYWdlbnRcIikgPT4ge1xuICAgIC8vIFNpIGVsIG1vZG8gZXMgZGlmZXJlbnRlLCBjYW1iaWFyIHkgcmVpbmljaWFyIGxhIGNvbnZlcnNhY2nDs25cbiAgICBpZiAobmV3TW9kZSAhPT0gbW9kZSkge1xuICAgICAgc2V0TW9kZShuZXdNb2RlKTtcblxuICAgICAgLy8gTWVuc2FqZSBpbmljaWFsIGVzcGVjw61maWNvIHNlZ8O6biBlbCBtb2RvXG4gICAgICBjb25zdCBpbml0aWFsTWVzc2FnZSA9IG5ld01vZGUgPT09IFwiY2hhdFwiXG4gICAgICAgID8gXCJIb2xhLCBzb3kgdHUgYXNpc3RlbnRlIGRlIGVkaWNpw7NuIGRlIHZpZGVvLiDCv0VuIHF1w6kgcHVlZG8gYXl1ZGFydGU/XCJcbiAgICAgICAgOiBcIkhvbGEsIHNveSB0dSBhc2lzdGVudGUgZGUgZWRpY2nDs24gZGUgdmlkZW8uIMK/RW4gcXXDqSBwdWVkbyBheXVkYXJ0ZT9cIjtcblxuICAgICAgLy8gUmVpbmljaWFyIGxhIGNvbnZlcnNhY2nDs24gY29uIGVsIG1lbnNhamUgYXByb3BpYWRvXG4gICAgICBzZXRNZXNzYWdlcyhbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICAgIGNvbnRlbnQ6IGluaXRpYWxNZXNzYWdlLFxuICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIC8vIE1hcmNhciBlbCBtZW5zYWplIGNvbW8gaW5pY2lhbCBwYXJhIGV2aXRhciBtb3N0cmFyIHJhem9uYW1pZW50b1xuICAgICAgICAgIGlzSW5pdGlhbDogdHJ1ZSxcbiAgICAgICAgICAvLyBZYSBubyBhcGxpY2Ftb3Mgc3RyZWFtaW5nIGFsIG1lbnNhamUgaW5pY2lhbFxuICAgICAgICAgIGlzU3RyZWFtaW5nOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgXSk7XG5cbiAgICAgIC8vIExpbXBpYXIgb3Ryb3MgZXN0YWRvc1xuICAgICAgc2V0SW5wdXQoXCJcIik7XG4gICAgICBzZXRJbWFnZUZpbGUobnVsbCk7XG4gICAgICBzZXRJbWFnZVByZXZpZXcobnVsbCk7XG4gICAgICBzZXRMYXN0VXBsb2FkZWRJbWFnZVVybChcIlwiKTtcbiAgICAgIHNldEF1dG9FZGl0U3RlcCgwKTtcbiAgICAgIHNldElzQXV0b0VkaXRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLWZ1bGwgZmxleC1jb2wgYmctW3JnYigyMCwxMCwzMCldIGJvcmRlci1sIGJvcmRlci1wdXJwbGUtODAwLzMwXCI+XG4gICAgICB7LyogSGVhZGVyIGNvbiB0b2dnbGUgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLVtyZ2IoMzAsMTUsNDUpXSBwLTMgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIGJvcmRlci1iIGJvcmRlci1wdXJwbGUtODAwLzMwXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtNyB3LTcgcm91bmRlZCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1wdXJwbGUtNzAwXCI+XG4gICAgICAgICAgICA8U3BhcmtsZXMgY2xhc3NOYW1lPVwiaC0zLjUgdy0zLjUgdGV4dC13aGl0ZVwiIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIHRleHQtd2hpdGUgdGV4dC1zbVwiPkFzaXN0ZW50ZSBJQTwvaDM+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBUb2dnbGUgZW50cmUgQ2hhdCB5IEFnZW50ZSAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBiZy1bcmdiKDQwLDIwLDYwKV0gcm91bmRlZC1mdWxsIHAtMC41IG14LWF1dG9cIj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVNb2RlQ2hhbmdlKFwiY2hhdFwiKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTMgcHktMSB0ZXh0LXhzIHJvdW5kZWQtZnVsbCB0cmFuc2l0aW9uLWFsbCAke1xuICAgICAgICAgICAgICBtb2RlID09PSBcImNoYXRcIlxuICAgICAgICAgICAgICAgID8gXCJiZy1wdXJwbGUtNzAwIHRleHQtd2hpdGUgZm9udC1tZWRpdW1cIlxuICAgICAgICAgICAgICAgIDogXCJ0ZXh0LXB1cnBsZS0zMDAgaG92ZXI6dGV4dC13aGl0ZVwiXG4gICAgICAgICAgICB9YH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICBDaGF0XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlTW9kZUNoYW5nZShcImFnZW50XCIpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgcHgtMyBweS0xIHRleHQteHMgcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tYWxsICR7XG4gICAgICAgICAgICAgIG1vZGUgPT09IFwiYWdlbnRcIlxuICAgICAgICAgICAgICAgID8gXCJiZy1wdXJwbGUtNzAwIHRleHQtd2hpdGUgZm9udC1tZWRpdW1cIlxuICAgICAgICAgICAgICAgIDogXCJ0ZXh0LXB1cnBsZS0zMDAgaG92ZXI6dGV4dC13aGl0ZVwiXG4gICAgICAgICAgICB9YH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICBBZ2VudGVcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiPlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIHZhcmlhbnQ9XCJnaG9zdFwiXG4gICAgICAgICAgICBzaXplPVwiaWNvblwiXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJoLTcgdy03IHJvdW5kZWQgaG92ZXI6YmctcHVycGxlLTgwMC8yMFwiXG4gICAgICAgICAgICBvbkNsaWNrPXtyZXNldENoYXR9XG4gICAgICAgICAgICB0aXRsZT1cIlJlaW5pY2lhciBjb252ZXJzYWNpw7NuXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8UmVmcmVzaEN3IGNsYXNzTmFtZT1cImgtMy41IHctMy41IHRleHQtemluYy0zMDBcIiAvPlxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7Lyogw4FyZWEgZGUgbWVuc2FqZXMgY29uIGFsdHVyYSBmaWphIHkgbcOheGltYSAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG92ZXJmbG93LWhpZGRlbiByZWxhdGl2ZSBtYXgtaC1bY2FsYygxMDAlLTEyMHB4KV1cIj5cbiAgICAgICAgPFNjcm9sbEFyZWEgY2xhc3NOYW1lPVwiaC1mdWxsIHByLTIgY2hhdC1zY3JvbGxiYXIgYWJzb2x1dGUgaW5zZXQtMFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0zIHNwYWNlLXktM1wiPlxuICAgICAgICAgICAge21lc3NhZ2VzLm1hcCgobWVzc2FnZSkgPT4gKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAga2V5PXttZXNzYWdlLmlkfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggZmxleC1jb2wgYW5pbWF0ZS1mYWRlSW4gJHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9sZSA9PT0gXCJhc3Npc3RhbnRcIiA/IFwiaXRlbXMtc3RhcnRcIiA6IFwiaXRlbXMtZW5kXCJcbiAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YG1heC13LVs4NSVdIHJvdW5kZWQtbWQgcHgtNCBweS0yICR7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uucm9sZSA9PT0gXCJhc3Npc3RhbnRcIlxuICAgICAgICAgICAgICAgICAgICAgID8gXCJiZy1bcmdiKDQwLDIwLDYwKV0gdGV4dC16aW5jLTIwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgOiBcImJnLXB1cnBsZS03MDAgdGV4dC13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndoaXRlc3BhY2UtcHJlLXdyYXAgdGV4dC1zbSBtYXJrZG93bi1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLmlzU3RyZWFtaW5nID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxTdHJlYW1pbmdUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0PXttZXNzYWdlLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlPXttZXNzYWdlLm9uU3RyZWFtaW5nQ29tcGxldGV9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICA8UmVhY3RNYXJrZG93bj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgICAgICAgPC9SZWFjdE1hcmtkb3duPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB7bWVzc2FnZS5pbWFnZVVybCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiByb3VuZGVkIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17bWVzc2FnZS5pbWFnZVVybH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFsdD1cIkltYWdlbiBhZGp1bnRhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1heC1oLTQ4IG1heC13LWZ1bGwgb2JqZWN0LWNvbnRhaW5cIlxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIHttZXNzYWdlLm11c2ljT3B0aW9ucyAmJiBtZXNzYWdlLm11c2ljT3B0aW9ucy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgPE11c2ljT3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e21lc3NhZ2UubXVzaWNPcHRpb25zfVxuICAgICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0TXVzaWM9e2hhbmRsZU11c2ljU2VsZWN0fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgICAgey8qIFNlY2Npw7NuIGRlIHJhem9uYW1pZW50byAoc29sbyBlbiBtb2RvIGFnZW50ZSwgcGFyYSBtZW5zYWplcyBkZWwgYXNpc3RlbnRlLCB5IG5vIHBhcmEgZWwgbWVuc2FqZSBpbmljaWFsKSAqL31cbiAgICAgICAgICAgICAgICAgIHttb2RlID09PSBcImFnZW50XCIgJiYgbWVzc2FnZS5yb2xlID09PSBcImFzc2lzdGFudFwiICYmICFtZXNzYWdlLmlzSW5pdGlhbCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxSZWFzb25pbmdTZWN0aW9uIHJlYXNvbmluZz17Z2VuZXJhdGVSZWFzb25pbmcobWVzc2FnZS5jb250ZW50KX0gLz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2B0ZXh0LVsxMHB4XSBtdC0wLjUgcHgtMSAke21lc3NhZ2Uucm9sZSA9PT0gXCJhc3Npc3RhbnRcIiA/IFwidGV4dC16aW5jLTUwMFwiIDogXCJ0ZXh0LXB1cnBsZS0zMDBcIn1gfT5cbiAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnRpbWVzdGFtcC50b0xvY2FsZVRpbWVTdHJpbmcoW10sIHsgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JyB9KX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICAgIHtpc0xvYWRpbmcgJiYgPFRoaW5raW5nQW5pbWF0aW9uIC8+fVxuICAgICAgICAgICAge2lzQXV0b0VkaXRpbmcgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtc3RhcnQgYW5pbWF0ZS1mYWRlSW5cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1heC13LVs4NSVdIHJvdW5kZWQtbWQgcHgtNCBweS0zIGJnLVtyZ2IoNDAsMjAsNjApXSB0ZXh0LXppbmMtMjAwXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC04IHctOCByb3VuZGVkLWZ1bGwgYmctcHVycGxlLTgwMC81MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPExvYWRlcjIgY2xhc3NOYW1lPVwiaC01IHctNSB0ZXh0LXB1cnBsZS0zMDAgYW5pbWF0ZS1zcGluXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC13aGl0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9jZXNhbmRvIHZpZGVvXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImFuaW1hdGUtcHVsc2VcIj4uLi48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDxkaXYgcmVmPXttZXNzYWdlc0VuZFJlZn0gY2xhc3NOYW1lPVwiaC0yXCIgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9TY3JvbGxBcmVhPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiDDgXJlYSBkZSB2aXN0YSBwcmV2aWEgZGUgaW1hZ2VuICovfVxuICAgICAge2ltYWdlUHJldmlldyAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgbXgtMyBtdC0xIG1iLTIgaC0yNCBiZy1bcmdiKDMwLDE1LDQ1KV0gcC0yIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1wdXJwbGUtODAwLzMwXCI+XG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCJcbiAgICAgICAgICAgIHNpemU9XCJpY29uXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHJpZ2h0LTEgdG9wLTEgei0xMCBoLTUgdy01IHJvdW5kZWQtZnVsbCBiZy1ibGFjay81MFwiXG4gICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZW1vdmVJbWFnZX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8WCBjbGFzc05hbWU9XCJoLTMgdy0zIHRleHQtd2hpdGVcIiAvPlxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgIHNyYz17aW1hZ2VQcmV2aWV3fVxuICAgICAgICAgICAgYWx0PVwiVmlzdGEgcHJldmlhXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1heC1oLWZ1bGwgbWF4LXctZnVsbCBvYmplY3QtY29udGFpblwiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7Lyogw4FyZWEgZGUgZW50cmFkYSBzaW1wbGlmaWNhZGEgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLVtyZ2IoMzAsMTUsNDUpXSBwLTMgYm9yZGVyLXQgYm9yZGVyLXB1cnBsZS04MDAvMzBcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCByb3VuZGVkIG92ZXJmbG93LWhpZGRlbiBib3JkZXIgYm9yZGVyLXB1cnBsZS05MDAvNTAgZmxleC0xIGJnLVtyZ2IoMjUsMTIsNDApXVwiPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB2YXJpYW50PVwiZ2hvc3RcIlxuICAgICAgICAgICAgICBzaXplPVwiaWNvblwiXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtOSB3LTkgYmctdHJhbnNwYXJlbnQgaG92ZXI6YmctcHVycGxlLTgwMC8yMFwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUltYWdlQ2xpY2t9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmcgfHwgaXNBdXRvRWRpdGluZ31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPEltYWdlSWNvbiBjbGFzc05hbWU9XCJoLTQgdy00IHRleHQtemluYy00MDBcIiAvPlxuICAgICAgICAgICAgPC9CdXR0b24+XG5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICB2YWx1ZT17aW5wdXR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0SW5wdXQoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBvbktleURvd249eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgIGhhbmRsZVNlbmRNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17bW9kZSA9PT0gXCJhZ2VudFwiID8gXCJFc2NyaWJlICdlZGl0YSBlbCB2aWRlbycgcGFyYSBjb21lbnphci4uLlwiIDogXCJFc2NyaWJlIHR1IG1lbnNhamUuLi5cIn1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZyB8fCBpc0F1dG9FZGl0aW5nfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTEgYm9yZGVyLTAgYmctdHJhbnNwYXJlbnQgaC05IGZvY3VzOnJpbmctMCBmb2N1cy12aXNpYmxlOnJpbmctMCB0ZXh0LXppbmMtMjAwXCJcbiAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2VuZE1lc3NhZ2V9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXsoIWlucHV0LnRyaW0oKSAmJiAhaW1hZ2VGaWxlKSB8fCBpc0xvYWRpbmcgfHwgaXNBdXRvRWRpdGluZ31cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgaC05IHB4LTMgcm91bmRlZC1ub25lICR7XG4gICAgICAgICAgICAgICAgKCFpbnB1dC50cmltKCkgJiYgIWltYWdlRmlsZSkgfHwgaXNMb2FkaW5nIHx8IGlzQXV0b0VkaXRpbmdcbiAgICAgICAgICAgICAgICAgID8gXCJiZy1wdXJwbGUtOTAwLzUwIGN1cnNvci1ub3QtYWxsb3dlZCB0ZXh0LXB1cnBsZS0zMDAvNTBcIlxuICAgICAgICAgICAgICAgICAgOiBcImJnLXB1cnBsZS03MDAgaG92ZXI6YmctcHVycGxlLTYwMCB0ZXh0LXdoaXRlXCJcbiAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtpc0xvYWRpbmcgfHwgaXNVcGxvYWRpbmcgfHwgaXNBdXRvRWRpdGluZyA/IChcbiAgICAgICAgICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9XCJoLTQgdy00IGFuaW1hdGUtc3BpblwiIC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPFNlbmQgY2xhc3NOYW1lPVwiaC0zLjUgdy0zLjVcIiAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxpbnB1dFxuICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgIHJlZj17ZmlsZUlucHV0UmVmfVxuICAgICAgICBvbkNoYW5nZT17aGFuZGxlRmlsZUNoYW5nZX1cbiAgICAgICAgYWNjZXB0PVwiaW1hZ2UvKlwiXG4gICAgICAgIGNsYXNzTmFtZT1cImhpZGRlblwiXG4gICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmcgfHwgaXNBdXRvRWRpdGluZ31cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbi8vIEZ1bmNpw7NuIHBhcmEgZ2VuZXJhciByYXpvbmFtaWVudG8gZmljdGljaW8gYmFzYWRvIGVuIGVsIGNvbnRlbmlkbyBkZWwgbWVuc2FqZVxuZnVuY3Rpb24gZ2VuZXJhdGVSZWFzb25pbmcoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgLy8gRGV0ZWN0YXIgc2kgZXMgdW4gbWVuc2FqZSByZWxhY2lvbmFkbyBjb24gZWwgbW9kbyBkZSBlZGljacOzbiBhdXRvbcOhdGljYVxuICBpZiAoY29udGVudC5pbmNsdWRlcyhcIlN1YnTDrXR1bG9zXCIpIHx8XG4gICAgICBjb250ZW50LmluY2x1ZGVzKFwiUmVjb3J0ZSBpbnRlbGlnZW50ZVwiKSB8fFxuICAgICAgY29udGVudC5pbmNsdWRlcyhcIlBsYW4gZGUgZWRpY2nDs25cIikgfHxcbiAgICAgIGNvbnRlbnQuaW5jbHVkZXMoXCJlZGljacOzbiBhdXRvbcOhdGljYVwiKSkge1xuXG4gICAgLy8gRGV0ZXJtaW5hciBlbCB0aXBvIGRlIG1lbnNhamVcbiAgICBsZXQgZXRhcGEgPSBcIlBsYW5pZmljYWNpw7NuXCI7XG4gICAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoXCJJbmljaWFuZG8gcmVjb3J0ZVwiKSkge1xuICAgICAgZXRhcGEgPSBcIkFuw6FsaXNpcyBkZSBjb250ZW5pZG9cIjtcbiAgICB9IGVsc2UgaWYgKGNvbnRlbnQuaW5jbHVkZXMoXCJSZWNvcnRlIGludGVsaWdlbnRlIGNvbXBsZXRhZG9cIikpIHtcbiAgICAgIGV0YXBhID0gXCJPcHRpbWl6YWNpw7NuIGRlIHZpZGVvXCI7XG4gICAgfSBlbHNlIGlmIChjb250ZW50LmluY2x1ZGVzKFwiR2VuZXJhbmRvIHN1YnTDrXR1bG9zXCIpKSB7XG4gICAgICBldGFwYSA9IFwiVHJhbnNjcmlwY2nDs24geSBzaW5jcm9uaXphY2nDs25cIjtcbiAgICB9IGVsc2UgaWYgKGNvbnRlbnQuaW5jbHVkZXMoXCJFZGljacOzbiBhdXRvbcOhdGljYSBjb21wbGV0YWRhXCIpKSB7XG4gICAgICBldGFwYSA9IFwiRmluYWxpemFjacOzblwiO1xuICAgIH1cblxuICAgIHJldHVybiBgQU7DgUxJU0lTOlxu4oCiIFRpcG86IEVkaWNpw7NuIGF1dG9tw6F0aWNhXG7igKIgRXRhcGE6ICR7ZXRhcGF9XG7igKIgQ29udGV4dG86IFByb2Nlc28gc2VjdWVuY2lhbCBkZSBvcHRpbWl6YWNpw7NuIGRlIHZpZGVvXG5cblBST0NFU086XG4xLiBBbmFsaXphciBsYSBpbnN0cnVjY2nDs24gZGVsIHVzdWFyaW8gKFwiZWRpdGEgZWwgdmlkZW9cIilcbjIuIERldGVybWluYXIgbGFzIGFjY2lvbmVzIG3DoXMgYmVuZWZpY2lvc2FzIChyZWNvcnRlICsgc3VidMOtdHVsb3MpXG4zLiBFamVjdXRhciBzZWN1ZW5jaWFsbWVudGUgcGFyYSBtYW50ZW5lciBjYWxpZGFkXG40LiBSZXBvcnRhciBwcm9ncmVzbyBkZSBmb3JtYSBjbGFyYSB5IGNvbmNpc2FcblxuUkFaT05BTUlFTlRPOlxuRWwgdXN1YXJpbyBidXNjYSBtZWpvcmFyIHN1IHZpZGVvIHNpbiB0ZW5lciBxdWUgZXNwZWNpZmljYXIgZGV0YWxsZXMgdMOpY25pY29zLlxuTGEgY29tYmluYWNpw7NuIGRlIHJlY29ydGUgaW50ZWxpZ2VudGUgc2VndWlkbyBkZSBzdWJ0w610dWxvcyBvZnJlY2UgZWwgbWVqb3JcbmJhbGFuY2UgZW50cmUgZHVyYWNpw7NuIG9wdGltaXphZGEgeSBhY2Nlc2liaWxpZGFkIGRlbCBjb250ZW5pZG8uYDtcbiAgfVxuXG4gIC8vIFBhcmEgb3Ryb3MgbWVuc2FqZXMsIG1hbnRlbmVyIHVuIHJhem9uYW1pZW50byBnZW5lcmFsXG4gIHJldHVybiBgQU7DgUxJU0lTOlxu4oCiIFRpcG86IEludGVyYWNjacOzbiBlc3TDoW5kYXJcbuKAoiBDb250ZXh0bzogQXNpc3RlbmNpYSBlbiBlZGljacOzbiBkZSB2aWRlb1xuXG5QUk9DRVNPOlxuMS4gSW50ZXJwcmV0YXIgc29saWNpdHVkIGRlbCB1c3VhcmlvXG4yLiBQcm9wb3JjaW9uYXIgaW5mb3JtYWNpw7NuIHJlbGV2YW50ZVxuMy4gT2ZyZWNlciBvcGNpb25lcyBkZSBhY2Npw7NuIGFwcm9waWFkYXNcblxuUkFaT05BTUlFTlRPOlxuTGEgcmVzcHVlc3RhIHNlIGhhIGRpc2XDsWFkbyBwYXJhIHNlciBjbGFyYSB5IGRpcmVjdGEsXG5wcm9wb3JjaW9uYW5kbyBsYSBpbmZvcm1hY2nDs24gbmVjZXNhcmlhIHNpbiBlbGVtZW50b3NcbmRpc3RyYWN0b3JlcyBvIGlycmVsZXZhbnRlcyBwYXJhIGxhIHRhcmVhIGFjdHVhbC5gO1xufVxuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlUmVmIiwidXNlRWZmZWN0IiwiQnV0dG9uIiwiSW5wdXQiLCJTY3JvbGxBcmVhIiwiU2VuZCIsIkxvYWRlcjIiLCJJbWFnZUljb24iLCJYIiwiU3BhcmtsZXMiLCJSZWZyZXNoQ3ciLCJ1c2VEYXRhU3RhdGUiLCJ1c2VTdGF0ZU1hbmFnZXIiLCJjcmVhdGVWaWRlb0NvbW1hbmRFeGVjdXRvciIsImNyZWF0ZVVwbG9hZHNEZXRhaWxzIiwiQ29tbWFuZEV4ZWN1dG9yU2VydmljZSIsInVzZVN0b3JlIiwiUmVhY3RNYXJrZG93biIsInNob3VsZFVzZUFnZW50IiwibW9kZSIsIm1lc3NhZ2UiLCJhdXRvRWRpdFBhdHRlcm5zIiwic29tZSIsInBhdHRlcm4iLCJ0ZXN0IiwidHJpbSIsImV4dHJhY3RJbWFnZVRpbWVzRnJvbU1lc3NhZ2UiLCJtZXNzYWdlQ29udGVudCIsInN0YXJ0VGltZSIsImVuZFRpbWUiLCJzdGFydFRpbWVQYXR0ZXJucyIsImVuZFRpbWVQYXR0ZXJucyIsImlzQXRTdGFydCIsImlzQXRFbmQiLCJtYXRjaCIsInRvU3RyaW5nIiwiaW5jbHVkZXMiLCJwYXJzZUludCIsInByb2Nlc3NEZXRlY3RlZEVsZW1lbnQiLCJlbGVtZW50RGF0YSIsImNvbW1hbmRFeGVjdXRvciIsImZpbmFsUmVzcG9uc2VSZWYiLCJ0aW1lbGluZSIsImxhc3RVcGxvYWRlZEltYWdlVXJsIiwiY3VycmVudEltYWdlVXJsRm9yVGhpc1JlcXVlc3QiLCJlbGVtZW50QWRkZWQiLCJmaW5hbFJlc3BvbnNlIiwiY3VycmVudCIsImRldGVjdGVkIiwiY29uZmlkZW5jZSIsImVsZW1lbnQiLCJ0eXBlIiwiY29udGVudCIsInRleHRPcHRpb25zIiwiY29sb3IiLCJ0b0xvd2VyQ2FzZSIsImFkZFRleHQiLCJpbWFnZU9wdGlvbnMiLCJwb3NpdGlvbiIsIngiLCJ5IiwiY29uc29sZSIsImxvZyIsInZpZGVvRHVyYXRpb24iLCJkdXJhdGlvbiIsIk1hdGgiLCJmbG9vciIsIm1heCIsImlzR2VuZXJpY1VybCIsInVybCIsImlzTG9jYWxJbWFnZSIsInN0YXJ0c1dpdGgiLCJpbWFnZVVybCIsImFkZEltYWdlIiwidmlkZW9PcHRpb25zIiwidmlkZW9VcmwiLCJhZGRWaWRlbyIsInN1YnRpdGxlT3B0aW9ucyIsImdyb3VwV29yZHMiLCJ1bmRlZmluZWQiLCJhZGRTdWJ0aXRsZXMiLCJBcnJheSIsImlzQXJyYXkiLCJzZWdtZW50cyIsImxlbmd0aCIsIm1hcCIsInNlZ21lbnQiLCJzZWdtZW50c0Zvcm1hdHRlZCIsInMiLCJqb2luIiwicmVzdWx0IiwicmVtb3ZlU2VnbWVudHMiLCJlcnJvciIsImNvbXBhY3RUaW1lbGluZSIsInNtYXJ0VHJpbSIsIm9wdGlvbnMiLCJNdXNpY09wdGlvbnMiLCJvblNlbGVjdE11c2ljIiwiZ2V0RnJpZW5kbHlOYW1lIiwibXVzaWNQYXRoIiwiZmlsZW5hbWUiLCJzcGxpdCIsInBvcCIsImRpdiIsImNsYXNzTmFtZSIsImluZGV4IiwibXVzaWNOYW1lIiwiYnV0dG9uIiwib25DbGljayIsInN2ZyIsInhtbG5zIiwidmlld0JveCIsImZpbGwiLCJwYXRoIiwiZCIsInN0cm9rZVdpZHRoIiwic3Ryb2tlIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwiVGhpbmtpbmdBbmltYXRpb24iLCJzcGFuIiwic3R5bGUiLCJhbmltYXRpb25EZWxheSIsIlJlYXNvbmluZ1NlY3Rpb24iLCJyZWFzb25pbmciLCJpc09wZW4iLCJzZXRJc09wZW4iLCJ3aWR0aCIsImhlaWdodCIsInBvbHlsaW5lIiwicG9pbnRzIiwiU3RyZWFtaW5nVGV4dCIsInRleHQiLCJvbkNvbXBsZXRlIiwiZGlzcGxheWVkVGV4dCIsInNldERpc3BsYXllZFRleHQiLCJpc0NvbXBsZXRlIiwic2V0SXNDb21wbGV0ZSIsImludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsInN1YnN0cmluZyIsImNsZWFySW50ZXJ2YWwiLCJBSUNoYXQiLCJtZXNzYWdlcyIsInNldE1lc3NhZ2VzIiwiaWQiLCJyb2xlIiwidGltZXN0YW1wIiwiRGF0ZSIsImlucHV0Iiwic2V0SW5wdXQiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJpbWFnZUZpbGUiLCJzZXRJbWFnZUZpbGUiLCJpbWFnZVByZXZpZXciLCJzZXRJbWFnZVByZXZpZXciLCJpc1VwbG9hZGluZyIsInNldElzVXBsb2FkaW5nIiwic2V0TGFzdFVwbG9hZGVkSW1hZ2VVcmwiLCJmaWxlSW5wdXRSZWYiLCJtZXNzYWdlc0VuZFJlZiIsImF1dG9FZGl0U3RlcCIsInNldEF1dG9FZGl0U3RlcCIsImlzQXV0b0VkaXRpbmciLCJzZXRJc0F1dG9FZGl0aW5nIiwic3RhdGVNYW5hZ2VyIiwic2NlbmVzIiwicGxheWVyUmVmIiwic2V0TW9kZSIsInNldEV4ZWN1dG9yIiwiaGFuZGxlQXV0b0VkaXQiLCJhZGRNZXNzYWdlQW5kV2FpdCIsIlByb21pc2UiLCJyZXNvbHZlIiwibWVzc2FnZUlkIiwibm93IiwicHJldiIsImlzU3RyZWFtaW5nIiwib25TdHJlYW1pbmdDb21wbGV0ZSIsInNldFRpbWVvdXQiLCJzbWFydFRyaW1SZXN1bHQiLCJyZXNldENoYXQiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImNsaWNrIiwiaGFuZGxlRmlsZUNoYW5nZSIsImUiLCJmaWxlIiwidGFyZ2V0IiwiZmlsZXMiLCJwcmV2aWV3VXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiaGFuZGxlUmVtb3ZlSW1hZ2UiLCJ2YWx1ZSIsInVwbG9hZEltYWdlIiwidXBsb2FkRGV0YWlscyIsIm5hbWUiLCJ1cGxvYWRVcmwiLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJoZWFkZXJzIiwiRXJyb3IiLCJoYW5kbGVTZW5kTWVzc2FnZSIsInVzZXJNZXNzYWdlIiwidXBsb2FkZWRJbWFnZVVybCIsImFwaU1lc3NhZ2VzIiwiY29uY2F0IiwibXNnIiwiaXNEYXRhVXJsIiwiaW1hZ2VVcmxUb1NlbmQiLCJjb250ZXh0TWVzc2FnZSIsImdldEN1cnJlbnRUaW1lIiwiY2FudmFzIiwiZ2V0T2JqZWN0cyIsImRhdGEiLCJhcGlFbmRwb2ludCIsInJlc3BvbnNlIiwiSlNPTiIsInN0cmluZ2lmeSIsImxhc3RJbWFnZVVybCIsInNpZ25hbCIsIkFib3J0U2lnbmFsIiwidGltZW91dCIsIm9rIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImpzb24iLCJhaVJlc3BvbnNlIiwicHJvY2Vzc1Jlc3VsdCIsIm5ld01lc3NhZ2UiLCJtdXNpY09wdGlvbnMiLCJhcGlFcnJvciIsImVycm9yTWVzc2FnZSIsImhhbmRsZU11c2ljU2VsZWN0Iiwidm9sdW1lIiwiZmFkZUluIiwiZmFkZU91dCIsInJlc3BlY3ROYXRpdmVEdXJhdGlvbiIsImFkZE11c2ljIiwiZ2V0TXVzaWNGcmllbmRseU5hbWUiLCJjb25maXJtYXRpb25Nc2ciLCJlcnJvck1zZyIsImhhbmRsZU1vZGVDaGFuZ2UiLCJuZXdNb2RlIiwiaW5pdGlhbE1lc3NhZ2UiLCJpc0luaXRpYWwiLCJoMyIsInZhcmlhbnQiLCJzaXplIiwidGl0bGUiLCJpbWciLCJzcmMiLCJhbHQiLCJnZW5lcmF0ZVJlYXNvbmluZyIsInRvTG9jYWxlVGltZVN0cmluZyIsImhvdXIiLCJtaW51dGUiLCJyZWYiLCJkaXNhYmxlZCIsIm9uQ2hhbmdlIiwib25LZXlEb3duIiwia2V5Iiwic2hpZnRLZXkiLCJwcmV2ZW50RGVmYXVsdCIsInBsYWNlaG9sZGVyIiwiYWNjZXB0IiwiZXRhcGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/ai-chat/index.tsx\n"));

/***/ })

});
"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./features/editor/menu-item/subtitles.tsx":
/*!*************************************************!*\
  !*** ./features/editor/menu-item/subtitles.tsx ***!
  \*************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Subtitles: function() { return /* binding */ Subtitles; },\n/* harmony export */   getAddTextPayload: function() { return /* binding */ getAddTextPayload; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var _components_shared_draggable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/components/shared/draggable */ \"(app-pages-browser)/./components/shared/draggable.tsx\");\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./components/ui/button.tsx\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/utils */ \"(app-pages-browser)/./lib/utils.ts\");\n/* harmony import */ var _designcombo_events__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @designcombo/events */ \"(app-pages-browser)/./node_modules/@designcombo/events/dist/index.es.js\");\n/* harmony import */ var _designcombo_state__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @designcombo/state */ \"(app-pages-browser)/./node_modules/@designcombo/state/dist/index.es.js\");\n/* harmony import */ var _designcombo_timeline__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @designcombo/timeline */ \"(app-pages-browser)/./node_modules/@designcombo/timeline/dist/index.es.js\");\n/* harmony import */ var _hooks_is_dragging_over_timeline__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../hooks/is-dragging-over-timeline */ \"(app-pages-browser)/./features/editor/hooks/is-dragging-over-timeline.tsx\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _store_use_store__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../store/use-store */ \"(app-pages-browser)/./features/editor/store/use-store.ts\");\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n// Componente Spinner simple\nconst Spinner = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"animate-spin h-5 w-5 border-2 border-primary border-t-transparent rounded-full\"\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n        lineNumber: 14,\n        columnNumber: 3\n    }, undefined);\n_c = Spinner;\n// Función para parsear el tiempo de formato SRT a milisegundos\nconst parseTimeToMs = (timeString)=>{\n    const [hours, minutes, secondsAndMs] = timeString.split(\":\");\n    const [seconds, ms] = secondsAndMs.split(\",\");\n    return parseInt(hours) * 3600000 + parseInt(minutes) * 60000 + parseInt(seconds) * 1000 + parseInt(ms);\n};\n// Función para parsear el archivo SRT\nconst parseSRT = (srtContent)=>{\n    const segments = [];\n    const blocks = srtContent.trim().split(\"\\n\\n\");\n    blocks.forEach((block)=>{\n        const lines = block.split(\"\\n\");\n        if (lines.length >= 3) {\n            const id = parseInt(lines[0]);\n            const timeRange = lines[1].split(\" --> \");\n            const startTime = parseTimeToMs(timeRange[0]);\n            const endTime = parseTimeToMs(timeRange[1]);\n            const text = lines.slice(2).join(\"\\n\"); // Unir todas las líneas de texto\n            segments.push({\n                id,\n                startTime,\n                endTime,\n                text\n            });\n        }\n    });\n    return segments;\n};\n// Función para formatear milisegundos a formato legible (MM:SS)\nconst formatTime = (ms)=>{\n    const seconds = Math.floor(ms / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = seconds % 60;\n    return \"\".concat(minutes.toString().padStart(2, \"0\"), \":\").concat(remainingSeconds.toString().padStart(2, \"0\"));\n};\n// Función para dividir un texto en grupos de aproximadamente 3 palabras\nconst splitTextIntoGroups = function(text) {\n    let wordsPerGroup = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 3;\n    const words = text.split(/\\s+/);\n    const groups = [];\n    for(let i = 0; i < words.length; i += wordsPerGroup){\n        const group = words.slice(i, i + wordsPerGroup).join(\" \");\n        groups.push(group);\n    }\n    return groups;\n};\n// Función para procesar un segmento y dividirlo en múltiples segmentos si es necesario\nconst processSegment = (segment)=>{\n    const textGroups = splitTextIntoGroups(segment.text);\n    // Si solo hay un grupo, devolver el segmento original\n    if (textGroups.length <= 1) {\n        return [\n            segment\n        ];\n    }\n    // Calcular la duración de cada grupo\n    const totalDuration = segment.endTime - segment.startTime;\n    const groupDuration = totalDuration / textGroups.length;\n    // Crear un nuevo segmento para cada grupo\n    return textGroups.map((groupText, index)=>{\n        const startTime = segment.startTime + index * groupDuration;\n        const endTime = startTime + groupDuration;\n        return {\n            id: segment.id * 1000 + index,\n            startTime,\n            endTime,\n            text: groupText\n        };\n    });\n};\nconst getAddTextPayload = function() {\n    let text = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : \"Demo\", startTime = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0, endTime = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 5000;\n    return {\n        id: (0,_designcombo_timeline__WEBPACK_IMPORTED_MODULE_6__.generateId)(),\n        display: {\n            from: startTime,\n            to: endTime\n        },\n        type: \"text\",\n        details: {\n            text: text.toUpperCase(),\n            fontSize: 80,\n            width: 900,\n            fontUrl: \"/fonts/mrbeast.ttf\",\n            fontFamily: \"MrBeast\",\n            color: \"#FFFF00\",\n            wordWrap: \"break-word\",\n            textAlign: \"center\",\n            borderWidth: 20,\n            borderColor: \"#000000\",\n            boxShadow: {\n                color: \"#000000\",\n                x: 3,\n                y: 3,\n                blur: 0\n            },\n            backgroundColor: \"transparent\",\n            padding: 10,\n            borderRadius: 0\n        }\n    };\n};\n// Generar un ID fijo para subtítulos que sea persistente entre recargas\n// Esto evita crear múltiples tracks\nconst SUBTITLES_TRACK_PREFIX = \"subtitle-track\";\nconst generateSubtitleTrackId = ()=>{\n    return \"\".concat(SUBTITLES_TRACK_PREFIX, \"-\").concat((0,_designcombo_timeline__WEBPACK_IMPORTED_MODULE_6__.generateId)());\n};\n// Almacenar el ID en localStorage para mantenerlo entre recargas\nconst getStoredSubtitleTrackId = ()=>{\n    try {\n        const storedId = localStorage.getItem(\"subtitleTrackId\");\n        return storedId || null;\n    } catch (e) {\n        console.error(\"Error accediendo a localStorage:\", e);\n        return null;\n    }\n};\nconst storeSubtitleTrackId = (trackId)=>{\n    try {\n        localStorage.setItem(\"subtitleTrackId\", trackId);\n    } catch (e) {\n        console.error(\"Error guardando en localStorage:\", e);\n    }\n};\nconst Subtitles = ()=>{\n    _s();\n    const isDraggingOverTimeline = (0,_hooks_is_dragging_over_timeline__WEBPACK_IMPORTED_MODULE_7__.useIsDraggingOverTimeline)();\n    const [subtitleSegments, setSubtitleSegments] = (0,react__WEBPACK_IMPORTED_MODULE_8__.useState)([]);\n    const [originalSegments, setOriginalSegments] = (0,react__WEBPACK_IMPORTED_MODULE_8__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_8__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_8__.useState)(null);\n    const [addedSubtitles, setAddedSubtitles] = (0,react__WEBPACK_IMPORTED_MODULE_8__.useState)(new Set());\n    const [groupWords, setGroupWords] = (0,react__WEBPACK_IMPORTED_MODULE_8__.useState)(true); // Estado para controlar si agrupar palabras\n    const [subtitleTrackId, setSubtitleTrackId] = (0,react__WEBPACK_IMPORTED_MODULE_8__.useState)(null);\n    const { tracks, trackItemsMap } = (0,_store_use_store__WEBPACK_IMPORTED_MODULE_9__[\"default\"])();\n    // Función para encontrar un trackId existente para subtítulos\n    const findExistingSubtitleTrack = (0,react__WEBPACK_IMPORTED_MODULE_8__.useCallback)(()=>{\n        console.log(\"Buscando track existente para subt\\xedtulos...\");\n        // Primero, intentar obtener el ID almacenado\n        const storedId = getStoredSubtitleTrackId();\n        if (storedId) {\n            console.log(\"ID almacenado encontrado: \".concat(storedId));\n            // Verificar si este track todavía existe en el estado actual\n            if (tracks && tracks.some((track)=>track.id === storedId)) {\n                console.log(\"El track almacenado \".concat(storedId, \" existe en el estado actual\"));\n                return storedId;\n            }\n        }\n        // Si no hay ID almacenado o ya no existe, buscar un track de texto existente\n        if (tracks && tracks.length > 0) {\n            // Buscar un track que contenga elementos de texto\n            const textTrack = tracks.find((track)=>track.type === \"text\" && track.accepts && track.accepts.includes(\"text\"));\n            if (textTrack) {\n                console.log(\"Track de texto existente encontrado: \".concat(textTrack.id));\n                return textTrack.id;\n            }\n            // Alternativa: buscar un track que contenga \"subtitle\" en su ID\n            const subtitleTrack = tracks.find((track)=>track.id && track.id.includes(SUBTITLES_TRACK_PREFIX));\n            if (subtitleTrack) {\n                console.log(\"Track de subt\\xedtulos existente encontrado: \".concat(subtitleTrack.id));\n                return subtitleTrack.id;\n            }\n        }\n        // Si no se encontró ningún track adecuado, revisar si hay elementos de texto\n        // que podríamos usar para determinar su trackId\n        if (trackItemsMap) {\n            const textItems = Object.values(trackItemsMap).filter((item)=>item.type === \"text\" && item.trackId);\n            if (textItems.length > 0) {\n                // Usar el trackId del primer elemento de texto encontrado\n                const firstTextTrackId = textItems[0].trackId;\n                console.log(\"Usando trackId de elemento de texto existente: \".concat(firstTextTrackId));\n                return firstTextTrackId;\n            }\n        }\n        // Si todavía no encontramos un track adecuado, crear uno nuevo\n        const newId = generateSubtitleTrackId();\n        console.log(\"Ning\\xfan track adecuado encontrado. Creando nuevo: \".concat(newId));\n        return newId;\n    }, [\n        tracks,\n        trackItemsMap\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_8__.useEffect)(()=>{\n        const fetchTranscription = async ()=>{\n            setIsLoading(true);\n            setError(null);\n            try {\n                const response = await fetch(\"/transcriptions/transcription1.srt\");\n                if (!response.ok) {\n                    throw new Error(\"Error al cargar el archivo SRT: \".concat(response.status));\n                }\n                const text = await response.text();\n                const segments = parseSRT(text);\n                setOriginalSegments(segments);\n                // Procesar los segmentos según la configuración actual\n                if (groupWords) {\n                    const processedSegments = segments.flatMap(processSegment);\n                    setSubtitleSegments(processedSegments);\n                } else {\n                    setSubtitleSegments(segments);\n                }\n            } catch (error) {\n                console.error(\"Failed to load transcription:\", error);\n                setError(\"No se pudo cargar el archivo de subt\\xedtulos\");\n                setSubtitleSegments([]);\n                setOriginalSegments([]);\n            } finally{\n                setIsLoading(false);\n            }\n        };\n        fetchTranscription();\n    }, [\n        groupWords\n    ]);\n    // Determinar un trackId para los subtítulos cuando cambian los tracks\n    (0,react__WEBPACK_IMPORTED_MODULE_8__.useEffect)(()=>{\n        // Si ya tenemos un track ID y existe, mantenerlo\n        if (subtitleTrackId && tracks.some((track)=>track.id === subtitleTrackId)) {\n            console.log(\"Manteniendo trackId existente: \".concat(subtitleTrackId));\n            return;\n        }\n        // Buscar un track existente o crear uno nuevo\n        const trackId = findExistingSubtitleTrack();\n        setSubtitleTrackId(trackId);\n        // Guardar el ID para futuras sesiones\n        storeSubtitleTrackId(trackId);\n        console.log(\"Track ID para subt\\xedtulos establecido y guardado: \".concat(trackId));\n    }, [\n        tracks,\n        subtitleTrackId,\n        findExistingSubtitleTrack\n    ]);\n    // Función para cambiar entre modo agrupado y no agrupado\n    const toggleGroupWords = ()=>{\n        setGroupWords(!groupWords);\n    };\n    const handleAddSubtitle = (segment)=>{\n        // Asegurarnos de que tenemos un trackId consistente\n        if (!subtitleTrackId) {\n            console.error(\"Error: No se ha establecido un trackId para subt\\xedtulos\");\n            return;\n        }\n        console.log('A\\xf1adiendo subt\\xedtulo \"'.concat(segment.text, '\" al track: ').concat(subtitleTrackId));\n        (0,_designcombo_events__WEBPACK_IMPORTED_MODULE_4__.dispatch)(_designcombo_state__WEBPACK_IMPORTED_MODULE_5__.ADD_TEXT, {\n            payload: getAddTextPayload(segment.text, segment.startTime, segment.endTime),\n            options: {\n                trackId: subtitleTrackId // Usar el mismo trackId para todos los subtítulos\n            }\n        });\n        // Marcar este subtítulo como añadido\n        setAddedSubtitles((prev)=>{\n            const newSet = new Set(prev);\n            newSet.add(segment.id);\n            return newSet;\n        });\n    };\n    const handleAddAllSubtitles = ()=>{\n        // Asegurarnos de que tenemos un trackId consistente\n        if (!subtitleTrackId) {\n            console.error(\"Error: No se ha establecido un trackId para subt\\xedtulos\");\n            return;\n        }\n        // Desactivar el botón mientras se procesan los subtítulos\n        setIsLoading(true);\n        console.log(\"A\\xf1adiendo \".concat(subtitleSegments.length, \" subt\\xedtulos al track: \").concat(subtitleTrackId));\n        // Añadir subtítulos con un retraso entre cada uno\n        subtitleSegments.forEach((segment, index)=>{\n            setTimeout(()=>{\n                (0,_designcombo_events__WEBPACK_IMPORTED_MODULE_4__.dispatch)(_designcombo_state__WEBPACK_IMPORTED_MODULE_5__.ADD_TEXT, {\n                    payload: getAddTextPayload(segment.text, segment.startTime, segment.endTime),\n                    options: {\n                        trackId: subtitleTrackId // Usar el mismo trackId para todos los subtítulos\n                    }\n                });\n                // Si es el último subtítulo, actualizar el estado\n                if (index === subtitleSegments.length - 1) {\n                    // Marcar todos los subtítulos como añadidos\n                    const allIds = new Set(subtitleSegments.map((segment)=>segment.id));\n                    setAddedSubtitles(allIds);\n                    setIsLoading(false);\n                    console.log(\"Completado: \".concat(subtitleSegments.length, \" subt\\xedtulos a\\xf1adidos al track \").concat(subtitleTrackId));\n                }\n            }, index * 200); // 200ms de retraso entre cada subtítulo\n        });\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-1 flex-col\",\n        \"data-subtitles\": true,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex h-12 flex-none items-center px-4 font-medium text-sm text-text-primary\",\n                children: [\n                    \"Subt\\xedtulos\",\n                    subtitleTrackId && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"ml-2 text-xs text-muted-foreground\",\n                        children: [\n                            \"(Track: \",\n                            subtitleTrackId.substring(0, 8),\n                            \"...)\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                        lineNumber: 360,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                lineNumber: 357,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-col gap-2 px-4\",\n                children: isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex justify-center items-center py-8\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Spinner, {}, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                        lineNumber: 368,\n                        columnNumber: 13\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                    lineNumber: 367,\n                    columnNumber: 11\n                }, undefined) : error ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-red-500 text-sm py-2\",\n                    children: error\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                    lineNumber: 371,\n                    columnNumber: 11\n                }, undefined) : subtitleSegments.length > 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-between items-center mb-2\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                onClick: toggleGroupWords,\n                                className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)((0,_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.buttonVariants)({\n                                    variant: \"outline\",\n                                    size: \"sm\"\n                                }), \"cursor-pointer\"),\n                                children: groupWords ? \"Ver subt\\xedtulos completos\" : \"Dividir en grupos de 3 palabras\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                                lineNumber: 375,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                            lineNumber: 374,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            onClick: handleAddAllSubtitles,\n                            className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)((0,_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.buttonVariants)({\n                                variant: \"secondary\"\n                            }), \"cursor-pointer flex justify-center items-center\"),\n                            disabled: isLoading,\n                            // ID dinámico según el modo de agrupación\n                            id: groupWords ? \"add-all-subtitles-grouped\" : \"add-all-subtitles-complete\",\n                            \"data-subtitles-add-all\": true,\n                            children: isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Spinner, {}, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                                        lineNumber: 398,\n                                        columnNumber: 19\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"ml-2\",\n                                        children: \"A\\xf1adiendo subt\\xedtulos...\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                                        lineNumber: 399,\n                                        columnNumber: 19\n                                    }, undefined)\n                                ]\n                            }, void 0, true) : \"A\\xf1adir todos los subt\\xedtulos \".concat(groupWords ? \"(agrupados)\" : \"(completos)\")\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                            lineNumber: 385,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mt-2 text-sm font-medium\",\n                            children: \"Subt\\xedtulos individuales:\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                            lineNumber: 405,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"max-h-60 overflow-y-auto pr-1\",\n                            children: subtitleSegments.map((segment)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_shared_draggable__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n                                    data: ()=>({\n                                            ...getAddTextPayload(segment.text, segment.startTime, segment.endTime),\n                                            options: {\n                                                trackId: subtitleTrackId\n                                            }\n                                        }),\n                                    renderCustomPreview: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-background border border-border p-2 rounded-md max-w-xs\",\n                                        children: segment.text\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                                        lineNumber: 415,\n                                        columnNumber: 21\n                                    }, void 0),\n                                    shouldDisplayPreview: !isDraggingOverTimeline,\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        onClick: ()=>handleAddSubtitle(segment),\n                                        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)((0,_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.buttonVariants)({\n                                            variant: \"outline\"\n                                        }), \"mb-2 text-left flex flex-col w-full\", addedSubtitles.has(segment.id) && \"border-green-500 bg-green-500/10\"),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"truncate\",\n                                                title: segment.text,\n                                                children: segment.text.length > 30 ? \"\".concat(segment.text.substring(0, 30), \"...\") : segment.text\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                                                lineNumber: 429,\n                                                columnNumber: 21\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-xs text-muted-foreground mt-1\",\n                                                children: [\n                                                    formatTime(segment.startTime),\n                                                    \" - \",\n                                                    formatTime(segment.endTime)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                                                lineNumber: 432,\n                                                columnNumber: 21\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                                        lineNumber: 421,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, segment.id, false, {\n                                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                                    lineNumber: 408,\n                                    columnNumber: 17\n                                }, undefined))\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                            lineNumber: 406,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_shared_draggable__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n                    data: ()=>({\n                            ...getAddTextPayload(\"Demo\"),\n                            options: {\n                                trackId: subtitleTrackId\n                            }\n                        }),\n                    renderCustomPreview: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                        variant: \"secondary\",\n                        className: \"w-60\",\n                        children: \"Add text\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                        lineNumber: 447,\n                        columnNumber: 15\n                    }, void 0),\n                    shouldDisplayPreview: !isDraggingOverTimeline,\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        onClick: ()=>handleAddSubtitle({\n                                id: 0,\n                                startTime: 0,\n                                endTime: 5000,\n                                text: \"Demo\"\n                            }),\n                        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)((0,_components_ui_button__WEBPACK_IMPORTED_MODULE_2__.buttonVariants)({\n                            variant: \"secondary\"\n                        })),\n                        children: \"Add text\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                        lineNumber: 453,\n                        columnNumber: 13\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                    lineNumber: 441,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n                lineNumber: 365,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\menu-item\\\\subtitles.tsx\",\n        lineNumber: 356,\n        columnNumber: 5\n    }, undefined);\n};\n_s(Subtitles, \"J8xvG+4UWeBbM1XoqdvIO1XfRs4=\", false, function() {\n    return [\n        _hooks_is_dragging_over_timeline__WEBPACK_IMPORTED_MODULE_7__.useIsDraggingOverTimeline,\n        _store_use_store__WEBPACK_IMPORTED_MODULE_9__[\"default\"]\n    ];\n});\n_c1 = Subtitles;\nvar _c, _c1;\n$RefreshReg$(_c, \"Spinner\");\n$RefreshReg$(_c1, \"Subtitles\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2ZlYXR1cmVzL2VkaXRvci9tZW51LWl0ZW0vc3VidGl0bGVzLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0Q7QUFDVTtBQUUvQjtBQUNjO0FBQ0Q7QUFDSztBQUM0QjtBQUN0QjtBQUNmO0FBRTFDLDRCQUE0QjtBQUM1QixNQUFNWSxVQUFVLGtCQUNkLDhEQUFDQztRQUFJQyxXQUFVOzs7Ozs7S0FEWEY7QUFZTiwrREFBK0Q7QUFDL0QsTUFBTUcsZ0JBQWdCLENBQUNDO0lBQ3JCLE1BQU0sQ0FBQ0MsT0FBT0MsU0FBU0MsYUFBYSxHQUFHSCxXQUFXSSxLQUFLLENBQUM7SUFDeEQsTUFBTSxDQUFDQyxTQUFTQyxHQUFHLEdBQUdILGFBQWFDLEtBQUssQ0FBQztJQUV6QyxPQUNFRyxTQUFTTixTQUFTLFVBQ2xCTSxTQUFTTCxXQUFXLFFBQ3BCSyxTQUFTRixXQUFXLE9BQ3BCRSxTQUFTRDtBQUViO0FBRUEsc0NBQXNDO0FBQ3RDLE1BQU1FLFdBQVcsQ0FBQ0M7SUFDaEIsTUFBTUMsV0FBOEIsRUFBRTtJQUN0QyxNQUFNQyxTQUFTRixXQUFXRyxJQUFJLEdBQUdSLEtBQUssQ0FBQztJQUV2Q08sT0FBT0UsT0FBTyxDQUFDQyxDQUFBQTtRQUNiLE1BQU1DLFFBQVFELE1BQU1WLEtBQUssQ0FBQztRQUMxQixJQUFJVyxNQUFNQyxNQUFNLElBQUksR0FBRztZQUNyQixNQUFNQyxLQUFLVixTQUFTUSxLQUFLLENBQUMsRUFBRTtZQUM1QixNQUFNRyxZQUFZSCxLQUFLLENBQUMsRUFBRSxDQUFDWCxLQUFLLENBQUM7WUFDakMsTUFBTWUsWUFBWXBCLGNBQWNtQixTQUFTLENBQUMsRUFBRTtZQUM1QyxNQUFNRSxVQUFVckIsY0FBY21CLFNBQVMsQ0FBQyxFQUFFO1lBQzFDLE1BQU1HLE9BQU9OLE1BQU1PLEtBQUssQ0FBQyxHQUFHQyxJQUFJLENBQUMsT0FBTyxpQ0FBaUM7WUFFekViLFNBQVNjLElBQUksQ0FB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b0RBQUlNLFdBQVdhLFFBQVFsQixPQUFPOzs7Ozs7Ozs7Ozs7O21DQXhCNURrQixRQUFRckIsRUFBRTs7Ozs7Ozs7Ozs7aURBZ0N2Qiw4REFBQ2pDLG9FQUFTQTtvQkFDUjRKLE1BQU0sSUFBTzs0QkFDWCxHQUFHL0Ysa0JBQWtCLE9BQU87NEJBQzVCZ0YsU0FBUztnQ0FBRS9DLFNBQVNnQjs0QkFBZ0I7d0JBQ3RDO29CQUNBK0MsbUNBQ0UsOERBQUM1Six5REFBTUE7d0JBQUN1SixTQUFRO3dCQUFZMUksV0FBVTtrQ0FBTzs7Ozs7O29CQUkvQ2dKLHNCQUFzQixDQUFDN0Q7OEJBRXZCLDRFQUFDcEY7d0JBQ0MwSSxTQUFTLElBQU1aLGtCQUFrQjtnQ0FBQzFHLElBQUk7Z0NBQUdFLFdBQVc7Z0NBQUdDLFNBQVM7Z0NBQU1DLE1BQU07NEJBQU07d0JBQ2xGdkIsV0FBV1gsOENBQUVBLENBQUNELHFFQUFjQSxDQUFDOzRCQUFFc0osU0FBUzt3QkFBWTtrQ0FDckQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRYixFQUFFO0dBeFNXeEQ7O1FBQ29CekYsdUZBQXlCQTtRQVF0Qkksd0RBQVFBOzs7TUFUL0JxRiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9mZWF0dXJlcy9lZGl0b3IvbWVudS1pdGVtL3N1YnRpdGxlcy50c3g/YmQxNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRHJhZ2dhYmxlIGZyb20gJ0AvY29tcG9uZW50cy9zaGFyZWQvZHJhZ2dhYmxlJztcbmltcG9ydCB7IEJ1dHRvbiwgYnV0dG9uVmFyaWFudHMgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYnV0dG9uJztcbmltcG9ydCB7IERFRkFVTFRfRk9OVCB9IGZyb20gJ0AvZmVhdHVyZXMvZWRpdG9yL2NvbnN0YW50cy9mb250JztcbmltcG9ydCB7IGNuIH0gZnJvbSAnQC9saWIvdXRpbHMnO1xuaW1wb3J0IHsgZGlzcGF0Y2ggfSBmcm9tICdAZGVzaWduY29tYm8vZXZlbnRzJztcbmltcG9ydCB7IEFERF9URVhUIH0gZnJvbSAnQGRlc2lnbmNvbWJvL3N0YXRlJztcbmltcG9ydCB7IGdlbmVyYXRlSWQgfSBmcm9tICdAZGVzaWduY29tYm8vdGltZWxpbmUnO1xuaW1wb3J0IHsgdXNlSXNEcmFnZ2luZ092ZXJUaW1lbGluZSB9IGZyb20gJy4uL2hvb2tzL2lzLWRyYWdnaW5nLW92ZXItdGltZWxpbmUnO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlU3RvcmUgZnJvbSAnLi4vc3RvcmUvdXNlLXN0b3JlJztcblxuLy8gQ29tcG9uZW50ZSBTcGlubmVyIHNpbXBsZVxuY29uc3QgU3Bpbm5lciA9ICgpID0+IChcbiAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gaC01IHctNSBib3JkZXItMiBib3JkZXItcHJpbWFyeSBib3JkZXItdC10cmFuc3BhcmVudCByb3VuZGVkLWZ1bGxcIiAvPlxuKTtcblxuLy8gVGlwbyBwYXJhIHJlcHJlc2VudGFyIHVuIHNlZ21lbnRvIGRlIHN1YnTDrXR1bG9cbmludGVyZmFjZSBTdWJ0aXRsZVNlZ21lbnQge1xuICBpZDogbnVtYmVyO1xuICBzdGFydFRpbWU6IG51bWJlcjsgLy8gZW4gbWlsaXNlZ3VuZG9zXG4gIGVuZFRpbWU6IG51bWJlcjsgICAvLyBlbiBtaWxpc2VndW5kb3NcbiAgdGV4dDogc3RyaW5nO1xufVxuXG4vLyBGdW5jacOzbiBwYXJhIHBhcnNlYXIgZWwgdGllbXBvIGRlIGZvcm1hdG8gU1JUIGEgbWlsaXNlZ3VuZG9zXG5jb25zdCBwYXJzZVRpbWVUb01zID0gKHRpbWVTdHJpbmc6IHN0cmluZyk6IG51bWJlciA9PiB7XG4gIGNvbnN0IFtob3VycywgbWludXRlcywgc2Vjb25kc0FuZE1zXSA9IHRpbWVTdHJpbmcuc3BsaXQoJzonKTtcbiAgY29uc3QgW3NlY29uZHMsIG1zXSA9IHNlY29uZHNBbmRNcy5zcGxpdCgnLCcpO1xuXG4gIHJldHVybiAoXG4gICAgcGFyc2VJbnQoaG91cnMpICogMzYwMDAwMCArXG4gICAgcGFyc2VJbnQobWludXRlcykgKiA2MDAwMCArXG4gICAgcGFyc2VJbnQoc2Vjb25kcykgKiAxMDAwICtcbiAgICBwYXJzZUludChtcylcbiAgKTtcbn07XG5cbi8vIEZ1bmNpw7NuIHBhcmEgcGFyc2VhciBlbCBhcmNoaXZvIFNSVFxuY29uc3QgcGFyc2VTUlQgPSAoc3J0Q29udGVudDogc3RyaW5nKTogU3VidGl0bGVTZWdtZW50W10gPT4ge1xuICBjb25zdCBzZWdtZW50czogU3VidGl0bGVTZWdtZW50W10gPSBbXTtcbiAgY29uc3QgYmxvY2tzID0gc3J0Q29udGVudC50cmltKCkuc3BsaXQoJ1xcblxcbicpO1xuXG4gIGJsb2Nrcy5mb3JFYWNoKGJsb2NrID0+IHtcbiAgICBjb25zdCBsaW5lcyA9IGJsb2NrLnNwbGl0KCdcXG4nKTtcbiAgICBpZiAobGluZXMubGVuZ3RoID49IDMpIHtcbiAgICAgIGNvbnN0IGlkID0gcGFyc2VJbnQobGluZXNbMF0pO1xuICAgICAgY29uc3QgdGltZVJhbmdlID0gbGluZXNbMV0uc3BsaXQoJyAtLT4gJyk7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwYXJzZVRpbWVUb01zKHRpbWVSYW5nZVswXSk7XG4gICAgICBjb25zdCBlbmRUaW1lID0gcGFyc2VUaW1lVG9Ncyh0aW1lUmFuZ2VbMV0pO1xuICAgICAgY29uc3QgdGV4dCA9IGxpbmVzLnNsaWNlKDIpLmpvaW4oJ1xcbicpOyAvLyBVbmlyIHRvZGFzIGxhcyBsw61uZWFzIGRlIHRleHRvXG5cbiAgICAgIHNlZ21lbnRzLnB1c2goe1xuICAgICAgICBpZCxcbiAgICAgICAgc3RhcnRUaW1lLFxuICAgICAgICBlbmRUaW1lLFxuICAgICAgICB0ZXh0XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBzZWdtZW50cztcbn07XG5cbi8vIEZ1bmNpw7NuIHBhcmEgZm9ybWF0ZWFyIG1pbGlzZWd1bmRvcyBhIGZvcm1hdG8gbGVnaWJsZSAoTU06U1MpXG5jb25zdCBmb3JtYXRUaW1lID0gKG1zOiBudW1iZXIpOiBzdHJpbmcgPT4ge1xuICBjb25zdCBzZWNvbmRzID0gTWF0aC5mbG9vcihtcyAvIDEwMDApO1xuICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gNjApO1xuICBjb25zdCByZW1haW5pbmdTZWNvbmRzID0gc2Vjb25kcyAlIDYwO1xuICByZXR1cm4gYCR7bWludXRlcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7cmVtYWluaW5nU2Vjb25kcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDtcbn07XG5cbi8vIEZ1bmNpw7NuIHBhcmEgZGl2aWRpciB1biB0ZXh0byBlbiBncnVwb3MgZGUgYXByb3hpbWFkYW1lbnRlIDMgcGFsYWJyYXNcbmNvbnN0IHNwbGl0VGV4dEludG9Hcm91cHMgPSAodGV4dDogc3RyaW5nLCB3b3Jkc1Blckdyb3VwID0gMyk6IHN0cmluZ1tdID0+IHtcbiAgY29uc3Qgd29yZHMgPSB0ZXh0LnNwbGl0KC9cXHMrLyk7XG4gIGNvbnN0IGdyb3Vwczogc3RyaW5nW10gPSBbXTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmRzLmxlbmd0aDsgaSArPSB3b3Jkc1Blckdyb3VwKSB7XG4gICAgY29uc3QgZ3JvdXAgPSB3b3Jkcy5zbGljZShpLCBpICsgd29yZHNQZXJHcm91cCkuam9pbignICcpO1xuICAgIGdyb3Vwcy5wdXNoKGdyb3VwKTtcbiAgfVxuXG4gIHJldHVybiBncm91cHM7XG59O1xuXG4vLyBGdW5jacOzbiBwYXJhIHByb2Nlc2FyIHVuIHNlZ21lbnRvIHkgZGl2aWRpcmxvIGVuIG3Dumx0aXBsZXMgc2VnbWVudG9zIHNpIGVzIG5lY2VzYXJpb1xuY29uc3QgcHJvY2Vzc1NlZ21lbnQgPSAoc2VnbWVudDogU3VidGl0bGVTZWdtZW50KTogU3VidGl0bGVTZWdtZW50W10gPT4ge1xuICBjb25zdCB0ZXh0R3JvdXBzID0gc3BsaXRUZXh0SW50b0dyb3VwcyhzZWdtZW50LnRleHQpO1xuXG4gIC8vIFNpIHNvbG8gaGF5IHVuIGdydXBvLCBkZXZvbHZlciBlbCBzZWdtZW50byBvcmlnaW5hbFxuICBpZiAodGV4dEdyb3Vwcy5sZW5ndGggPD0gMSkge1xuICAgIHJldHVybiBbc2VnbWVudF07XG4gIH1cblxuICAvLyBDYWxjdWxhciBsYSBkdXJhY2nDs24gZGUgY2FkYSBncnVwb1xuICBjb25zdCB0b3RhbER1cmF0aW9uID0gc2VnbWVudC5lbmRUaW1lIC0gc2VnbWVudC5zdGFydFRpbWU7XG4gIGNvbnN0IGdyb3VwRHVyYXRpb24gPSB0b3RhbER1cmF0aW9uIC8gdGV4dEdyb3Vwcy5sZW5ndGg7XG5cbiAgLy8gQ3JlYXIgdW4gbnVldm8gc2VnbWVudG8gcGFyYSBjYWRhIGdydXBvXG4gIHJldHVybiB0ZXh0R3JvdXBzLm1hcCgoZ3JvdXBUZXh0LCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHNlZ21lbnQuc3RhcnRUaW1lICsgKGluZGV4ICogZ3JvdXBEdXJhdGlvbik7XG4gICAgY29uc3QgZW5kVGltZSA9IHN0YXJ0VGltZSArIGdyb3VwRHVyYXRpb247XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHNlZ21lbnQuaWQgKiAxMDAwICsgaW5kZXgsIC8vIEdlbmVyYXIgdW4gSUQgw7puaWNvXG4gICAgICBzdGFydFRpbWUsXG4gICAgICBlbmRUaW1lLFxuICAgICAgdGV4dDogZ3JvdXBUZXh0XG4gICAgfTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0QWRkVGV4dFBheWxvYWQgPSAodGV4dCA9ICdEZW1vJywgc3RhcnRUaW1lID0gMCwgZW5kVGltZSA9IDUwMDApID0+ICh7XG4gIGlkOiBnZW5lcmF0ZUlkKCksXG4gIGRpc3BsYXk6IHtcbiAgICBmcm9tOiBzdGFydFRpbWUsXG4gICAgdG86IGVuZFRpbWUsXG4gIH0sXG4gIHR5cGU6ICd0ZXh0JyxcbiAgZGV0YWlsczoge1xuICAgIHRleHQ6IHRleHQudG9VcHBlckNhc2UoKSwgLy8gQ29udmVydGlyIGEgbWF5w7pzY3VsYXMgY29tbyBNckJlYXN0XG4gICAgZm9udFNpemU6IDgwLCAvLyBUYW1hw7FvIG3DoXMgZ3JhbmRlIHBhcmEgZXN0aWxvIE1yQmVhc3RcbiAgICB3aWR0aDogOTAwLFxuICAgIGZvbnRVcmw6ICcvZm9udHMvbXJiZWFzdC50dGYnLCAvLyBVc2FyIGxhIGZ1ZW50ZSBNckJlYXN0XG4gICAgZm9udEZhbWlseTogJ01yQmVhc3QnLCAvLyBOb21icmUgZGUgbGEgZnVlbnRlIE1yQmVhc3RcbiAgICBjb2xvcjogJyNGRkZGMDAnLCAvLyBBbWFyaWxsbyBicmlsbGFudGVcbiAgICB3b3JkV3JhcDogJ2JyZWFrLXdvcmQnLFxuICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gICAgYm9yZGVyV2lkdGg6IDIwLCAvLyBTdHJva2UgbmVncm8gZ3J1ZXNvXG4gICAgYm9yZGVyQ29sb3I6ICcjMDAwMDAwJyxcbiAgICBib3hTaGFkb3c6IHtcbiAgICAgIGNvbG9yOiAnIzAwMDAwMCcsXG4gICAgICB4OiAzLFxuICAgICAgeTogMyxcbiAgICAgIGJsdXI6IDAsIC8vIFNpbiBkZXNlbmZvcXVlIHBhcmEgdW4gZXN0aWxvIG3DoXMgaW1wYWN0YW50ZVxuICAgIH0sXG4gICAgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnLCAvLyBTaW4gZm9uZG8gcGFyYSBxdWUgZGVzdGFxdWUgbcOhc1xuICAgIHBhZGRpbmc6IDEwLFxuICAgIGJvcmRlclJhZGl1czogMCwgLy8gU2luIGJvcmRlcyByZWRvbmRlYWRvcyBwYXJhIHVuIGVzdGlsbyBtw6FzIGltcGFjdGFudGVcbiAgfSxcbn0pO1xuXG4vLyBHZW5lcmFyIHVuIElEIGZpam8gcGFyYSBzdWJ0w610dWxvcyBxdWUgc2VhIHBlcnNpc3RlbnRlIGVudHJlIHJlY2FyZ2FzXG4vLyBFc3RvIGV2aXRhIGNyZWFyIG3Dumx0aXBsZXMgdHJhY2tzXG5jb25zdCBTVUJUSVRMRVNfVFJBQ0tfUFJFRklYID0gJ3N1YnRpdGxlLXRyYWNrJztcbmNvbnN0IGdlbmVyYXRlU3VidGl0bGVUcmFja0lkID0gKCkgPT4ge1xuICByZXR1cm4gYCR7U1VCVElUTEVTX1RSQUNLX1BSRUZJWH0tJHtnZW5lcmF0ZUlkKCl9YDtcbn07XG5cbi8vIEFsbWFjZW5hciBlbCBJRCBlbiBsb2NhbFN0b3JhZ2UgcGFyYSBtYW50ZW5lcmxvIGVudHJlIHJlY2FyZ2FzXG5jb25zdCBnZXRTdG9yZWRTdWJ0aXRsZVRyYWNrSWQgPSAoKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc3RvcmVkSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3VidGl0bGVUcmFja0lkJyk7XG4gICAgcmV0dXJuIHN0b3JlZElkIHx8IG51bGw7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhY2NlZGllbmRvIGEgbG9jYWxTdG9yYWdlOicsIGUpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG5jb25zdCBzdG9yZVN1YnRpdGxlVHJhY2tJZCA9ICh0cmFja0lkOiBzdHJpbmcpID0+IHtcbiAgdHJ5IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc3VidGl0bGVUcmFja0lkJywgdHJhY2tJZCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBndWFyZGFuZG8gZW4gbG9jYWxTdG9yYWdlOicsIGUpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgU3VidGl0bGVzID0gKCkgPT4ge1xuICBjb25zdCBpc0RyYWdnaW5nT3ZlclRpbWVsaW5lID0gdXNlSXNEcmFnZ2luZ092ZXJUaW1lbGluZSgpO1xuICBjb25zdCBbc3VidGl0bGVTZWdtZW50cywgc2V0U3VidGl0bGVTZWdtZW50c10gPSB1c2VTdGF0ZTxTdWJ0aXRsZVNlZ21lbnRbXT4oW10pO1xuICBjb25zdCBbb3JpZ2luYWxTZWdtZW50cywgc2V0T3JpZ2luYWxTZWdtZW50c10gPSB1c2VTdGF0ZTxTdWJ0aXRsZVNlZ21lbnRbXT4oW10pO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFthZGRlZFN1YnRpdGxlcywgc2V0QWRkZWRTdWJ0aXRsZXNdID0gdXNlU3RhdGU8U2V0PG51bWJlcj4+KG5ldyBTZXQoKSk7XG4gIGNvbnN0IFtncm91cFdvcmRzLCBzZXRHcm91cFdvcmRzXSA9IHVzZVN0YXRlKHRydWUpOyAvLyBFc3RhZG8gcGFyYSBjb250cm9sYXIgc2kgYWdydXBhciBwYWxhYnJhc1xuICBjb25zdCBbc3VidGl0bGVUcmFja0lkLCBzZXRTdWJ0aXRsZVRyYWNrSWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IHsgdHJhY2tzLCB0cmFja0l0ZW1zTWFwIH0gPSB1c2VTdG9yZSgpO1xuXG4gIC8vIEZ1bmNpw7NuIHBhcmEgZW5jb250cmFyIHVuIHRyYWNrSWQgZXhpc3RlbnRlIHBhcmEgc3VidMOtdHVsb3NcbiAgY29uc3QgZmluZEV4aXN0aW5nU3VidGl0bGVUcmFjayA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIkJ1c2NhbmRvIHRyYWNrIGV4aXN0ZW50ZSBwYXJhIHN1YnTDrXR1bG9zLi4uXCIpO1xuXG4gICAgLy8gUHJpbWVybywgaW50ZW50YXIgb2J0ZW5lciBlbCBJRCBhbG1hY2VuYWRvXG4gICAgY29uc3Qgc3RvcmVkSWQgPSBnZXRTdG9yZWRTdWJ0aXRsZVRyYWNrSWQoKTtcbiAgICBpZiAoc3RvcmVkSWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBJRCBhbG1hY2VuYWRvIGVuY29udHJhZG86ICR7c3RvcmVkSWR9YCk7XG5cbiAgICAgIC8vIFZlcmlmaWNhciBzaSBlc3RlIHRyYWNrIHRvZGF2w61hIGV4aXN0ZSBlbiBlbCBlc3RhZG8gYWN0dWFsXG4gICAgICBpZiAodHJhY2tzICYmIHRyYWNrcy5zb21lKHRyYWNrID0+IHRyYWNrLmlkID09PSBzdG9yZWRJZCkpIHtcbiAgICAgICAgY29uc29sZS5sb2coYEVsIHRyYWNrIGFsbWFjZW5hZG8gJHtzdG9yZWRJZH0gZXhpc3RlIGVuIGVsIGVzdGFkbyBhY3R1YWxgKTtcbiAgICAgICAgcmV0dXJuIHN0b3JlZElkO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNpIG5vIGhheSBJRCBhbG1hY2VuYWRvIG8geWEgbm8gZXhpc3RlLCBidXNjYXIgdW4gdHJhY2sgZGUgdGV4dG8gZXhpc3RlbnRlXG4gICAgaWYgKHRyYWNrcyAmJiB0cmFja3MubGVuZ3RoID4gMCkge1xuICAgICAgLy8gQnVzY2FyIHVuIHRyYWNrIHF1ZSBjb250ZW5nYSBlbGVtZW50b3MgZGUgdGV4dG9cbiAgICAgIGNvbnN0IHRleHRUcmFjayA9IHRyYWNrcy5maW5kKHRyYWNrID0+XG4gICAgICAgIHRyYWNrLnR5cGUgPT09ICd0ZXh0JyAmJlxuICAgICAgICB0cmFjay5hY2NlcHRzICYmXG4gICAgICAgIHRyYWNrLmFjY2VwdHMuaW5jbHVkZXMoJ3RleHQnKVxuICAgICAgKTtcblxuICAgICAgaWYgKHRleHRUcmFjaykge1xuICAgICAgICBjb25zb2xlLmxvZyhgVHJhY2sgZGUgdGV4dG8gZXhpc3RlbnRlIGVuY29udHJhZG86ICR7dGV4dFRyYWNrLmlkfWApO1xuICAgICAgICByZXR1cm4gdGV4dFRyYWNrLmlkO1xuICAgICAgfVxuXG4gICAgICAvLyBBbHRlcm5hdGl2YTogYnVzY2FyIHVuIHRyYWNrIHF1ZSBjb250ZW5nYSBcInN1YnRpdGxlXCIgZW4gc3UgSURcbiAgICAgIGNvbnN0IHN1YnRpdGxlVHJhY2sgPSB0cmFja3MuZmluZCh0cmFjayA9PlxuICAgICAgICB0cmFjay5pZCAmJiB0cmFjay5pZC5pbmNsdWRlcyhTVUJUSVRMRVNfVFJBQ0tfUFJFRklYKVxuICAgICAgKTtcblxuICAgICAgaWYgKHN1YnRpdGxlVHJhY2spIHtcbiAgICAgICAgY29uc29sZS5sb2coYFRyYWNrIGRlIHN1YnTDrXR1bG9zIGV4aXN0ZW50ZSBlbmNvbnRyYWRvOiAke3N1YnRpdGxlVHJhY2suaWR9YCk7XG4gICAgICAgIHJldHVybiBzdWJ0aXRsZVRyYWNrLmlkO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNpIG5vIHNlIGVuY29udHLDsyBuaW5nw7puIHRyYWNrIGFkZWN1YWRvLCByZXZpc2FyIHNpIGhheSBlbGVtZW50b3MgZGUgdGV4dG9cbiAgICAvLyBxdWUgcG9kcsOtYW1vcyB1c2FyIHBhcmEgZGV0ZXJtaW5hciBzdSB0cmFja0lkXG4gICAgaWYgKHRyYWNrSXRlbXNNYXApIHtcbiAgICAgIGNvbnN0IHRleHRJdGVtcyA9IE9iamVjdC52YWx1ZXModHJhY2tJdGVtc01hcCkuZmlsdGVyKGl0ZW0gPT5cbiAgICAgICAgaXRlbS50eXBlID09PSAndGV4dCcgJiYgaXRlbS50cmFja0lkXG4gICAgICApO1xuXG4gICAgICBpZiAodGV4dEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gVXNhciBlbCB0cmFja0lkIGRlbCBwcmltZXIgZWxlbWVudG8gZGUgdGV4dG8gZW5jb250cmFkb1xuICAgICAgICBjb25zdCBmaXJzdFRleHRUcmFja0lkID0gdGV4dEl0ZW1zWzBdLnRyYWNrSWQ7XG4gICAgICAgIGNvbnNvbGUubG9nKGBVc2FuZG8gdHJhY2tJZCBkZSBlbGVtZW50byBkZSB0ZXh0byBleGlzdGVudGU6ICR7Zmlyc3RUZXh0VHJhY2tJZH1gKTtcbiAgICAgICAgcmV0dXJuIGZpcnN0VGV4dFRyYWNrSWQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2kgdG9kYXbDrWEgbm8gZW5jb250cmFtb3MgdW4gdHJhY2sgYWRlY3VhZG8sIGNyZWFyIHVubyBudWV2b1xuICAgIGNvbnN0IG5ld0lkID0gZ2VuZXJhdGVTdWJ0aXRsZVRyYWNrSWQoKTtcbiAgICBjb25zb2xlLmxvZyhgTmluZ8O6biB0cmFjayBhZGVjdWFkbyBlbmNvbnRyYWRvLiBDcmVhbmRvIG51ZXZvOiAke25ld0lkfWApO1xuICAgIHJldHVybiBuZXdJZDtcbiAgfSwgW3RyYWNrcywgdHJhY2tJdGVtc01hcF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZmV0Y2hUcmFuc2NyaXB0aW9uID0gYXN5bmMgKCkgPT4ge1xuICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvdHJhbnNjcmlwdGlvbnMvdHJhbnNjcmlwdGlvbjEuc3J0Jyk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGFsIGNhcmdhciBlbCBhcmNoaXZvIFNSVDogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgY29uc3Qgc2VnbWVudHMgPSBwYXJzZVNSVCh0ZXh0KTtcbiAgICAgICAgc2V0T3JpZ2luYWxTZWdtZW50cyhzZWdtZW50cyk7XG5cbiAgICAgICAgLy8gUHJvY2VzYXIgbG9zIHNlZ21lbnRvcyBzZWfDum4gbGEgY29uZmlndXJhY2nDs24gYWN0dWFsXG4gICAgICAgIGlmIChncm91cFdvcmRzKSB7XG4gICAgICAgICAgY29uc3QgcHJvY2Vzc2VkU2VnbWVudHMgPSBzZWdtZW50cy5mbGF0TWFwKHByb2Nlc3NTZWdtZW50KTtcbiAgICAgICAgICBzZXRTdWJ0aXRsZVNlZ21lbnRzKHByb2Nlc3NlZFNlZ21lbnRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRTdWJ0aXRsZVNlZ21lbnRzKHNlZ21lbnRzKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgdHJhbnNjcmlwdGlvbjonLCBlcnJvcik7XG4gICAgICAgIHNldEVycm9yKCdObyBzZSBwdWRvIGNhcmdhciBlbCBhcmNoaXZvIGRlIHN1YnTDrXR1bG9zJyk7XG4gICAgICAgIHNldFN1YnRpdGxlU2VnbWVudHMoW10pO1xuICAgICAgICBzZXRPcmlnaW5hbFNlZ21lbnRzKFtdKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZldGNoVHJhbnNjcmlwdGlvbigpO1xuICB9LCBbZ3JvdXBXb3Jkc10pO1xuXG4gIC8vIERldGVybWluYXIgdW4gdHJhY2tJZCBwYXJhIGxvcyBzdWJ0w610dWxvcyBjdWFuZG8gY2FtYmlhbiBsb3MgdHJhY2tzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gU2kgeWEgdGVuZW1vcyB1biB0cmFjayBJRCB5IGV4aXN0ZSwgbWFudGVuZXJsb1xuICAgIGlmIChzdWJ0aXRsZVRyYWNrSWQgJiYgdHJhY2tzLnNvbWUodHJhY2sgPT4gdHJhY2suaWQgPT09IHN1YnRpdGxlVHJhY2tJZCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBNYW50ZW5pZW5kbyB0cmFja0lkIGV4aXN0ZW50ZTogJHtzdWJ0aXRsZVRyYWNrSWR9YCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQnVzY2FyIHVuIHRyYWNrIGV4aXN0ZW50ZSBvIGNyZWFyIHVubyBudWV2b1xuICAgIGNvbnN0IHRyYWNrSWQgPSBmaW5kRXhpc3RpbmdTdWJ0aXRsZVRyYWNrKCk7XG4gICAgc2V0U3VidGl0bGVUcmFja0lkKHRyYWNrSWQpO1xuXG4gICAgLy8gR3VhcmRhciBlbCBJRCBwYXJhIGZ1dHVyYXMgc2VzaW9uZXNcbiAgICBzdG9yZVN1YnRpdGxlVHJhY2tJZCh0cmFja0lkKTtcblxuICAgIGNvbnNvbGUubG9nKGBUcmFjayBJRCBwYXJhIHN1YnTDrXR1bG9zIGVzdGFibGVjaWRvIHkgZ3VhcmRhZG86ICR7dHJhY2tJZH1gKTtcbiAgfSwgW3RyYWNrcywgc3VidGl0bGVUcmFja0lkLCBmaW5kRXhpc3RpbmdTdWJ0aXRsZVRyYWNrXSk7XG5cbiAgLy8gRnVuY2nDs24gcGFyYSBjYW1iaWFyIGVudHJlIG1vZG8gYWdydXBhZG8geSBubyBhZ3J1cGFkb1xuICBjb25zdCB0b2dnbGVHcm91cFdvcmRzID0gKCkgPT4ge1xuICAgIHNldEdyb3VwV29yZHMoIWdyb3VwV29yZHMpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUFkZFN1YnRpdGxlID0gKHNlZ21lbnQ6IFN1YnRpdGxlU2VnbWVudCkgPT4ge1xuICAgIC8vIEFzZWd1cmFybm9zIGRlIHF1ZSB0ZW5lbW9zIHVuIHRyYWNrSWQgY29uc2lzdGVudGVcbiAgICBpZiAoIXN1YnRpdGxlVHJhY2tJZCkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOiBObyBzZSBoYSBlc3RhYmxlY2lkbyB1biB0cmFja0lkIHBhcmEgc3VidMOtdHVsb3NcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYEHDsWFkaWVuZG8gc3VidMOtdHVsbyBcIiR7c2VnbWVudC50ZXh0fVwiIGFsIHRyYWNrOiAke3N1YnRpdGxlVHJhY2tJZH1gKTtcblxuICAgIGRpc3BhdGNoKEFERF9URVhULCB7XG4gICAgICBwYXlsb2FkOiBnZXRBZGRUZXh0UGF5bG9hZChzZWdtZW50LnRleHQsIHNlZ21lbnQuc3RhcnRUaW1lLCBzZWdtZW50LmVuZFRpbWUpLFxuICAgICAgb3B0aW9uczoge1xuICAgICAgICB0cmFja0lkOiBzdWJ0aXRsZVRyYWNrSWQgLy8gVXNhciBlbCBtaXNtbyB0cmFja0lkIHBhcmEgdG9kb3MgbG9zIHN1YnTDrXR1bG9zXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gTWFyY2FyIGVzdGUgc3VidMOtdHVsbyBjb21vIGHDsWFkaWRvXG4gICAgc2V0QWRkZWRTdWJ0aXRsZXMocHJldiA9PiB7XG4gICAgICBjb25zdCBuZXdTZXQgPSBuZXcgU2V0KHByZXYpO1xuICAgICAgbmV3U2V0LmFkZChzZWdtZW50LmlkKTtcbiAgICAgIHJldHVybiBuZXdTZXQ7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQWRkQWxsU3VidGl0bGVzID0gKCkgPT4ge1xuICAgIC8vIEFzZWd1cmFybm9zIGRlIHF1ZSB0ZW5lbW9zIHVuIHRyYWNrSWQgY29uc2lzdGVudGVcbiAgICBpZiAoIXN1YnRpdGxlVHJhY2tJZCkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOiBObyBzZSBoYSBlc3RhYmxlY2lkbyB1biB0cmFja0lkIHBhcmEgc3VidMOtdHVsb3NcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRGVzYWN0aXZhciBlbCBib3TDs24gbWllbnRyYXMgc2UgcHJvY2VzYW4gbG9zIHN1YnTDrXR1bG9zXG4gICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuXG4gICAgY29uc29sZS5sb2coYEHDsWFkaWVuZG8gJHtzdWJ0aXRsZVNlZ21lbnRzLmxlbmd0aH0gc3VidMOtdHVsb3MgYWwgdHJhY2s6ICR7c3VidGl0bGVUcmFja0lkfWApO1xuXG4gICAgLy8gQcOxYWRpciBzdWJ0w610dWxvcyBjb24gdW4gcmV0cmFzbyBlbnRyZSBjYWRhIHVub1xuICAgIHN1YnRpdGxlU2VnbWVudHMuZm9yRWFjaCgoc2VnbWVudCwgaW5kZXgpID0+IHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBkaXNwYXRjaChBRERfVEVYVCwge1xuICAgICAgICAgIHBheWxvYWQ6IGdldEFkZFRleHRQYXlsb2FkKHNlZ21lbnQudGV4dCwgc2VnbWVudC5zdGFydFRpbWUsIHNlZ21lbnQuZW5kVGltZSksXG4gICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgdHJhY2tJZDogc3VidGl0bGVUcmFja0lkIC8vIFVzYXIgZWwgbWlzbW8gdHJhY2tJZCBwYXJhIHRvZG9zIGxvcyBzdWJ0w610dWxvc1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNpIGVzIGVsIMO6bHRpbW8gc3VidMOtdHVsbywgYWN0dWFsaXphciBlbCBlc3RhZG9cbiAgICAgICAgaWYgKGluZGV4ID09PSBzdWJ0aXRsZVNlZ21lbnRzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAvLyBNYXJjYXIgdG9kb3MgbG9zIHN1YnTDrXR1bG9zIGNvbW8gYcOxYWRpZG9zXG4gICAgICAgICAgY29uc3QgYWxsSWRzID0gbmV3IFNldChzdWJ0aXRsZVNlZ21lbnRzLm1hcChzZWdtZW50ID0+IHNlZ21lbnQuaWQpKTtcbiAgICAgICAgICBzZXRBZGRlZFN1YnRpdGxlcyhhbGxJZHMpO1xuICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgY29uc29sZS5sb2coYENvbXBsZXRhZG86ICR7c3VidGl0bGVTZWdtZW50cy5sZW5ndGh9IHN1YnTDrXR1bG9zIGHDsWFkaWRvcyBhbCB0cmFjayAke3N1YnRpdGxlVHJhY2tJZH1gKTtcbiAgICAgICAgfVxuICAgICAgfSwgaW5kZXggKiAyMDApOyAvLyAyMDBtcyBkZSByZXRyYXNvIGVudHJlIGNhZGEgc3VidMOtdHVsb1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtMSBmbGV4LWNvbFwiIGRhdGEtc3VidGl0bGVzPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMTIgZmxleC1ub25lIGl0ZW1zLWNlbnRlciBweC00IGZvbnQtbWVkaXVtIHRleHQtc20gdGV4dC10ZXh0LXByaW1hcnlcIj5cbiAgICAgICAgU3VidMOtdHVsb3NcbiAgICAgICAge3N1YnRpdGxlVHJhY2tJZCAmJiAoXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibWwtMiB0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlxuICAgICAgICAgICAgKFRyYWNrOiB7c3VidGl0bGVUcmFja0lkLnN1YnN0cmluZygwLCA4KX0uLi4pXG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgZ2FwLTIgcHgtNFwiPlxuICAgICAgICB7aXNMb2FkaW5nID8gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgcHktOFwiPlxuICAgICAgICAgICAgPFNwaW5uZXIgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSA6IGVycm9yID8gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1yZWQtNTAwIHRleHQtc20gcHktMlwiPntlcnJvcn08L2Rpdj5cbiAgICAgICAgKSA6IHN1YnRpdGxlU2VnbWVudHMubGVuZ3RoID4gMCA/IChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItMlwiPlxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgb25DbGljaz17dG9nZ2xlR3JvdXBXb3Jkc31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICAgICAgICAgICAgYnV0dG9uVmFyaWFudHMoeyB2YXJpYW50OiAnb3V0bGluZScsIHNpemU6ICdzbScgfSksXG4gICAgICAgICAgICAgICAgICBcImN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2dyb3VwV29yZHMgPyBcIlZlciBzdWJ0w610dWxvcyBjb21wbGV0b3NcIiA6IFwiRGl2aWRpciBlbiBncnVwb3MgZGUgMyBwYWxhYnJhc1wifVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBZGRBbGxTdWJ0aXRsZXN9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgICAgICAgICAgYnV0dG9uVmFyaWFudHMoeyB2YXJpYW50OiAnc2Vjb25kYXJ5JyB9KSxcbiAgICAgICAgICAgICAgICBcImN1cnNvci1wb2ludGVyIGZsZXgganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyXCJcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZ31cbiAgICAgICAgICAgICAgLy8gSUQgZGluw6FtaWNvIHNlZ8O6biBlbCBtb2RvIGRlIGFncnVwYWNpw7NuXG4gICAgICAgICAgICAgIGlkPXtncm91cFdvcmRzID8gXCJhZGQtYWxsLXN1YnRpdGxlcy1ncm91cGVkXCIgOiBcImFkZC1hbGwtc3VidGl0bGVzLWNvbXBsZXRlXCJ9XG4gICAgICAgICAgICAgIGRhdGEtc3VidGl0bGVzLWFkZC1hbGxcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2lzTG9hZGluZyA/IChcbiAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgPFNwaW5uZXIgLz5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1sLTJcIj5Bw7FhZGllbmRvIHN1YnTDrXR1bG9zLi4uPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIGBBw7FhZGlyIHRvZG9zIGxvcyBzdWJ0w610dWxvcyAke2dyb3VwV29yZHMgPyBcIihhZ3J1cGFkb3MpXCIgOiBcIihjb21wbGV0b3MpXCJ9YFxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgdGV4dC1zbSBmb250LW1lZGl1bVwiPlN1YnTDrXR1bG9zIGluZGl2aWR1YWxlczo8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LWgtNjAgb3ZlcmZsb3cteS1hdXRvIHByLTFcIj5cbiAgICAgICAgICAgICAge3N1YnRpdGxlU2VnbWVudHMubWFwKChzZWdtZW50KSA9PiAoXG4gICAgICAgICAgICAgICAgPERyYWdnYWJsZVxuICAgICAgICAgICAgICAgICAga2V5PXtzZWdtZW50LmlkfVxuICAgICAgICAgICAgICAgICAgZGF0YT17KCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZ2V0QWRkVGV4dFBheWxvYWQoc2VnbWVudC50ZXh0LCBzZWdtZW50LnN0YXJ0VGltZSwgc2VnbWVudC5lbmRUaW1lKSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogeyB0cmFja0lkOiBzdWJ0aXRsZVRyYWNrSWQgfVxuICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICByZW5kZXJDdXN0b21QcmV2aWV3PXtcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1iYWNrZ3JvdW5kIGJvcmRlciBib3JkZXItYm9yZGVyIHAtMiByb3VuZGVkLW1kIG1heC13LXhzXCI+XG4gICAgICAgICAgICAgICAgICAgICAge3NlZ21lbnQudGV4dH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBzaG91bGREaXNwbGF5UHJldmlldz17IWlzRHJhZ2dpbmdPdmVyVGltZWxpbmV9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVBZGRTdWJ0aXRsZShzZWdtZW50KX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgICAgICAgICAgICAgICBidXR0b25WYXJpYW50cyh7IHZhcmlhbnQ6ICdvdXRsaW5lJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICBcIm1iLTIgdGV4dC1sZWZ0IGZsZXggZmxleC1jb2wgdy1mdWxsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgYWRkZWRTdWJ0aXRsZXMuaGFzKHNlZ21lbnQuaWQpICYmIFwiYm9yZGVyLWdyZWVuLTUwMCBiZy1ncmVlbi01MDAvMTBcIlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRydW5jYXRlXCIgdGl0bGU9e3NlZ21lbnQudGV4dH0+XG4gICAgICAgICAgICAgICAgICAgICAge3NlZ21lbnQudGV4dC5sZW5ndGggPiAzMCA/IGAke3NlZ21lbnQudGV4dC5zdWJzdHJpbmcoMCwgMzApfS4uLmAgOiBzZWdtZW50LnRleHR9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kIG10LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0VGltZShzZWdtZW50LnN0YXJ0VGltZSl9IC0ge2Zvcm1hdFRpbWUoc2VnbWVudC5lbmRUaW1lKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L0RyYWdnYWJsZT5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8Lz5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8RHJhZ2dhYmxlXG4gICAgICAgICAgICBkYXRhPXsoKSA9PiAoe1xuICAgICAgICAgICAgICAuLi5nZXRBZGRUZXh0UGF5bG9hZChcIkRlbW9cIiksXG4gICAgICAgICAgICAgIG9wdGlvbnM6IHsgdHJhY2tJZDogc3VidGl0bGVUcmFja0lkIH1cbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgcmVuZGVyQ3VzdG9tUHJldmlldz17XG4gICAgICAgICAgICAgIDxCdXR0b24gdmFyaWFudD1cInNlY29uZGFyeVwiIGNsYXNzTmFtZT1cInctNjBcIj5cbiAgICAgICAgICAgICAgICBBZGQgdGV4dFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNob3VsZERpc3BsYXlQcmV2aWV3PXshaXNEcmFnZ2luZ092ZXJUaW1lbGluZX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZUFkZFN1YnRpdGxlKHtpZDogMCwgc3RhcnRUaW1lOiAwLCBlbmRUaW1lOiA1MDAwLCB0ZXh0OiBcIkRlbW9cIn0pfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuKGJ1dHRvblZhcmlhbnRzKHsgdmFyaWFudDogJ3NlY29uZGFyeScgfSkpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBBZGQgdGV4dFxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9EcmFnZ2FibGU+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG4iXSwibmFtZXMiOlsiRHJhZ2dhYmxlIiwiQnV0dG9uIiwiYnV0dG9uVmFyaWFudHMiLCJjbiIsImRpc3BhdGNoIiwiQUREX1RFWFQiLCJnZW5lcmF0ZUlkIiwidXNlSXNEcmFnZ2luZ092ZXJUaW1lbGluZSIsInVzZUVmZmVjdCIsInVzZVN0YXRlIiwidXNlQ2FsbGJhY2siLCJ1c2VTdG9yZSIsIlNwaW5uZXIiLCJkaXYiLCJjbGFzc05hbWUiLCJwYXJzZVRpbWVUb01zIiwidGltZVN0cmluZyIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHNBbmRNcyIsInNwbGl0Iiwic2Vjb25kcyIsIm1zIiwicGFyc2VJbnQiLCJwYXJzZVNSVCIsInNydENvbnRlbnQiLCJzZWdtZW50cyIsImJsb2NrcyIsInRyaW0iLCJmb3JFYWNoIiwiYmxvY2siLCJsaW5lcyIsImxlbmd0aCIsImlkIiwidGltZVJhbmdlIiwic3RhcnRUaW1lIiwiZW5kVGltZSIsInRleHQiLCJzbGljZSIsImpvaW4iLCJwdXNoIiwiZm9ybWF0VGltZSIsIk1hdGgiLCJmbG9vciIsInJlbWFpbmluZ1NlY29uZHMiLCJ0b1N0cmluZyIsInBhZFN0YXJ0Iiwic3BsaXRUZXh0SW50b0dyb3VwcyIsIndvcmRzUGVyR3JvdXAiLCJ3b3JkcyIsImdyb3VwcyIsImkiLCJncm91cCIsInByb2Nlc3NTZWdtZW50Iiwic2VnbWVudCIsInRleHRHcm91cHMiLCJ0b3RhbER1cmF0aW9uIiwiZ3JvdXBEdXJhdGlvbiIsIm1hcCIsImdyb3VwVGV4dCIsImluZGV4IiwiZ2V0QWRkVGV4dFBheWxvYWQiLCJkaXNwbGF5IiwiZnJvbSIsInRvIiwidHlwZSIsImRldGFpbHMiLCJ0b1VwcGVyQ2FzZSIsImZvbnRTaXplIiwid2lkdGgiLCJmb250VXJsIiwiZm9udEZhbWlseSIsImNvbG9yIiwid29yZFdyYXAiLCJ0ZXh0QWxpZ24iLCJib3JkZXJXaWR0aCIsImJvcmRlckNvbG9yIiwiYm94U2hhZG93IiwieCIsInkiLCJibHVyIiwiYmFja2dyb3VuZENvbG9yIiwicGFkZGluZyIsImJvcmRlclJhZGl1cyIsIlNVQlRJVExFU19UUkFDS19QUkVGSVgiLCJnZW5lcmF0ZVN1YnRpdGxlVHJhY2tJZCIsImdldFN0b3JlZFN1YnRpdGxlVHJhY2tJZCIsInN0b3JlZElkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJzdG9yZVN1YnRpdGxlVHJhY2tJZCIsInRyYWNrSWQiLCJzZXRJdGVtIiwiU3VidGl0bGVzIiwiaXNEcmFnZ2luZ092ZXJUaW1lbGluZSIsInN1YnRpdGxlU2VnbWVudHMiLCJzZXRTdWJ0aXRsZVNlZ21lbnRzIiwib3JpZ2luYWxTZWdtZW50cyIsInNldE9yaWdpbmFsU2VnbWVudHMiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJzZXRFcnJvciIsImFkZGVkU3VidGl0bGVzIiwic2V0QWRkZWRTdWJ0aXRsZXMiLCJTZXQiLCJncm91cFdvcmRzIiwic2V0R3JvdXBXb3JkcyIsInN1YnRpdGxlVHJhY2tJZCIsInNldFN1YnRpdGxlVHJhY2tJZCIsInRyYWNrcyIsInRyYWNrSXRlbXNNYXAiLCJmaW5kRXhpc3RpbmdTdWJ0aXRsZVRyYWNrIiwibG9nIiwic29tZSIsInRyYWNrIiwidGV4dFRyYWNrIiwiZmluZCIsImFjY2VwdHMiLCJpbmNsdWRlcyIsInN1YnRpdGxlVHJhY2siLCJ0ZXh0SXRlbXMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJmaWx0ZXIiLCJpdGVtIiwiZmlyc3RUZXh0VHJhY2tJZCIsIm5ld0lkIiwiZmV0Y2hUcmFuc2NyaXB0aW9uIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJwcm9jZXNzZWRTZWdtZW50cyIsImZsYXRNYXAiLCJ0b2dnbGVHcm91cFdvcmRzIiwiaGFuZGxlQWRkU3VidGl0bGUiLCJwYXlsb2FkIiwib3B0aW9ucyIsInByZXYiLCJuZXdTZXQiLCJhZGQiLCJoYW5kbGVBZGRBbGxTdWJ0aXRsZXMiLCJzZXRUaW1lb3V0IiwiYWxsSWRzIiwiZGF0YS1zdWJ0aXRsZXMiLCJzcGFuIiwic3Vic3RyaW5nIiwib25DbGljayIsInZhcmlhbnQiLCJzaXplIiwiZGlzYWJsZWQiLCJkYXRhLXN1YnRpdGxlcy1hZGQtYWxsIiwiZGF0YSIsInJlbmRlckN1c3RvbVByZXZpZXciLCJzaG91bGREaXNwbGF5UHJldmlldyIsImhhcyIsInRpdGxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./features/editor/menu-item/subtitles.tsx\n"));

/***/ })

});
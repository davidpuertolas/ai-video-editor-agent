"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./features/editor/scene/droppable.tsx":
/*!*********************************************!*\
  !*** ./features/editor/scene/droppable.tsx ***!
  \*********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DroppableArea: function() { return /* binding */ DroppableArea; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var _designcombo_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @designcombo/events */ \"(app-pages-browser)/./node_modules/@designcombo/events/dist/index.es.js\");\n/* harmony import */ var _designcombo_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @designcombo/state */ \"(app-pages-browser)/./node_modules/@designcombo/state/dist/index.es.js\");\n/* harmony import */ var _designcombo_timeline__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @designcombo/timeline */ \"(app-pages-browser)/./node_modules/@designcombo/timeline/dist/index.es.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _dnd_kit_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @dnd-kit/core */ \"(app-pages-browser)/./node_modules/@dnd-kit/core/dist/core.esm.js\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/utils */ \"(app-pages-browser)/./lib/utils.ts\");\n/* __next_internal_client_entry_do_not_use__ DroppableArea auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\n\n\n\nvar AcceptedDropTypes;\n(function(AcceptedDropTypes) {\n    AcceptedDropTypes[\"IMAGE\"] = \"image\";\n    AcceptedDropTypes[\"VIDEO\"] = \"video\";\n    AcceptedDropTypes[\"AUDIO\"] = \"audio\";\n})(AcceptedDropTypes || (AcceptedDropTypes = {}));\n// Función para generar un thumbnail a partir de un video\nconst generateVideoThumbnail = (file)=>{\n    return new Promise((resolve, reject)=>{\n        // Crear un elemento de video temporal para generar la miniatura\n        const video = document.createElement(\"video\");\n        video.preload = \"metadata\";\n        // Configurar eventos\n        video.onloadedmetadata = ()=>{\n            // Buscar un fotograma cerca del inicio del video, pero no el primer frame\n            video.currentTime = Math.min(1, video.duration / 10);\n        };\n        video.onloadeddata = ()=>{\n            try {\n                // Crear un canvas para capturar el fotograma actual\n                const canvas = document.createElement(\"canvas\");\n                canvas.width = video.videoWidth;\n                canvas.height = video.videoHeight;\n                // Dibujar el fotograma actual en el canvas\n                const ctx = canvas.getContext(\"2d\");\n                ctx === null || ctx === void 0 ? void 0 : ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n                // Convertir el canvas a una URL de datos (thumbnail)\n                const dataUrl = canvas.toDataURL(\"image/jpeg\", 0.8);\n                // Liberar recursos\n                URL.revokeObjectURL(video.src);\n                resolve(dataUrl);\n            } catch (error) {\n                console.error(\"Error generando thumbnail:\", error);\n                reject(error);\n            }\n        };\n        video.onerror = ()=>{\n            console.error(\"Error cargando video para thumbnail\");\n            URL.revokeObjectURL(video.src);\n            reject(new Error(\"Error loading video\"));\n        };\n        // Establecer la fuente del video\n        video.src = URL.createObjectURL(file);\n    });\n};\n// Función para crear un thumbnail para una imagen\nconst createImagePreview = (file)=>{\n    return new Promise((resolve, reject)=>{\n        const reader = new FileReader();\n        reader.onload = ()=>{\n            if (typeof reader.result === \"string\") {\n                resolve(reader.result);\n            } else {\n                reject(new Error(\"No se pudo convertir la imagen a dataURL\"));\n            }\n        };\n        reader.onerror = ()=>{\n            reject(new Error(\"Error al leer el archivo\"));\n        };\n        reader.readAsDataURL(file);\n    });\n};\nconst useDragAndDrop = (onDragStateChange)=>{\n    _s();\n    const [isPointerInside, setIsPointerInside] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);\n    const [isDraggingOver, setIsDraggingOver] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);\n    const handleDropFile = async (file)=>{\n        const id = (0,_designcombo_timeline__WEBPACK_IMPORTED_MODULE_3__.generateId)();\n        try {\n            // Determinar el tipo de archivo\n            if (file.type.startsWith(\"image/\")) {\n                // Procesar imagen\n                const imageUrl = URL.createObjectURL(file);\n                const thumbnailUrl = await createImagePreview(file);\n                (0,_designcombo_events__WEBPACK_IMPORTED_MODULE_1__.dispatch)(_designcombo_state__WEBPACK_IMPORTED_MODULE_2__.ADD_IMAGE, {\n                    payload: {\n                        id,\n                        details: {\n                            src: imageUrl\n                        },\n                        metadata: {\n                            previewUrl: thumbnailUrl,\n                            fileName: file.name\n                        }\n                    }\n                });\n            } else if (file.type.startsWith(\"video/\")) {\n                // Procesar video\n                const videoUrl = URL.createObjectURL(file);\n                let thumbnailUrl;\n                try {\n                    thumbnailUrl = await generateVideoThumbnail(file);\n                } catch (error) {\n                    console.error(\"Error generando thumbnail para video:\", error);\n                    thumbnailUrl = videoUrl; // Usar el video como su propio thumbnail si falla\n                }\n                (0,_designcombo_events__WEBPACK_IMPORTED_MODULE_1__.dispatch)(_designcombo_state__WEBPACK_IMPORTED_MODULE_2__.ADD_VIDEO, {\n                    payload: {\n                        id,\n                        details: {\n                            src: videoUrl\n                        },\n                        metadata: {\n                            previewUrl: thumbnailUrl,\n                            fileName: file.name\n                        }\n                    }\n                });\n            } else if (file.type.startsWith(\"audio/\")) {\n                // Procesar audio\n                const audioUrl = URL.createObjectURL(file);\n                (0,_designcombo_events__WEBPACK_IMPORTED_MODULE_1__.dispatch)(_designcombo_state__WEBPACK_IMPORTED_MODULE_2__.ADD_AUDIO, {\n                    payload: {\n                        id,\n                        details: {\n                            src: audioUrl\n                        },\n                        metadata: {\n                            fileName: file.name\n                        }\n                    }\n                });\n            }\n        } catch (error) {\n            console.error(\"Error procesando archivo arrastrado:\", error);\n        }\n    };\n    const handleDrop = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)((draggedData)=>{\n        const payload = {\n            ...draggedData,\n            id: (0,_designcombo_timeline__WEBPACK_IMPORTED_MODULE_3__.generateId)()\n        };\n        switch(draggedData.type){\n            case \"image\":\n                (0,_designcombo_events__WEBPACK_IMPORTED_MODULE_1__.dispatch)(_designcombo_state__WEBPACK_IMPORTED_MODULE_2__.ADD_IMAGE, {\n                    payload\n                });\n                break;\n            case \"video\":\n                (0,_designcombo_events__WEBPACK_IMPORTED_MODULE_1__.dispatch)(_designcombo_state__WEBPACK_IMPORTED_MODULE_2__.ADD_VIDEO, {\n                    payload\n                });\n                break;\n            case \"audio\":\n                (0,_designcombo_events__WEBPACK_IMPORTED_MODULE_1__.dispatch)(_designcombo_state__WEBPACK_IMPORTED_MODULE_2__.ADD_AUDIO, {\n                    payload\n                });\n                break;\n        }\n    }, []);\n    const onDragEnter = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)((e)=>{\n        e.preventDefault();\n        try {\n            var _e_dataTransfer, _e_dataTransfer1;\n            // Check if this is a file being dragged\n            if (((_e_dataTransfer = e.dataTransfer) === null || _e_dataTransfer === void 0 ? void 0 : _e_dataTransfer.items) && e.dataTransfer.items.length > 0) {\n                for(let i = 0; i < e.dataTransfer.items.length; i++){\n                    if (e.dataTransfer.items[i].kind === \"file\") {\n                        setIsDraggingOver(true);\n                        setIsPointerInside(true);\n                        onDragStateChange === null || onDragStateChange === void 0 ? void 0 : onDragStateChange(true);\n                        return;\n                    }\n                }\n            }\n            // Otherwise, check for dragged JSON data\n            const draggedDataString = (_e_dataTransfer1 = e.dataTransfer) === null || _e_dataTransfer1 === void 0 ? void 0 : _e_dataTransfer1.types[0];\n            if (!draggedDataString) return;\n            const draggedData = JSON.parse(draggedDataString);\n            if (!Object.values(AcceptedDropTypes).includes(draggedData.type)) return;\n            setIsDraggingOver(true);\n            setIsPointerInside(true);\n            onDragStateChange === null || onDragStateChange === void 0 ? void 0 : onDragStateChange(true);\n        } catch (error) {\n            console.error(\"Error parsing dragged data:\", error);\n        }\n    }, [\n        onDragStateChange\n    ]);\n    const onDragOver = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)((e)=>{\n        e.preventDefault(); // Importante: permite el drop\n        if (isPointerInside) {\n            setIsDraggingOver(true);\n            onDragStateChange === null || onDragStateChange === void 0 ? void 0 : onDragStateChange(true);\n        }\n    }, [\n        isPointerInside,\n        onDragStateChange\n    ]);\n    const onDrop = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)((e)=>{\n        if (!isDraggingOver) return;\n        e.preventDefault();\n        setIsDraggingOver(false);\n        onDragStateChange === null || onDragStateChange === void 0 ? void 0 : onDragStateChange(false);\n        try {\n            var _e_dataTransfer, _e_dataTransfer1;\n            // Primero, verificar si se están soltando archivos\n            if (((_e_dataTransfer = e.dataTransfer) === null || _e_dataTransfer === void 0 ? void 0 : _e_dataTransfer.files) && e.dataTransfer.files.length > 0) {\n                for(let i = 0; i < e.dataTransfer.files.length; i++){\n                    const file = e.dataTransfer.files[i];\n                    handleDropFile(file);\n                }\n                return;\n            }\n            // Si no son archivos, procesar como datos arrastrados\n            const draggedDataString = (_e_dataTransfer1 = e.dataTransfer) === null || _e_dataTransfer1 === void 0 ? void 0 : _e_dataTransfer1.types[0];\n            const draggedData = JSON.parse(e.dataTransfer.getData(draggedDataString));\n            handleDrop(draggedData);\n        } catch (error) {\n            console.error(\"Error parsing dropped data:\", error);\n        }\n    }, [\n        isDraggingOver,\n        onDragStateChange,\n        handleDrop\n    ]);\n    const onDragLeave = (0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)((e)=>{\n        e.preventDefault();\n        if (!e.currentTarget.contains(e.relatedTarget)) {\n            setIsDraggingOver(false);\n            setIsPointerInside(false);\n            onDragStateChange === null || onDragStateChange === void 0 ? void 0 : onDragStateChange(false);\n        }\n    }, [\n        onDragStateChange\n    ]);\n    return {\n        onDragEnter,\n        onDragOver,\n        onDrop,\n        onDragLeave,\n        isDraggingOver\n    };\n};\n_s(useDragAndDrop, \"03hvRWIfLzDd/Cy1Zohx8Tx+x1U=\");\nfunction DroppableArea(param) {\n    let { id, children, style, className, onDragStateChange } = param;\n    _s1();\n    // Usar useDroppable para compatibilidad con @dnd-kit\n    const { isOver, setNodeRef } = (0,_dnd_kit_core__WEBPACK_IMPORTED_MODULE_5__.useDroppable)({\n        id\n    });\n    // Usar nuestros propios handlers para drag-and-drop de archivos externos\n    const { onDragEnter, onDragOver, onDrop, onDragLeave } = useDragAndDrop(onDragStateChange || (isOver ? ()=>true : undefined));\n    if (onDragStateChange) {\n        onDragStateChange(isOver);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: setNodeRef,\n        style: style,\n        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_6__.cn)(\"relative\", className),\n        onDragEnter: onDragEnter,\n        onDragOver: onDragOver,\n        onDrop: onDrop,\n        onDragLeave: onDragLeave,\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\david\\\\Desktop\\\\ai-video-agent\\\\react-video-editor\\\\features\\\\editor\\\\scene\\\\droppable.tsx\",\n        lineNumber: 294,\n        columnNumber: 5\n    }, this);\n}\n_s1(DroppableArea, \"3g+wbRpZYIpGuMhcblJMJU5prI8=\", false, function() {\n    return [\n        _dnd_kit_core__WEBPACK_IMPORTED_MODULE_5__.useDroppable,\n        useDragAndDrop\n    ];\n});\n_c = DroppableArea;\nvar _c;\n$RefreshReg$(_c, \"DroppableArea\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2ZlYXR1cmVzL2VkaXRvci9zY2VuZS9kcm9wcGFibGUudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBRStDO0FBQ3NCO0FBQ2xCO0FBQ2E7QUFDbkI7QUFDWjs7VUFFNUJVOzs7O0dBQUFBLHNCQUFBQTtBQW1CTCx5REFBeUQ7QUFDekQsTUFBTUMseUJBQXlCLENBQUNDO0lBQzlCLE9BQU8sSUFBSUMsUUFBUSxDQUFDQyxTQUFTQztRQUMzQixnRUFBZ0U7UUFDaEUsTUFBTUMsUUFBUUMsU0FBU0MsYUFBYSxDQUFDO1FBQ3JDRixNQUFNRyxPQUFPLEdBQUc7UUFFaEIscUJBQXFCO1FBQ3JCSCxNQUFNSSxnQkFBZ0IsR0FBRztZQUN2QiwwRUFBMEU7WUFDMUVKLE1BQU1LLFdBQVcsR0FBR0MsS0FBS0MsR0FBRyxDQUFDLEdBQUdQLE1BQU1RLFFBQVEsR0FBRztRQUNuRDtRQUVBUixNQUFNUyxZQUFZLEdBQUc7WUFDbkIsSUFBSTtnQkFDRixvREFBb0Q7Z0JBQ3BELE1BQU1DLFNBQVNULFNBQVNDLGFBQWEsQ0FBQztnQkFDdENRLE9BQU9DLEtBQUssR0FBR1gsTUFBTVksVUFBVTtnQkFDL0JGLE9BQU9HLE1BQU0sR0FBR2IsTUFBTWMsV0FBVztnQkFFakMsMkNBQTJDO2dCQUMzQyxNQUFNQyxNQUFNTCxPQUFPTSxVQUFVLENBQUM7Z0JBQzlCRCxnQkFBQUEsMEJBQUFBLElBQUtFLFNBQVMsQ0FBQ2pCLE9BQU8sR0FBRyxHQUFHVSxPQUFPQyxLQUFLLEVBQUVELE9BQU9HLE1BQU07Z0JBRXZELHFEQUFxRDtnQkFDckQsTUFBTUssVUFBVVIsT0FBT1MsU0FBUyxDQUFDLGNBQWM7Z0JBRS9DLG1CQUFtQjtnQkFDbkJDLElBQUlDLGVBQWUsQ0FBQ3JCLE1BQU1zQixHQUFHO2dCQUU3QnhCLFFBQVFvQjtZQUNWLEVBQUUsT0FBT0ssT0FBTztnQkFDZEMsUUFBUUQsS0FBSyxDQUFDLDhCQUE4QkE7Z0JBQzVDeEIsT0FBT3dC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cyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2ZlYXR1cmVzL2VkaXRvci9zY2VuZS9kcm9wcGFibGUudHN4PzhmMWQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XHJcblxyXG5pbXBvcnQgeyBkaXNwYXRjaCB9IGZyb20gXCJAZGVzaWduY29tYm8vZXZlbnRzXCI7XHJcbmltcG9ydCB7IEFERF9BVURJTywgQUREX0lNQUdFLCBBRERfVklERU8gfSBmcm9tIFwiQGRlc2lnbmNvbWJvL3N0YXRlXCI7XHJcbmltcG9ydCB7IGdlbmVyYXRlSWQgfSBmcm9tIFwiQGRlc2lnbmNvbWJvL3RpbWVsaW5lXCI7XHJcbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgeyB1c2VEcm9wcGFibGUgfSBmcm9tIFwiQGRuZC1raXQvY29yZVwiO1xyXG5pbXBvcnQgeyBjbiB9IGZyb20gXCJAL2xpYi91dGlsc1wiO1xyXG5cclxuZW51bSBBY2NlcHRlZERyb3BUeXBlcyB7XHJcbiAgSU1BR0UgPSBcImltYWdlXCIsXHJcbiAgVklERU8gPSBcInZpZGVvXCIsXHJcbiAgQVVESU8gPSBcImF1ZGlvXCIsXHJcbn1cclxuXHJcbmludGVyZmFjZSBEcmFnZ2VkRGF0YSB7XHJcbiAgdHlwZTogQWNjZXB0ZWREcm9wVHlwZXM7XHJcbiAgW2tleTogc3RyaW5nXTogYW55O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRHJvcHBhYmxlQXJlYVByb3BzIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XHJcbiAgc3R5bGU/OiBSZWFjdC5DU1NQcm9wZXJ0aWVzO1xyXG4gIGNsYXNzTmFtZT86IHN0cmluZztcclxuICBvbkRyYWdTdGF0ZUNoYW5nZT86IChpc0RyYWdnaW5nT3ZlcjogYm9vbGVhbikgPT4gdm9pZDtcclxufVxyXG5cclxuLy8gRnVuY2nDs24gcGFyYSBnZW5lcmFyIHVuIHRodW1ibmFpbCBhIHBhcnRpciBkZSB1biB2aWRlb1xyXG5jb25zdCBnZW5lcmF0ZVZpZGVvVGh1bWJuYWlsID0gKGZpbGU6IEZpbGUpOiBQcm9taXNlPHN0cmluZz4gPT4ge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAvLyBDcmVhciB1biBlbGVtZW50byBkZSB2aWRlbyB0ZW1wb3JhbCBwYXJhIGdlbmVyYXIgbGEgbWluaWF0dXJhXHJcbiAgICBjb25zdCB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XHJcbiAgICB2aWRlby5wcmVsb2FkID0gJ21ldGFkYXRhJztcclxuXHJcbiAgICAvLyBDb25maWd1cmFyIGV2ZW50b3NcclxuICAgIHZpZGVvLm9ubG9hZGVkbWV0YWRhdGEgPSAoKSA9PiB7XHJcbiAgICAgIC8vIEJ1c2NhciB1biBmb3RvZ3JhbWEgY2VyY2EgZGVsIGluaWNpbyBkZWwgdmlkZW8sIHBlcm8gbm8gZWwgcHJpbWVyIGZyYW1lXHJcbiAgICAgIHZpZGVvLmN1cnJlbnRUaW1lID0gTWF0aC5taW4oMSwgdmlkZW8uZHVyYXRpb24gLyAxMCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZpZGVvLm9ubG9hZGVkZGF0YSA9ICgpID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyBDcmVhciB1biBjYW52YXMgcGFyYSBjYXB0dXJhciBlbCBmb3RvZ3JhbWEgYWN0dWFsXHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gdmlkZW8udmlkZW9XaWR0aDtcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gdmlkZW8udmlkZW9IZWlnaHQ7XHJcblxyXG4gICAgICAgIC8vIERpYnVqYXIgZWwgZm90b2dyYW1hIGFjdHVhbCBlbiBlbCBjYW52YXNcclxuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICBjdHg/LmRyYXdJbWFnZSh2aWRlbywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy8gQ29udmVydGlyIGVsIGNhbnZhcyBhIHVuYSBVUkwgZGUgZGF0b3MgKHRodW1ibmFpbClcclxuICAgICAgICBjb25zdCBkYXRhVXJsID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvanBlZycsIDAuOCk7XHJcblxyXG4gICAgICAgIC8vIExpYmVyYXIgcmVjdXJzb3NcclxuICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHZpZGVvLnNyYyk7XHJcblxyXG4gICAgICAgIHJlc29sdmUoZGF0YVVybCk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdlbmVyYW5kbyB0aHVtYm5haWw6XCIsIGVycm9yKTtcclxuICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZpZGVvLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjYXJnYW5kbyB2aWRlbyBwYXJhIHRodW1ibmFpbFwiKTtcclxuICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh2aWRlby5zcmMpO1xyXG4gICAgICByZWplY3QobmV3IEVycm9yKFwiRXJyb3IgbG9hZGluZyB2aWRlb1wiKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEVzdGFibGVjZXIgbGEgZnVlbnRlIGRlbCB2aWRlb1xyXG4gICAgdmlkZW8uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8vIEZ1bmNpw7NuIHBhcmEgY3JlYXIgdW4gdGh1bWJuYWlsIHBhcmEgdW5hIGltYWdlblxyXG5jb25zdCBjcmVhdGVJbWFnZVByZXZpZXcgPSAoZmlsZTogRmlsZSk6IFByb21pc2U8c3RyaW5nPiA9PiB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICByZWFkZXIub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICBpZiAodHlwZW9mIHJlYWRlci5yZXN1bHQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZWplY3QobmV3IEVycm9yKCdObyBzZSBwdWRvIGNvbnZlcnRpciBsYSBpbWFnZW4gYSBkYXRhVVJMJykpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmVhZGVyLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0Vycm9yIGFsIGxlZXIgZWwgYXJjaGl2bycpKTtcclxuICAgIH07XHJcbiAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcclxuICB9KTtcclxufTtcclxuXHJcbmNvbnN0IHVzZURyYWdBbmREcm9wID0gKG9uRHJhZ1N0YXRlQ2hhbmdlPzogKGlzRHJhZ2dpbmc6IGJvb2xlYW4pID0+IHZvaWQpID0+IHtcclxuICBjb25zdCBbaXNQb2ludGVySW5zaWRlLCBzZXRJc1BvaW50ZXJJbnNpZGVdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtpc0RyYWdnaW5nT3Zlciwgc2V0SXNEcmFnZ2luZ092ZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICBjb25zdCBoYW5kbGVEcm9wRmlsZSA9IGFzeW5jIChmaWxlOiBGaWxlKSA9PiB7XHJcbiAgICBjb25zdCBpZCA9IGdlbmVyYXRlSWQoKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBEZXRlcm1pbmFyIGVsIHRpcG8gZGUgYXJjaGl2b1xyXG4gICAgICBpZiAoZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XHJcbiAgICAgICAgLy8gUHJvY2VzYXIgaW1hZ2VuXHJcbiAgICAgICAgY29uc3QgaW1hZ2VVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xyXG4gICAgICAgIGNvbnN0IHRodW1ibmFpbFVybCA9IGF3YWl0IGNyZWF0ZUltYWdlUHJldmlldyhmaWxlKTtcclxuXHJcbiAgICAgICAgZGlzcGF0Y2goQUREX0lNQUdFLCB7XHJcbiAgICAgICAgICBwYXlsb2FkOiB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICBkZXRhaWxzOiB7XHJcbiAgICAgICAgICAgICAgc3JjOiBpbWFnZVVybCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgICAgICBwcmV2aWV3VXJsOiB0aHVtYm5haWxVcmwsXHJcbiAgICAgICAgICAgICAgZmlsZU5hbWU6IGZpbGUubmFtZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChmaWxlLnR5cGUuc3RhcnRzV2l0aCgndmlkZW8vJykpIHtcclxuICAgICAgICAvLyBQcm9jZXNhciB2aWRlb1xyXG4gICAgICAgIGNvbnN0IHZpZGVvVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcclxuICAgICAgICBsZXQgdGh1bWJuYWlsVXJsO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgdGh1bWJuYWlsVXJsID0gYXdhaXQgZ2VuZXJhdGVWaWRlb1RodW1ibmFpbChmaWxlKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdlbmVyYW5kbyB0aHVtYm5haWwgcGFyYSB2aWRlbzpcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgdGh1bWJuYWlsVXJsID0gdmlkZW9Vcmw7IC8vIFVzYXIgZWwgdmlkZW8gY29tbyBzdSBwcm9waW8gdGh1bWJuYWlsIHNpIGZhbGxhXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkaXNwYXRjaChBRERfVklERU8sIHtcclxuICAgICAgICAgIHBheWxvYWQ6IHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIGRldGFpbHM6IHtcclxuICAgICAgICAgICAgICBzcmM6IHZpZGVvVXJsLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgICAgIHByZXZpZXdVcmw6IHRodW1ibmFpbFVybCxcclxuICAgICAgICAgICAgICBmaWxlTmFtZTogZmlsZS5uYW1lLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGZpbGUudHlwZS5zdGFydHNXaXRoKCdhdWRpby8nKSkge1xyXG4gICAgICAgIC8vIFByb2Nlc2FyIGF1ZGlvXHJcbiAgICAgICAgY29uc3QgYXVkaW9VcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xyXG5cclxuICAgICAgICBkaXNwYXRjaChBRERfQVVESU8sIHtcclxuICAgICAgICAgIHBheWxvYWQ6IHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIGRldGFpbHM6IHtcclxuICAgICAgICAgICAgICBzcmM6IGF1ZGlvVXJsLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlLm5hbWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwcm9jZXNhbmRvIGFyY2hpdm8gYXJyYXN0cmFkbzpcIiwgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZURyb3AgPSB1c2VDYWxsYmFjaygoZHJhZ2dlZERhdGE6IERyYWdnZWREYXRhKSA9PiB7XHJcbiAgICBjb25zdCBwYXlsb2FkID0geyAuLi5kcmFnZ2VkRGF0YSwgaWQ6IGdlbmVyYXRlSWQoKSB9O1xyXG4gICAgc3dpdGNoIChkcmFnZ2VkRGF0YS50eXBlKSB7XHJcbiAgICAgIGNhc2UgQWNjZXB0ZWREcm9wVHlwZXMuSU1BR0U6XHJcbiAgICAgICAgZGlzcGF0Y2goQUREX0lNQUdFLCB7IHBheWxvYWQgfSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgQWNjZXB0ZWREcm9wVHlwZXMuVklERU86XHJcbiAgICAgICAgZGlzcGF0Y2goQUREX1ZJREVPLCB7IHBheWxvYWQgfSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgQWNjZXB0ZWREcm9wVHlwZXMuQVVESU86XHJcbiAgICAgICAgZGlzcGF0Y2goQUREX0FVRElPLCB7IHBheWxvYWQgfSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBvbkRyYWdFbnRlciA9IHVzZUNhbGxiYWNrKFxyXG4gICAgKGU6IFJlYWN0LkRyYWdFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBmaWxlIGJlaW5nIGRyYWdnZWRcclxuICAgICAgICBpZiAoZS5kYXRhVHJhbnNmZXI/Lml0ZW1zICYmIGUuZGF0YVRyYW5zZmVyLml0ZW1zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZS5kYXRhVHJhbnNmZXIuaXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuZGF0YVRyYW5zZmVyLml0ZW1zW2ldLmtpbmQgPT09ICdmaWxlJykge1xyXG4gICAgICAgICAgICAgIHNldElzRHJhZ2dpbmdPdmVyKHRydWUpO1xyXG4gICAgICAgICAgICAgIHNldElzUG9pbnRlckluc2lkZSh0cnVlKTtcclxuICAgICAgICAgICAgICBvbkRyYWdTdGF0ZUNoYW5nZT8uKHRydWUpO1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBjaGVjayBmb3IgZHJhZ2dlZCBKU09OIGRhdGFcclxuICAgICAgICBjb25zdCBkcmFnZ2VkRGF0YVN0cmluZyA9IGUuZGF0YVRyYW5zZmVyPy50eXBlc1swXSBhcyBzdHJpbmc7XHJcbiAgICAgICAgaWYgKCFkcmFnZ2VkRGF0YVN0cmluZykgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGRyYWdnZWREYXRhOiBEcmFnZ2VkRGF0YSA9IEpTT04ucGFyc2UoZHJhZ2dlZERhdGFTdHJpbmcpO1xyXG5cclxuICAgICAgICBpZiAoIU9iamVjdC52YWx1ZXMoQWNjZXB0ZWREcm9wVHlwZXMpLmluY2x1ZGVzKGRyYWdnZWREYXRhLnR5cGUpKVxyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHNldElzRHJhZ2dpbmdPdmVyKHRydWUpO1xyXG4gICAgICAgIHNldElzUG9pbnRlckluc2lkZSh0cnVlKTtcclxuICAgICAgICBvbkRyYWdTdGF0ZUNoYW5nZT8uKHRydWUpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwYXJzaW5nIGRyYWdnZWQgZGF0YTpcIiwgZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgW29uRHJhZ1N0YXRlQ2hhbmdlXSxcclxuICApO1xyXG5cclxuICBjb25zdCBvbkRyYWdPdmVyID0gdXNlQ2FsbGJhY2soXHJcbiAgICAoZTogUmVhY3QuRHJhZ0V2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIEltcG9ydGFudGU6IHBlcm1pdGUgZWwgZHJvcFxyXG4gICAgICBpZiAoaXNQb2ludGVySW5zaWRlKSB7XHJcbiAgICAgICAgc2V0SXNEcmFnZ2luZ092ZXIodHJ1ZSk7XHJcbiAgICAgICAgb25EcmFnU3RhdGVDaGFuZ2U/Lih0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIFtpc1BvaW50ZXJJbnNpZGUsIG9uRHJhZ1N0YXRlQ2hhbmdlXSxcclxuICApO1xyXG5cclxuICBjb25zdCBvbkRyb3AgPSB1c2VDYWxsYmFjayhcclxuICAgIChlOiBSZWFjdC5EcmFnRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XHJcbiAgICAgIGlmICghaXNEcmFnZ2luZ092ZXIpIHJldHVybjtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBzZXRJc0RyYWdnaW5nT3ZlcihmYWxzZSk7XHJcbiAgICAgIG9uRHJhZ1N0YXRlQ2hhbmdlPy4oZmFsc2UpO1xyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyBQcmltZXJvLCB2ZXJpZmljYXIgc2kgc2UgZXN0w6FuIHNvbHRhbmRvIGFyY2hpdm9zXHJcbiAgICAgICAgaWYgKGUuZGF0YVRyYW5zZmVyPy5maWxlcyAmJiBlLmRhdGFUcmFuc2Zlci5maWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGUuZGF0YVRyYW5zZmVyLmZpbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBlLmRhdGFUcmFuc2Zlci5maWxlc1tpXTtcclxuICAgICAgICAgICAgaGFuZGxlRHJvcEZpbGUoZmlsZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTaSBubyBzb24gYXJjaGl2b3MsIHByb2Nlc2FyIGNvbW8gZGF0b3MgYXJyYXN0cmFkb3NcclxuICAgICAgICBjb25zdCBkcmFnZ2VkRGF0YVN0cmluZyA9IGUuZGF0YVRyYW5zZmVyPy50eXBlc1swXSBhcyBzdHJpbmc7XHJcbiAgICAgICAgY29uc3QgZHJhZ2dlZERhdGEgPSBKU09OLnBhcnNlKFxyXG4gICAgICAgICAgZS5kYXRhVHJhbnNmZXIhLmdldERhdGEoZHJhZ2dlZERhdGFTdHJpbmcpLFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaGFuZGxlRHJvcChkcmFnZ2VkRGF0YSk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHBhcnNpbmcgZHJvcHBlZCBkYXRhOlwiLCBlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBbaXNEcmFnZ2luZ092ZXIsIG9uRHJhZ1N0YXRlQ2hhbmdlLCBoYW5kbGVEcm9wXSxcclxuICApO1xyXG5cclxuICBjb25zdCBvbkRyYWdMZWF2ZSA9IHVzZUNhbGxiYWNrKFxyXG4gICAgKGU6IFJlYWN0LkRyYWdFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBpZiAoIWUuY3VycmVudFRhcmdldC5jb250YWlucyhlLnJlbGF0ZWRUYXJnZXQgYXMgTm9kZSkpIHtcclxuICAgICAgICBzZXRJc0RyYWdnaW5nT3ZlcihmYWxzZSk7XHJcbiAgICAgICAgc2V0SXNQb2ludGVySW5zaWRlKGZhbHNlKTtcclxuICAgICAgICBvbkRyYWdTdGF0ZUNoYW5nZT8uKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIFtvbkRyYWdTdGF0ZUNoYW5nZV0sXHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIHsgb25EcmFnRW50ZXIsIG9uRHJhZ092ZXIsIG9uRHJvcCwgb25EcmFnTGVhdmUsIGlzRHJhZ2dpbmdPdmVyIH07XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gRHJvcHBhYmxlQXJlYSh7XHJcbiAgaWQsXHJcbiAgY2hpbGRyZW4sXHJcbiAgc3R5bGUsXHJcbiAgY2xhc3NOYW1lLFxyXG4gIG9uRHJhZ1N0YXRlQ2hhbmdlLFxyXG59OiBEcm9wcGFibGVBcmVhUHJvcHMpIHtcclxuICAvLyBVc2FyIHVzZURyb3BwYWJsZSBwYXJhIGNvbXBhdGliaWxpZGFkIGNvbiBAZG5kLWtpdFxyXG4gIGNvbnN0IHsgaXNPdmVyLCBzZXROb2RlUmVmIH0gPSB1c2VEcm9wcGFibGUoe1xyXG4gICAgaWQsXHJcbiAgfSk7XHJcblxyXG4gIC8vIFVzYXIgbnVlc3Ryb3MgcHJvcGlvcyBoYW5kbGVycyBwYXJhIGRyYWctYW5kLWRyb3AgZGUgYXJjaGl2b3MgZXh0ZXJub3NcclxuICBjb25zdCB7IG9uRHJhZ0VudGVyLCBvbkRyYWdPdmVyLCBvbkRyb3AsIG9uRHJhZ0xlYXZlIH0gPSB1c2VEcmFnQW5kRHJvcChcclxuICAgIG9uRHJhZ1N0YXRlQ2hhbmdlIHx8IChpc092ZXIgPyAoKSA9PiB0cnVlIDogdW5kZWZpbmVkKVxyXG4gICk7XHJcblxyXG4gIGlmIChvbkRyYWdTdGF0ZUNoYW5nZSkge1xyXG4gICAgb25EcmFnU3RhdGVDaGFuZ2UoaXNPdmVyKTtcclxuICB9XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2XHJcbiAgICAgIHJlZj17c2V0Tm9kZVJlZn1cclxuICAgICAgc3R5bGU9e3N0eWxlfVxyXG4gICAgICBjbGFzc05hbWU9e2NuKFwicmVsYXRpdmVcIiwgY2xhc3NOYW1lKX1cclxuICAgICAgb25EcmFnRW50ZXI9e29uRHJhZ0VudGVyfVxyXG4gICAgICBvbkRyYWdPdmVyPXtvbkRyYWdPdmVyfVxyXG4gICAgICBvbkRyb3A9e29uRHJvcH1cclxuICAgICAgb25EcmFnTGVhdmU9e29uRHJhZ0xlYXZlfVxyXG4gICAgPlxyXG4gICAgICB7Y2hpbGRyZW59XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJkaXNwYXRjaCIsIkFERF9BVURJTyIsIkFERF9JTUFHRSIsIkFERF9WSURFTyIsImdlbmVyYXRlSWQiLCJSZWFjdCIsInVzZUNhbGxiYWNrIiwidXNlU3RhdGUiLCJ1c2VEcm9wcGFibGUiLCJjbiIsIkFjY2VwdGVkRHJvcFR5cGVzIiwiZ2VuZXJhdGVWaWRlb1RodW1ibmFpbCIsImZpbGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInZpZGVvIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwicHJlbG9hZCIsIm9ubG9hZGVkbWV0YWRhdGEiLCJjdXJyZW50VGltZSIsIk1hdGgiLCJtaW4iLCJkdXJhdGlvbiIsIm9ubG9hZGVkZGF0YSIsImNhbnZhcyIsIndpZHRoIiwidmlkZW9XaWR0aCIsImhlaWdodCIsInZpZGVvSGVpZ2h0IiwiY3R4IiwiZ2V0Q29udGV4dCIsImRyYXdJbWFnZSIsImRhdGFVcmwiLCJ0b0RhdGFVUkwiLCJVUkwiLCJyZXZva2VPYmplY3RVUkwiLCJzcmMiLCJlcnJvciIsImNvbnNvbGUiLCJvbmVycm9yIiwiRXJyb3IiLCJjcmVhdGVPYmplY3RVUkwiLCJjcmVhdGVJbWFnZVByZXZpZXciLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwicmVzdWx0IiwicmVhZEFzRGF0YVVSTCIsInVzZURyYWdBbmREcm9wIiwib25EcmFnU3RhdGVDaGFuZ2UiLCJpc1BvaW50ZXJJbnNpZGUiLCJzZXRJc1BvaW50ZXJJbnNpZGUiLCJpc0RyYWdnaW5nT3ZlciIsInNldElzRHJhZ2dpbmdPdmVyIiwiaGFuZGxlRHJvcEZpbGUiLCJpZCIsInR5cGUiLCJzdGFydHNXaXRoIiwiaW1hZ2VVcmwiLCJ0aHVtYm5haWxVcmwiLCJwYXlsb2FkIiwiZGV0YWlscyIsIm1ldGFkYXRhIiwicHJldmlld1VybCIsImZpbGVOYW1lIiwibmFtZSIsInZpZGVvVXJsIiwiYXVkaW9VcmwiLCJoYW5kbGVEcm9wIiwiZHJhZ2dlZERhdGEiLCJvbkRyYWdFbnRlciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImRhdGFUcmFuc2ZlciIsIml0ZW1zIiwibGVuZ3RoIiwiaSIsImtpbmQiLCJkcmFnZ2VkRGF0YVN0cmluZyIsInR5cGVzIiwiSlNPTiIsInBhcnNlIiwiT2JqZWN0IiwidmFsdWVzIiwiaW5jbHVkZXMiLCJvbkRyYWdPdmVyIiwib25Ecm9wIiwiZmlsZXMiLCJnZXREYXRhIiwib25EcmFnTGVhdmUiLCJjdXJyZW50VGFyZ2V0IiwiY29udGFpbnMiLCJyZWxhdGVkVGFyZ2V0IiwiRHJvcHBhYmxlQXJlYSIsImNoaWxkcmVuIiwic3R5bGUiLCJjbGFzc05hbWUiLCJpc092ZXIiLCJzZXROb2RlUmVmIiwidW5kZWZpbmVkIiwiZGl2IiwicmVmIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./features/editor/scene/droppable.tsx\n"));

/***/ })

});